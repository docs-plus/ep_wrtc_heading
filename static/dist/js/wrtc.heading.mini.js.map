{"version":3,"sources":["adapter.js","getUserMediaPolyfill.js","getStats.min.js","helpers.js","codecsHandler.js","videoChat.js","webrtcRoom.js","webrtc.js"],"names":["f","exports","module","define","amd","window","global","self","this","adapter","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","adapterFactory","undefined","./adapter_factory.js","2","Object","defineProperty","value","_ref","arguments","options","shimChrome","shimFirefox","shimSafari","logging","utils","log","browserDetails","detectBrowser","commonShim","extractVersion","disableLog","disableWarnings","sdp","browser","chromeShim","shimPeerConnection","version","browserShim","shimAddIceCandidateNullOrEmpty","shimParameterlessSetLocalDescription","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeExtmapAllowMixed","firefoxShim","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","safariShim","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","default","./chrome/chrome_shim","./common_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","3","shimGetDisplayMedia","_typeof","Symbol","iterator","constructor","_getusermedia","enumerable","get","_getdisplaymedia","MediaStream","webkitMediaStream","RTCPeerConnection","_ontrack","set","removeEventListener","addEventListener","configurable","origSetRemoteDescription","setRemoteDescription","_this","_ontrackpoly","stream","te","receiver","getReceivers","find","track","id","event","Event","transceiver","streams","dispatchEvent","getTracks","forEach","apply","wrapPeerConnectionEvent","shimSenderWithDtmf","pc","dtmf","_dtmf","kind","createDTMFSender","_pc","getSenders","_senders","slice","origAddTrack","addTrack","sender","push","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","_this2","origRemoveStream","removeStream","_this3","s","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","getStats","_this5","_arguments","Array","selector","onSucc","onErr","fixChromeStats_","response","standardReport","result","report","standardStats","timestamp","type","localcandidate","remotecandidate","names","name","stat","makeMapStats","stats","Map","keys","map","successCallbackWrapper_","Promise","resolve","reject","then","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","err","DOMException","shimAddTrackRemoveTrackWithNative","origGetLocalStreams","getLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","newStream","replaceInternalStreamId","description","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","_this13","signalingState","alreadyExists","oldStream","method","nativeMethod","methodObj","_defineProperty","_this14","args","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","_this15","streamid","webkitRTCPeerConnection","RTCIceCandidate","target","getConfiguration","sdpSemantics","writable","_this8","_shimmedLocalStreams","streamId","_this9","existingSenders","newSenders","filter","newSender","concat","_this10","../utils.js","./getdisplaymedia","./getusermedia","4","getSourceId","navigator","mediaDevices","console","error","getDisplayMedia","constraints","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","5","constraintsToChrome_","optional","cc","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","oc","mix","advanced","shimConstraints_","func","JSON","parse","stringify","audio","remap","b","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","d","some","match","label","toLowerCase","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","toString","onSuccess","onError","webkitGetUserMedia","bind","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","6","NativeRTCIceCandidate","candidate","substr","nativeCandidate","parsedCandidate","_sdp2","parseCandidate","augmentedCandidate","assign","toJSON","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","shift","mediaSection","mLine","parseMLine","protocol","getRemoteFirefoxVersion","parseInt","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","_getConfiguration","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","Math","sctp","wrapDcSend","dc","origDataChannelSend","send","data","size","byteLength","readyState","TypeError","origCreateDataChannel","createDataChannel","dataChannel","channel","proto","completed","checking","iceConnectionState","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","nativeSRD","split","line","trim","join","nativeAddIceCandidate","addIceCandidate","nativeSetLocalDescription","createOffer","createAnswer","_sdp","7","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","deprecated","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","test","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","catch","origGetParameters","origCreateOffer","_arguments2","all","finally","origCreateAnswer","_arguments3","../utils","8","preferredMediaSource","mediaSource","9","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","10","_localStreams","_addTrack","_len","_key","index","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","url","generateCertificate","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","AudioContext","webkitAudioContext","compactObject","11","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","bool","logDisabled_","deprecationWarnings_","oldMethod","newMethod","warn","mozGetUserMedia","userAgent","isSecureContext","RTCIceGatherer","supportsUnifiedPlan","RTCRtpTransceiver","isObject","reduce","accumulator","isObj","isEmptyObject","walkStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","uastring","expr","pos","val","base","resultSet","endsWith","12","SDPUtils","generateIdentifier","random","localCName","splitLines","blob","part","getDescription","getMediaSections","parts","foundation","substring","component","priority","ip","address","port","relatedAddress","relatedPort","tcpType","ufrag","writeCandidate","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","j","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","getDirection","getKind","isRejected","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","msGetUserMedia","mediaStreamTrack","callback","interval","getStatsLooper","getStatsWrapper","results","getStatsParser","stack","peer","search","nomore","getStatsResult","datachannel","state","ended","speed","bytesSent","helper","audioBytesSent","videoBytesSent","setTimeout","InstallTrigger","isSafari","res","items","item","that","browserFakeUserAgent","document","documentElement","appendChild","createElement","captureStream","mozCaptureStream","getContext","play","pause","drawImage","toDataURL","HTMLVideoElement","location","href","hash","screen","URL","createObjectURL","revokeObjectURL","systemNetworkType","connection","encryption","availableBandwidth","framerateMean","bitrateMean","recv","bytesReceived","latency","packetsLost","systemBandwidth","sentPerSecond","encodedPerSecond","videoBytestSent","connectionType","systemIpAddress","local","candidateType","transport","ipAddress","networkType","remote","resolutions","internal","candidates","checkIfOfferer","isOfferer","googInitiator","googCertificate","googFingerprintAlgorithm","fingerprintAlgorithm","checkAudioTracks","mediaType","sendrecvType","pop","isRemote","googCodecName","kilobytes","prevBytesSent","bytes","toFixed","prevBytesReceived","googTrackId","googCurrentDelayMs","prevGoogCurrentDelayMs","prevPacketsLost","checkVideoTracks","googFrameHeightReceived","googFrameWidthReceived","googFrameHeightSent","googFrameWidthSent","prevFramerateMean","prevBitrateMean","bweforvideo","availableSendBandwidth","googAvailableSendBandwidth","googActualEncBitrate","googAvailableReceiveBandwidth","googRetransmitBitrate","googTargetEncBitrate","googBucketDelay","googTransmitBitrate","candidatePair","googActiveConnection","cid","googLocalAddress","googRemoteAddress","googTransportType","localCandidate","localCandidateId","remoteCandidate","remoteCandidateId","selected","nominated","mozLocalTransport","mozRemoteTransport","availableOutgoingBitrate","prevAvailableOutgoingBitrate","availableIncomingBitrate","prevAvailableIncomingBitrate","LOCAL_candidateType","LOCAL_transport","LOCAL_ipAddress","LOCAL_networkType","portNumber","REMOTE_candidateType","REMOTE_transport","REMOTE_ipAddress","REMOTE_networkType","dataSentReceived","remoteSource","frameWidth","frameHeight","SSRC","Helper","ace","getAvatarUrl","userId","pad","getPadId","Date","getTime","getUserFromId","anonymousUser","colorId","collabClient","getConnectedUsers","user","slugify","text","$body_ace_outer","$","contents","wrtcStore","enable","userInRoom","currentOpenRoom","socketState","localstream","components","init","open","room","wrtc","rooms","wrtcPubsub","events","on","eventName","fn","off","emit","inlineAvatar","ROOM","headerId","clientVars","webrtc","displayInlineAvatar","inlineAvatarLimit","$element","offsetTop","findAceHeaderElement","offset","top","avatarBox","tmpl","append","$videoInlineAvatarIcons","remove","userInList","userName","hide","show","[object Object]","_append","list","el","update","$roomBox","$videoBox","attr","src","imageUrl","title","each","shadowRoot","querySelector","style","display","videoChat","userLeave","info","WRTC","attemptToReconnect","flow","status","requestUser","action","roomInfo","VIDEO","TEXT","USERS","headerCount","users","actions","btn","classList","add","setAttribute","newAction","removeAttribute","headerTile","html","getHeaderRoomY","outerHeight","paddingTop","css","aceOuterPadding","ceil","$el","exist","left","outerWidth","aceInner","paddingLeft","getHeaderRoomX","$inlineIcon","context","hElements","createShareLink","headerText","origin","pathname","getUserId","stopStreaming","getValidUrl","newUrl","decodeURIComponent","CodecsHandler","preferCodec","codecName","videoCodecNumbers","vp8LineNumber","vp9LineNumber","h264LineNumber","preferCodecHelper","ignore","preferCodecNumber","newLine","videoCodecNumbersOriginal","newOrder","codecNumber","findLine","sdpLines","startLine","endLine","realEndLine","findLineInRange","getCodecPayloadType","sdpLine","pattern","removeVPX","disableNACK","prioritize","codecMimeType","mimeType","unshift","removeNonG722","setApplicationSpecificBandwidth","isScreen","setBAS","setVideoBitrates","xgoogle_min_bitrate","xgoogle_max_bitrate","videoCodec","vp8Index","vp8Payload","rtxIndex","rtxPayload","rtxFmtpLineIndex","appendrtxNext","_setVideoBitrates","setOpusAttributes","opusIndex","opusPayload","opusFmtpLineIndex","appendOpusNext","stereo","maxaveragebitrate","maxplaybackrate","cbr","useinbandfec","usedtx","_setOpusAttributes","preferVP9","forceStereoAudio","fmtpLineIndex","extractSdp","socket","padId","currentRoom","VIDEOCHATLIMIT","$joinBtn","networkInterval","pingos","startTime","LMin","LMax","avg","LineAvg","colors","normal","warning","danger","interavCheck","deviceInputs","videoSettings","localStorage","getItem","microphone","speaker","camera","audioInputSection","audioOutputSection","videoSection","audioInputElement","audioOutputElement","videoElement","deviceInfo","option","removeUserFromRoom","headerTitle","userCount","present","removeClass","deactivate","clearInterval","videoBtn","transform","opacity","data-active","addUserToRoom","addClass","setInterval","now","activate","createSession","userInfo","$joinButton","padparticipators","x","gateway_userJoin","_userData","gateway_userLeave","showUserMediaError","reachedVideoRoomSize","showAlert","isBulkUpdate","gritter","sticky","class_name","time","bulkUpdate","postAceInit","hook","webSocket","docId","videoId","color","userJoin","reloadSession","reloadCurrentSession","WrtcRoom","tryTojoinWithQueryString","roomBtnHandler","preventDefault","handleObj","hasHref","shareRoomsLink","ep_profile_list","staticImage","about","homepage","background-position","background-image","background-repeat","background-size","background-color","showUserProfileModal","joinWithQueryString","urlParams","URLSearchParams","inComePadName","currentPadName","detail","headId","link","$temp","select","execCommand","activeEventListener","$AceOuter","trigger","userPresent","toggleClass","position","$box","aceSetAuthorStyle","author","border-color","videoChatLimit","adoptHeaderYRoom","$padOuter","$headerId","$headingEl","appendVideoIcon","createAgain","roomExist","$elRoomExist","children","aceInnerOffset","newY","newX","lineNumber","parent","prevAll","headingTagId","positionTop","positionLeft","headTitle","box","syncVideoAvatart","reconnected","videoSizes","large","small","audioInputSelect","videoSelect","audioOutputSelect","DtlsSrtpKeyAgreement","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","remoteStream","enlargedVideos","Set","localVideoElement","hookName","sizes","_pad","audioVideoInputChange","changeAudioDestination","hangupAll","payload","to","receiveMessage","appendVideoModalToBody","$wrtcVideoModal","prepend","$parent","videoBox","innerHeight","toggle","data-action","removeAttr","active","userID","$this","isActive","$modal","bytesToSize","floor","toPrecision","statistic","send.codecs","$btnInfo","siblings","gState","hangup","handleClientMessage_RTC_MESSAGE","reason","sendErrorStat","hostname","toggleMuted","audioTrack","enabled","toggleVideo","videoTrack","setStream","isLocal","videoContainer","max-height","appendTo","loadedmetadata","addInterface","autoplay","muted","attachMediaStream","$video","$mute","click","videoEnabled","$disableVideo","videoEnlarged","$largeVideo","videoSize","hasClass","$networkLatancy","insertAfter","statName","msg","sendMessage","socketIdTo","from","createPeerConnection","localStreams","offer","cleanupSdp","answer","logError","_headerId","notify","close","webrtcDetectedBrowser","prop","mergeConstraints","onicecandidate","oniceconnectionstatechange","ontrack","onremovestream","attachSinkId","element","sinkId","setSinkId","errorMessage","selectedIndex","audioDestination","mediaConstraints","audioSource","videoSource","audioOutput","setItem","randomIntFromInterval","srcObject","mozSrcObject","minVideo","maxVideo","cons1","cons2","merged"],"mappings":"CAAA,SAAUA,GAAG,GAAoB,iBAAVC,SAAoC,oBAATC,OAAsBA,OAAOD,QAAQD,SAAS,GAAmB,mBAATG,QAAqBA,OAAOC,IAAKD,OAAO,GAAGH,OAAO,EAA0B,oBAATK,OAAwBA,OAA+B,oBAATC,OAAwBA,OAA6B,oBAAPC,KAAsBA,KAAYC,MAAOC,QAAUT,KAA5T,EAAmU,WAAqC,OAAmB,SAASU,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEf,GAAG,IAAIY,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIC,EAAE,mBAAmBC,SAASA,QAAQ,IAAIjB,GAAGgB,EAAE,OAAOA,EAAED,GAAE,GAAI,GAAGG,EAAE,OAAOA,EAAEH,GAAE,GAAI,IAAII,EAAE,IAAIC,MAAM,uBAAuBL,EAAE,KAAK,MAAMI,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEV,EAAEG,GAAG,CAACd,QAAQ,IAAIU,EAAEI,GAAG,GAAGQ,KAAKD,EAAErB,SAAQ,SAASS,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,KAAIY,EAAEA,EAAErB,QAAQS,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGd,QAAQ,IAAI,IAAIiB,EAAE,mBAAmBD,SAASA,QAAQF,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACW,EAAE,CAAC,SAASR,EAAQf,EAAOD,GAUr1B,aAEA,IAEIQ,GAAU,EAFSQ,EAAQ,wBAEIS,gBAAgB,CAAErB,OAA0B,oBAAXA,YAAyBsB,EAAYtB,SACzGH,EAAOD,QAAUQ,GAEf,CAACmB,uBAAuB,IAAIC,EAAE,CAAC,SAASZ,EAAQf,EAAOD,GACzD,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAET/B,EAAQyB,eAoCR,WACE,IAAIO,EAAOC,UAAUV,OAAS,QAAsBG,IAAjBO,UAAU,GAAmBA,UAAU,GAAK,GAC3E7B,EAAS4B,EAAK5B,OAEd8B,EAAUD,UAAUV,OAAS,QAAsBG,IAAjBO,UAAU,GAAmBA,UAAU,GAAK,CAChFE,YAAY,EACZC,aAAa,EACbC,YAAY,GAIVC,EAAUC,EAAMC,IAChBC,EAAiBF,EAAMG,cAActC,GAErCI,EAAU,CACZiC,eAAgBA,EAChBE,WAAYA,EACZC,eAAgBL,EAAMK,eACtBC,WAAYN,EAAMM,WAClBC,gBAAiBP,EAAMO,gBAEvBC,IAAKA,GAIP,OAAQN,EAAeO,SACrB,IAAK,SACH,IAAKC,IAAeA,EAAWC,qBAAuBhB,EAAQC,WAE5D,OADAG,EAAQ,wDACD9B,EAET,GAA+B,OAA3BiC,EAAeU,QAEjB,OADAb,EAAQ,wDACD9B,EAET8B,EAAQ,+BAER9B,EAAQ4C,YAAcH,EAGtBN,EAAWU,+BAA+BjD,EAAQqC,GAClDE,EAAWW,qCAAqClD,EAAQqC,GAExDQ,EAAWM,iBAAiBnD,EAAQqC,GACpCQ,EAAWO,gBAAgBpD,EAAQqC,GACnCQ,EAAWC,mBAAmB9C,EAAQqC,GACtCQ,EAAWQ,YAAYrD,EAAQqC,GAC/BQ,EAAWS,wBAAwBtD,EAAQqC,GAC3CQ,EAAWU,uBAAuBvD,EAAQqC,GAC1CQ,EAAWW,aAAaxD,EAAQqC,GAChCQ,EAAWY,2BAA2BzD,EAAQqC,GAC9CQ,EAAWa,qBAAqB1D,EAAQqC,GAExCE,EAAWoB,oBAAoB3D,EAAQqC,GACvCE,EAAWqB,oBAAoB5D,EAAQqC,GACvCE,EAAWsB,mBAAmB7D,EAAQqC,GACtCE,EAAWuB,uBAAuB9D,EAAQqC,GAC1CE,EAAWwB,uBAAuB/D,EAAQqC,GAC1C,MACF,IAAK,UACH,IAAK2B,IAAgBA,EAAYlB,qBAAuBhB,EAAQE,YAE9D,OADAE,EAAQ,yDACD9B,EAET8B,EAAQ,gCAER9B,EAAQ4C,YAAcgB,EAGtBzB,EAAWU,+BAA+BjD,EAAQqC,GAClDE,EAAWW,qCAAqClD,EAAQqC,GAExD2B,EAAYb,iBAAiBnD,EAAQqC,GACrC2B,EAAYlB,mBAAmB9C,EAAQqC,GACvC2B,EAAYX,YAAYrD,EAAQqC,GAChC2B,EAAYC,iBAAiBjE,EAAQqC,GACrC2B,EAAYE,mBAAmBlE,EAAQqC,GACvC2B,EAAYG,qBAAqBnE,EAAQqC,GACzC2B,EAAYI,mBAAmBpE,EAAQqC,GACvC2B,EAAYK,mBAAmBrE,EAAQqC,GACvC2B,EAAYM,kBAAkBtE,EAAQqC,GACtC2B,EAAYO,gBAAgBvE,EAAQqC,GACpC2B,EAAYQ,iBAAiBxE,EAAQqC,GAErCE,EAAWoB,oBAAoB3D,EAAQqC,GACvCE,EAAWqB,oBAAoB5D,EAAQqC,GACvCE,EAAWsB,mBAAmB7D,EAAQqC,GACtCE,EAAWuB,uBAAuB9D,EAAQqC,GAC1C,MACF,IAAK,SACH,IAAKoC,IAAe3C,EAAQG,WAE1B,OADAC,EAAQ,wDACD9B,EAET8B,EAAQ,+BAER9B,EAAQ4C,YAAcyB,EAGtBlC,EAAWU,+BAA+BjD,EAAQqC,GAClDE,EAAWW,qCAAqClD,EAAQqC,GAExDoC,EAAWC,qBAAqB1E,EAAQqC,GACxCoC,EAAWE,sBAAsB3E,EAAQqC,GACzCoC,EAAWG,iBAAiB5E,EAAQqC,GACpCoC,EAAWI,oBAAoB7E,EAAQqC,GACvCoC,EAAWK,qBAAqB9E,EAAQqC,GACxCoC,EAAWM,0BAA0B/E,EAAQqC,GAC7CoC,EAAWtB,iBAAiBnD,EAAQqC,GACpCoC,EAAWO,iBAAiBhF,EAAQqC,GAEpCE,EAAWoB,oBAAoB3D,EAAQqC,GACvCE,EAAWsB,mBAAmB7D,EAAQqC,GACtCE,EAAWuB,uBAAuB9D,EAAQqC,GAC1CE,EAAWwB,uBAAuB/D,EAAQqC,GAC1C,MACF,QACEH,EAAQ,wBAIZ,OAAO9B,GA3JT,IAEI+B,EAAQ8C,EAFCrE,EAAQ,YAMjBiC,EAAaoC,EAFErE,EAAQ,yBAMvBoD,EAAciB,EAFErE,EAAQ,2BAMxB6D,EAAaQ,EAFErE,EAAQ,yBAMvB2B,EAAa0C,EAFErE,EAAQ,kBAMvB+B,EAAMsC,EAFCrE,EAAQ,QAInB,SAASqE,EAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,IAwIhQ,CAACK,uBAAuB,EAAEC,gBAAgB,EAAEC,yBAAyB,EAAEC,uBAAuB,GAAGC,UAAU,GAAGlD,IAAM,KAAKmD,EAAE,CAAC,SAASlF,EAAQf,EAAOD,GAStJ,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAET/B,EAAQmG,oBAAsBnG,EAAQuD,sBAAmB7B,EAEzD,IAAI0E,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAElQkB,EAAgBxF,EAAQ,kBAE5Ba,OAAOC,eAAe9B,EAAS,mBAAoB,CACjDyG,YAAY,EACZC,IAAK,WACH,OAAOF,EAAcjD,oBAIzB,IAAIoD,EAAmB3F,EAAQ,qBAE/Ba,OAAOC,eAAe9B,EAAS,sBAAuB,CACpDyG,YAAY,EACZC,IAAK,WACH,OAAOC,EAAiBR,uBAG5BnG,EAAQwD,gBAkBR,SAAyBpD,GACvBA,EAAOwG,YAAcxG,EAAOwG,aAAexG,EAAOyG,mBAlBpD7G,EAAQyD,YAqBR,SAAqBrD,GACnB,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAO0G,qBAAuB,YAAa1G,EAAO0G,kBAAkBpB,WAAY,CAClK7D,OAAOC,eAAe1B,EAAO0G,kBAAkBpB,UAAW,UAAW,CACnEgB,IAAK,WACH,OAAOnG,KAAKwG,UAEdC,IAAK,SAAajH,GACZQ,KAAKwG,UACPxG,KAAK0G,oBAAoB,QAAS1G,KAAKwG,UAEzCxG,KAAK2G,iBAAiB,QAAS3G,KAAKwG,SAAWhH,IAGjD0G,YAAY,EACZU,cAAc,IAEhB,IAAIC,EAA2BhH,EAAO0G,kBAAkBpB,UAAU2B,qBAClEjH,EAAO0G,kBAAkBpB,UAAU2B,qBAAuB,WACxD,IAAIC,EAAQ/G,KA0CZ,OAxCKA,KAAKgH,eACRhH,KAAKgH,aAAe,SAAU7G,GAG5BA,EAAE8G,OAAON,iBAAiB,YAAY,SAAUO,GAC9C,IAAIC,OAAW,EAEbA,EADEtH,EAAO0G,kBAAkBpB,UAAUiC,aAC1BL,EAAMK,eAAeC,MAAK,SAAUnH,GAC7C,OAAOA,EAAEoH,OAASpH,EAAEoH,MAAMC,KAAOL,EAAGI,MAAMC,MAGjC,CAAED,MAAOJ,EAAGI,OAGzB,IAAIE,EAAQ,IAAIC,MAAM,SACtBD,EAAMF,MAAQJ,EAAGI,MACjBE,EAAML,SAAWA,EACjBK,EAAME,YAAc,CAAEP,SAAUA,GAChCK,EAAMG,QAAU,CAACxH,EAAE8G,QACnBF,EAAMa,cAAcJ,MAEtBrH,EAAE8G,OAAOY,YAAYC,SAAQ,SAAUR,GACrC,IAAIH,OAAW,EAEbA,EADEtH,EAAO0G,kBAAkBpB,UAAUiC,aAC1BL,EAAMK,eAAeC,MAAK,SAAUnH,GAC7C,OAAOA,EAAEoH,OAASpH,EAAEoH,MAAMC,KAAOD,EAAMC,MAG9B,CAAED,MAAOA,GAEtB,IAAIE,EAAQ,IAAIC,MAAM,SACtBD,EAAMF,MAAQA,EACdE,EAAML,SAAWA,EACjBK,EAAME,YAAc,CAAEP,SAAUA,GAChCK,EAAMG,QAAU,CAACxH,EAAE8G,QACnBF,EAAMa,cAAcJ,OAGxBxH,KAAK2G,iBAAiB,YAAa3G,KAAKgH,eAEnCH,EAAyBkB,MAAM/H,KAAM0B,iBAM9CM,EAAMgG,wBAAwBnI,EAAQ,SAAS,SAAUM,GAIvD,OAHKA,EAAEuH,aACLpG,OAAOC,eAAepB,EAAG,cAAe,CAAEqB,MAAO,CAAE2F,SAAUhH,EAAEgH,YAE1DhH,MA1FbV,EAAQ2D,uBA+FR,SAAgCvD,GAE9B,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAO0G,qBAAuB,eAAgB1G,EAAO0G,kBAAkBpB,YAAc,qBAAsBtF,EAAO0G,kBAAkBpB,UAAW,CACjO,IAAI8C,EAAqB,SAA4BC,EAAIZ,GACvD,MAAO,CACLA,MAAOA,EACPa,WAQE,YAPmBhH,IAAfnB,KAAKoI,QACY,UAAfd,EAAMe,KACRrI,KAAKoI,MAAQF,EAAGI,iBAAiBhB,GAEjCtH,KAAKoI,MAAQ,MAGVpI,KAAKoI,OAEdG,IAAKL,IAKT,IAAKrI,EAAO0G,kBAAkBpB,UAAUqD,WAAY,CAClD3I,EAAO0G,kBAAkBpB,UAAUqD,WAAa,WAE9C,OADAxI,KAAKyI,SAAWzI,KAAKyI,UAAY,GAC1BzI,KAAKyI,SAASC,SAEvB,IAAIC,EAAe9I,EAAO0G,kBAAkBpB,UAAUyD,SACtD/I,EAAO0G,kBAAkBpB,UAAUyD,SAAW,SAAkBtB,EAAOL,GACrE,IAAI4B,EAASF,EAAaZ,MAAM/H,KAAM0B,WAKtC,OAJKmH,IACHA,EAASZ,EAAmBjI,KAAMsH,GAClCtH,KAAKyI,SAASK,KAAKD,IAEdA,GAGT,IAAIE,EAAkBlJ,EAAO0G,kBAAkBpB,UAAU6D,YACzDnJ,EAAO0G,kBAAkBpB,UAAU6D,YAAc,SAAqBH,GACpEE,EAAgBhB,MAAM/H,KAAM0B,WAC5B,IAAIuH,EAAMjJ,KAAKyI,SAASS,QAAQL,IACnB,IAATI,GACFjJ,KAAKyI,SAASU,OAAOF,EAAK,IAIhC,IAAIG,EAAgBvJ,EAAO0G,kBAAkBpB,UAAUkE,UACvDxJ,EAAO0G,kBAAkBpB,UAAUkE,UAAY,SAAmBpC,GAChE,IAAIqC,EAAStJ,KAEbA,KAAKyI,SAAWzI,KAAKyI,UAAY,GACjCW,EAAcrB,MAAM/H,KAAM,CAACiH,IAC3BA,EAAOY,YAAYC,SAAQ,SAAUR,GACnCgC,EAAOb,SAASK,KAAKb,EAAmBqB,EAAQhC,QAIpD,IAAIiC,EAAmB1J,EAAO0G,kBAAkBpB,UAAUqE,aAC1D3J,EAAO0G,kBAAkBpB,UAAUqE,aAAe,SAAsBvC,GACtE,IAAIwC,EAASzJ,KAEbA,KAAKyI,SAAWzI,KAAKyI,UAAY,GACjCc,EAAiBxB,MAAM/H,KAAM,CAACiH,IAE9BA,EAAOY,YAAYC,SAAQ,SAAUR,GACnC,IAAIuB,EAASY,EAAOhB,SAASpB,MAAK,SAAUqC,GAC1C,OAAOA,EAAEpC,QAAUA,KAEjBuB,GAEFY,EAAOhB,SAASU,OAAOM,EAAOhB,SAASS,QAAQL,GAAS,YAIzD,GAAwE,iBAAjD,IAAXhJ,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAO0G,mBAAqB,eAAgB1G,EAAO0G,kBAAkBpB,WAAa,qBAAsBtF,EAAO0G,kBAAkBpB,WAAatF,EAAO8J,gBAAkB,SAAU9J,EAAO8J,aAAaxE,WAAY,CAC1S,IAAIyE,EAAiB/J,EAAO0G,kBAAkBpB,UAAUqD,WACxD3I,EAAO0G,kBAAkBpB,UAAUqD,WAAa,WAC9C,IAAIqB,EAAS7J,KAET8J,EAAUF,EAAe7B,MAAM/H,KAAM,IAIzC,OAHA8J,EAAQhC,SAAQ,SAAUe,GACxB,OAAOA,EAAON,IAAMsB,KAEfC,GAGTxI,OAAOC,eAAe1B,EAAO8J,aAAaxE,UAAW,OAAQ,CAC3DgB,IAAK,WAQH,YAPmBhF,IAAfnB,KAAKoI,QACiB,UAApBpI,KAAKsH,MAAMe,KACbrI,KAAKoI,MAAQpI,KAAKuI,IAAID,iBAAiBtI,KAAKsH,OAE5CtH,KAAKoI,MAAQ,MAGVpI,KAAKoI,WA5LpB3I,EAAQ4D,aAkMR,SAAsBxD,GACpB,IAAKA,EAAO0G,kBACV,OAGF,IAAIwD,EAAelK,EAAO0G,kBAAkBpB,UAAU6E,SACtDnK,EAAO0G,kBAAkBpB,UAAU6E,SAAW,WAC5C,IAAIC,EAASjK,KAETkK,EAAaC,MAAMhF,UAAUuD,MAAM3H,KAAKW,WACxC0I,EAAWF,EAAW,GACtBG,EAASH,EAAW,GACpBI,EAAQJ,EAAW,GAMvB,GAAIxI,UAAUV,OAAS,GAAyB,mBAAboJ,EACjC,OAAOL,EAAahC,MAAM/H,KAAM0B,WAKlC,GAA4B,IAAxBqI,EAAa/I,SAAsC,IAArBU,UAAUV,QAAoC,mBAAboJ,GACjE,OAAOL,EAAahC,MAAM/H,KAAM,IAGlC,IAAIuK,EAAkB,SAAyBC,GAC7C,IAAIC,EAAiB,GAiBrB,OAhBcD,EAASE,SACf5C,SAAQ,SAAU6C,GACxB,IAAIC,EAAgB,CAClBrD,GAAIoD,EAAOpD,GACXsD,UAAWF,EAAOE,UAClBC,KAAM,CACJC,eAAgB,kBAChBC,gBAAiB,oBACjBL,EAAOG,OAASH,EAAOG,MAE3BH,EAAOM,QAAQnD,SAAQ,SAAUoD,GAC/BN,EAAcM,GAAQP,EAAOQ,KAAKD,MAEpCT,EAAeG,EAAcrD,IAAMqD,KAG9BH,GAILW,EAAe,SAAsBC,GACvC,OAAO,IAAIC,IAAIhK,OAAOiK,KAAKF,GAAOG,KAAI,SAAUtG,GAC9C,MAAO,CAACA,EAAKmG,EAAMnG,SAIvB,GAAIxD,UAAUV,QAAU,EAAG,CACzB,IAAIyK,EAA0B,SAAiCjB,GAC7DH,EAAOe,EAAab,EAAgBC,MAGtC,OAAOT,EAAahC,MAAM/H,KAAM,CAACyL,EAAyBrB,IAI5D,OAAO,IAAIsB,SAAQ,SAAUC,EAASC,GACpC7B,EAAahC,MAAMkC,EAAQ,CAAC,SAAUO,GACpCmB,EAAQP,EAAab,EAAgBC,MACpCoB,OACFC,KAAKxB,EAAQC,KAtQpB7K,EAAQ6D,2BA0QR,SAAoCzD,GAClC,KAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAO0G,mBAAqB1G,EAAO8J,cAAgB9J,EAAOiM,gBAC9I,OAIF,KAAM,aAAcjM,EAAO8J,aAAaxE,WAAY,CAClD,IAAIyE,EAAiB/J,EAAO0G,kBAAkBpB,UAAUqD,WACpDoB,IACF/J,EAAO0G,kBAAkBpB,UAAUqD,WAAa,WAC9C,IAAIuD,EAAS/L,KAET8J,EAAUF,EAAe7B,MAAM/H,KAAM,IAIzC,OAHA8J,EAAQhC,SAAQ,SAAUe,GACxB,OAAOA,EAAON,IAAMwD,KAEfjC,IAIX,IAAInB,EAAe9I,EAAO0G,kBAAkBpB,UAAUyD,SAClDD,IACF9I,EAAO0G,kBAAkBpB,UAAUyD,SAAW,WAC5C,IAAIC,EAASF,EAAaZ,MAAM/H,KAAM0B,WAEtC,OADAmH,EAAON,IAAMvI,KACN6I,IAGXhJ,EAAO8J,aAAaxE,UAAU6E,SAAW,WACvC,IAAInB,EAAS7I,KACb,OAAOA,KAAKuI,IAAIyB,WAAW6B,MAAK,SAAUnB,GACxC,OAKE1I,EAAMgK,YAAYtB,EAAQ7B,EAAOvB,OAAO,OAOhD,KAAM,aAAczH,EAAOiM,eAAe3G,WAAY,CACpD,IAAI8G,EAAmBpM,EAAO0G,kBAAkBpB,UAAUiC,aACtD6E,IACFpM,EAAO0G,kBAAkBpB,UAAUiC,aAAe,WAChD,IAAI8E,EAASlM,KAETmM,EAAYF,EAAiBlE,MAAM/H,KAAM,IAI7C,OAHAmM,EAAUrE,SAAQ,SAAUX,GAC1B,OAAOA,EAASoB,IAAM2D,KAEjBC,IAGXnK,EAAMgG,wBAAwBnI,EAAQ,SAAS,SAAUM,GAEvD,OADAA,EAAEgH,SAASoB,IAAMpI,EAAEiM,WACZjM,KAETN,EAAOiM,eAAe3G,UAAU6E,SAAW,WACzC,IAAI7C,EAAWnH,KACf,OAAOA,KAAKuI,IAAIyB,WAAW6B,MAAK,SAAUnB,GACxC,OAAO1I,EAAMgK,YAAYtB,EAAQvD,EAASG,OAAO,OAKvD,KAAM,aAAczH,EAAO8J,aAAaxE,cAAa,aAActF,EAAOiM,eAAe3G,WACvF,OAIF,IAAI4E,EAAelK,EAAO0G,kBAAkBpB,UAAU6E,SACtDnK,EAAO0G,kBAAkBpB,UAAU6E,SAAW,WAC5C,GAAItI,UAAUV,OAAS,GAAKU,UAAU,aAAc7B,EAAOwM,iBAAkB,CAC3E,IAAI/E,EAAQ5F,UAAU,GAClBmH,OAAS,EACT1B,OAAW,EACXmF,OAAM,EAoBV,OAnBAtM,KAAKwI,aAAaV,SAAQ,SAAU4B,GAC9BA,EAAEpC,QAAUA,IACVuB,EACFyD,GAAM,EAENzD,EAASa,MAIf1J,KAAKoH,eAAeU,SAAQ,SAAU5H,GAQpC,OAPIA,EAAEoH,QAAUA,IACVH,EACFmF,GAAM,EAENnF,EAAWjH,GAGRA,EAAEoH,QAAUA,KAEjBgF,GAAOzD,GAAU1B,EACZuE,QAAQE,OAAO,IAAIW,aAAa,4DAA6D,uBAC3F1D,EACFA,EAAOmB,WACL7C,EACFA,EAAS6C,WAEX0B,QAAQE,OAAO,IAAIW,aAAa,gDAAiD,uBAE1F,OAAOxC,EAAahC,MAAM/H,KAAM0B,aArXpCjC,EAAQ+M,kCAAoCA,EAC5C/M,EAAQ0D,wBAscR,SAAiCtD,EAAQqC,GACvC,IAAKrC,EAAO0G,kBACV,OAGF,GAAI1G,EAAO0G,kBAAkBpB,UAAUyD,UAAY1G,EAAeU,SAAW,GAC3E,OAAO4J,EAAkC3M,GAK3C,IAAI4M,EAAsB5M,EAAO0G,kBAAkBpB,UAAUuH,gBAC7D7M,EAAO0G,kBAAkBpB,UAAUuH,gBAAkB,WACnD,IAAIC,EAAU3M,KAEV4M,EAAgBH,EAAoB1E,MAAM/H,MAE9C,OADAA,KAAK6M,gBAAkB7M,KAAK6M,iBAAmB,GACxCD,EAAcpB,KAAI,SAAUvE,GACjC,OAAO0F,EAAQE,gBAAgB5F,EAAOM,QAI1C,IAAI6B,EAAgBvJ,EAAO0G,kBAAkBpB,UAAUkE,UACvDxJ,EAAO0G,kBAAkBpB,UAAUkE,UAAY,SAAmBpC,GAChE,IAAI6F,EAAU9M,KAed,GAbAA,KAAK+M,SAAW/M,KAAK+M,UAAY,GACjC/M,KAAK6M,gBAAkB7M,KAAK6M,iBAAmB,GAE/C5F,EAAOY,YAAYC,SAAQ,SAAUR,GAInC,GAHoBwF,EAAQtE,aAAanB,MAAK,SAAUqC,GACtD,OAAOA,EAAEpC,QAAUA,KAGnB,MAAM,IAAIiF,aAAa,wBAAyB,0BAK/CvM,KAAK6M,gBAAgB5F,EAAOM,IAAK,CACpC,IAAIyF,EAAY,IAAInN,EAAOwG,YAAYY,EAAOY,aAC9C7H,KAAK+M,SAAS9F,EAAOM,IAAMyF,EAC3BhN,KAAK6M,gBAAgBG,EAAUzF,IAAMN,EACrCA,EAAS+F,EAEX5D,EAAcrB,MAAM/H,KAAM,CAACiH,KAG7B,IAAIsC,EAAmB1J,EAAO0G,kBAAkBpB,UAAUqE,aA2D1D,SAASyD,EAAwB/E,EAAIgF,GACnC,IAAI1K,EAAM0K,EAAY1K,IAMtB,OALAlB,OAAOiK,KAAKrD,EAAG2E,iBAAmB,IAAI/E,SAAQ,SAAUqF,GACtD,IAAIC,EAAiBlF,EAAG2E,gBAAgBM,GACpCE,EAAiBnF,EAAG6E,SAASK,EAAe7F,IAChD/E,EAAMA,EAAI8K,QAAQ,IAAIC,OAAOF,EAAe9F,GAAI,KAAM6F,EAAe7F,OAEhE,IAAIiG,sBAAsB,CAC/B1C,KAAMoC,EAAYpC,KAClBtI,IAAKA,IAGT,SAASiL,EAAwBvF,EAAIgF,GACnC,IAAI1K,EAAM0K,EAAY1K,IAMtB,OALAlB,OAAOiK,KAAKrD,EAAG2E,iBAAmB,IAAI/E,SAAQ,SAAUqF,GACtD,IAAIC,EAAiBlF,EAAG2E,gBAAgBM,GACpCE,EAAiBnF,EAAG6E,SAASK,EAAe7F,IAChD/E,EAAMA,EAAI8K,QAAQ,IAAIC,OAAOH,EAAe7F,GAAI,KAAM8F,EAAe9F,OAEhE,IAAIiG,sBAAsB,CAC/B1C,KAAMoC,EAAYpC,KAClBtI,IAAKA,IA/ET3C,EAAO0G,kBAAkBpB,UAAUqE,aAAe,SAAsBvC,GACtEjH,KAAK+M,SAAW/M,KAAK+M,UAAY,GACjC/M,KAAK6M,gBAAkB7M,KAAK6M,iBAAmB,GAE/CtD,EAAiBxB,MAAM/H,KAAM,CAACA,KAAK+M,SAAS9F,EAAOM,KAAON,WACnDjH,KAAK6M,gBAAgB7M,KAAK+M,SAAS9F,EAAOM,IAAMvH,KAAK+M,SAAS9F,EAAOM,IAAIA,GAAKN,EAAOM,WACrFvH,KAAK+M,SAAS9F,EAAOM,KAG9B1H,EAAO0G,kBAAkBpB,UAAUyD,SAAW,SAAkBtB,EAAOL,GACrE,IAAIyG,EAAU1N,KAEd,GAA4B,WAAxBA,KAAK2N,eACP,MAAM,IAAIpB,aAAa,sDAA0D,qBAEnF,IAAI5E,EAAU,GAAGe,MAAM3H,KAAKW,UAAW,GACvC,GAAuB,IAAnBiG,EAAQ3G,SAAiB2G,EAAQ,GAAGE,YAAYR,MAAK,SAAUhH,GACjE,OAAOA,IAAMiH,KAIb,MAAM,IAAIiF,aAAa,gHAAsH,qBAG/I,IAAIqB,EAAgB5N,KAAKwI,aAAanB,MAAK,SAAUqC,GACnD,OAAOA,EAAEpC,QAAUA,KAErB,GAAIsG,EACF,MAAM,IAAIrB,aAAa,wBAAyB,sBAGlDvM,KAAK+M,SAAW/M,KAAK+M,UAAY,GACjC/M,KAAK6M,gBAAkB7M,KAAK6M,iBAAmB,GAC/C,IAAIgB,EAAY7N,KAAK+M,SAAS9F,EAAOM,IACrC,GAAIsG,EAKFA,EAAUjF,SAAStB,GAGnBoE,QAAQC,UAAUE,MAAK,WACrB6B,EAAQ9F,cAAc,IAAIH,MAAM,6BAE7B,CACL,IAAIuF,EAAY,IAAInN,EAAOwG,YAAY,CAACiB,IACxCtH,KAAK+M,SAAS9F,EAAOM,IAAMyF,EAC3BhN,KAAK6M,gBAAgBG,EAAUzF,IAAMN,EACrCjH,KAAKqJ,UAAU2D,GAEjB,OAAOhN,KAAKwI,aAAanB,MAAK,SAAUqC,GACtC,OAAOA,EAAEpC,QAAUA,MA8BvB,CAAC,cAAe,gBAAgBQ,SAAQ,SAAUgG,GAChD,IAAIC,EAAelO,EAAO0G,kBAAkBpB,UAAU2I,GAClDE,EAAYC,EAAgB,GAAIH,GAAQ,WAC1C,IAAII,EAAUlO,KAEVmO,EAAOzM,UACP0M,EAAe1M,UAAUV,QAAkC,mBAAjBU,UAAU,GACxD,OAAI0M,EACKL,EAAahG,MAAM/H,KAAM,CAAC,SAAUkN,GACzC,IAAImB,EAAOpB,EAAwBiB,EAAShB,GAC5CiB,EAAK,GAAGpG,MAAM,KAAM,CAACsG,KACpB,SAAU/B,GACP6B,EAAK,IACPA,EAAK,GAAGpG,MAAM,KAAMuE,IAErB5K,UAAU,KAERqM,EAAahG,MAAM/H,KAAM0B,WAAWmK,MAAK,SAAUqB,GACxD,OAAOD,EAAwBiB,EAAShB,SAG5CrN,EAAO0G,kBAAkBpB,UAAU2I,GAAUE,EAAUF,MAGzD,IAAIQ,EAA0BzO,EAAO0G,kBAAkBpB,UAAUoJ,oBACjE1O,EAAO0G,kBAAkBpB,UAAUoJ,oBAAsB,WACvD,OAAK7M,UAAUV,QAAWU,UAAU,GAAGoJ,MAGvCpJ,UAAU,GAAK+L,EAAwBzN,KAAM0B,UAAU,IAChD4M,EAAwBvG,MAAM/H,KAAM0B,YAHlC4M,EAAwBvG,MAAM/H,KAAM0B,YAQ/C,IAAI8M,EAAuBlN,OAAOmN,yBAAyB5O,EAAO0G,kBAAkBpB,UAAW,oBAC/F7D,OAAOC,eAAe1B,EAAO0G,kBAAkBpB,UAAW,mBAAoB,CAC5EgB,IAAK,WACH,IAAI+G,EAAcsB,EAAqBrI,IAAI4B,MAAM/H,MACjD,MAAyB,KAArBkN,EAAYpC,KACPoC,EAEFD,EAAwBjN,KAAMkN,MAIzCrN,EAAO0G,kBAAkBpB,UAAU6D,YAAc,SAAqBH,GACpE,IAAI6F,EAAU1O,KAEd,GAA4B,WAAxBA,KAAK2N,eACP,MAAM,IAAIpB,aAAa,sDAA0D,qBAInF,IAAK1D,EAAON,IACV,MAAM,IAAIgE,aAAa,yFAA+F,aAGxH,KADc1D,EAAON,MAAQvI,MAE3B,MAAM,IAAIuM,aAAa,6CAA8C,sBAIvEvM,KAAK+M,SAAW/M,KAAK+M,UAAY,GACjC,IAAI9F,OAAS,EACb3F,OAAOiK,KAAKvL,KAAK+M,UAAUjF,SAAQ,SAAU6G,GAC5BD,EAAQ3B,SAAS4B,GAAU9G,YAAYR,MAAK,SAAUC,GACnE,OAAOuB,EAAOvB,QAAUA,OAGxBL,EAASyH,EAAQ3B,SAAS4B,OAI1B1H,IACgC,IAA9BA,EAAOY,YAAY7G,OAGrBhB,KAAKwJ,aAAaxJ,KAAK6M,gBAAgB5F,EAAOM,KAG9CN,EAAO+B,YAAYH,EAAOvB,OAE5BtH,KAAK4H,cAAc,IAAIH,MAAM,yBA3pBnChI,EAAQkD,mBAgqBR,SAA4B9C,EAAQqC,IAC7BrC,EAAO0G,mBAAqB1G,EAAO+O,0BAEtC/O,EAAO0G,kBAAoB1G,EAAO+O,yBAEpC,IAAK/O,EAAO0G,kBACV,OAIErE,EAAeU,QAAU,IAC3B,CAAC,sBAAuB,uBAAwB,mBAAmBkF,SAAQ,SAAUgG,GACnF,IAAIC,EAAelO,EAAO0G,kBAAkBpB,UAAU2I,GAClDE,EAAYC,EAAgB,GAAIH,GAAQ,WAE1C,OADApM,UAAU,GAAK,IAAgB,oBAAXoM,EAA+BjO,EAAOgP,gBAAkBhP,EAAO2N,uBAAuB9L,UAAU,IAC7GqM,EAAahG,MAAM/H,KAAM0B,cAElC7B,EAAO0G,kBAAkBpB,UAAU2I,GAAUE,EAAUF,OAhrB7DrO,EAAQ8D,qBAsrBR,SAA8B1D,EAAQqC,GACpCF,EAAMgG,wBAAwBnI,EAAQ,qBAAqB,SAAUM,GACnE,IAAI+H,EAAK/H,EAAE2O,OACX,KAAI5M,EAAeU,QAAU,IAAMsF,EAAG6G,kBAA2D,WAAvC7G,EAAG6G,mBAAmBC,eACpD,WAAtB9G,EAAGyF,eAIT,OAAOxN,MA5rBX,IAEI6B,EAEJ,SAAiC+C,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,gBAMrB,SAASwN,EAAgBlJ,EAAKG,EAAK1D,GAAiK,OAApJ0D,KAAOH,EAAOzD,OAAOC,eAAewD,EAAKG,EAAK,CAAE1D,MAAOA,EAAO0E,YAAY,EAAMU,cAAc,EAAMqI,UAAU,IAAkBlK,EAAIG,GAAO1D,EAAgBuD,EA8W3M,SAASyH,EAAkC3M,GAIzCA,EAAO0G,kBAAkBpB,UAAUuH,gBAAkB,WACnD,IAAIwC,EAASlP,KAGb,OADAA,KAAKmP,qBAAuBnP,KAAKmP,sBAAwB,GAClD7N,OAAOiK,KAAKvL,KAAKmP,sBAAsB3D,KAAI,SAAU4D,GAC1D,OAAOF,EAAOC,qBAAqBC,GAAU,OAIjD,IAAIzG,EAAe9I,EAAO0G,kBAAkBpB,UAAUyD,SACtD/I,EAAO0G,kBAAkBpB,UAAUyD,SAAW,SAAkBtB,EAAOL,GACrE,IAAKA,EACH,OAAO0B,EAAaZ,MAAM/H,KAAM0B,WAElC1B,KAAKmP,qBAAuBnP,KAAKmP,sBAAwB,GAEzD,IAAItG,EAASF,EAAaZ,MAAM/H,KAAM0B,WAMtC,OALK1B,KAAKmP,qBAAqBlI,EAAOM,KAE+B,IAA1DvH,KAAKmP,qBAAqBlI,EAAOM,IAAI2B,QAAQL,IACtD7I,KAAKmP,qBAAqBlI,EAAOM,IAAIuB,KAAKD,GAF1C7I,KAAKmP,qBAAqBlI,EAAOM,IAAM,CAACN,EAAQ4B,GAI3CA,GAGT,IAAIO,EAAgBvJ,EAAO0G,kBAAkBpB,UAAUkE,UACvDxJ,EAAO0G,kBAAkBpB,UAAUkE,UAAY,SAAmBpC,GAChE,IAAIoI,EAASrP,KAEbA,KAAKmP,qBAAuBnP,KAAKmP,sBAAwB,GAEzDlI,EAAOY,YAAYC,SAAQ,SAAUR,GAInC,GAHoB+H,EAAO7G,aAAanB,MAAK,SAAUqC,GACrD,OAAOA,EAAEpC,QAAUA,KAGnB,MAAM,IAAIiF,aAAa,wBAAyB,yBAGpD,IAAI+C,EAAkBtP,KAAKwI,aAC3BY,EAAcrB,MAAM/H,KAAM0B,WAC1B,IAAI6N,EAAavP,KAAKwI,aAAagH,QAAO,SAAUC,GAClD,OAA+C,IAAxCH,EAAgBpG,QAAQuG,MAEjCzP,KAAKmP,qBAAqBlI,EAAOM,IAAM,CAACN,GAAQyI,OAAOH,IAGzD,IAAIhG,EAAmB1J,EAAO0G,kBAAkBpB,UAAUqE,aAC1D3J,EAAO0G,kBAAkBpB,UAAUqE,aAAe,SAAsBvC,GAGtE,OAFAjH,KAAKmP,qBAAuBnP,KAAKmP,sBAAwB,UAClDnP,KAAKmP,qBAAqBlI,EAAOM,IACjCgC,EAAiBxB,MAAM/H,KAAM0B,YAGtC,IAAIqH,EAAkBlJ,EAAO0G,kBAAkBpB,UAAU6D,YACzDnJ,EAAO0G,kBAAkBpB,UAAU6D,YAAc,SAAqBH,GACpE,IAAI8G,EAAU3P,KAcd,OAZAA,KAAKmP,qBAAuBnP,KAAKmP,sBAAwB,GACrDtG,GACFvH,OAAOiK,KAAKvL,KAAKmP,sBAAsBrH,SAAQ,SAAUsH,GACvD,IAAInG,EAAM0G,EAAQR,qBAAqBC,GAAUlG,QAAQL,IAC5C,IAATI,GACF0G,EAAQR,qBAAqBC,GAAUjG,OAAOF,EAAK,GAEC,IAAlD0G,EAAQR,qBAAqBC,GAAUpO,eAClC2O,EAAQR,qBAAqBC,MAInCrG,EAAgBhB,MAAM/H,KAAM0B,cAkQrC,CAACkO,cAAc,GAAGC,oBAAoB,EAAEC,iBAAiB,IAAIC,EAAE,CAAC,SAAStP,EAAQf,EAAOD,GAS1F,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAET/B,EAAQmG,oBACR,SAA6B/F,EAAQmQ,GACnC,GAAInQ,EAAOoQ,UAAUC,cAAgB,oBAAqBrQ,EAAOoQ,UAAUC,aACzE,OAEF,IAAKrQ,EAAOoQ,UAAUC,aACpB,OAIF,GAA2B,mBAAhBF,EAET,YADAG,QAAQC,MAAM,+DAGhBvQ,EAAOoQ,UAAUC,aAAaG,gBAAkB,SAAyBC,GACvE,OAAON,EAAYM,GAAazE,MAAK,SAAU0E,GAC7C,IAAIC,EAAiBF,EAAYG,OAASH,EAAYG,MAAMC,MACxDC,EAAkBL,EAAYG,OAASH,EAAYG,MAAMG,OACzDC,EAAqBP,EAAYG,OAASH,EAAYG,MAAMK,UAchE,OAbAR,EAAYG,MAAQ,CAClBM,UAAW,CACTC,kBAAmB,UACnBC,oBAAqBV,EACrBW,aAAcL,GAAsB,IAGpCL,IACFF,EAAYG,MAAMM,UAAUI,SAAWX,GAErCG,IACFL,EAAYG,MAAMM,UAAUK,UAAYT,GAEnC9Q,EAAOoQ,UAAUC,aAAamB,aAAaf,SAKtD,IAAIgB,EAAE,CAAC,SAAS7Q,EAAQf,EAAOD,GASjC,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAGT,IAAIqE,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAEtQtF,EAAQuD,iBAUR,SAA0BnD,EAAQqC,GAChC,IAAI+N,EAAYpQ,GAAUA,EAAOoQ,UAEjC,IAAKA,EAAUC,aACb,OAGF,IAAIqB,EAAuB,SAA8B/Q,GACvD,GAA8D,iBAA5C,IAANA,EAAoB,YAAcqF,EAAQrF,KAAoBA,EAAEuQ,WAAavQ,EAAEgR,SACzF,OAAOhR,EAET,IAAIiR,EAAK,GA4CT,OA3CAnQ,OAAOiK,KAAK/K,GAAGsH,SAAQ,SAAU5C,GAC/B,GAAY,YAARA,GAA6B,aAARA,GAA8B,gBAARA,EAA/C,CAGA,IAAIhF,EAAwB,WAApB2F,EAAQrF,EAAE0E,IAAqB1E,EAAE0E,GAAO,CAAEwM,MAAOlR,EAAE0E,SAC3C/D,IAAZjB,EAAEyR,OAA0C,iBAAZzR,EAAEyR,QACpCzR,EAAE0R,IAAM1R,EAAE2R,IAAM3R,EAAEyR,OAEpB,IAAIG,EAAW,SAAkBC,EAAQ7G,GACvC,OAAI6G,EACKA,EAAS7G,EAAK8G,OAAO,GAAGC,cAAgB/G,EAAKxC,MAAM,GAE5C,aAATwC,EAAsB,WAAaA,GAE5C,QAAgB/J,IAAZjB,EAAEwR,MAAqB,CACzBD,EAAGD,SAAWC,EAAGD,UAAY,GAC7B,IAAIU,EAAK,GACc,iBAAZhS,EAAEwR,OACXQ,EAAGJ,EAAS,MAAO5M,IAAQhF,EAAEwR,MAC7BD,EAAGD,SAAS1I,KAAKoJ,IACjBA,EAAK,IACFJ,EAAS,MAAO5M,IAAQhF,EAAEwR,MAC7BD,EAAGD,SAAS1I,KAAKoJ,KAEjBA,EAAGJ,EAAS,GAAI5M,IAAQhF,EAAEwR,MAC1BD,EAAGD,SAAS1I,KAAKoJ,SAGL/Q,IAAZjB,EAAEyR,OAA0C,iBAAZzR,EAAEyR,OACpCF,EAAGV,UAAYU,EAAGV,WAAa,GAC/BU,EAAGV,UAAUe,EAAS,GAAI5M,IAAQhF,EAAEyR,OAEpC,CAAC,MAAO,OAAO7J,SAAQ,SAAUqK,QAChBhR,IAAXjB,EAAEiS,KACJV,EAAGV,UAAYU,EAAGV,WAAa,GAC/BU,EAAGV,UAAUe,EAASK,EAAKjN,IAAQhF,EAAEiS,WAKzC3R,EAAE4R,WACJX,EAAGD,UAAYC,EAAGD,UAAY,IAAI9B,OAAOlP,EAAE4R,WAEtCX,GAGLY,EAAmB,SAA0B/B,EAAagC,GAC5D,GAAIpQ,EAAeU,SAAW,GAC5B,OAAO0P,EAAKhC,GAGd,IADAA,EAAciC,KAAKC,MAAMD,KAAKE,UAAUnC,MACU,WAA/BzK,EAAQyK,EAAYoC,OAAqB,CAC1D,IAAIC,EAAQ,SAAe5N,EAAKpE,EAAGiS,GAC7BjS,KAAKoE,KAAS6N,KAAK7N,KACrBA,EAAI6N,GAAK7N,EAAIpE,UACNoE,EAAIpE,KAIfgS,GADArC,EAAciC,KAAKC,MAAMD,KAAKE,UAAUnC,KACtBoC,MAAO,kBAAmB,uBAC5CC,EAAMrC,EAAYoC,MAAO,mBAAoB,wBAC7CpC,EAAYoC,MAAQnB,EAAqBjB,EAAYoC,OAEvD,GAAIpC,GAA8C,WAA/BzK,EAAQyK,EAAYG,OAAqB,CAE1D,IAAIoC,EAAOvC,EAAYG,MAAMqC,WAC7BD,EAAOA,IAAyE,iBAA/C,IAATA,EAAuB,YAAchN,EAAQgN,IAAsBA,EAAO,CAAEnB,MAAOmB,IAC3G,IAAIE,EAA6B7Q,EAAeU,QAAU,GAE1D,GAAIiQ,IAAwB,SAAfA,EAAKlB,OAAmC,gBAAfkB,EAAKlB,OAA0C,SAAfkB,EAAKnB,OAAmC,gBAAfmB,EAAKnB,UAA8BzB,EAAUC,aAAa8C,0BAA2B/C,EAAUC,aAAa8C,0BAA0BF,YAAeC,GAA6B,QACxQzC,EAAYG,MAAMqC,WACzB,IAAIG,OAAU,EAMd,GALmB,gBAAfJ,EAAKlB,OAA0C,gBAAfkB,EAAKnB,MACvCuB,EAAU,CAAC,OAAQ,QACK,SAAfJ,EAAKlB,OAAmC,SAAfkB,EAAKnB,QACvCuB,EAAU,CAAC,UAETA,EAEF,OAAOhD,EAAUC,aAAagD,mBAAmBrH,MAAK,SAAUsH,GAI9D,IAAIC,GAHJD,EAAUA,EAAQ3D,QAAO,SAAU6D,GACjC,MAAkB,eAAXA,EAAEhL,SAEOhB,MAAK,SAAUgM,GAC/B,OAAOJ,EAAQK,MAAK,SAAUC,GAC5B,OAAOF,EAAEG,MAAMC,cAAcC,SAASH,SAW1C,OARKH,GAAOD,EAAQnS,QAAUiS,EAAQS,SAAS,UAC7CN,EAAMD,EAAQA,EAAQnS,OAAS,IAE7BoS,IACF9C,EAAYG,MAAMkD,SAAWd,EAAKlB,MAAQ,CAAEA,MAAOyB,EAAIO,UAAa,CAAEjC,MAAO0B,EAAIO,WAEnFrD,EAAYG,MAAQc,EAAqBjB,EAAYG,OACrD1O,EAAQ,WAAawQ,KAAKE,UAAUnC,IAC7BgC,EAAKhC,MAIlBA,EAAYG,MAAQc,EAAqBjB,EAAYG,OAGvD,OADA1O,EAAQ,WAAawQ,KAAKE,UAAUnC,IAC7BgC,EAAKhC,IAGVsD,EAAa,SAAoBzT,GACnC,OAAI+B,EAAeU,SAAW,GACrBzC,EAEF,CACL+K,KAAM,CACJ2I,sBAAuB,kBACvBC,yBAA0B,kBAC1BC,kBAAmB,kBACnBC,qBAAsB,gBACtBC,4BAA6B,uBAC7BC,gBAAiB,mBACjBC,+BAAgC,kBAChCC,wBAAyB,kBACzBC,gBAAiB,aACjBC,mBAAoB,aACpBC,mBAAoB,cACpBpU,EAAE+K,OAAS/K,EAAE+K,KACfsJ,QAASrU,EAAEqU,QACXC,WAAYtU,EAAEsU,YAActU,EAAEuU,eAC9BC,SAAU,WACR,OAAO3U,KAAKkL,MAAQlL,KAAKwU,SAAW,MAAQxU,KAAKwU,WAmBvD,GALAvE,EAAUoB,aATU,SAAuBf,EAAasE,EAAWC,GACjExC,EAAiB/B,GAAa,SAAU9P,GACtCyP,EAAU6E,mBAAmBtU,EAAGoU,GAAW,SAAUzU,GAC/C0U,GACFA,EAAQjB,EAAWzT,WAKY4U,KAAK9E,GAKxCA,EAAUC,aAAamB,aAAc,CACvC,IAAI2D,EAAmB/E,EAAUC,aAAamB,aAAa0D,KAAK9E,EAAUC,cAC1ED,EAAUC,aAAamB,aAAe,SAAU4D,GAC9C,OAAO5C,EAAiB4C,GAAI,SAAUzU,GACpC,OAAOwU,EAAiBxU,GAAGqL,MAAK,SAAU5E,GACxC,GAAIzG,EAAEkS,QAAUzL,EAAOiO,iBAAiBlU,QAAUR,EAAEiQ,QAAUxJ,EAAOkO,iBAAiBnU,OAIpF,MAHAiG,EAAOY,YAAYC,SAAQ,SAAUR,GACnCA,EAAM8N,UAEF,IAAI7I,aAAa,GAAI,iBAE7B,OAAOtF,KACN,SAAU9G,GACX,OAAOuL,QAAQE,OAAOgI,EAAWzT,aA7K3C,IAAI4B,EAFJ,SAAiCgD,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,gBAMDwB,KAoLlB,CAAC2N,cAAc,KAAKyF,EAAE,CAAC,SAAS5U,EAAQf,EAAOD,GASjD,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAGT,IAAIqE,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAEtQtF,EAAQ+D,oBAoBR,SAA6B3D,GAG3B,IAAKA,EAAOgP,iBAAmBhP,EAAOgP,iBAAmB,eAAgBhP,EAAOgP,gBAAgB1J,UAC9F,OAGF,IAAImQ,EAAwBzV,EAAOgP,gBACnChP,EAAOgP,gBAAkB,SAAyBV,GAOhD,GALoE,iBAA/C,IAATA,EAAuB,YAActI,EAAQsI,KAAuBA,EAAKoH,WAA8C,IAAjCpH,EAAKoH,UAAUrM,QAAQ,SACvHiF,EAAOoE,KAAKC,MAAMD,KAAKE,UAAUtE,KAC5BoH,UAAYpH,EAAKoH,UAAUC,OAAO,IAGrCrH,EAAKoH,WAAapH,EAAKoH,UAAUvU,OAAQ,CAE3C,IAAIyU,EAAkB,IAAIH,EAAsBnH,GAC5CuH,EAAkBC,EAAMtQ,QAAQuQ,eAAezH,EAAKoH,WACpDM,EAAqBvU,OAAOwU,OAAOL,EAAiBC,GAWxD,OARAG,EAAmBE,OAAS,WAC1B,MAAO,CACLR,UAAWM,EAAmBN,UAC9BS,OAAQH,EAAmBG,OAC3BC,cAAeJ,EAAmBI,cAClCC,iBAAkBL,EAAmBK,mBAGlCL,EAET,OAAO,IAAIP,EAAsBnH,IAEnCtO,EAAOgP,gBAAgB1J,UAAYmQ,EAAsBnQ,UAIzDnD,EAAMgG,wBAAwBnI,EAAQ,gBAAgB,SAAUM,GAO9D,OANIA,EAAEoV,WACJjU,OAAOC,eAAepB,EAAG,YAAa,CACpCqB,MAAO,IAAI3B,EAAOgP,gBAAgB1O,EAAEoV,WACpCtG,SAAU,UAGP9O,MAhEXV,EAAQiE,mBAoER,SAA4B7D,EAAQqC,GAClC,IAAKrC,EAAO0G,kBACV,OAGI,SAAU1G,EAAO0G,kBAAkBpB,WACvC7D,OAAOC,eAAe1B,EAAO0G,kBAAkBpB,UAAW,OAAQ,CAChEgB,IAAK,WACH,YAA6B,IAAfnG,KAAKmW,MAAwB,KAAOnW,KAAKmW,SAK7D,IAAIC,EAAoB,SAA2BlJ,GACjD,IAAKA,IAAgBA,EAAY1K,IAC/B,OAAO,EAET,IAAI6T,EAAWV,EAAMtQ,QAAQiR,cAAcpJ,EAAY1K,KAEvD,OADA6T,EAASE,QACFF,EAAS/C,MAAK,SAAUkD,GAC7B,IAAIC,EAAQd,EAAMtQ,QAAQqR,WAAWF,GACrC,OAAOC,GAAwB,gBAAfA,EAAMpO,OAA8D,IAApCoO,EAAME,SAASzN,QAAQ,YAIvE0N,EAA0B,SAAiC1J,GAE7D,IAAIqG,EAAQrG,EAAY1K,IAAI+Q,MAAM,mCAClC,GAAc,OAAVA,GAAkBA,EAAMvS,OAAS,EACnC,OAAQ,EAEV,IAAI4B,EAAUiU,SAAStD,EAAM,GAAI,IAEjC,OAAO3Q,GAAYA,GAAW,EAAIA,GAGhCkU,EAA2B,SAAkCC,GAK/D,IAAIC,EAAwB,MAuB5B,MAtB+B,YAA3B9U,EAAeO,UAKbuU,EAJA9U,EAAeU,QAAU,IACF,IAArBmU,EAGsB,MAIA,WAEjB7U,EAAeU,QAAU,GAKiB,KAA3BV,EAAeU,QAAiB,MAAQ,MAGxC,YAGrBoU,GAGLC,EAAoB,SAA2B/J,EAAa6J,GAG9D,IAAIG,EAAiB,MAKU,YAA3BhV,EAAeO,SAAoD,KAA3BP,EAAeU,UACzDsU,EAAiB,OAGnB,IAAI3D,EAAQoC,EAAMtQ,QAAQ8R,YAAYjK,EAAY1K,IAAK,uBASvD,OARI+Q,EAAMvS,OAAS,EACjBkW,EAAiBL,SAAStD,EAAM,GAAGiC,OAAO,IAAK,IACX,YAA3BtT,EAAeO,UAA8C,IAArBsU,IAIjDG,EAAiB,YAEZA,GAGLrQ,EAA2BhH,EAAO0G,kBAAkBpB,UAAU2B,qBAClEjH,EAAO0G,kBAAkBpB,UAAU2B,qBAAuB,WAKxD,GAJA9G,KAAKmW,MAAQ,KAIkB,WAA3BjU,EAAeO,SAAwBP,EAAeU,SAAW,GAAI,CACvE,IAAIwU,EAAoBpX,KAAK+O,mBACzBC,EAAeoI,EAAkBpI,aAEhB,WAAjBA,GACF1N,OAAOC,eAAevB,KAAM,OAAQ,CAClCmG,IAAK,WACH,YAA6B,IAAfnG,KAAKmW,MAAwB,KAAOnW,KAAKmW,OAGzDjQ,YAAY,EACZU,cAAc,IAKpB,GAAIwP,EAAkB1U,UAAU,IAAK,CAEnC,IAAI2V,EAAYT,EAAwBlV,UAAU,IAG9C4V,EAAaR,EAAyBO,GAGtCE,EAAYN,EAAkBvV,UAAU,GAAI2V,GAG5CH,OAAiB,EAEnBA,EADiB,IAAfI,GAAkC,IAAdC,EACLC,OAAOC,kBACA,IAAfH,GAAkC,IAAdC,EACZG,KAAK7F,IAAIyF,EAAYC,GAErBG,KAAK9F,IAAI0F,EAAYC,GAKxC,IAAII,EAAO,GACXrW,OAAOC,eAAeoW,EAAM,iBAAkB,CAC5CxR,IAAK,WACH,OAAO+Q,KAGXlX,KAAKmW,MAAQwB,EAGf,OAAO9Q,EAAyBkB,MAAM/H,KAAM0B,aAnNhDjC,EAAQkE,uBAuNR,SAAgC9D,GAC9B,IAAMA,EAAO0G,qBAAqB,sBAAuB1G,EAAO0G,kBAAkBpB,WAChF,OAOF,SAASyS,EAAWC,EAAI3P,GACtB,IAAI4P,EAAsBD,EAAGE,KAC7BF,EAAGE,KAAO,WACR,IAAIC,EAAOtW,UAAU,GACjBV,EAASgX,EAAKhX,QAAUgX,EAAKC,MAAQD,EAAKE,WAC9C,GAAsB,SAAlBL,EAAGM,YAAyBjQ,EAAGyP,MAAQ3W,EAASkH,EAAGyP,KAAKT,eAC1D,MAAM,IAAIkB,UAAU,4CAA8ClQ,EAAGyP,KAAKT,eAAiB,WAE7F,OAAOY,EAAoB/P,MAAM8P,EAAInW,YAGzC,IAAI2W,EAAwBxY,EAAO0G,kBAAkBpB,UAAUmT,kBAC/DzY,EAAO0G,kBAAkBpB,UAAUmT,kBAAoB,WACrD,IAAIC,EAAcF,EAAsBtQ,MAAM/H,KAAM0B,WAEpD,OADAkW,EAAWW,EAAavY,MACjBuY,GAETvW,EAAMgG,wBAAwBnI,EAAQ,eAAe,SAAUM,GAE7D,OADAyX,EAAWzX,EAAEqY,QAASrY,EAAE2O,QACjB3O,MAlPXV,EAAQgE,oBA6PR,SAA6B5D,GAC3B,IAAKA,EAAO0G,mBAAqB,oBAAqB1G,EAAO0G,kBAAkBpB,UAC7E,OAEF,IAAIsT,EAAQ5Y,EAAO0G,kBAAkBpB,UACrC7D,OAAOC,eAAekX,EAAO,kBAAmB,CAC9CtS,IAAK,WACH,MAAO,CACLuS,UAAW,YACXC,SAAU,cACV3Y,KAAK4Y,qBAAuB5Y,KAAK4Y,oBAGrC1S,YAAY,EACZU,cAAc,IAEhBtF,OAAOC,eAAekX,EAAO,0BAA2B,CACtDtS,IAAK,WACH,OAAOnG,KAAK6Y,0BAA4B,MAE1CpS,IAAK,SAAaqS,GACZ9Y,KAAK6Y,2BACP7Y,KAAK0G,oBAAoB,wBAAyB1G,KAAK6Y,iCAChD7Y,KAAK6Y,0BAEVC,GACF9Y,KAAK2G,iBAAiB,wBAAyB3G,KAAK6Y,yBAA2BC,IAInF5S,YAAY,EACZU,cAAc,IAGhB,CAAC,sBAAuB,wBAAwBkB,SAAQ,SAAUgG,GAChE,IAAIiL,EAAaN,EAAM3K,GACvB2K,EAAM3K,GAAU,WAad,OAZK9N,KAAKgZ,6BACRhZ,KAAKgZ,2BAA6B,SAAU7Y,GAC1C,IAAI+H,EAAK/H,EAAE2O,OACX,GAAI5G,EAAG+Q,uBAAyB/Q,EAAGgR,gBAAiB,CAClDhR,EAAG+Q,qBAAuB/Q,EAAGgR,gBAC7B,IAAIC,EAAW,IAAI1R,MAAM,wBAAyBtH,GAClD+H,EAAGN,cAAcuR,GAEnB,OAAOhZ,GAETH,KAAK2G,iBAAiB,2BAA4B3G,KAAKgZ,6BAElDD,EAAWhR,MAAM/H,KAAM0B,gBA7SpCjC,EAAQmE,uBAkTR,SAAgC/D,EAAQqC,GAEtC,IAAKrC,EAAO0G,kBACV,OAEF,GAA+B,WAA3BrE,EAAeO,SAAwBP,EAAeU,SAAW,GACnE,OAEF,GAA+B,WAA3BV,EAAeO,SAAwBP,EAAeU,SAAW,IACnE,OAEF,IAAIwW,EAAYvZ,EAAO0G,kBAAkBpB,UAAU2B,qBACnDjH,EAAO0G,kBAAkBpB,UAAU2B,qBAAuB,SAA8BuH,GACtF,GAAIA,GAAQA,EAAK7L,MAAuD,IAAhD6L,EAAK7L,IAAI0G,QAAQ,0BAAkC,CACzE,IAAI1G,EAAM6L,EAAK7L,IAAI6W,MAAM,MAAM7J,QAAO,SAAU8J,GAC9C,MAAuB,yBAAhBA,EAAKC,UACXC,KAAK,MAEJ3Z,EAAO2N,uBAAyBa,aAAgBxO,EAAO2N,sBACzD9L,UAAU,GAAK,IAAI7B,EAAO2N,sBAAsB,CAC9C1C,KAAMuD,EAAKvD,KACXtI,IAAKA,IAGP6L,EAAK7L,IAAMA,EAGf,OAAO4W,EAAUrR,MAAM/H,KAAM0B,aA5UjCjC,EAAQqD,+BAgVR,SAAwCjD,EAAQqC,GAK9C,IAAMrC,EAAO0G,oBAAqB1G,EAAO0G,kBAAkBpB,UACzD,OAEF,IAAIsU,EAAwB5Z,EAAO0G,kBAAkBpB,UAAUuU,gBAC/D,IAAKD,GAA0D,IAAjCA,EAAsBzY,OAClD,OAEFnB,EAAO0G,kBAAkBpB,UAAUuU,gBAAkB,WACnD,OAAKhY,UAAU,IAWiB,WAA3BQ,EAAeO,SAAwBP,EAAeU,QAAU,IAAiC,YAA3BV,EAAeO,SAAyBP,EAAeU,QAAU,IAAiC,WAA3BV,EAAeO,UAAyBf,UAAU,IAAiC,KAA3BA,UAAU,GAAG6T,UAC9M7J,QAAQC,UAEV8N,EAAsB1R,MAAM/H,KAAM0B,YAbnCA,UAAU,IACZA,UAAU,GAAGqG,MAAM,MAEd2D,QAAQC,aAhWrBlM,EAAQsD,qCAgXR,SAA8ClD,EAAQqC,GACpD,IAAMrC,EAAO0G,oBAAqB1G,EAAO0G,kBAAkBpB,UACzD,OAEF,IAAIwU,EAA4B9Z,EAAO0G,kBAAkBpB,UAAUoJ,oBACnE,IAAKoL,GAAkE,IAArCA,EAA0B3Y,OAC1D,OAEFnB,EAAO0G,kBAAkBpB,UAAUoJ,oBAAsB,WACvD,IAAIxH,EAAQ/G,KAERqO,EAAO3M,UAAU,IAAM,GAC3B,GAAoE,iBAA/C,IAAT2M,EAAuB,YAAcxI,EAAQwI,KAAuBA,EAAKvD,MAAQuD,EAAK7L,IAChG,OAAOmX,EAA0B5R,MAAM/H,KAAM0B,WAU/C,KADA2M,EAAO,CAAEvD,KAAMuD,EAAKvD,KAAMtI,IAAK6L,EAAK7L,MAC1BsI,KACR,OAAQ9K,KAAK2N,gBACX,IAAK,SACL,IAAK,mBACL,IAAK,uBACHU,EAAKvD,KAAO,QACZ,MACF,QACEuD,EAAKvD,KAAO,SAIlB,GAAIuD,EAAK7L,KAAqB,UAAd6L,EAAKvD,MAAkC,WAAduD,EAAKvD,KAC5C,OAAO6O,EAA0B5R,MAAM/H,KAAM,CAACqO,IAEhD,IAAIiE,EAAqB,UAAdjE,EAAKvD,KAAmB9K,KAAK4Z,YAAc5Z,KAAK6Z,aAC3D,OAAOvH,EAAKvK,MAAM/H,MAAM6L,MAAK,SAAUwH,GACrC,OAAOsG,EAA0B5R,MAAMhB,EAAO,CAACsM,SAtZrD,IAUgCtO,EAV5B+U,EAAOrZ,EAAQ,OAEfkV,GAQ4B5Q,EARG+U,IAQkB/U,EAAIC,WAAaD,EAAM,CAAEM,QAASN,GAJnF/C,EAEJ,SAAiC+C,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,aAuZnB,CAACiF,UAAU,GAAGlD,IAAM,KAAKuX,EAAE,CAAC,SAAStZ,EAAQf,EAAOD,GAStD,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAET/B,EAAQmG,oBAAsBnG,EAAQuD,sBAAmB7B,EAEzD,IAAI0E,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAElQkB,EAAgBxF,EAAQ,kBAE5Ba,OAAOC,eAAe9B,EAAS,mBAAoB,CACjDyG,YAAY,EACZC,IAAK,WACH,OAAOF,EAAcjD,oBAIzB,IAAIoD,EAAmB3F,EAAQ,qBAE/Ba,OAAOC,eAAe9B,EAAS,sBAAuB,CACpDyG,YAAY,EACZC,IAAK,WACH,OAAOC,EAAiBR,uBAG5BnG,EAAQyD,YAmBR,SAAqBrD,GACqD,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAOma,eAAiB,aAAcna,EAAOma,cAAc7U,aAAe,gBAAiBtF,EAAOma,cAAc7U,YAClM7D,OAAOC,eAAe1B,EAAOma,cAAc7U,UAAW,cAAe,CACnEgB,IAAK,WACH,MAAO,CAAEgB,SAAUnH,KAAKmH,cAtBhC1H,EAAQkD,mBA4BR,SAA4B9C,EAAQqC,GAClC,GAAwE,iBAAjD,IAAXrC,EAAyB,YAAcgG,EAAQhG,MAA2BA,EAAO0G,oBAAqB1G,EAAOoa,qBACvH,QAEGpa,EAAO0G,mBAAqB1G,EAAOoa,uBAEtCpa,EAAO0G,kBAAoB1G,EAAOoa,sBAGhC/X,EAAeU,QAAU,IAE3B,CAAC,sBAAuB,uBAAwB,mBAAmBkF,SAAQ,SAAUgG,GACnF,IAAIC,EAAelO,EAAO0G,kBAAkBpB,UAAU2I,GAClDE,EAzBV,SAAyBjJ,EAAKG,EAAK1D,GAAa0D,KAAOH,EAAOzD,OAAOC,eAAewD,EAAKG,EAAK,CAAE1D,MAAOA,EAAO0E,YAAY,EAAMU,cAAc,EAAMqI,UAAU,IAAkBlK,EAAIG,GAAO1D,EAAS,OAAOuD,EAyBrLkJ,CAAgB,GAAIH,GAAQ,WAE1C,OADApM,UAAU,GAAK,IAAgB,oBAAXoM,EAA+BjO,EAAOgP,gBAAkBhP,EAAO2N,uBAAuB9L,UAAU,IAC7GqM,EAAahG,MAAM/H,KAAM0B,cAElC7B,EAAO0G,kBAAkBpB,UAAU2I,GAAUE,EAAUF,MAI3D,IAAIoM,EAAmB,CACrBC,WAAY,cACZC,YAAa,eACbC,cAAe,iBACftP,eAAgB,kBAChBC,gBAAiB,oBAGfsP,EAAiBza,EAAO0G,kBAAkBpB,UAAU6E,SACxDnK,EAAO0G,kBAAkBpB,UAAU6E,SAAW,WAC5C,IAAIE,EAAaC,MAAMhF,UAAUuD,MAAM3H,KAAKW,WACxC0I,EAAWF,EAAW,GACtBG,EAASH,EAAW,GACpBI,EAAQJ,EAAW,GAEvB,OAAOoQ,EAAevS,MAAM/H,KAAM,CAACoK,GAAY,OAAOyB,MAAK,SAAUR,GACnE,GAAInJ,EAAeU,QAAU,KAAOyH,EAGlC,IACEgB,EAAMvD,SAAQ,SAAUqD,GACtBA,EAAKL,KAAOoP,EAAiB/O,EAAKL,OAASK,EAAKL,QAElD,MAAO3K,GACP,GAAe,cAAXA,EAAE+K,KACJ,MAAM/K,EAGRkL,EAAMvD,SAAQ,SAAUqD,EAAM5K,GAC5B8K,EAAM5E,IAAIlG,EAAGe,OAAOwU,OAAO,GAAI3K,EAAM,CACnCL,KAAMoP,EAAiB/O,EAAKL,OAASK,EAAKL,WAKlD,OAAOO,KACNQ,KAAKxB,EAAQC,KApFpB7K,EAAQsE,mBAwFR,SAA4BlE,GAC1B,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO0G,oBAAqB1G,EAAO8J,aACvH,OAEF,GAAI9J,EAAO8J,cAAgB,aAAc9J,EAAO8J,aAAaxE,UAC3D,OAEF,IAAIyE,EAAiB/J,EAAO0G,kBAAkBpB,UAAUqD,WACpDoB,IACF/J,EAAO0G,kBAAkBpB,UAAUqD,WAAa,WAC9C,IAAIzB,EAAQ/G,KAER8J,EAAUF,EAAe7B,MAAM/H,KAAM,IAIzC,OAHA8J,EAAQhC,SAAQ,SAAUe,GACxB,OAAOA,EAAON,IAAMxB,KAEf+C,IAIX,IAAInB,EAAe9I,EAAO0G,kBAAkBpB,UAAUyD,SAClDD,IACF9I,EAAO0G,kBAAkBpB,UAAUyD,SAAW,WAC5C,IAAIC,EAASF,EAAaZ,MAAM/H,KAAM0B,WAEtC,OADAmH,EAAON,IAAMvI,KACN6I,IAGXhJ,EAAO8J,aAAaxE,UAAU6E,SAAW,WACvC,OAAOhK,KAAKsH,MAAQtH,KAAKuI,IAAIyB,SAAShK,KAAKsH,OAASoE,QAAQC,QAAQ,IAAIL,OApH5E7L,EAAQuE,qBAwHR,SAA8BnE,GAC5B,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO0G,oBAAqB1G,EAAO8J,aACvH,OAEF,GAAI9J,EAAO8J,cAAgB,aAAc9J,EAAOiM,eAAe3G,UAC7D,OAEF,IAAI8G,EAAmBpM,EAAO0G,kBAAkBpB,UAAUiC,aACtD6E,IACFpM,EAAO0G,kBAAkBpB,UAAUiC,aAAe,WAChD,IAAIkC,EAAStJ,KAETmM,EAAYF,EAAiBlE,MAAM/H,KAAM,IAI7C,OAHAmM,EAAUrE,SAAQ,SAAUX,GAC1B,OAAOA,EAASoB,IAAMe,KAEjB6C,IAGXnK,EAAMgG,wBAAwBnI,EAAQ,SAAS,SAAUM,GAEvD,OADAA,EAAEgH,SAASoB,IAAMpI,EAAEiM,WACZjM,KAETN,EAAOiM,eAAe3G,UAAU6E,SAAW,WACzC,OAAOhK,KAAKuI,IAAIyB,SAAShK,KAAKsH,SA/IlC7H,EAAQqE,iBAmJR,SAA0BjE,GACxB,IAAKA,EAAO0G,mBAAqB,iBAAkB1G,EAAO0G,kBAAkBpB,UAC1E,OAEFtF,EAAO0G,kBAAkBpB,UAAUqE,aAAe,SAAsBvC,GACtE,IAAIwC,EAASzJ,KAEbgC,EAAMuY,WAAW,eAAgB,eACjCva,KAAKwI,aAAaV,SAAQ,SAAUe,GAC9BA,EAAOvB,OAASL,EAAOY,YAAY6L,SAAS7K,EAAOvB,QACrDmC,EAAOT,YAAYH,QA5J3BpJ,EAAQwE,mBAkKR,SAA4BpE,GAGtBA,EAAO2a,cAAgB3a,EAAO4a,iBAChC5a,EAAO4a,eAAiB5a,EAAO2a,cArKnC/a,EAAQyE,mBAyKR,SAA4BrE,GAI1B,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO0G,kBAC3F,OAEF,IAAImU,EAAqB7a,EAAO0G,kBAAkBpB,UAAUwV,eACxDD,IACF7a,EAAO0G,kBAAkBpB,UAAUwV,eAAiB,WAClD3a,KAAK4a,sBAAwB,GAC7B,IAAIC,EAAiBnZ,UAAU,GAC3BoZ,EAAqBD,GAAkB,kBAAmBA,EAC1DC,GAEFD,EAAeE,cAAcjT,SAAQ,SAAUkT,GAC7C,GAAI,QAASA,EAAe,CAE1B,IADe,oBACDC,KAAKD,EAAcE,KAC/B,MAAM,IAAI9C,UAAU,+BAGxB,GAAI,0BAA2B4C,KACvBG,WAAWH,EAAcI,wBAA0B,GACvD,MAAM,IAAIC,WAAW,2CAGzB,GAAI,iBAAkBL,KACdG,WAAWH,EAAcM,eAAiB,GAC9C,MAAM,IAAID,WAAW,mCAK7B,IAAI3T,EAAcgT,EAAmB3S,MAAM/H,KAAM0B,WACjD,GAAIoZ,EAAoB,CAQtB,IAAIjS,EAASnB,EAAYmB,OAErB0S,EAAS1S,EAAO2S,mBACd,cAAeD,IAEO,IAA5BA,EAAOE,UAAUza,QAA4D,IAA5CM,OAAOiK,KAAKgQ,EAAOE,UAAU,IAAIza,UAChEua,EAAOE,UAAYZ,EAAeE,cAClClS,EAAOkS,cAAgBF,EAAeE,cACtC/a,KAAK4a,sBAAsB9R,KAAKD,EAAO6S,cAAcH,GAAQ1P,MAAK,kBACzDhD,EAAOkS,iBACbY,OAAM,kBACA9S,EAAOkS,mBAIpB,OAAOrT,KAlObjI,EAAQ0E,kBAuOR,SAA2BtE,GACzB,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO8J,aAC3F,OAEF,IAAIiS,EAAoB/b,EAAO8J,aAAaxE,UAAUqW,cAClDI,IACF/b,EAAO8J,aAAaxE,UAAUqW,cAAgB,WAC5C,IAAID,EAASK,EAAkB7T,MAAM/H,KAAM0B,WAI3C,MAHM,cAAe6Z,IACnBA,EAAOE,UAAY,GAAG/L,OAAO1P,KAAK+a,eAAiB,CAAC,MAE/CQ,KAjPb9b,EAAQ2E,gBAsPR,SAAyBvE,GAIvB,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO0G,kBAC3F,OAEF,IAAIsV,EAAkBhc,EAAO0G,kBAAkBpB,UAAUyU,YACzD/Z,EAAO0G,kBAAkBpB,UAAUyU,YAAc,WAC/C,IAAI/P,EAAS7J,KACT8b,EAAcpa,UAElB,OAAI1B,KAAK4a,uBAAyB5a,KAAK4a,sBAAsB5Z,OACpD0K,QAAQqQ,IAAI/b,KAAK4a,uBAAuB/O,MAAK,WAClD,OAAOgQ,EAAgB9T,MAAM8B,EAAQiS,MACpCE,SAAQ,WACTnS,EAAO+Q,sBAAwB,MAG5BiB,EAAgB9T,MAAM/H,KAAM0B,aAxQvCjC,EAAQ4E,iBA4QR,SAA0BxE,GAIxB,GAA0E,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAAyBA,EAAO0G,kBAC3F,OAEF,IAAI0V,EAAmBpc,EAAO0G,kBAAkBpB,UAAU0U,aAC1Dha,EAAO0G,kBAAkBpB,UAAU0U,aAAe,WAChD,IAAI5P,EAASjK,KACTkc,EAAcxa,UAElB,OAAI1B,KAAK4a,uBAAyB5a,KAAK4a,sBAAsB5Z,OACpD0K,QAAQqQ,IAAI/b,KAAK4a,uBAAuB/O,MAAK,WAClD,OAAOoQ,EAAiBlU,MAAMkC,EAAQiS,MACrCF,SAAQ,WACT/R,EAAO2Q,sBAAwB,MAG5BqB,EAAiBlU,MAAM/H,KAAM0B,aA7RxC,IAEIM,EAEJ,SAAiC+C,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,cAiSnB,CAAC0b,WAAW,GAAGtM,oBAAoB,EAAEC,iBAAiB,IAAIsM,EAAE,CAAC,SAAS3b,EAAQf,EAAOD,GASvF,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAET/B,EAAQmG,oBACR,SAA6B/F,EAAQwc,GACnC,GAAIxc,EAAOoQ,UAAUC,cAAgB,oBAAqBrQ,EAAOoQ,UAAUC,aACzE,OAEF,IAAKrQ,EAAOoQ,UAAUC,aACpB,OAEFrQ,EAAOoQ,UAAUC,aAAaG,gBAAkB,SAAyBC,GACvE,IAAMA,IAAeA,EAAYG,MAAQ,CACvC,IAAInE,EAAM,IAAIC,aAAa,0DAI3B,OAHAD,EAAIpB,KAAO,gBAEXoB,EAAIzL,KAAO,EACJ6K,QAAQE,OAAOU,GAOxB,OAL0B,IAAtBgE,EAAYG,MACdH,EAAYG,MAAQ,CAAE6L,YAAaD,GAEnC/L,EAAYG,MAAM6L,YAAcD,EAE3Bxc,EAAOoQ,UAAUC,aAAamB,aAAaf,MAIpD,IAAIiM,EAAE,CAAC,SAAS9b,EAAQf,EAAOD,GASjC,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAGT,IAAIqE,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAEtQtF,EAAQuD,iBAQR,SAA0BnD,EAAQqC,GAChC,IAAI+N,EAAYpQ,GAAUA,EAAOoQ,UAC7B5D,EAAmBxM,GAAUA,EAAOwM,iBAQxC,GANA4D,EAAUoB,aAAe,SAAUf,EAAasE,EAAWC,GAEzD7S,EAAMuY,WAAW,yBAA0B,uCAC3CtK,EAAUC,aAAamB,aAAaf,GAAazE,KAAK+I,EAAWC,MAG7D3S,EAAeU,QAAU,IAAM,oBAAqBqN,EAAUC,aAAa8C,2BAA4B,CAC3G,IAAIL,EAAQ,SAAe5N,EAAKpE,EAAGiS,GAC7BjS,KAAKoE,KAAS6N,KAAK7N,KACrBA,EAAI6N,GAAK7N,EAAIpE,UACNoE,EAAIpE,KAIX6b,EAAqBvM,EAAUC,aAAamB,aAAa0D,KAAK9E,EAAUC,cAU5E,GATAD,EAAUC,aAAamB,aAAe,SAAU7Q,GAM9C,MAL8D,iBAA5C,IAANA,EAAoB,YAAcqF,EAAQrF,KAAyC,WAArBqF,EAAQrF,EAAEkS,SAClFlS,EAAI+R,KAAKC,MAAMD,KAAKE,UAAUjS,IAC9BmS,EAAMnS,EAAEkS,MAAO,kBAAmB,sBAClCC,EAAMnS,EAAEkS,MAAO,mBAAoB,wBAE9B8J,EAAmBhc,IAGxB6L,GAAoBA,EAAiBlH,UAAUsX,YAAa,CAC9D,IAAIC,EAAoBrQ,EAAiBlH,UAAUsX,YACnDpQ,EAAiBlH,UAAUsX,YAAc,WACvC,IAAI1X,EAAM2X,EAAkB3U,MAAM/H,KAAM0B,WAGxC,OAFAiR,EAAM5N,EAAK,qBAAsB,mBACjC4N,EAAM5N,EAAK,sBAAuB,oBAC3BA,GAIX,GAAIsH,GAAoBA,EAAiBlH,UAAUwX,iBAAkB,CACnE,IAAIC,EAAyBvQ,EAAiBlH,UAAUwX,iBACxDtQ,EAAiBlH,UAAUwX,iBAAmB,SAAUnc,GAMtD,MALkB,UAAdR,KAAKqI,MAA8E,iBAA5C,IAAN7H,EAAoB,YAAcqF,EAAQrF,MAC7EA,EAAI+R,KAAKC,MAAMD,KAAKE,UAAUjS,IAC9BmS,EAAMnS,EAAG,kBAAmB,sBAC5BmS,EAAMnS,EAAG,mBAAoB,wBAExBoc,EAAuB7U,MAAM/H,KAAM,CAACQ,QApDnD,IAEIwB,EAEJ,SAAiC+C,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,cA0DnB,CAAC0b,WAAW,KAAKU,GAAG,CAAC,SAASpc,EAAQf,EAAOD,GAQ/C,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAGT,IAAIqE,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAEtQtF,EAAQiF,oBAgBR,SAA6B7E,GAC3B,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAA0BA,EAAO0G,kBAC1F,OAEI,oBAAqB1G,EAAO0G,kBAAkBpB,YAClDtF,EAAO0G,kBAAkBpB,UAAUuH,gBAAkB,WAInD,OAHK1M,KAAK8c,gBACR9c,KAAK8c,cAAgB,IAEhB9c,KAAK8c,gBAGhB,KAAM,cAAejd,EAAO0G,kBAAkBpB,WAAY,CACxD,IAAI4X,EAAYld,EAAO0G,kBAAkBpB,UAAUyD,SACnD/I,EAAO0G,kBAAkBpB,UAAUkE,UAAY,SAAmBpC,GAChE,IAAIF,EAAQ/G,KAEPA,KAAK8c,gBACR9c,KAAK8c,cAAgB,IAElB9c,KAAK8c,cAAcpJ,SAASzM,IAC/BjH,KAAK8c,cAAchU,KAAK7B,GAI1BA,EAAOiO,iBAAiBpN,SAAQ,SAAUR,GACxC,OAAOyV,EAAUhc,KAAKgG,EAAOO,EAAOL,MAEtCA,EAAOkO,iBAAiBrN,SAAQ,SAAUR,GACxC,OAAOyV,EAAUhc,KAAKgG,EAAOO,EAAOL,OAIxCpH,EAAO0G,kBAAkBpB,UAAUyD,SAAW,SAAkBtB,GAG9D,IAFA,IAAIgC,EAAStJ,KAEJgd,EAAOtb,UAAUV,OAAQ2G,EAAUwC,MAAM6S,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IACjGtV,EAAQsV,EAAO,GAAKvb,UAAUub,GAYhC,OATItV,GACFA,EAAQG,SAAQ,SAAUb,GACnBqC,EAAOwT,cAEAxT,EAAOwT,cAAcpJ,SAASzM,IACxCqC,EAAOwT,cAAchU,KAAK7B,GAF1BqC,EAAOwT,cAAgB,CAAC7V,MAMvB8V,EAAUhV,MAAM/H,KAAM0B,YAG3B,iBAAkB7B,EAAO0G,kBAAkBpB,YAC/CtF,EAAO0G,kBAAkBpB,UAAUqE,aAAe,SAAsBvC,GACtE,IAAIwC,EAASzJ,KAERA,KAAK8c,gBACR9c,KAAK8c,cAAgB,IAEvB,IAAII,EAAQld,KAAK8c,cAAc5T,QAAQjC,GACvC,IAAe,IAAXiW,EAAJ,CAGAld,KAAK8c,cAAc3T,OAAO+T,EAAO,GACjC,IAAIC,EAASlW,EAAOY,YACpB7H,KAAKwI,aAAaV,SAAQ,SAAUe,GAC9BsU,EAAOzJ,SAAS7K,EAAOvB,QACzBmC,EAAOT,YAAYH,UAlF7BpJ,EAAQkF,qBAyFR,SAA8B9E,GAC5B,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAA0BA,EAAO0G,kBAC1F,OAEI,qBAAsB1G,EAAO0G,kBAAkBpB,YACnDtF,EAAO0G,kBAAkBpB,UAAUiY,iBAAmB,WACpD,OAAOpd,KAAKqd,eAAiBrd,KAAKqd,eAAiB,KAGvD,KAAM,gBAAiBxd,EAAO0G,kBAAkBpB,WAAY,CAC1D7D,OAAOC,eAAe1B,EAAO0G,kBAAkBpB,UAAW,cAAe,CACvEgB,IAAK,WACH,OAAOnG,KAAKsd,cAEd7W,IAAK,SAAajH,GAChB,IAAIqK,EAAS7J,KAETA,KAAKsd,eACPtd,KAAK0G,oBAAoB,YAAa1G,KAAKsd,cAC3Ctd,KAAK0G,oBAAoB,QAAS1G,KAAKud,mBAEzCvd,KAAK2G,iBAAiB,YAAa3G,KAAKsd,aAAe9d,GACvDQ,KAAK2G,iBAAiB,QAAS3G,KAAKud,iBAAmB,SAAUpd,GAC/DA,EAAEwH,QAAQG,SAAQ,SAAUb,GAI1B,GAHK4C,EAAOwT,iBACVxT,EAAOwT,eAAiB,KAEtBxT,EAAOwT,eAAe3J,SAASzM,GAAnC,CAGA4C,EAAOwT,eAAevU,KAAK7B,GAC3B,IAAIO,EAAQ,IAAIC,MAAM,aACtBD,EAAMP,OAASA,EACf4C,EAAOjC,cAAcJ,YAK7B,IAAIX,EAA2BhH,EAAO0G,kBAAkBpB,UAAU2B,qBAClEjH,EAAO0G,kBAAkBpB,UAAU2B,qBAAuB,WACxD,IAAIoB,EAAKlI,KAiBT,OAhBKA,KAAKud,kBACRvd,KAAK2G,iBAAiB,QAAS3G,KAAKud,iBAAmB,SAAUpd,GAC/DA,EAAEwH,QAAQG,SAAQ,SAAUb,GAI1B,GAHKiB,EAAGmV,iBACNnV,EAAGmV,eAAiB,MAElBnV,EAAGmV,eAAenU,QAAQjC,IAAW,GAAzC,CAGAiB,EAAGmV,eAAevU,KAAK7B,GACvB,IAAIO,EAAQ,IAAIC,MAAM,aACtBD,EAAMP,OAASA,EACfiB,EAAGN,cAAcJ,SAIhBX,EAAyBkB,MAAMG,EAAIxG,cAjJhDjC,EAAQgF,iBAsJR,SAA0B5E,GACxB,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,MAA0BA,EAAO0G,kBAC1F,OAEF,IAAIpB,EAAYtF,EAAO0G,kBAAkBpB,UACrC0W,EAAkB1W,EAAUyU,YAC5BqC,EAAmB9W,EAAU0U,aAC7BtL,EAAsBpJ,EAAUoJ,oBAChCzH,EAAuB3B,EAAU2B,qBACjC4S,EAAkBvU,EAAUuU,gBAEhCvU,EAAUyU,YAAc,SAAqB4D,EAAiBC,GAC5D,IAAI9b,EAAUD,UAAUV,QAAU,EAAIU,UAAU,GAAKA,UAAU,GAC3Dgc,EAAU7B,EAAgB9T,MAAM/H,KAAM,CAAC2B,IAC3C,OAAK8b,GAGLC,EAAQ7R,KAAK2R,EAAiBC,GACvB/R,QAAQC,WAHN+R,GAMXvY,EAAU0U,aAAe,SAAsB2D,EAAiBC,GAC9D,IAAI9b,EAAUD,UAAUV,QAAU,EAAIU,UAAU,GAAKA,UAAU,GAC3Dgc,EAAUzB,EAAiBlU,MAAM/H,KAAM,CAAC2B,IAC5C,OAAK8b,GAGLC,EAAQ7R,KAAK2R,EAAiBC,GACvB/R,QAAQC,WAHN+R,GAMX,IAAIC,EAAe,SAAsBzQ,EAAasQ,EAAiBC,GACrE,IAAIC,EAAUnP,EAAoBxG,MAAM/H,KAAM,CAACkN,IAC/C,OAAKuQ,GAGLC,EAAQ7R,KAAK2R,EAAiBC,GACvB/R,QAAQC,WAHN+R,GAKXvY,EAAUoJ,oBAAsBoP,EAEhCA,EAAe,SAAsBzQ,EAAasQ,EAAiBC,GACjE,IAAIC,EAAU5W,EAAqBiB,MAAM/H,KAAM,CAACkN,IAChD,OAAKuQ,GAGLC,EAAQ7R,KAAK2R,EAAiBC,GACvB/R,QAAQC,WAHN+R,GAKXvY,EAAU2B,qBAAuB6W,EAEjCA,EAAe,SAAsBpI,EAAWiI,EAAiBC,GAC/D,IAAIC,EAAUhE,EAAgB3R,MAAM/H,KAAM,CAACuV,IAC3C,OAAKkI,GAGLC,EAAQ7R,KAAK2R,EAAiBC,GACvB/R,QAAQC,WAHN+R,GAKXvY,EAAUuU,gBAAkBiE,GAhN9Ble,EAAQuD,iBAmNR,SAA0BnD,GACxB,IAAIoQ,EAAYpQ,GAAUA,EAAOoQ,UAEjC,GAAIA,EAAUC,cAAgBD,EAAUC,aAAamB,aAAc,CAEjE,IAAInB,EAAeD,EAAUC,aACzB0N,EAAgB1N,EAAamB,aAAa0D,KAAK7E,GACnDD,EAAUC,aAAamB,aAAe,SAAUf,GAC9C,OAAOsN,EAAcC,EAAgBvN,MAIpCL,EAAUoB,cAAgBpB,EAAUC,cAAgBD,EAAUC,aAAamB,eAC9EpB,EAAUoB,aAAe,SAAsBf,EAAawI,EAAIgF,GAC9D7N,EAAUC,aAAamB,aAAaf,GAAazE,KAAKiN,EAAIgF,IAC1D/I,KAAK9E,KAjOXxQ,EAAQoe,gBAAkBA,EAC1Bpe,EAAQ8E,qBA4OR,SAA8B1E,GAC5B,IAAKA,EAAO0G,kBACV,OAGF,IAAIwX,EAAqBle,EAAO0G,kBAChC1G,EAAO0G,kBAAoB,SAA2ByX,EAAUC,GAC9D,GAAID,GAAYA,EAASE,WAAY,CAEnC,IADA,IAAIC,EAAgB,GACX5d,EAAI,EAAGA,EAAIyd,EAASE,WAAWld,OAAQT,IAAK,CACnD,IAAI6d,EAASJ,EAASE,WAAW3d,IAC5B6d,EAAOhZ,eAAe,SAAWgZ,EAAOhZ,eAAe,QAC1DpD,EAAMuY,WAAW,mBAAoB,sBACrC6D,EAAS7L,KAAKC,MAAMD,KAAKE,UAAU2L,KAC5BC,KAAOD,EAAOE,WACdF,EAAOE,IACdH,EAAcrV,KAAKsV,IAEnBD,EAAcrV,KAAKkV,EAASE,WAAW3d,IAG3Cyd,EAASE,WAAaC,EAExB,OAAO,IAAIJ,EAAmBC,EAAUC,IAE1Cpe,EAAO0G,kBAAkBpB,UAAY4Y,EAAmB5Y,UAEpD,wBAAyB4Y,GAC3Bzc,OAAOC,eAAe1B,EAAO0G,kBAAmB,sBAAuB,CACrEJ,IAAK,WACH,OAAO4X,EAAmBQ,wBAzQlC9e,EAAQmF,0BA+QR,SAAmC/E,GAEuC,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAOma,eAAiB,aAAcna,EAAOma,cAAc7U,aAAe,gBAAiBtF,EAAOma,cAAc7U,YAClM7D,OAAOC,eAAe1B,EAAOma,cAAc7U,UAAW,cAAe,CACnEgB,IAAK,WACH,MAAO,CAAEgB,SAAUnH,KAAKmH,cAnRhC1H,EAAQ+E,sBAyRR,SAA+B3E,GAC7B,IAAIgc,EAAkBhc,EAAO0G,kBAAkBpB,UAAUyU,YACzD/Z,EAAO0G,kBAAkBpB,UAAUyU,YAAc,SAAqB4E,GACpE,GAAIA,EAAc,MACgC,IAArCA,EAAaC,sBAEtBD,EAAaC,sBAAwBD,EAAaC,qBAEpD,IAAIC,EAAmB1e,KAAK2e,kBAAkBtX,MAAK,SAAUK,GAC3D,MAA2C,UAApCA,EAAYP,SAASG,MAAMe,SAEK,IAArCmW,EAAaC,qBAAiCC,EACb,aAA/BA,EAAiBE,UACfF,EAAiBG,aACnBH,EAAiBG,aAAa,YAE9BH,EAAiBE,UAAY,WAES,aAA/BF,EAAiBE,YACtBF,EAAiBG,aACnBH,EAAiBG,aAAa,YAE9BH,EAAiBE,UAAY,aAGa,IAArCJ,EAAaC,qBAAiCC,GACvD1e,KAAK2a,eAAe,cAG0B,IAArC6D,EAAaM,sBAEtBN,EAAaM,sBAAwBN,EAAaM,qBAEpD,IAAIC,EAAmB/e,KAAK2e,kBAAkBtX,MAAK,SAAUK,GAC3D,MAA2C,UAApCA,EAAYP,SAASG,MAAMe,SAEK,IAArCmW,EAAaM,qBAAiCC,EACb,aAA/BA,EAAiBH,UACfG,EAAiBF,aACnBE,EAAiBF,aAAa,YAE9BE,EAAiBH,UAAY,WAES,aAA/BG,EAAiBH,YACtBG,EAAiBF,aACnBE,EAAiBF,aAAa,YAE9BE,EAAiBH,UAAY,aAGa,IAArCJ,EAAaM,qBAAiCC,GACvD/e,KAAK2a,eAAe,SAGxB,OAAOkB,EAAgB9T,MAAM/H,KAAM0B,aA9UvCjC,EAAQoF,iBAkVR,SAA0BhF,GACxB,GAAwE,iBAAjD,IAAXA,EAAyB,YAAcgG,EAAQhG,KAAyBA,EAAOmf,aACzF,OAEFnf,EAAOmf,aAAenf,EAAOof,oBApV/B,IAEIjd,EAEJ,SAAiC+C,GAAO,GAAIA,GAAOA,EAAIC,WAAc,OAAOD,EAAc,IAAIE,EAAS,GAAI,GAAW,MAAPF,EAAe,IAAK,IAAIG,KAAOH,EAAWzD,OAAO6D,UAAUC,eAAerE,KAAKgE,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,IAAgC,OAAtBD,EAAOI,QAAUN,EAAYE,EAFtPH,CAFCrE,EAAQ,aA+NrB,SAASod,EAAgBvN,GACvB,OAAIA,QAAqCnP,IAAtBmP,EAAYG,MACtBnP,OAAOwU,OAAO,GAAIxF,EAAa,CAAEG,MAAOzO,EAAMkd,cAAc5O,EAAYG,SAG1EH,IAmHP,CAAC6L,WAAW,KAAKgD,GAAG,CAAC,SAAS1e,EAAQf,EAAOD,GAS/C,aAEA6B,OAAOC,eAAe9B,EAAS,aAAc,CAC3C+B,OAAO,IAGT,IAAIqE,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAEtQtF,EAAQ4C,eAAiBA,EACzB5C,EAAQuI,wBA+BR,SAAiCnI,EAAQuf,EAAiBC,GACxD,IAAKxf,EAAO0G,kBACV,OAEF,IAAIkS,EAAQ5Y,EAAO0G,kBAAkBpB,UACjCma,EAAyB7G,EAAM9R,iBACnC8R,EAAM9R,iBAAmB,SAAU4Y,EAAiBzG,GAClD,GAAIyG,IAAoBH,EACtB,OAAOE,EAAuBvX,MAAM/H,KAAM0B,WAE5C,IAAI8d,EAAkB,SAAyBrf,GAC7C,IAAIsf,EAAgBJ,EAAQlf,GACxBsf,IACE3G,EAAG4G,YACL5G,EAAG4G,YAAYD,GAEf3G,EAAG2G,KAST,OALAzf,KAAK2f,UAAY3f,KAAK2f,WAAa,GAC9B3f,KAAK2f,UAAUP,KAClBpf,KAAK2f,UAAUP,GAAmB,IAAI9T,KAExCtL,KAAK2f,UAAUP,GAAiB3Y,IAAIqS,EAAI0G,GACjCF,EAAuBvX,MAAM/H,KAAM,CAACuf,EAAiBC,KAG9D,IAAII,EAA4BnH,EAAM/R,oBACtC+R,EAAM/R,oBAAsB,SAAU6Y,EAAiBzG,GACrD,GAAIyG,IAAoBH,IAAoBpf,KAAK2f,YAAc3f,KAAK2f,UAAUP,GAC5E,OAAOQ,EAA0B7X,MAAM/H,KAAM0B,WAE/C,IAAK1B,KAAK2f,UAAUP,GAAiBS,IAAI/G,GACvC,OAAO8G,EAA0B7X,MAAM/H,KAAM0B,WAE/C,IAAIoe,EAAc9f,KAAK2f,UAAUP,GAAiBjZ,IAAI2S,GAQtD,OAPA9Y,KAAK2f,UAAUP,GAAiBW,OAAOjH,GACM,IAAzC9Y,KAAK2f,UAAUP,GAAiBnH,aAC3BjY,KAAK2f,UAAUP,GAEmB,IAAvC9d,OAAOiK,KAAKvL,KAAK2f,WAAW3e,eACvBhB,KAAK2f,UAEPC,EAA0B7X,MAAM/H,KAAM,CAACuf,EAAiBO,KAGjExe,OAAOC,eAAekX,EAAO,KAAO2G,EAAiB,CACnDjZ,IAAK,WACH,OAAOnG,KAAK,MAAQof,IAEtB3Y,IAAK,SAAaqS,GACZ9Y,KAAK,MAAQof,KACfpf,KAAK0G,oBAAoB0Y,EAAiBpf,KAAK,MAAQof,WAChDpf,KAAK,MAAQof,IAElBtG,GACF9Y,KAAK2G,iBAAiByY,EAAiBpf,KAAK,MAAQof,GAAmBtG,IAI3E5S,YAAY,EACZU,cAAc,KA5FlBnH,EAAQ6C,WAgGR,SAAoB0d,GAClB,GAAoB,kBAATA,EACT,OAAO,IAAIpf,MAAM,wBAAqC,IAATof,EAAuB,YAAcna,EAAQma,IAAS,2BAGrG,OADAC,EAAeD,EACRA,EAAO,8BAAgC,8BApGhDvgB,EAAQ8C,gBA2GR,SAAyByd,GACvB,GAAoB,kBAATA,EACT,OAAO,IAAIpf,MAAM,wBAAqC,IAATof,EAAuB,YAAcna,EAAQma,IAAS,2BAGrG,OADAE,GAAwBF,EACjB,oCAAsCA,EAAO,WAAa,YA/GnEvgB,EAAQwC,IAkHR,WACE,GAAwE,YAAjD,oBAAXpC,OAAyB,YAAcgG,EAAQhG,SAAuB,CAChF,GAAIogB,EACF,OAEqB,oBAAZ9P,SAAkD,mBAAhBA,QAAQlO,KACnDkO,QAAQlO,IAAI8F,MAAMoI,QAASzO,aAvHjCjC,EAAQ8a,WA+HR,SAAoB4F,EAAWC,GAC7B,IAAKF,EACH,OAEF/P,QAAQkQ,KAAKF,EAAY,8BAAgCC,EAAY,cAlIvE3gB,EAAQ0C,cA2IR,SAAuBtC,GAErB,IAAI6K,EAAS,CAAEjI,QAAS,KAAMG,QAAS,MAGvC,QAAsB,IAAX/C,IAA2BA,EAAOoQ,UAE3C,OADAvF,EAAOjI,QAAU,iBACViI,EAGT,IAAIuF,EAAYpQ,EAAOoQ,UAGvB,GAAIA,EAAUqQ,gBAEZ5V,EAAOjI,QAAU,UACjBiI,EAAO9H,QAAUP,EAAe4N,EAAUsQ,UAAW,mBAAoB,QACpE,GAAItQ,EAAU6E,qBAAiD,IAA3BjV,EAAO2gB,iBAA6B3gB,EAAO+O,0BAA4B/O,EAAO4gB,eAKvH/V,EAAOjI,QAAU,SACjBiI,EAAO9H,QAAUP,EAAe4N,EAAUsQ,UAAW,wBAAyB,OACzE,CAAA,IAAI1gB,EAAO0G,oBAAqB0J,EAAUsQ,UAAUhN,MAAM,wBAQ/D,OADA7I,EAAOjI,QAAU,2BACViI,EANPA,EAAOjI,QAAU,SACjBiI,EAAO9H,QAAUP,EAAe4N,EAAUsQ,UAAW,uBAAwB,GAC7E7V,EAAOgW,oBAAsB7gB,EAAO8gB,mBAAqB,qBAAsB9gB,EAAO8gB,kBAAkBxb,UAO1G,OAAOuF,GA7KTjL,EAAQyf,cA+LR,SAASA,EAAclH,GACrB,IAAK4I,EAAS5I,GACZ,OAAOA,EAGT,OAAO1W,OAAOiK,KAAKyM,GAAM6I,QAAO,SAAUC,EAAa5b,GACrD,IAAI6b,EAAQH,EAAS5I,EAAK9S,IACtB1D,EAAQuf,EAAQ7B,EAAclH,EAAK9S,IAAQ8S,EAAK9S,GAChD8b,EAAgBD,IAAUzf,OAAOiK,KAAK/J,GAAOR,OACjD,YAAcG,IAAVK,GAAuBwf,EAClBF,EAEFxf,OAAOwU,OAAOgL,EAvMzB,SAAyB/b,EAAKG,EAAK1D,GAAa0D,KAAOH,EAAOzD,OAAOC,eAAewD,EAAKG,EAAK,CAAE1D,MAAOA,EAAO0E,YAAY,EAAMU,cAAc,EAAMqI,UAAU,IAAkBlK,EAAIG,GAAO1D,EAAS,OAAOuD,EAuMrKkJ,CAAgB,GAAI/I,EAAK1D,MAC1D,KA3ML/B,EAAQwhB,UAAYA,EACpBxhB,EAAQuM,YA+NR,SAAqBtB,EAAQpD,EAAO4Z,GAClC,IAAIC,EAAkBD,EAAW,eAAiB,cAC9CE,EAAiB,IAAI9V,IACzB,GAAc,OAAVhE,EACF,OAAO8Z,EAET,IAAIC,EAAa,GAajB,OAZA3W,EAAO5C,SAAQ,SAAUtG,GACJ,UAAfA,EAAMsJ,MAAoBtJ,EAAM8f,kBAAoBha,EAAMC,IAC5D8Z,EAAWvY,KAAKtH,MAGpB6f,EAAWvZ,SAAQ,SAAUyZ,GAC3B7W,EAAO5C,SAAQ,SAAUuD,GACnBA,EAAMP,OAASqW,GAAmB9V,EAAMmW,UAAYD,EAAUha,IAChE0Z,EAAUvW,EAAQW,EAAO+V,SAIxBA,GA9OT,IAAInB,GAAe,EACfC,GAAuB,EAU3B,SAAS7d,EAAeof,EAAUC,EAAMC,GACtC,IAAIpO,EAAQkO,EAASlO,MAAMmO,GAC3B,OAAOnO,GAASA,EAAMvS,QAAU2gB,GAAO9K,SAAStD,EAAMoO,GAAM,IAmK9D,SAASf,EAASgB,GAChB,MAA+C,oBAAxCtgB,OAAO6D,UAAUwP,SAAS5T,KAAK6gB,GAyBxC,SAASX,EAAU5V,EAAOwW,EAAMC,GACzBD,IAAQC,EAAUjC,IAAIgC,EAAKta,MAGhCua,EAAUrb,IAAIob,EAAKta,GAAIsa,GACvBvgB,OAAOiK,KAAKsW,GAAM/Z,SAAQ,SAAUoD,GAC9BA,EAAK6W,SAAS,MAChBd,EAAU5V,EAAOA,EAAMlF,IAAI0b,EAAK3W,IAAQ4W,GAC/B5W,EAAK6W,SAAS,QACvBF,EAAK3W,GAAMpD,SAAQ,SAAUP,GAC3B0Z,EAAU5V,EAAOA,EAAMlF,IAAIoB,GAAKua,YA6BtC,IAAIE,GAAG,CAAC,SAASvhB,EAAQf,EAAOD,GAElC,aAIA,IAAIoG,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAUhB,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAXe,QAAyBf,EAAIiB,cAAgBF,QAAUf,IAAQe,OAAOX,UAAY,gBAAkBJ,GAElQkd,EAAW,CAIfC,mBAA8B,WAC5B,OAAOxK,KAAKyK,SAASxN,SAAS,IAAIa,OAAO,EAAG,MAI9CyM,EAASG,WAAaH,EAASC,qBAG/BD,EAASI,WAAa,SAAUC,GAC9B,OAAOA,EAAK/I,OAAOF,MAAM,MAAM7N,KAAI,SAAU8N,GAC3C,OAAOA,EAAKC,WAIhB0I,EAAS3L,cAAgB,SAAUgM,GAEjC,OADYA,EAAKjJ,MAAM,QACV7N,KAAI,SAAU+W,EAAMrF,GAC/B,OAAQA,EAAQ,EAAI,KAAOqF,EAAOA,GAAMhJ,OAAS,WAKrD0I,EAASO,eAAiB,SAAUF,GAClC,IAAIjM,EAAW4L,EAAS3L,cAAcgM,GACtC,OAAOjM,GAAYA,EAAS,IAI9B4L,EAASQ,iBAAmB,SAAUH,GACpC,IAAIjM,EAAW4L,EAAS3L,cAAcgM,GAEtC,OADAjM,EAASE,QACFF,GAIT4L,EAAS9K,YAAc,SAAUmL,EAAMvQ,GACrC,OAAOkQ,EAASI,WAAWC,GAAM9S,QAAO,SAAU8J,GAChD,OAAgC,IAAzBA,EAAKpQ,QAAQ6I,OAQxBkQ,EAASrM,eAAiB,SAAU0D,GAqBlC,IApBA,IAAIoJ,OAAQ,EAQRnN,EAAY,CACdoN,YANAD,EADmC,IAAjCpJ,EAAKpQ,QAAQ,gBACPoQ,EAAKsJ,UAAU,IAAIvJ,MAAM,KAEzBC,EAAKsJ,UAAU,IAAIvJ,MAAM,MAIf,GAClBwJ,UAAW,CAAE5hB,EAAG,MAAOI,EAAG,QAASqhB,EAAM,KAAOA,EAAM,GACtD/L,SAAU+L,EAAM,GAAGjP,cACnBqP,SAAUjM,SAAS6L,EAAM,GAAI,IAC7BK,GAAIL,EAAM,GACVM,QAASN,EAAM,GACfO,KAAMpM,SAAS6L,EAAM,GAAI,IAEzB5X,KAAM4X,EAAM,IAGLniB,EAAI,EAAGA,EAAImiB,EAAM1hB,OAAQT,GAAK,EACrC,OAAQmiB,EAAMniB,IACZ,IAAK,QACHgV,EAAU2N,eAAiBR,EAAMniB,EAAI,GACrC,MACF,IAAK,QACHgV,EAAU4N,YAActM,SAAS6L,EAAMniB,EAAI,GAAI,IAC/C,MACF,IAAK,UACHgV,EAAU6N,QAAUV,EAAMniB,EAAI,GAC9B,MACF,IAAK,QACHgV,EAAU8N,MAAQX,EAAMniB,EAAI,GAC5BgV,EAAUW,iBAAmBwM,EAAMniB,EAAI,GACvC,MACF,aAE8BY,IAAxBoU,EAAUmN,EAAMniB,MAClBgV,EAAUmN,EAAMniB,IAAMmiB,EAAMniB,EAAI,IAKxC,OAAOgV,GAKT0M,EAASqB,eAAiB,SAAU/N,GAClC,IAAI/S,EAAM,GACVA,EAAIsG,KAAKyM,EAAUoN,YAEnB,IAAIE,EAAYtN,EAAUsN,UACR,QAAdA,EACFrgB,EAAIsG,KAAK,GACc,SAAd+Z,EACTrgB,EAAIsG,KAAK,GAETtG,EAAIsG,KAAK+Z,GAEXrgB,EAAIsG,KAAKyM,EAAUoB,SAAS1E,eAC5BzP,EAAIsG,KAAKyM,EAAUuN,UACnBtgB,EAAIsG,KAAKyM,EAAUyN,SAAWzN,EAAUwN,IACxCvgB,EAAIsG,KAAKyM,EAAU0N,MAEnB,IAAInY,EAAOyK,EAAUzK,KAiBrB,OAhBAtI,EAAIsG,KAAK,OACTtG,EAAIsG,KAAKgC,GACI,SAATA,GAAmByK,EAAU2N,gBAAkB3N,EAAU4N,cAC3D3gB,EAAIsG,KAAK,SACTtG,EAAIsG,KAAKyM,EAAU2N,gBACnB1gB,EAAIsG,KAAK,SACTtG,EAAIsG,KAAKyM,EAAU4N,cAEjB5N,EAAU6N,SAAgD,QAArC7N,EAAUoB,SAASlD,gBAC1CjR,EAAIsG,KAAK,WACTtG,EAAIsG,KAAKyM,EAAU6N,WAEjB7N,EAAUW,kBAAoBX,EAAU8N,SAC1C7gB,EAAIsG,KAAK,SACTtG,EAAIsG,KAAKyM,EAAUW,kBAAoBX,EAAU8N,QAE5C,aAAe7gB,EAAIgX,KAAK,MAMjCyI,EAASsB,gBAAkB,SAAUjK,GACnC,OAAOA,EAAK9D,OAAO,IAAI6D,MAAM,MAK/B4I,EAASuB,YAAc,SAAUlK,GAC/B,IAAIoJ,EAAQpJ,EAAK9D,OAAO,GAAG6D,MAAM,KAC7BoK,EAAS,CACXC,YAAa7M,SAAS6L,EAAMnM,QAAS,KAUvC,OAPAmM,EAAQA,EAAM,GAAGrJ,MAAM,KAEvBoK,EAAOvY,KAAOwX,EAAM,GACpBe,EAAOE,UAAY9M,SAAS6L,EAAM,GAAI,IACtCe,EAAOG,SAA4B,IAAjBlB,EAAM1hB,OAAe6V,SAAS6L,EAAM,GAAI,IAAM,EAEhEe,EAAOI,YAAcJ,EAAOG,SACrBH,GAKTxB,EAAS6B,YAAc,SAAUC,GAC/B,IAAIC,EAAKD,EAAML,iBACoBviB,IAA/B4iB,EAAME,uBACRD,EAAKD,EAAME,sBAEb,IAAIL,EAAWG,EAAMH,UAAYG,EAAMF,aAAe,EACtD,MAAO,YAAcG,EAAK,IAAMD,EAAM7Y,KAAO,IAAM6Y,EAAMJ,WAA0B,IAAbC,EAAiB,IAAMA,EAAW,IAAM,QAMhH3B,EAASiC,YAAc,SAAU5K,GAC/B,IAAIoJ,EAAQpJ,EAAK9D,OAAO,GAAG6D,MAAM,KACjC,MAAO,CACL9R,GAAIsP,SAAS6L,EAAM,GAAI,IACvB9D,UAAW8D,EAAM,GAAGxZ,QAAQ,KAAO,EAAIwZ,EAAM,GAAGrJ,MAAM,KAAK,GAAK,WAChE8K,IAAKzB,EAAM,KAMfT,EAASmC,YAAc,SAAUC,GAC/B,MAAO,aAAeA,EAAgB9c,IAAM8c,EAAgBC,cAAgBD,EAAgBzF,WAA2C,aAA9ByF,EAAgBzF,UAA2B,IAAMyF,EAAgBzF,UAAY,IAAM,IAAMyF,EAAgBF,IAAM,QAM1NlC,EAASsC,UAAY,SAAUjL,GAI7B,IAHA,IAAImK,EAAS,GACTe,OAAK,EACL9B,EAAQpJ,EAAK9D,OAAO8D,EAAKpQ,QAAQ,KAAO,GAAGmQ,MAAM,KAC5CoL,EAAI,EAAGA,EAAI/B,EAAM1hB,OAAQyjB,IAEhChB,GADAe,EAAK9B,EAAM+B,GAAGlL,OAAOF,MAAM,MACjB,GAAGE,QAAUiL,EAAG,GAE5B,OAAOf,GAITxB,EAASyC,UAAY,SAAUX,GAC7B,IAAIzK,EAAO,GACP0K,EAAKD,EAAML,YAIf,QAHmCviB,IAA/B4iB,EAAME,uBACRD,EAAKD,EAAME,sBAETF,EAAMY,YAAcrjB,OAAOiK,KAAKwY,EAAMY,YAAY3jB,OAAQ,CAC5D,IAAIua,EAAS,GACbja,OAAOiK,KAAKwY,EAAMY,YAAY7c,SAAQ,SAAU8c,QACdzjB,IAA5B4iB,EAAMY,WAAWC,GACnBrJ,EAAOzS,KAAK8b,EAAQ,IAAMb,EAAMY,WAAWC,IAE3CrJ,EAAOzS,KAAK8b,MAGhBtL,GAAQ,UAAY0K,EAAK,IAAMzI,EAAO/B,KAAK,KAAO,OAEpD,OAAOF,GAKT2I,EAAS4C,YAAc,SAAUvL,GAC/B,IAAIoJ,EAAQpJ,EAAK9D,OAAO8D,EAAKpQ,QAAQ,KAAO,GAAGmQ,MAAM,KACrD,MAAO,CACLvO,KAAM4X,EAAMnM,QACZuO,UAAWpC,EAAMlJ,KAAK,OAK1ByI,EAAS8C,YAAc,SAAUhB,GAC/B,IAAIiB,EAAQ,GACRhB,EAAKD,EAAML,YAUf,YATmCviB,IAA/B4iB,EAAME,uBACRD,EAAKD,EAAME,sBAETF,EAAMkB,cAAgBlB,EAAMkB,aAAajkB,QAE3C+iB,EAAMkB,aAAand,SAAQ,SAAUod,GACnCF,GAAS,aAAehB,EAAK,IAAMkB,EAAGpa,MAAQoa,EAAGJ,WAAaI,EAAGJ,UAAU9jB,OAAS,IAAMkkB,EAAGJ,UAAY,IAAM,UAG5GE,GAKT/C,EAASkD,eAAiB,SAAU7L,GAClC,IAAI8L,EAAK9L,EAAKpQ,QAAQ,KAClBwZ,EAAQ,CACV2C,KAAMxO,SAASyC,EAAK9D,OAAO,EAAG4P,EAAK,GAAI,KAErCE,EAAQhM,EAAKpQ,QAAQ,IAAKkc,GAO9B,OANIE,GAAS,GACX5C,EAAM6C,UAAYjM,EAAK9D,OAAO4P,EAAK,EAAGE,EAAQF,EAAK,GACnD1C,EAAMlhB,MAAQ8X,EAAK9D,OAAO8P,EAAQ,IAElC5C,EAAM6C,UAAYjM,EAAK9D,OAAO4P,EAAK,GAE9B1C,GAKTT,EAASuD,eAAiB,SAAUlM,GAClC,IAAIoJ,EAAQpJ,EAAK9D,OAAO,IAAI6D,MAAM,KAClC,MAAO,CACLoM,UAAW/C,EAAMnM,QACjBmP,MAAOhD,EAAMlX,KAAI,SAAU6Z,GACzB,OAAOxO,SAASwO,EAAM,SAO5BpD,EAAS0D,OAAS,SAAUnP,GAC1B,IAAIoP,EAAM3D,EAAS9K,YAAYX,EAAc,UAAU,GACvD,GAAIoP,EACF,OAAOA,EAAIpQ,OAAO,IAKtByM,EAAS4D,iBAAmB,SAAUvM,GACpC,IAAIoJ,EAAQpJ,EAAK9D,OAAO,IAAI6D,MAAM,KAClC,MAAO,CACLyM,UAAWpD,EAAM,GAAGjP,cACpBjS,MAAOkhB,EAAM,GAAGzQ,gBAOpBgQ,EAAS8D,kBAAoB,SAAUvP,EAAcwP,GAGnD,MAAO,CACLC,KAAM,OACNC,aAJUjE,EAAS9K,YAAYX,EAAewP,EAAa,kBAIvCxa,IAAIyW,EAAS4D,oBAKrC5D,EAASkE,oBAAsB,SAAU5K,EAAQ6K,GAC/C,IAAI5jB,EAAM,WAAa4jB,EAAY,OAInC,OAHA7K,EAAO2K,aAAape,SAAQ,SAAUue,GACpC7jB,GAAO,iBAAmB6jB,EAAGP,UAAY,IAAMO,EAAG7kB,MAAQ,UAErDgB,GAKTyf,EAASqE,gBAAkB,SAAUhN,GACnC,IAAIoJ,EAAQpJ,EAAK9D,OAAO,GAAG6D,MAAM,KACjC,MAAO,CACLkN,IAAK1P,SAAS6L,EAAM,GAAI,IACxB8D,YAAa9D,EAAM,GACnB+D,UAAW/D,EAAM,GACjBgE,cAAehE,EAAMha,MAAM,KAI/BuZ,EAAS0E,gBAAkB,SAAUhC,GACnC,MAAO,YAAcA,EAAW4B,IAAM,IAAM5B,EAAW6B,YAAc,KAAyC,WAAlC3gB,EAAQ8e,EAAW8B,WAA0BxE,EAAS2E,qBAAqBjC,EAAW8B,WAAa9B,EAAW8B,YAAc9B,EAAW+B,cAAgB,IAAM/B,EAAW+B,cAAclN,KAAK,KAAO,IAAM,QAKtRyI,EAAS4E,qBAAuB,SAAUJ,GACxC,GAAqC,IAAjCA,EAAUvd,QAAQ,WACpB,OAAO,KAET,IAAIwZ,EAAQ+D,EAAUjR,OAAO,GAAG6D,MAAM,KACtC,MAAO,CACLyN,UAAW,SACXC,QAASrE,EAAM,GACfsE,SAAUtE,EAAM,GAChBuE,SAAUvE,EAAM,GAAKA,EAAM,GAAGrJ,MAAM,KAAK,QAAKlY,EAC9C+lB,UAAWxE,EAAM,GAAKA,EAAM,GAAGrJ,MAAM,KAAK,QAAKlY,IAInD8gB,EAAS2E,qBAAuB,SAAUH,GACxC,OAAOA,EAAUK,UAAY,IAAML,EAAUM,SAAWN,EAAUO,SAAW,IAAMP,EAAUO,SAAW,KAAOP,EAAUQ,UAAYR,EAAUS,UAAY,IAAMT,EAAUQ,SAAW,IAAMR,EAAUS,UAAY,KAIpNjF,EAASkF,oBAAsB,SAAU3Q,EAAcwP,GAErD,OADY/D,EAAS9K,YAAYX,EAAewP,EAAa,aAChDxa,IAAIyW,EAASqE,kBAM5BrE,EAASmF,iBAAmB,SAAU5Q,EAAcwP,GAClD,IAAI3C,EAAQpB,EAAS9K,YAAYX,EAAewP,EAAa,gBAAgB,GACzEqB,EAAMpF,EAAS9K,YAAYX,EAAewP,EAAa,cAAc,GACzE,OAAM3C,GAASgE,EAGR,CACLnR,iBAAkBmN,EAAM7N,OAAO,IAC/B8R,SAAUD,EAAI7R,OAAO,KAJd,MASXyM,EAASsF,mBAAqB,SAAUhM,GACtC,IAAI/Y,EAAM,eAAiB+Y,EAAOrF,iBAAxB,iBAAmEqF,EAAO+L,SAAW,OAI/F,OAHI/L,EAAOiM,UACThlB,GAAO,kBAEFA,GAITyf,EAASwF,mBAAqB,SAAUjR,GAStC,IARA,IAAItJ,EAAc,CAChBwa,OAAQ,GACRC,iBAAkB,GAClBC,cAAe,GACfC,KAAM,IAGJC,EADQ7F,EAASI,WAAW7L,GACd,GAAG6C,MAAM,KAClB9Y,EAAI,EAAGA,EAAIunB,EAAM9mB,OAAQT,IAAK,CAErC,IAAIyjB,EAAK8D,EAAMvnB,GACXwnB,EAAa9F,EAAS9K,YAAYX,EAAc,YAAcwN,EAAK,KAAK,GAC5E,GAAI+D,EAAY,CACd,IAAIhE,EAAQ9B,EAASuB,YAAYuE,GAC7BC,EAAQ/F,EAAS9K,YAAYX,EAAc,UAAYwN,EAAK,KAMhE,OAJAD,EAAMY,WAAaqD,EAAMhnB,OAASihB,EAASsC,UAAUyD,EAAM,IAAM,GACjEjE,EAAMkB,aAAehD,EAAS9K,YAAYX,EAAc,aAAewN,EAAK,KAAKxY,IAAIyW,EAAS4C,aAC9F3X,EAAYwa,OAAO5e,KAAKib,GAEhBA,EAAM7Y,KAAK+G,eACjB,IAAK,MACL,IAAK,SACH/E,EAAY0a,cAAc9e,KAAKib,EAAM7Y,KAAK+G,iBAYlD,OAJAgQ,EAAS9K,YAAYX,EAAc,aAAa1O,SAAQ,SAAUwR,GAChEpM,EAAYya,iBAAiB7e,KAAKmZ,EAASiC,YAAY5K,OAGlDpM,GAKT+U,EAASgG,oBAAsB,SAAU5f,EAAM6f,GAC7C,IAAI1lB,EAAM,GAGVA,GAAO,KAAO6F,EAAO,IACrB7F,GAAO0lB,EAAKR,OAAO1mB,OAAS,EAAI,IAAM,IACtCwB,GAAO,sBACPA,GAAO0lB,EAAKR,OAAOlc,KAAI,SAAUuY,GAC/B,YAAmC5iB,IAA/B4iB,EAAME,qBACDF,EAAME,qBAERF,EAAML,eACZlK,KAAK,KAAO,OAEfhX,GAAO,uBACPA,GAAO,8BAGP0lB,EAAKR,OAAO5f,SAAQ,SAAUic,GAC5BvhB,GAAOyf,EAAS6B,YAAYC,GAC5BvhB,GAAOyf,EAASyC,UAAUX,GAC1BvhB,GAAOyf,EAAS8C,YAAYhB,MAE9B,IAAIoE,EAAW,EAgBf,OAfAD,EAAKR,OAAO5f,SAAQ,SAAUic,GACxBA,EAAMoE,SAAWA,IACnBA,EAAWpE,EAAMoE,aAGjBA,EAAW,IACb3lB,GAAO,cAAgB2lB,EAAW,QAGhCD,EAAKP,kBACPO,EAAKP,iBAAiB7f,SAAQ,SAAUsgB,GACtC5lB,GAAOyf,EAASmC,YAAYgE,MAIzB5lB,GAKTyf,EAASoG,2BAA6B,SAAU7R,GAC9C,IAAI8R,EAAqB,GACrBpb,EAAc+U,EAASwF,mBAAmBjR,GAC1C+R,GAAuD,IAA9Crb,EAAY0a,cAAc1e,QAAQ,OAC3Csf,GAA6D,IAAjDtb,EAAY0a,cAAc1e,QAAQ,UAG9Cwc,EAAQzD,EAAS9K,YAAYX,EAAc,WAAWhL,KAAI,SAAU8N,GACtE,OAAO2I,EAASkD,eAAe7L,MAC9B9J,QAAO,SAAUkT,GAClB,MAA2B,UAApBA,EAAM6C,aAEXkD,EAAc/C,EAAM1kB,OAAS,GAAK0kB,EAAM,GAAGL,KAC3CqD,OAAgB,EAEhBC,EAAQ1G,EAAS9K,YAAYX,EAAc,oBAAoBhL,KAAI,SAAU8N,GAE/E,OADYA,EAAK9D,OAAO,IAAI6D,MAAM,KACrB7N,KAAI,SAAU+W,GACzB,OAAO1L,SAAS0L,EAAM,UAGtBoG,EAAM3nB,OAAS,GAAK2nB,EAAM,GAAG3nB,OAAS,GAAK2nB,EAAM,GAAG,KAAOF,IAC7DC,EAAgBC,EAAM,GAAG,IAG3Bzb,EAAYwa,OAAO5f,SAAQ,SAAUic,GACnC,GAAiC,QAA7BA,EAAM7Y,KAAK+G,eAA2B8R,EAAMY,WAAWiE,IAAK,CAC9D,IAAIC,EAAW,CACbxD,KAAMoD,EACNK,iBAAkBjS,SAASkN,EAAMY,WAAWiE,IAAK,KAE/CH,GAAeC,IACjBG,EAASE,IAAM,CAAE1D,KAAMqD,IAEzBJ,EAAmBxf,KAAK+f,GACpBN,KACFM,EAAWtW,KAAKC,MAAMD,KAAKE,UAAUoW,KAC5BG,IAAM,CACb3D,KAAMoD,EACNQ,UAAWT,EAAY,aAAe,OAExCF,EAAmBxf,KAAK+f,QAII,IAA9BP,EAAmBtnB,QAAgBynB,GACrCH,EAAmBxf,KAAK,CACtBuc,KAAMoD,IAKV,IAAIS,EAAYjH,EAAS9K,YAAYX,EAAc,MAcnD,OAbI0S,EAAUloB,SAEVkoB,EADsC,IAApCA,EAAU,GAAGhgB,QAAQ,WACX2N,SAASqS,EAAU,GAAG1T,OAAO,GAAI,IACF,IAAlC0T,EAAU,GAAGhgB,QAAQ,SAEqB,IAAvC2N,SAASqS,EAAU,GAAG1T,OAAO,GAAI,IAAa,IAAO,UAErDrU,EAEdmnB,EAAmBxgB,SAAQ,SAAUyT,GACnCA,EAAO4N,WAAaD,MAGjBZ,GAITrG,EAASmH,oBAAsB,SAAU5S,GACvC,IAAI6S,EAAiB,GAIjBC,EAAarH,EAAS9K,YAAYX,EAAc,WAAWhL,KAAI,SAAU8N,GAC3E,OAAO2I,EAASkD,eAAe7L,MAC9B9J,QAAO,SAAUzK,GAClB,MAAyB,UAAlBA,EAAIwgB,aACV,GACC+D,IACFD,EAAeE,MAAQD,EAAW9nB,MAClC6nB,EAAehE,KAAOiE,EAAWjE,MAKnC,IAAImE,EAAQvH,EAAS9K,YAAYX,EAAc,gBAC/C6S,EAAeI,YAAcD,EAAMxoB,OAAS,EAC5CqoB,EAAeK,SAA4B,IAAjBF,EAAMxoB,OAIhC,IAAI2oB,EAAM1H,EAAS9K,YAAYX,EAAc,cAG7C,OAFA6S,EAAeM,IAAMA,EAAI3oB,OAAS,EAE3BqoB,GAGTpH,EAAS2H,oBAAsB,SAAUP,GACvC,IAAI7mB,EAAM,GAUV,OATI6mB,EAAeI,cACjBjnB,GAAO,oBAEL6mB,EAAeM,MACjBnnB,GAAO,uBAEmBrB,IAAxBkoB,EAAehE,MAAsBgE,EAAeE,QACtD/mB,GAAO,UAAY6mB,EAAehE,KAAO,UAAYgE,EAAeE,MAAQ,QAEvE/mB,GAKTyf,EAAS4H,UAAY,SAAUrT,GAC7B,IAAIkM,OAAQ,EACRoH,EAAO7H,EAAS9K,YAAYX,EAAc,WAC9C,GAAoB,IAAhBsT,EAAK9oB,OAEP,MAAO,CAAEiG,QADTyb,EAAQoH,EAAK,GAAGtU,OAAO,GAAG6D,MAAM,MACT,GAAI/R,MAAOob,EAAM,IAE1C,IAAIqH,EAAQ9H,EAAS9K,YAAYX,EAAc,WAAWhL,KAAI,SAAU8N,GACtE,OAAO2I,EAASkD,eAAe7L,MAC9B9J,QAAO,SAAUwa,GAClB,MAA+B,SAAxBA,EAAUzE,aAEnB,OAAIwE,EAAM/oB,OAAS,EAEV,CAAEiG,QADTyb,EAAQqH,EAAM,GAAGvoB,MAAM6X,MAAM,MACN,GAAI/R,MAAOob,EAAM,SAF1C,GASFT,EAASgI,qBAAuB,SAAUzT,GACxC,IAAIsR,EAAQ7F,EAASvL,WAAWF,GAC5B0T,EAAcjI,EAAS9K,YAAYX,EAAc,uBACjDU,OAAiB,EACjBgT,EAAYlpB,OAAS,IACvBkW,EAAiBL,SAASqT,EAAY,GAAG1U,OAAO,IAAK,KAEnD2U,MAAMjT,KACRA,EAAiB,OAEnB,IAAIkT,EAAWnI,EAAS9K,YAAYX,EAAc,gBAClD,GAAI4T,EAASppB,OAAS,EACpB,MAAO,CACLiiB,KAAMpM,SAASuT,EAAS,GAAG5U,OAAO,IAAK,IACvCmB,SAAUmR,EAAMuC,IAChBnT,eAAgBA,GAGpB,IAAIoT,EAAerI,EAAS9K,YAAYX,EAAc,cACtD,GAAI8T,EAAatpB,OAAS,EAAG,CAC3B,IAAI0hB,EAAQ4H,EAAa,GAAG9U,OAAO,IAAI6D,MAAM,KAC7C,MAAO,CACL4J,KAAMpM,SAAS6L,EAAM,GAAI,IACzB/L,SAAU+L,EAAM,GAChBxL,eAAgBA,KAUtB+K,EAASsI,qBAAuB,SAAUC,EAAO7S,GAC/C,IAAI8S,EAAS,GASb,OAPEA,EADqB,cAAnBD,EAAM7T,SACC,CAAC,KAAO6T,EAAMniB,KAAO,MAAQmiB,EAAM7T,SAAW,IAAMgB,EAAKhB,SAAW,OAAQ,uBAAwB,eAAiBgB,EAAKsL,KAAO,QAEjI,CAAC,KAAOuH,EAAMniB,KAAO,MAAQmiB,EAAM7T,SAAW,IAAMgB,EAAKsL,KAAO,OAAQ,uBAAwB,aAAetL,EAAKsL,KAAO,IAAMtL,EAAKhB,SAAW,mBAEhIxV,IAAxBwW,EAAKT,gBACPuT,EAAO3hB,KAAK,sBAAwB6O,EAAKT,eAAiB,QAErDuT,EAAOjR,KAAK,KAOrByI,EAASyI,kBAAoB,WAC3B,OAAOhT,KAAKyK,SAASxN,WAAWa,OAAO,EAAG,KAQ5CyM,EAAS0I,wBAA0B,SAAUC,EAAQC,EAASC,GAC5D,IACIloB,OAAsBzB,IAAZ0pB,EAAwBA,EAAU,EAQhD,MAAO,aAFIC,GAAY,qBAEU,KAP7BF,GAGU3I,EAASyI,qBAI4B,IAAM9nB,EAAlD,yCAITqf,EAAS8I,aAAe,SAAUvU,EAAcwP,GAG9C,IADA,IAAIhB,EAAQ/C,EAASI,WAAW7L,GACvBjW,EAAI,EAAGA,EAAIykB,EAAMhkB,OAAQT,IAChC,OAAQykB,EAAMzkB,IACZ,IAAK,aACL,IAAK,aACL,IAAK,aACL,IAAK,aACH,OAAOykB,EAAMzkB,GAAGiV,OAAO,GAK7B,OAAIwQ,EACK/D,EAAS8I,aAAa/E,GAExB,YAGT/D,EAAS+I,QAAU,SAAUxU,GAG3B,OAFYyL,EAASI,WAAW7L,GACd,GAAG6C,MAAM,KACd,GAAG7D,OAAO,IAGzByM,EAASgJ,WAAa,SAAUzU,GAC9B,MAAyC,MAAlCA,EAAa6C,MAAM,IAAK,GAAG,IAGpC4I,EAASvL,WAAa,SAAUF,GAC9B,IACIkM,EADQT,EAASI,WAAW7L,GACd,GAAGhB,OAAO,GAAG6D,MAAM,KACrC,MAAO,CACLhR,KAAMqa,EAAM,GACZO,KAAMpM,SAAS6L,EAAM,GAAI,IACzB/L,SAAU+L,EAAM,GAChB2H,IAAK3H,EAAMha,MAAM,GAAG8Q,KAAK,OAI7ByI,EAASiJ,WAAa,SAAU1U,GAC9B,IACIkM,EADOT,EAAS9K,YAAYX,EAAc,MAAM,GACnChB,OAAO,GAAG6D,MAAM,KACjC,MAAO,CACL8R,SAAUzI,EAAM,GAChB0I,UAAW1I,EAAM,GACjB2I,eAAgBxU,SAAS6L,EAAM,GAAI,IACnC4I,QAAS5I,EAAM,GACf6I,YAAa7I,EAAM,GACnBM,QAASN,EAAM,KAKnBT,EAASuJ,WAAa,SAAUlJ,GAC9B,GAAoB,iBAATA,GAAqC,IAAhBA,EAAKthB,OACnC,OAAO,EAGT,IADA,IAAIgkB,EAAQ/C,EAASI,WAAWC,GACvB/hB,EAAI,EAAGA,EAAIykB,EAAMhkB,OAAQT,IAChC,GAAIykB,EAAMzkB,GAAGS,OAAS,GAA4B,MAAvBgkB,EAAMzkB,GAAGyR,OAAO,GACzC,OAAO,EAIX,OAAO,GAI+D,iBAAjD,IAAXtS,EAAyB,YAAcmG,EAAQnG,MACzDA,EAAOD,QAAUwiB,IAEjB,KAAK,GAAG,CAAC,GAt5GkW,CAs5G9V;CCt5GjB,WAEE,GADKhS,UAAUC,eAAcD,UAAUC,aAAe,KACjDD,UAAUC,aAAamB,aAAc,CACxC,IAAIA,EACFpB,UAAU6E,oBACV7E,UAAUqQ,iBACVrQ,UAAUwb,gBACVxb,UAAUoB,aAGVpB,UAAUC,aAAamB,aADrBA,EACoC,SAASf,GAC7C,OAAO,IAAI5E,SAAQ,SAASC,EAASC,GACnCyF,EACEf,GACA,SAASrJ,GACP0E,EAAQ1E,MAEV,SAASmJ,GACPxE,EAAOwE,UAMuB,WAgBpC,OAAO,IAAI1E,SAAQ,SAASC,EAASC,GAOjC,IALIzL,EADAN,OAAO0G,mBAAqB1G,OAAO+O,yBAA2B/O,OAAOoa,sBAAwBpa,OAAO4gB,iBAMpGtgB,EAAI,IAAIS,MAAM,wBAEhBsK,KAAO,8BACTU,EAAOzL,MARHA,EAAI,IAAIS,MAAM,mDAEhBsK,KAAO,0BACTU,EAAOzL,SA7CnB;ACAA,aAca,IAAI6J,SAAS,SAAS0hB,EAAiBC,EAASC,GAAU,SAASC,IAAiBC,GAAgB,SAASC,GAAS,GAAGA,GAASA,EAAQjkB,QAAQ,CAACikB,EAAQjkB,SAAQ,SAAS4C,GAAQpJ,OAAOiK,KAAKygB,GAAgBlkB,SAAQ,SAAS5C,GAAK,GAAG,mBAAmB8mB,EAAe9mB,GAAK,IAAI8mB,EAAe9mB,GAAKwF,GAAQ,MAAMvK,GAAGgQ,QAAQC,MAAMjQ,EAAEqU,QAAQrU,EAAE8rB,MAAM9rB,UAAQ,KAAsE,IAAlE+rB,EAAKtT,mBAAmBuT,OAAO,kCAAuCC,GAAO,GAAI,MAAMjsB,GAAGisB,GAAO,GAAY,IAATA,IAAcC,EAAeC,cAAcD,EAAeC,YAAYC,MAAM,SAASF,EAAeG,OAAM,GAAIH,EAAeN,QAAQA,EAAQM,EAAe3Z,OAAO2Z,EAAe5b,QAAQ4b,EAAenD,UAAUuD,MAAMJ,EAAe3Z,MAAMga,UAAUL,EAAenD,UAAUyD,OAAOC,gBAAgBP,EAAe5b,MAAMic,UAAUL,EAAenD,UAAUyD,OAAOE,gBAAgBR,EAAenD,UAAUyD,OAAOC,eAAeP,EAAe3Z,MAAMga,UAAUL,EAAenD,UAAUyD,OAAOE,eAAeR,EAAe5b,MAAMic,WAAWf,EAASU,GAAgBD,GAAQ,aAAeR,GAAUA,GAAUkB,WAAWjB,EAAeD,GAAU,SAAQ,SAASE,EAAgBhT,QAAI,IAAoBjZ,OAAOktB,gBAAgBC,EAASd,EAAKliB,SAASnK,OAAO6rB,kBAAkB,MAAM7f,MAAK,SAASohB,GAAK,IAAIC,EAAM,GAAGD,EAAInlB,SAAQ,SAAS5H,GAAGgtB,EAAMpkB,KAAK5I,MAAK4Y,EAAGoU,MAAgB,MAAEpU,GAAIoT,EAAKliB,UAAS,SAASijB,GAAK,IAAIC,EAAM,GAAGD,EAAIviB,SAAS5C,SAAQ,SAASmlB,GAAK,IAAIE,EAAK,GAAGF,EAAIhiB,QAAQnD,SAAQ,SAASoD,GAAMiiB,EAAKjiB,GAAM+hB,EAAI9hB,KAAKD,MAAQiiB,EAAK5lB,GAAG0lB,EAAI1lB,GAAG4lB,EAAKriB,KAAKmiB,EAAIniB,KAAKqiB,EAAKtiB,UAAUoiB,EAAIpiB,UAAUqiB,EAAMpkB,KAAKqkB,MAAQrU,EAAGoU,MAAS,IAAyHE,EAArHC,EAAqB,uFAAgGD,EAA+nC,oBAAoBttB,OAAOA,OAAO,OAArpC,oBAAoBD,QAAQ,oBAAoBC,SAASA,OAAOmQ,UAAU,CAACsQ,UAAU8M,EAAqBhc,aAAa,cAAcvR,OAAOqQ,UAAUrQ,OAAOqQ,QAAQ,SAAI,IAAoBrQ,OAAOqQ,QAAQlO,UAAK,IAAoBnC,OAAOqQ,QAAQC,QAAQtQ,OAAOqQ,QAAQC,MAAMtQ,OAAOqQ,QAAQlO,IAAInC,OAAOqQ,QAAQlO,KAAK,WAAWkO,QAAQlO,IAAIP,aAAa,oBAAoB4rB,WAAWF,EAAKE,SAAS,CAACC,gBAAgB,CAACC,YAAY,WAAW,MAAM,MAAMF,SAASG,cAAcH,SAASI,cAAcJ,SAASK,iBAAiB,WAAW,IAAI5oB,EAAI,CAAC6oB,WAAW,WAAW,OAAO7oB,GAAK8oB,KAAK,aAAaC,MAAM,aAAaC,UAAU,aAAaC,UAAU,WAAW,MAAM,KAAK,OAAOjpB,GAAKqoB,EAAKa,iBAAiB,cAAc,oBAAoBC,WAAWd,EAAKc,SAAS,CAACvX,SAAS,QAAQwX,KAAK,GAAGC,KAAK,KAAK,oBAAoBC,SAASjB,EAAKiB,OAAO,CAAC3d,MAAM,EAAEE,OAAO,IAAI,oBAAoB0d,MAAMlB,EAAKkB,IAAI,CAACC,gBAAgB,WAAW,MAAM,IAAIC,gBAAgB,WAAW,MAAM,MAAM,oBAAoBniB,mBAAmB+gB,EAAK/gB,iBAAiB,mBAAc,IAAoB9F,IAAoB6mB,EAAK7mB,kBAAkB,cAAc6mB,EAAKvtB,OAAOC,QAAiD,IAAIyG,EAAkB1G,OAAO0G,mBAAmB1G,OAAOoa,sBAAsBpa,OAAO+O,wBAAwB,oBAAoBvC,mBAAmBA,iBAAiB,IAAI,IAAIoiB,IAAoBxe,UAAUye,YAAY,IAAI5jB,MAAM,WAAW6J,WAAWlB,cAAc4Y,EAAe,CAACsC,WAAW,UAAUjc,MAAM,CAACqF,KAAK,CAACoF,OAAO,GAAGuK,OAAO,GAAGkH,mBAAmB,EAAEjnB,QAAQ,EAAEknB,cAAc,EAAEC,YAAY,GAAGC,KAAK,CAAC5R,OAAO,GAAGuK,OAAO,GAAGkH,mBAAmB,EAAEjnB,QAAQ,EAAEknB,cAAc,EAAEC,YAAY,GAAGpC,UAAU,EAAEsC,cAAc,EAAEC,QAAQ,EAAEC,YAAY,GAAGze,MAAM,CAACsH,KAAK,CAACoF,OAAO,GAAGuK,OAAO,GAAGkH,mBAAmB,EAAEjnB,QAAQ,EAAEknB,cAAc,EAAEC,YAAY,GAAGC,KAAK,CAAC5R,OAAO,GAAGuK,OAAO,GAAGkH,mBAAmB,EAAEjnB,QAAQ,EAAEknB,cAAc,EAAEC,YAAY,GAAGpC,UAAU,EAAEsC,cAAc,EAAEC,QAAQ,EAAEC,YAAY,GAAGhG,UAAU,CAACiG,gBAAgB,EAAEC,cAAc,EAAEC,iBAAiB,EAAE1C,OAAO,CAACC,eAAe,EAAE0C,gBAAgB,GAAG7C,MAAM,GAAGV,QAAQ,GAAGwD,eAAe,CAACd,kBAAkBA,EAAkBe,gBAAgB,cAAcC,MAAM,CAACC,cAAc,GAAGC,UAAU,GAAGC,UAAU,GAAGC,YAAY,IAAIC,OAAO,CAACJ,cAAc,GAAGC,UAAU,GAAGC,UAAU,GAAGC,YAAY,KAAKE,YAAY,CAAChY,KAAK,CAACrH,MAAM,EAAEE,OAAO,GAAGme,KAAK,CAACre,MAAM,EAAEE,OAAO,IAAIof,SAAS,CAACtd,MAAM,CAACqF,KAAK,GAAGgX,KAAK,IAAIte,MAAM,CAACsH,KAAK,GAAGgX,KAAK,IAAIkB,WAAW,IAAI7D,OAAO,WAAWA,GAAO,IAAKJ,EAAe,CAACkE,eAAe,SAASxlB,GAAQ,yBAAyBA,EAAOI,OAAOuhB,EAAe8D,UAAUzlB,EAAO0lB,iBAAiBpD,EAAS,iCAAiC/R,KAAKhL,UAAUsQ,WAAW2L,EAAKlsB,KAAK,KAAK0B,UAAU,aAAa6E,GAAmB,KAAK,qDAAqD2lB,EAAKxqB,UAAU,GAAGA,UAAU,aAAa2K,mBAAmBqf,EAAiBhqB,UAAU,GAAGiqB,EAASjqB,UAAU,GAAGkqB,EAASlqB,UAAU,IAAI,IAAI0qB,GAAO,EAAGJ,EAAeM,YAAY,SAAS5hB,GAAQ,gBAAgBA,EAAOI,OAAOuhB,EAAeC,YAAY,CAACC,MAAM7hB,EAAO6hB,SAASP,EAAeqE,gBAAgB,SAAS3lB,GAAQ,mBAAmBA,EAAOI,OAAOuhB,EAAesC,WAAWjkB,EAAO4lB,0BAA0B,eAAe5lB,EAAOI,OAAOuhB,EAAesC,WAAWjkB,EAAO6lB,uBAAuBvE,EAAewE,iBAAiB,SAAS9lB,GAAQ,GAAG,UAAUA,EAAO+lB,UAAU,CAAC,IAAIC,EAAahmB,EAAOnD,GAAG8R,MAAM,KAAKsX,MAAM,IAAqB,IAAlBjmB,EAAOkmB,WAAgBF,EAAa,SAA0B,IAAlBhmB,EAAOkmB,WAAgBF,EAAa,QAAQA,EAAa,CAAC,IAAsF,IAAnFrE,EAAe3Z,MAAMge,GAAchJ,OAAOxe,QAAQwB,EAAOmmB,eAAe,SAAcxE,EAAe3Z,MAAMge,GAAchJ,OAAO5e,KAAK4B,EAAOmmB,eAAe,QAAQnmB,EAAOgiB,UAAU,CAAC,IAAIoE,EAAU,EAAEzE,EAAe2D,SAAStd,MAAMge,GAAcK,gBAAgB1E,EAAe2D,SAAStd,MAAMge,GAAcK,cAAcrmB,EAAOgiB,WAAW,IAAIsE,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAAStd,MAAMge,GAAcK,cAAc1E,EAAe2D,SAAStd,MAAMge,GAAcK,cAAcrmB,EAAOgiB,UAAUoE,EAAUE,EAAM,KAAK3E,EAAe3Z,MAAMge,GAAc9B,mBAAmBkC,EAAUG,QAAQ,GAAG5E,EAAe3Z,MAAMga,UAAUoE,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOskB,cAAc,CAAK8B,EAAU,EAAEzE,EAAe2D,SAAStd,MAAMge,GAAcQ,oBAAoB7E,EAAe2D,SAAStd,MAAMge,GAAcQ,kBAAkBxmB,EAAOskB,eAAmBgC,EAAMtmB,EAAOskB,cAAc3C,EAAe2D,SAAStd,MAAMge,GAAcQ,kBAAkB7E,EAAe2D,SAAStd,MAAMge,GAAcQ,kBAAkBxmB,EAAOskB,cAAc8B,EAAUE,EAAM,KAAK3E,EAAe3Z,MAAMsc,cAAc8B,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOymB,cAAsF,IAAzE9E,EAAe3Z,MAAMge,GAAcvT,OAAOjU,QAAQwB,EAAOymB,cAAmB9E,EAAe3Z,MAAMge,GAAcvT,OAAOrU,KAAK4B,EAAOymB,aAAazmB,EAAO0mB,mBAAmB,CAAKN,EAAU,EAAEzE,EAAe2D,SAAStd,MAAM2e,yBAAyBhF,EAAe2D,SAAStd,MAAM2e,uBAAuB3mB,EAAO0mB,oBAAwBJ,EAAMtmB,EAAO0mB,mBAAmB/E,EAAe2D,SAAStd,MAAM2e,uBAAuBhF,EAAe2D,SAAStd,MAAM2e,uBAAuB3mB,EAAO0mB,mBAAmB/E,EAAe3Z,MAAMuc,QAAQ+B,EAAMC,QAAQ,GAAG5E,EAAe3Z,MAAMuc,QAAQ,IAAI5C,EAAe3Z,MAAMuc,QAAQ,GAAG,GAAGvkB,EAAOwkB,YAAY,CAAK4B,EAAU,EAAEzE,EAAe2D,SAAStd,MAAM4e,kBAAkBjF,EAAe2D,SAAStd,MAAM4e,gBAAgB5mB,EAAOwkB,aAAiB8B,EAAMtmB,EAAOwkB,YAAY7C,EAAe2D,SAAStd,MAAM4e,gBAAgBjF,EAAe2D,SAAStd,MAAM4e,gBAAgB5mB,EAAOwkB,YAAY7C,EAAe3Z,MAAMwc,YAAY8B,EAAMC,QAAQ,GAAG5E,EAAe3Z,MAAMwc,YAAY,IAAI7C,EAAe3Z,MAAMwc,YAAY,OAAOlD,EAAeuF,iBAAiB,SAAS7mB,GAAQ,GAAG,UAAUA,EAAO+lB,UAAU,CAAC,IAAIC,EAAahmB,EAAOnD,GAAG8R,MAAM,KAAKsX,MAAM,IAAqB,IAAlBjmB,EAAOkmB,WAAgBF,EAAa,SAA0B,IAAlBhmB,EAAOkmB,WAAgBF,EAAa,QAAQA,EAAa,CAAC,IAAqF,IAAlFrE,EAAe5b,MAAMigB,GAAchJ,OAAOxe,QAAQwB,EAAOmmB,eAAe,QAAaxE,EAAe5b,MAAMigB,GAAchJ,OAAO5e,KAAK4B,EAAOmmB,eAAe,OAAOnmB,EAAOgiB,UAAU,CAAC,IAAIoE,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAcK,gBAAgB1E,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAcrmB,EAAOgiB,WAAW,IAAIsE,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAc1E,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAcrmB,EAAOgiB,UAAUoE,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMigB,GAAc9B,mBAAmBkC,EAAUG,QAAQ,GAAG5E,EAAe5b,MAAMic,UAAUoE,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOskB,cAAc,CAAK8B,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAcQ,oBAAoB7E,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkBxmB,EAAOskB,eAAmBgC,EAAMtmB,EAAOskB,cAAc3C,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkB7E,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkBxmB,EAAOskB,cAAc8B,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMue,cAAc8B,EAAUG,QAAQ,GAAG,GAAGvmB,EAAO8mB,yBAAyB9mB,EAAO+mB,yBAAyBpF,EAAe0D,YAAYW,GAAchgB,MAAMhG,EAAO+mB,uBAAuBpF,EAAe0D,YAAYW,GAAc9f,OAAOlG,EAAO8mB,yBAAyB9mB,EAAOgnB,qBAAqBhnB,EAAOinB,qBAAqBtF,EAAe0D,YAAYW,GAAchgB,MAAMhG,EAAOinB,mBAAmBtF,EAAe0D,YAAYW,GAAc9f,OAAOlG,EAAOgnB,qBAAqBhnB,EAAOymB,cAAsF,IAAzE9E,EAAe5b,MAAMigB,GAAcvT,OAAOjU,QAAQwB,EAAOymB,cAAmB9E,EAAe5b,MAAMigB,GAAcvT,OAAOrU,KAAK4B,EAAOymB,aAAazmB,EAAOmkB,cAAc,CAACxC,EAAenD,UAAU2F,cAAcnkB,EAAOmkB,cAAkBiC,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAckB,oBAAoBvF,EAAe2D,SAASvf,MAAMigB,GAAckB,kBAAkBlnB,EAAOokB,aAAiBkC,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASvf,MAAMigB,GAAckB,kBAAkBvF,EAAe2D,SAASvf,MAAMigB,GAAckB,kBAAkBlnB,EAAOmkB,cAAciC,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMigB,GAAc7B,cAAcmC,EAAMC,QAAQ,GAAG,GAAGvmB,EAAOokB,YAAY,CAACzC,EAAenD,UAAU4F,YAAYpkB,EAAOokB,YAAgBgC,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAcmB,kBAAkBxF,EAAe2D,SAASvf,MAAMigB,GAAcmB,gBAAgBnnB,EAAOokB,aAAiBkC,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASvf,MAAMigB,GAAcmB,gBAAgBxF,EAAe2D,SAASvf,MAAMigB,GAAcmB,gBAAgBnnB,EAAOokB,YAAYgC,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMigB,GAAc5B,YAAYkC,EAAMC,QAAQ,GAAG,GAAGvmB,EAAO0mB,mBAAmB,CAAKN,EAAU,EAAEzE,EAAe2D,SAASvf,MAAM4gB,yBAAyBhF,EAAe2D,SAASvf,MAAM4gB,uBAAuB3mB,EAAO0mB,oBAAwBJ,EAAMtmB,EAAO0mB,mBAAmB/E,EAAe2D,SAASvf,MAAM4gB,uBAAuBhF,EAAe2D,SAASvf,MAAM4gB,uBAAuB3mB,EAAO0mB,mBAAmB/E,EAAe5b,MAAMwe,QAAQ+B,EAAMC,QAAQ,GAAG5E,EAAe5b,MAAMwe,QAAQ,IAAI5C,EAAe5b,MAAMwe,QAAQ,GAAG,GAAGvkB,EAAOwkB,YAAY,CAAK4B,EAAU,EAAEzE,EAAe2D,SAASvf,MAAM6gB,kBAAkBjF,EAAe2D,SAASvf,MAAM6gB,gBAAgB5mB,EAAOwkB,aAAiB8B,EAAMtmB,EAAOwkB,YAAY7C,EAAe2D,SAASvf,MAAM6gB,gBAAgBjF,EAAe2D,SAASvf,MAAM6gB,gBAAgB5mB,EAAOwkB,YAAY7C,EAAe5b,MAAMye,YAAY8B,EAAMC,QAAQ,GAAG5E,EAAe5b,MAAMye,YAAY,IAAI7C,EAAe5b,MAAMye,YAAY,OAAOlD,EAAe8F,YAAY,SAASpnB,GAAQ,aAAaA,EAAOI,OAAOuhB,EAAenD,UAAU6I,uBAAuBrnB,EAAOsnB,2BAA2B3F,EAAenD,UAAU+I,qBAAqBvnB,EAAOunB,qBAAqB5F,EAAenD,UAAU8I,2BAA2BtnB,EAAOsnB,2BAA2B3F,EAAenD,UAAUgJ,8BAA8BxnB,EAAOwnB,8BAA8B7F,EAAenD,UAAUiJ,sBAAsBznB,EAAOynB,sBAAsB9F,EAAenD,UAAUkJ,qBAAqB1nB,EAAO0nB,qBAAqB/F,EAAenD,UAAUmJ,gBAAgB3nB,EAAO2nB,gBAAgBhG,EAAenD,UAAUoJ,oBAAoB5nB,EAAO4nB,sBAAsBtG,EAAeuG,cAAc,SAAS7nB,GAAQ,GAAG,sBAAsBA,EAAOI,MAAM,mBAAmBJ,EAAOI,MAAM,oBAAoBJ,EAAOI,MAAM,qBAAqBJ,EAAOI,KAAK,CAAC,GAAG,QAAQJ,EAAO8nB,qBAAsBlxB,OAAOiK,KAAK8gB,EAAe2D,SAASC,YAAYnoB,SAAQ,SAAS2qB,GAAK,IAAIld,EAAU8W,EAAe2D,SAASC,WAAWwC,IAA6D,IAAxDld,EAAUqa,UAAU1mB,QAAQwB,EAAOgoB,oBAAyBrG,EAAekD,eAAeE,MAAMC,cAAcna,EAAUma,cAAcrD,EAAekD,eAAeE,MAAMG,UAAUra,EAAUqa,UAAUvD,EAAekD,eAAeE,MAAMI,YAAYta,EAAUsa,YAAYxD,EAAekD,eAAeE,MAAME,UAAUpa,EAAUoa,YAAoE,IAAzDpa,EAAUqa,UAAU1mB,QAAQwB,EAAOioB,qBAA0BtG,EAAekD,eAAeO,OAAOJ,cAAcna,EAAUma,cAAcrD,EAAekD,eAAeO,OAAOF,UAAUra,EAAUqa,UAAUvD,EAAekD,eAAeO,OAAOD,YAAYta,EAAUsa,YAAYxD,EAAekD,eAAeO,OAAOH,UAAUpa,EAAUoa,cAAatD,EAAekD,eAAeI,UAAUjlB,EAAOkoB,mBAAsBC,EAAexG,EAAe2D,SAASC,WAAWvlB,EAAOooB,oBAAkCD,EAAejD,YAAYvD,EAAekD,eAAeC,gBAAgBqD,EAAejD,YAAemD,EAAgB1G,EAAe2D,SAASC,WAAWvlB,EAAOsoB,qBAAoCD,EAAgBnD,YAAYvD,EAAekD,eAAeC,gBAAgBuD,EAAgBnD,WAAW,GAAG,mBAAmBllB,EAAOI,OAAwB,IAAlBJ,EAAOuoB,WAAkC,IAAnBvoB,EAAOwoB,WAAgB,cAAcxoB,EAAO6hB,MAAM,IAAIsG,EAAexG,EAAe2D,SAASC,WAAWvlB,EAAOsoB,mBAAmBD,EAAgB1G,EAAe2D,SAASC,WAAWvlB,EAAOsoB,mBAAmB,GAAG,oBAAoBtoB,EAAOI,OAAOuhB,EAAekD,eAAeE,MAAMC,cAAchlB,EAAOglB,cAAcrD,EAAekD,eAAeE,MAAMG,UAAUllB,EAAOklB,UAAUvD,EAAekD,eAAeE,MAAMI,YAAYnlB,EAAOmlB,YAAYxD,EAAekD,eAAeE,MAAME,UAAUjlB,EAAOyoB,mBAAmBzoB,EAAOilB,WAAW,qBAAqBjlB,EAAOI,OAAOuhB,EAAekD,eAAeO,OAAOJ,cAAchlB,EAAOglB,cAAcrD,EAAekD,eAAeO,OAAOF,UAAUllB,EAAOklB,UAAUvD,EAAekD,eAAeO,OAAOD,YAAYnlB,EAAOmlB,YAAYxD,EAAekD,eAAeO,OAAOH,UAAUjlB,EAAO0oB,oBAAoB1oB,EAAOilB,WAAW3C,EAAS,CAAC,IAAI0D,EAAahmB,EAAOooB,iBAAiB,OAAO,OAAO,IAAIpC,EAAa,OAAO,GAAGhmB,EAAOgiB,UAAU,CAAC,IAAIoE,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAcK,gBAAgB1E,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAcrmB,EAAOgiB,WAAW,IAAIsE,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAc1E,EAAe2D,SAASvf,MAAMigB,GAAcK,cAAcrmB,EAAOgiB,UAAUoE,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMigB,GAAc9B,mBAAmBkC,EAAUG,QAAQ,GAAG5E,EAAe5b,MAAMic,UAAUoE,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOskB,cAAc,CAAK8B,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAcQ,oBAAoB7E,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkBxmB,EAAOskB,eAAmBgC,EAAMtmB,EAAOskB,cAAc3C,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkB7E,EAAe2D,SAASvf,MAAMigB,GAAcQ,kBAAkBxmB,EAAOskB,cAAc8B,EAAUE,EAAM,KAAK3E,EAAe5b,MAAMue,cAAc8B,EAAUG,QAAQ,GAAG,GAAGvmB,EAAO2oB,yBAAyB,CAAKvC,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAc4C,+BAA+BjH,EAAe2D,SAASvf,MAAMigB,GAAc4C,6BAA6B5oB,EAAO2oB,0BAA8BrC,EAAMtmB,EAAO2oB,yBAAyBhH,EAAe2D,SAASvf,MAAMigB,GAAc4C,6BAA6BjH,EAAe2D,SAASvf,MAAMigB,GAAc4C,6BAA6B5oB,EAAO2oB,yBAAyBvC,EAAUE,EAAM,KAAK3E,EAAe5b,MAAM4iB,yBAAyBvC,EAAUG,QAAQ,GAAG,GAAGvmB,EAAO6oB,yBAAyB,CAAKzC,EAAU,EAAEzE,EAAe2D,SAASvf,MAAMigB,GAAc8C,+BAA+BnH,EAAe2D,SAASvf,MAAMigB,GAAc8C,6BAA6B9oB,EAAO6oB,0BAA8BvC,EAAMtmB,EAAO6oB,yBAAyBlH,EAAe2D,SAASvf,MAAMigB,GAAc8C,6BAA6BnH,EAAe2D,SAASvf,MAAMigB,GAAc8C,6BAA6B9oB,EAAO6oB,yBAAyBzC,EAAUE,EAAM,KAAK3E,EAAe5b,MAAM8iB,yBAAyBzC,EAAUG,QAAQ,OAAO,IAAIwC,EAAoB,GAAGC,EAAgB,GAAGC,EAAgB,GAAGC,EAAkB,GAAG5H,EAAejhB,eAAe,SAASL,GAAQ,mBAAmBA,EAAOI,MAAM,oBAAoBJ,EAAOI,MAAMJ,EAAOnD,KAAKksB,EAAoB/oB,EAAOnD,MAAMksB,EAAoB/oB,EAAOnD,IAAI,IAAImsB,EAAgBhpB,EAAOnD,MAAMmsB,EAAgBhpB,EAAOnD,IAAI,IAAIosB,EAAgBjpB,EAAOnD,MAAMosB,EAAgBjpB,EAAOnD,IAAI,IAAIqsB,EAAkBlpB,EAAOnD,MAAMqsB,EAAkBlpB,EAAOnD,IAAI,IAAImD,EAAOglB,gBAA+E,IAAhE+D,EAAoB/oB,EAAOnD,IAAI2B,QAAQwB,EAAOglB,gBAAqB+D,EAAoB/oB,EAAOnD,IAAIuB,KAAK4B,EAAOglB,eAAehlB,EAAOilB,YAAmE,IAAxD+D,EAAgBhpB,EAAOnD,IAAI2B,QAAQwB,EAAOilB,YAAiB+D,EAAgBhpB,EAAOnD,IAAIuB,KAAK4B,EAAOilB,WAAWjlB,EAAOklB,YAAyF,IAA9E+D,EAAgBjpB,EAAOnD,IAAI2B,QAAQwB,EAAOklB,UAAU,IAAIllB,EAAOmpB,aAAkBF,EAAgBjpB,EAAOnD,IAAIuB,KAAK4B,EAAOklB,UAAU,IAAIllB,EAAOmpB,YAAYnpB,EAAOmlB,cAAyE,IAA5D+D,EAAkBlpB,EAAOnD,IAAI2B,QAAQwB,EAAOmlB,cAAmB+D,EAAkBlpB,EAAOnD,IAAIuB,KAAK4B,EAAOmlB,aAAaxD,EAAe2D,SAASC,WAAWvlB,EAAOnD,IAAI,CAACmoB,cAAc+D,EAAoB/oB,EAAOnD,IAAIqoB,UAAU+D,EAAgBjpB,EAAOnD,IAAIssB,WAAWnpB,EAAOmpB,WAAWhE,YAAY+D,EAAkBlpB,EAAOnD,IAAIub,SAASpY,EAAOoY,SAAS6M,UAAU+D,EAAgBhpB,EAAOnD,IAAIsD,UAAUH,EAAOG,UAAUtD,GAAGmD,EAAOnD,GAAGuD,KAAKJ,EAAOI,MAAMuhB,EAAekD,eAAeE,MAAMC,cAAc+D,EAAoB/oB,EAAOnD,IAAI8kB,EAAekD,eAAeE,MAAMG,UAAU+D,EAAgBjpB,EAAOnD,IAAI8kB,EAAekD,eAAeE,MAAMI,YAAY+D,EAAkBlpB,EAAOnD,IAAI8kB,EAAekD,eAAeE,MAAME,UAAU+D,EAAgBhpB,EAAOnD,MAAM,IAAIusB,EAAqB,GAAGC,EAAiB,GAAGC,EAAiB,GAAGC,EAAmB,GAAGjI,EAAehhB,gBAAgB,SAASN,GAAQ,oBAAoBA,EAAOI,MAAM,qBAAqBJ,EAAOI,MAAMJ,EAAOnD,KAAKusB,EAAqBppB,EAAOnD,MAAMusB,EAAqBppB,EAAOnD,IAAI,IAAIwsB,EAAiBrpB,EAAOnD,MAAMwsB,EAAiBrpB,EAAOnD,IAAI,IAAIysB,EAAiBtpB,EAAOnD,MAAMysB,EAAiBtpB,EAAOnD,IAAI,IAAI0sB,EAAmBvpB,EAAOnD,MAAM0sB,EAAmBvpB,EAAOnD,IAAI,IAAImD,EAAOglB,gBAAgF,IAAjEoE,EAAqBppB,EAAOnD,IAAI2B,QAAQwB,EAAOglB,gBAAqBoE,EAAqBppB,EAAOnD,IAAIuB,KAAK4B,EAAOglB,eAAehlB,EAAOilB,YAAoE,IAAzDoE,EAAiBrpB,EAAOnD,IAAI2B,QAAQwB,EAAOilB,YAAiBoE,EAAiBrpB,EAAOnD,IAAIuB,KAAK4B,EAAOilB,WAAWjlB,EAAOklB,YAA0F,IAA/EoE,EAAiBtpB,EAAOnD,IAAI2B,QAAQwB,EAAOklB,UAAU,IAAIllB,EAAOmpB,aAAkBG,EAAiBtpB,EAAOnD,IAAIuB,KAAK4B,EAAOklB,UAAU,IAAIllB,EAAOmpB,YAAYnpB,EAAOmlB,cAA0E,IAA7DoE,EAAmBvpB,EAAOnD,IAAI2B,QAAQwB,EAAOmlB,cAAmBoE,EAAmBvpB,EAAOnD,IAAIuB,KAAK4B,EAAOmlB,aAAaxD,EAAe2D,SAASC,WAAWvlB,EAAOnD,IAAI,CAACmoB,cAAcoE,EAAqBppB,EAAOnD,IAAIqoB,UAAUoE,EAAiBtpB,EAAOnD,IAAIssB,WAAWnpB,EAAOmpB,WAAWhE,YAAYoE,EAAmBvpB,EAAOnD,IAAIub,SAASpY,EAAOoY,SAAS6M,UAAUoE,EAAiBrpB,EAAOnD,IAAIsD,UAAUH,EAAOG,UAAUtD,GAAGmD,EAAOnD,GAAGuD,KAAKJ,EAAOI,MAAMuhB,EAAekD,eAAeO,OAAOJ,cAAcoE,EAAqBppB,EAAOnD,IAAI8kB,EAAekD,eAAeO,OAAOF,UAAUoE,EAAiBtpB,EAAOnD,IAAI8kB,EAAekD,eAAeO,OAAOD,YAAYoE,EAAmBvpB,EAAOnD,IAAI8kB,EAAekD,eAAeO,OAAOH,UAAUoE,EAAiBrpB,EAAOnD,MAAMykB,EAAekI,iBAAiB,SAASxpB,IAASA,EAAOmmB,eAAe,UAAUnmB,EAAO+lB,WAAW,UAAU/lB,EAAO+lB,YAAY/lB,EAAOgiB,YAAYL,EAAe3hB,EAAO+lB,WAAW/D,UAAU7V,SAASnM,EAAOgiB,YAAYhiB,EAAOskB,gBAAgB3C,EAAe3hB,EAAO+lB,WAAWzB,cAAcnY,SAASnM,EAAOskB,kBAAkBhD,EAAe7R,WAAW,SAASzP,GAAQ,GAAGsiB,GAAU,gBAAgBtiB,EAAOI,KAAK,CAAC,IAAI2lB,EAAU/lB,EAAO+lB,WAAW,QAAQC,EAAahmB,EAAOkmB,SAAS,OAAO,OAAO,GAAGF,EAAa,CAAC,GAAGhmB,EAAOgiB,UAAU,CAAC,IAAIoE,EAAU,EAAEzE,EAAe2D,SAASS,GAAWC,GAAcK,gBAAgB1E,EAAe2D,SAASS,GAAWC,GAAcK,cAAcrmB,EAAOgiB,WAAW,IAAIsE,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASS,GAAWC,GAAcK,cAAc1E,EAAe2D,SAASS,GAAWC,GAAcK,cAAcrmB,EAAOgiB,UAAUoE,EAAUE,EAAM,KAAK3E,EAAeoE,GAAWC,GAAc9B,mBAAmBkC,EAAUG,QAAQ,GAAG5E,EAAeoE,GAAW/D,UAAUoE,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOskB,cAAc,CAAK8B,EAAU,EAAEzE,EAAe2D,SAASS,GAAWC,GAAcQ,oBAAoB7E,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkBxmB,EAAOskB,eAAmBgC,EAAMtmB,EAAOskB,cAAc3C,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkB7E,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkBxmB,EAAOskB,cAAc8B,EAAUE,EAAM,KAAK3E,EAAeoE,GAAWzB,cAAc8B,EAAUG,QAAQ,OAAOjF,EAAe5R,YAAY,SAAS1P,GAAQ,GAAGsiB,GAAU,iBAAiBtiB,EAAOI,KAAK,CAAC,IAAI2lB,EAAU/lB,EAAO+lB,WAAW,QAAQC,EAAahmB,EAAOkmB,SAAS,OAAO,OAAO,GAAGF,EAAa,CAAC,GAAGhmB,EAAOgiB,UAAU,CAAC,IAAIoE,EAAU,EAAEzE,EAAe2D,SAASS,GAAWC,GAAcK,gBAAgB1E,EAAe2D,SAASS,GAAWC,GAAcK,cAAcrmB,EAAOgiB,WAAW,IAAIsE,EAAMtmB,EAAOgiB,UAAUL,EAAe2D,SAASS,GAAWC,GAAcK,cAAc1E,EAAe2D,SAASS,GAAWC,GAAcK,cAAcrmB,EAAOgiB,UAAUoE,EAAUE,EAAM,KAAK3E,EAAeoE,GAAWC,GAAc9B,mBAAmBkC,EAAUG,QAAQ,GAAG5E,EAAeoE,GAAW/D,UAAUoE,EAAUG,QAAQ,GAAG,GAAGvmB,EAAOskB,cAAc,CAAK8B,EAAU,EAAEzE,EAAe2D,SAASS,GAAWC,GAAcQ,oBAAoB7E,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkBxmB,EAAOskB,eAAmBgC,EAAMtmB,EAAOskB,cAAc3C,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkB7E,EAAe2D,SAASS,GAAWC,GAAcQ,kBAAkBxmB,EAAOskB,cAAc8B,EAAUE,EAAM,KAAK3E,EAAeoE,GAAWzB,cAAc8B,EAAUG,QAAQ,OAAOjF,EAAe1kB,MAAM,SAASoD,GAAQ,GAAGsiB,GAAU,UAAUtiB,EAAOI,KAAK,CAAC,IAAI4lB,GAAmC,IAAtBhmB,EAAOypB,aAAkB,OAAO,OAAOzpB,EAAO0pB,YAAY1pB,EAAO2pB,cAAchI,EAAe0D,YAAYW,GAAchgB,MAAMhG,EAAO0pB,WAAW/H,EAAe0D,YAAYW,GAAc9f,OAAOlG,EAAO2pB,eAAe,IAAIC,EAAK,CAAC5hB,MAAM,CAACqF,KAAK,GAAGgX,KAAK,IAAIte,MAAM,CAACsH,KAAK,GAAGgX,KAAK,KAAK/C,EAAe3G,KAAK,SAAS3a,GAAQ,GAAGA,EAAOmmB,gBAAgB,UAAUnmB,EAAO+lB,WAAW,UAAU/lB,EAAO+lB,YAAY,SAAS/lB,EAAOI,KAAK,CAAC,IAAI4lB,EAAahmB,EAAOnD,GAAG8R,MAAM,KAAKsX,OAAmE,IAA7D2D,EAAK5pB,EAAO+lB,WAAWC,GAAcxnB,QAAQwB,EAAO2a,OAAYiP,EAAK5pB,EAAO+lB,WAAWC,GAAc5nB,KAAK4B,EAAO2a,MAAMgH,EAAe3hB,EAAO+lB,WAAWC,GAAc/oB,QAAQ2sB,EAAK5pB,EAAO+lB,WAAWC,GAAc1vB,SAAS6qB,KAAkB,oBAAoBnsB,SAASA,OAAOD,QAAQuK,UAAU,mBAAmBrK,QAAQA,OAAOC,KAAKD,OAAO,WAAW,IAAG,WAAW,OAAOqK;ACd3utB,aAEA,MAAMuqB,OAAS,MAGb,IAAIC,EAEJ,MAEMC,EAAgBC,GACfA,EACE,+BAA+BA,KAAU70B,OAAO80B,IAAIC,iBAAgB,IAAIC,MAAOC,YARtE,yDA0CZC,EAAiBL,IACrB,MAAMM,EAAgB,CAAC9pB,KAAM,YAAawpB,OAAAA,EAAQO,QAAS,QAC3D,IAAKp1B,OAAO80B,MAAQ90B,OAAO80B,IAAIO,aAAc,OAAOF,EACpD,MAAMtqB,EAAS7K,OAAO80B,IAAIO,aAAaC,oBAAoB3lB,OAAQ4lB,GAASA,EAAKV,SAAWA,GAE5F,OADahqB,EAAO1J,OAAS,EAAI0J,EAAO,GAAKsqB,GAIzCK,EAAWC,GAASA,EAAK3gB,WAAWlB,cAAc8F,OAAOjM,QAAQ,OAAQ,KAC1EA,QAAQ,KAAM,SACdA,QAAQ,YAAa,IACrBA,QAAQ,QAAS,KACjBA,QAAQ,MAAO,IACfA,QAAQ,MAAO,IAGdioB,EAAkB,IAAMC,EAAElI,UAAUjmB,KAAK,4BAA4BouB,WAOrEC,EAAY,CAChBC,QAAQ,EACRC,YAAY,EACZC,gBAAiB,KACjBC,YAAa,SACbC,YAAa,KACbC,WAAY,CACVvlB,MAAO,CAACwlB,MAAM,EAAOC,MAAM,GAC3BC,KAAM,CAACF,MAAM,EAAOC,MAAM,GAC1BE,KAAM,CAACH,MAAM,EAAOC,MAAM,IAE5BG,MAAO,IAAI/qB,KAGPgrB,EAAa,CACjBC,OAAQ,GACRC,GAAI,SAAYC,EAAWC,GACzB12B,KAAKu2B,OAAOE,GAAaz2B,KAAKu2B,OAAOE,IAAc,GACnDz2B,KAAKu2B,OAAOE,GAAW3tB,KAAK4tB,IAE9BC,IAAK,SAAaF,EAAWC,GAC3B,GAAI12B,KAAKu2B,OAAOE,GACd,IAAK,IAAIl2B,EAAI,EAAGA,EAAIP,KAAKu2B,OAAOE,GAAWz1B,OAAQT,IACjD,GAAIP,KAAKu2B,OAAOE,GAAWl2B,KAAOm2B,EAAI,CACpC12B,KAAKu2B,OAAOE,GAAWttB,OAAO5I,EAAG,GACjC,QAKRq2B,KAAM,SAAcH,GAClB,IAAK,IAAIzZ,EAAOtb,UAAUV,OAAQgX,EAAO7N,MAAM6S,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAC9FjF,EAAKiF,EAAO,GAAKvb,UAAUub,GAGzBjd,KAAKu2B,OAAOE,IACdz2B,KAAKu2B,OAAOE,GAAW3uB,QAAS4uB,IAC9BA,EAAG3uB,WAAM5G,EAAW6W,OAatB6e,EAAe,CACnBC,KAAM,CAACC,EAAUZ,KACf,IAAKa,WAAWC,OAAOC,oBAAqB,OAE5C,MAAMC,EAAoBH,WAAWC,OAAOE,mBAAqB,EACjE,IAAIC,EAAW7B,IAAkBluB,KAAK,qBAAqB0vB,sCAE3D,MAAMM,EAAYC,EAAqBP,GAAUQ,OAAOC,MAAQ,GAEhE,IAAKJ,EAASp2B,OAAQ,CACpB,MAAMy2B,EAAYjC,EAAE,mBAAmBkC,KAAK,CAACX,SAAAA,EAAUM,UAAAA,IACvDD,EAAW7B,IAAkBluB,KAAK,oBAAoBswB,OAAOF,GAC7DL,EAAWA,EAAS/vB,KAAK,IAAI0vB,sCAG/B,MAAMa,EAA0BrC,IAAkBluB,KAAK,wCAEvD+vB,EAAS/vB,KAAK,WAAWwwB,SACzBv2B,OAAOiK,KAAK4qB,GAAMruB,QAAQ,CAAC5C,EAAKgY,KAC9B,MAAM4a,EAAa/C,EAAcoB,EAAKjxB,GAAKwvB,SAAW,CAACO,QAAS,GAAI/pB,KAAM,aAC1E,GAAI4sB,EAAWpD,OAIb,GAFAkD,EAAwBvwB,KAAK,oBAAoBywB,EAAWpD,YAAYmD,SAEpE3a,EAAQia,EAAmB,CAC7B,MAAMY,EAAWD,EAAW5sB,MAAQ,YACpCksB,EAAS/vB,KAAK,eAAe2wB,OAC7BZ,EAASO,OAAO,gGAAgGG,EAAWpD,uBAAuBqD,8BAAqCtD,EAAaqD,EAAWpD,6EAE/M0C,EAAS/vB,KAAK,eAAe4wB,OAAO3C,KAAK,KAAIpY,EAAQ,EAAIia,OAKjEe,MAAMnB,EAAUZ,GACd,MAAMiB,EAAW5B,EAAElI,UAAUjmB,KAAK,qCAC7B2vB,WAAWC,OAAOC,qBAIvBE,EAASa,OACTb,EAAS/vB,KAAK,WAAWwwB,SACzB73B,KAAKm4B,QAAQhC,EAAKiC,KAAMhB,IALtBA,EAASY,QAObE,QAAQE,EAAMhB,GACZ,MAAMD,EAAoBH,WAAWC,OAAOE,mBAAqB,EACjEiB,EAAKtwB,QAAQ,CAACuwB,EAAInb,KAChB,MAAM4a,EAAa/C,EAAcsD,EAAG3D,SAAW,CAACO,QAAS,GAAI/pB,KAAM,aACnE,GAAI4sB,EAAWpD,OACb,GAAIxX,EAAQia,EAAmB,CAC7B,MAAMY,EAAWD,EAAW5sB,MAAQ,YACpCksB,EAAS/vB,KAAK,eAAe2wB,OAC7BZ,EAASO,OAAO,gGAAgGG,EAAWpD,uBAAuBqD,8BAAqCtD,EAAaqD,EAAWpD,6EAE/M0C,EAAS/vB,KAAK,eAAe4wB,OAAO3C,KAAK,KAAIpY,EAAQ,EAAIia,OAKjEmB,OAAQ,CAAC5D,EAAQ1c,KACf,IAAKgf,WAAWC,OAAOC,oBAAqB,OAE5C,MAAMqB,EAAWhD,IAAkBluB,KAAK,qDAClCmxB,EAAYhD,EAAElI,UAAUjmB,KAAK,qCAE/BkxB,GACFA,EAASlxB,KAAK,oBAAoBqtB,WAAgB+D,KAAK,CACrDC,IAAK1gB,EAAK2gB,SACVC,MAAO5gB,EAAK+f,WAIZS,GACFA,EAAUnxB,KAAK,eAAeoxB,KAAK,CACjCC,IAAK1gB,EAAK2gB,SACVC,MAAO5gB,EAAK+f,aAUpBzB,EAAWE,GAAG,gBAAkBjK,IAC9BgJ,IAAkBluB,KAAK,UAAUouB,WAC5BpuB,KAAK,iBAAiBA,KAAK,gCAAgCwxB,KAAK,CAACt4B,EAAG83B,KACnEA,EAAGS,WAAWC,cAAc,oBAAoBC,MAAMC,QAAU1M,EAAQ,OAAS,SAGvFgI,OAAOgB,kBAAkBluB,KAAK,iBACzBA,KAAK,oBAAoB,GAAG2xB,MAAMC,QAAU1M,EAAQ,OAAS,OAG7DA,IACH2M,UAAUC,UAAUt5B,OAAOk3B,SAAUT,EAAWT,gBAAiB,QACjES,EAAWT,gBAAkB,MAE/BH,EAAUC,OAASpJ,IAGrB+J,EAAWE,GAAG,6BAA8B,QAK5CF,EAAWE,GAAG,eAAiBjK,IAC7BmJ,EAAUI,YAAcvJ,EACxBpc,QAAQipB,KAAK,mDAAoD7M,EAAOmJ,EAAUE,WAAY/1B,OAAOk3B,UACvF,UAAVxK,GAAqBmJ,EAAUE,aACjCzlB,QAAQipB,KAAK,uBACbC,KAAKC,wBAQThD,EAAWE,GAAG,iBAAkB,CAACtrB,EAAMquB,EAAMC,KAC3C9D,EAAUM,WAAW9qB,GAAMquB,GAAQC,IAGrClD,EAAWE,GAAG,2BAA4B,CAAC9B,EAAQ1c,KAC7Cgf,WAAWC,OAAOC,qBAAqBL,EAAayB,OAAO5D,EAAQ1c,KAGzEse,EAAWE,GAAG,eAAgB,CAACiD,EAAa1C,EAAU2C,EAAQ5qB,EAAQ6qB,EAAUhO,KAC9E,KAAK8N,GAAgB1C,GAAa2C,GAAWC,GAAa7qB,GAAQ,OAAO,EAEpE4mB,EAAUW,MAAMxW,IAAIkX,IACvBrB,EAAUW,MAAM5vB,IACZswB,EACA,CACE6C,MAAO,CAACxB,KAAM,IACdyB,KAAM,CAACzB,KAAM,IACb0B,MAAO,GACPC,YAAa,IAKrB,MAAM5D,EAAOT,EAAUW,MAAMlwB,IAAI4wB,GACjC,IAAIiD,EAAQ7D,EAAK2D,MAEjB3D,EAAKrnB,GAAU6qB,EAGfK,EAAQ,GAEJ7D,EAAKyD,MAAMxB,MACbjC,EAAKyD,MAAMxB,KAAKtwB,QAASuwB,IAClB2B,EAAM3B,EAAG3D,UAASsF,EAAM3B,EAAG3D,QAAU,IAC1CsF,EAAM3B,EAAG3D,QAAU2D,IAIvBxB,EAAa/nB,GAAQioB,EAAUZ,EAAKrnB,IACpC+nB,EAAaC,KAAKC,EAAUiD,GAE5BtE,EAAUW,MAAM5vB,IAAIswB,EAAUZ,GAE1BxK,GAAUA,EAASwK,KAGzBG,EAAWE,GAAG,uBAAwB,CAACO,EAAUkD,EAASnrB,KACxD,MAAMorB,EAAM1E,EAAE,0BAA0B,GACnC0E,IACLA,EAAIC,UAAUC,IAAI,gBAClBF,EAAIG,aAAa,YAAY,MAG/B/D,EAAWE,GAAG,sBAAuB,CAACO,EAAU2C,EAAQ5qB,KACtD,MAAMorB,EAAM1E,EAAE,0BAA0B,GACxC,IAAK0E,EAAK,OACV,MAAMI,EAAuB,SAAXZ,EAAoB,QAAU,OAChDQ,EAAIK,gBAAgB,YACpBL,EAAIG,aAAa,cAAeC,GAChCJ,EAAIC,UAAUtC,OAAO,kBAGvBvB,EAAWE,GAAG,yBAA0B,CAACO,EAAU4C,KACjD,MAAMa,EAAalD,EAAqBP,GAAUzB,KAElDE,EAAE,gCAAgCiF,KAAKD,GAEvChF,EAAElI,UACCjmB,KAAK,eACLA,KAAK,8DACLoxB,KAAK,UAAW1B,KAGrBT,EAAWE,GAAG,8BAA+B,CAACgE,EAAYzD,KACpDA,IAAal3B,OAAOk3B,WACtBvB,EAAE,wDAAwDuB,MAAa0D,KAAKD,GAC5EhF,EAAElI,UAAUjmB,KAAK,2BAA2B0vB,OAAczB,KAAKkF,MAInE,MAAME,EAAkBtD,IACtB,IAAKA,EAASp2B,OAAQ,OACtB,MAAM4P,EAASwmB,EAASuD,cAClBC,EAAarG,OAAOgB,kBAAkBluB,KAAK,4BAA4BwzB,IAAI,eAC3EC,EAAkBjkB,SAAS+jB,EAAY,IAE7C,OADkBljB,KAAKqjB,KAAK3D,EAASG,SAASC,IAAMsD,GACjClqB,EAAS,GAaxB0mB,EAAwBP,IAC5B,MAAMiE,EAAMzF,IAAkBluB,KAAK,UAAUouB,WACxCpuB,KAAK,iBAAiBA,KAAK,YAAY0vB,GAC5C,MAAO,CACLkE,MAAOD,EAAIh6B,OACXg6B,IAAAA,EACA1F,KAAM0F,EAAI1F,OACV/O,IAAKyU,EAAIvC,KAAK,aACdlB,OAAQ,CACNC,IAAK,IAAMkD,EAAeM,GAC1BE,KAAM,IApBW,CAAC9D,IACtB,IAAKA,EAASp2B,OAAQ,OACtB,MAAM0P,EAAQ0mB,EAAS+D,aACjBC,EAAW7G,OAAOgB,kBAAkBluB,KAAK,4BACzCg0B,EAAcD,EAASP,IAAI,gBAC3BC,EAAkBjkB,SAASwkB,EAAa,IAE9C,OADmB3jB,KAAKqjB,KAAKK,EAAS7D,SAAS2D,KAAOJ,GAClCpqB,EAAQ,GAaZ4qB,CAAeN,IAE7BO,YAAa,IAAMP,EAAI3zB,KAAK,mBAAmBrG,OAC3Cg6B,EAAI3zB,KAAK,mBAAmB,GAAGyxB,WAAa,OAIpD,MAAO,CACL7C,KA5VYuF,GAAYhH,EAAMgH,EAAQhH,IA6VtCiH,UAhWgB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,OAiWxF1G,cAAAA,EACAM,QAAAA,EACAE,gBAAAA,EACAmG,gBAzSsB,CAAC3E,EAAU4E,EAAa,eAAiB,GAAG97B,OAAOquB,SAAS0N,OAAS/7B,OAAOquB,SAAS2N,mBAAmBxG,EAAQsG,SAAkB5E,2BA0SxJrB,UAAAA,EACAY,WAAAA,EACAwF,UA5UgB,IAAM9E,WAAWtC,QAAU70B,OAAO80B,IAAImH,YA6UtDC,cA3UqBpQ,IACrB,MAAM1kB,EAASyuB,EAAUK,YACrB9uB,IACFA,EAAOY,YAAYC,QAASR,IAC1BA,EAAM8N,OACNnO,EAAO+B,YAAY1B,KAErBouB,EAAUK,YAAc,KACpBpK,GAAUA,MAoUhBqQ,YA/VkB,WAClB,MAAM1d,EAAM5c,UAAUV,QAAU,QAAsBG,IAAjBO,UAAU,GAAmB,GAAKA,UAAU,GAEjF,GAAY,KAAR4c,EAAY,MAAO,GACvB,IAAI2d,EAASp8B,OAAOq8B,mBAAmB5d,GAGvC,OAFA2d,EAASA,EAAO1iB,OAAOjM,QAAQ,MAAO,IAElC,WAAW2N,KAAKghB,GACX,OAAOA,EAEX,oBAAoBhhB,KAAKghB,GAIvBA,EAHE,UAAUA,GAqVnB3E,qBAAAA,EACAT,aAAAA,EACA6D,eAAAA,IA9WW;ACDf,aAEA,IAAIyB,cAAgB,WAClB,SAASC,EAAY55B,EAAK65B,GACxB,MAAMjD,EAAO/W,EAAW7f,GAIxB,OAFA65B,EAAYA,EAAU5oB,cAEjB2lB,EAAKkD,kBAIQ,QAAdD,GAAuBjD,EAAKmD,gBAAkBnD,EAAKkD,kBAAkB,IAIvD,QAAdD,GAAuBjD,EAAKoD,gBAAkBpD,EAAKkD,kBAAkB,IAIvD,SAAdD,GAAwBjD,EAAKqD,iBAAmBrD,EAAKkD,kBAAkB,GAPlE95B,EAWTA,EAAMk6B,EAAkBl6B,EAAK65B,EAAWjD,GAf/B52B,EAoBX,SAASk6B,EAAkBl6B,EAAKuhB,EAAOqV,EAAMuD,GAC3C,IAAIC,EAAoB,GAExB,GAAc,QAAV7Y,EAAiB,CACnB,IAAKqV,EAAKmD,cACR,OAAO/5B,EAETo6B,EAAoBxD,EAAKmD,cAG3B,GAAc,QAAVxY,EAAiB,CACnB,IAAKqV,EAAKoD,cACR,OAAOh6B,EAETo6B,EAAoBxD,EAAKoD,cAG3B,GAAc,SAAVzY,EAAkB,CACpB,IAAKqV,EAAKqD,eACR,OAAOj6B,EAGTo6B,EAAoBxD,EAAKqD,eAG3B,IAAII,EAAazD,EAAK0D,0BAA0BzjB,MAAM,SAAS,GAAjD,SAEV0jB,EAAW,CAACH,GAchB,OAZID,IACFI,EAAW,IAGb3D,EAAKkD,kBAAkBx0B,QAASk1B,IAC1BA,IAAgBJ,GACpBG,EAASj0B,KAAKk0B,KAGhBH,GAAWE,EAASvjB,KAAK,KAEzBhX,EAAMA,EAAI8K,QAAQ8rB,EAAK0D,0BAA2BD,GAIpD,SAASxa,EAAW7f,GAClB,MAAM42B,EAAO,GAyBb,OAxBA52B,EAAI6W,MAAM,MAAMvR,QAASwR,IACS,IAA5BA,EAAKpQ,QAAQ,aACfkwB,EAAKkD,kBAAoB,GACzBhjB,EAAKD,MAAM,SAAS,GAAGA,MAAM,KAAKvR,QAASk1B,KACzCA,EAAcA,EAAYzjB,SACLyjB,EAAYh8B,SACjCo4B,EAAKkD,kBAAkBxzB,KAAKk0B,GAC5B5D,EAAK0D,0BAA4BxjB,OAIF,IAA/BA,EAAKpQ,QAAQ,cAAwBkwB,EAAKmD,gBAC5CnD,EAAKmD,cAAgBjjB,EAAKhM,QAAQ,YAAa,IAAI+L,MAAM,KAAK,KAG7B,IAA/BC,EAAKpQ,QAAQ,cAAwBkwB,EAAKoD,gBAC5CpD,EAAKoD,cAAgBljB,EAAKhM,QAAQ,YAAa,IAAI+L,MAAM,KAAK,KAG5B,IAAhCC,EAAKpQ,QAAQ,eAAyBkwB,EAAKqD,iBAC7CrD,EAAKqD,eAAiBnjB,EAAKhM,QAAQ,YAAa,IAAI+L,MAAM,KAAK,MAI5D+f,EAwFT,SAAS6D,EAASC,EAAUnrB,EAAQyD,GAClC,OAKF,SAAyB0nB,EAAUC,EAAWC,EAASrrB,EAAQyD,GAC7D,MAAM6nB,GAA2B,IAAbD,EAAiBA,EAAUF,EAASl8B,OACxD,IAAK,IAAIT,EAAI48B,EAAW58B,EAAI88B,IAAe98B,EACzC,GAAoC,IAAhC28B,EAAS38B,GAAG2I,QAAQ6I,MACjByD,IAAuE,IAA7D0nB,EAAS38B,GAAGkT,cAAcvK,QAAQsM,EAAO/B,gBACtD,OAAOlT,EAIb,OAAO,KAdA+8B,CAAgBJ,EAAU,GAAI,EAAGnrB,EAAQyD,GAkBlD,SAAS+nB,EAAoBC,GAC3B,MAAMC,EAAU,IAAIlwB,OAAO,+BACrB7C,EAAS8yB,EAAQjqB,MAAMkqB,GAC7B,OAAO/yB,GAA4B,IAAlBA,EAAO1J,OAAe0J,EAAO,GAAK,KA4HrD,MAAO,CACLgzB,UAxOF,SAAmBl7B,GACjB,MAAM42B,EAAO/W,EAAW7f,GAMxB,OAHAA,EAAMk6B,EAAkBl6B,EAAK,MAAO42B,GAAM,GAC1C52B,EAAMk6B,EAAkBl6B,EAAK,MAAO42B,GAAM,IAoO1CuE,YA/NF,SAAqBn7B,GACnB,IAAKA,GAAsB,iBAARA,EACjB,KAAM,qBAQR,OAFAA,GADAA,GADAA,GADAA,EAAMA,EAAI8K,QAAQ,yBAA0B,KAClCA,QAAQ,6BAA8B,0BACtCA,QAAQ,wBAAyB,KACjCA,QAAQ,4BAA6B,yBAwN/CswB,WAnNF,SAAoBC,EAAe3R,GACjC,GAAKA,GAASA,EAAK1jB,YAAe0jB,EAAK1jB,aAAaxH,OAApD,CAIA,IAAK68B,GAA0C,iBAAlBA,EAC3B,KAAM,qBAGR3R,EAAK1jB,aAAaV,QAASe,IACzB,MAAM0S,EAAS1S,EAAO2S,gBACtB,IAAK,IAAIjb,EAAI,EAAGA,EAAIgb,EAAOmM,OAAO1mB,OAAQT,IACxC,GAAIgb,EAAOmM,OAAOnnB,GAAGu9B,WAAaD,EAAe,CAC/CtiB,EAAOmM,OAAOqW,QAAQxiB,EAAOmM,OAAOve,OAAO5I,EAAG,IAC9C,MAGJsI,EAAO6S,cAAcH,OAmMvByiB,cA/LF,SAAuBx7B,GACrB,OAAOA,EAAI8K,QAAQ,yCAA0C,2BA+L7D2wB,gCAAiC,SAAyCz7B,EAAK0mB,EAAWgV,GACxF,OA7LJ,SAAgB17B,EAAK0mB,EAAWgV,GAC9B,OAAMjuB,UAAUqQ,kBAAoB4I,IAIhCgV,IACGhV,EAAUmF,OAEJnF,EAAUmF,OAAS,KAC5Ble,QAAQkQ,KAAK,qGAFblQ,QAAQkQ,KAAK,8FAOb6I,EAAUmF,QAAU6P,IAEtB17B,GADAA,EAAMA,EAAI8K,QAAQ,sBAAuB,KAC/BA,QAAQ,mBAAoB,uBAAuB4b,EAAUmF,gBAIrEnF,EAAUxW,OAASwW,EAAUzY,OAASyY,EAAUlR,QAClDxV,EAAMA,EAAI8K,QAAQ,sBAAuB,KAGvC4b,EAAUxW,QACZlQ,EAAMA,EAAI8K,QAAQ,mBAAoB,uBAAuB4b,EAAUxW,cAGrEwW,EAAUzY,QACZjO,EAAMA,EAAI8K,QAAQ,mBAAoB,uBAAuB4wB,EAAWhV,EAAUmF,OAASnF,EAAUzY,eA3B9FjO,EA2LA27B,CAAO37B,EAAK0mB,EAAWgV,IAEhCE,iBAAkB,SAA0B57B,EAAK+Y,GAC/C,OAlIJ,SAA2B/Y,EAAK+Y,GAE9B,MAAM8iB,GADN9iB,EAASA,GAAU,IACgB3J,IAC7B0sB,EAAsB/iB,EAAO1J,IAC7B0sB,EAAahjB,EAAOwI,MAAM9R,eAAiB,MAE3CirB,EAAW16B,EAAI6W,MAAM,QAGrBmlB,EAAWvB,EAASC,EAAU,WAAeqB,EAAH,UAChD,IAAIE,EAKJ,GAJID,IACFC,EAAalB,EAAoBL,EAASsB,MAGvCC,EACH,OAAOj8B,EAGT,MAAMk8B,EAAWzB,EAASC,EAAU,WAAY,aAChD,IAAIyB,EAKJ,GAJID,IACFC,EAAapB,EAAoBL,EAASwB,MAGvCA,EACH,OAAOl8B,EAGT,MAAMo8B,EAAmB3B,EAASC,EAAU,UAAUyB,EAAWhqB,YACjE,GAAyB,OAArBiqB,EAA2B,CAC7B,IAAIC,EAAgB,OACpBA,GAAiB,UAAUJ,0BAAmCJ,GAAuB,+BAA+BC,GAAuB,QAC3IpB,EAAS0B,GAAoB1B,EAAS0B,GAAkBlvB,OAAOmvB,GAC/Dr8B,EAAM06B,EAAS1jB,KAAK,QAGtB,OAAOhX,EA6FEs8B,CAAkBt8B,EAAK+Y,IAEhCwjB,kBAAmB,SAA2Bv8B,EAAK+Y,GACjD,OA7FJ,SAA4B/Y,EAAK+Y,GAC/BA,EAASA,GAAU,GAEnB,MAAM2hB,EAAW16B,EAAI6W,MAAM,QAGrB2lB,EAAY/B,EAASC,EAAU,WAAY,cACjD,IAAI+B,EAKJ,GAJID,IACFC,EAAc1B,EAAoBL,EAAS8B,MAGxCC,EACH,OAAOz8B,EAGT,MAAM08B,EAAoBjC,EAASC,EAAU,UAAU+B,EAAYtqB,YACnE,GAAyB,MAArBuqB,EACF,OAAO18B,EAGT,IAAI28B,EAAiB,GA+BrB,OA9BAA,GAAkB,kBAAqC,IAAlB5jB,EAAO6jB,OAAyB7jB,EAAO6jB,OAAS,KACrFD,GAAkB,wBAAoD,IAA3B5jB,EAAO,gBAAkCA,EAAO,gBAAkB,UAErE,IAA7BA,EAAO8jB,oBAChBF,GAAkB,wBAAuB5jB,EAAO8jB,mBAAqB,eAGjC,IAA3B9jB,EAAO+jB,kBAChBH,GAAkB,sBAAqB5jB,EAAO+jB,iBAAmB,eAGzC,IAAf/jB,EAAOgkB,MAChBJ,GAAkB,eAA+B,IAAf5jB,EAAOgkB,IAAsBhkB,EAAOgkB,IAAM,WAG3C,IAAxBhkB,EAAOikB,eAChBL,GAAkB,kBAAkB5jB,EAAOikB,mBAGhB,IAAlBjkB,EAAOkkB,SAChBN,GAAkB,YAAY5jB,EAAOkkB,aAGR,IAApBlkB,EAAO4M,WAChBgX,GAAkB,kBAAkB5jB,EAAO4M,UAG7C+U,EAASgC,GAAqBhC,EAASgC,GAAmBxvB,OAAOyvB,GAEjE38B,EAAM06B,EAAS1jB,KAAK,QA0CXkmB,CAAmBl9B,EAAK+Y,IAEjCokB,UAAW,SAAmBn9B,GAC5B,OAAO45B,EAAY55B,EAAK,QAE1B45B,YAAAA,EACAwD,iBA1CF,SAA0Bp9B,GACxB,MAAM06B,EAAW16B,EAAI6W,MAAM,QAC3B,IAAIwmB,EAAgB,KACpB,IAAK,IAAIt/B,EAAI,EAAGA,EAAI28B,EAASl8B,OAAQT,IACnC,IAA0C,IAAtC28B,EAAS38B,GAAG4rB,OAAO,cAAsB,CAC3C,IAAI8S,EAAca,WAAW5C,EAAS38B,GAAI,uBAC1C,MAGJ,IAASA,EAAI,EAAGA,EAAI28B,EAASl8B,OAAQT,IACnC,IAAsC,IAAlC28B,EAAS38B,GAAG4rB,OAAO,UAAkB,CAEvC,GADgB2T,WAAW5C,EAAS38B,GAAI,kBACxB0+B,EAAa,CAC3BY,EAAgBt/B,EAChB,OAIN,OAAqB,MAAjBs/B,EAA8Br9B,GAClC06B,EAAS2C,GAAiB3C,EAAS2C,GAAenwB,OAAO,8BACzDlN,EAAM06B,EAAS1jB,KAAK,WAvUJ;ACHpB,aAEA,MAAM0f,UAAY,MAChB,IAAI6G,EAAS,KACTC,EAAQ,KACRC,EAAc,GACdC,EAAiB,EACjBC,EAAW,KACXC,EAAkB,KACtB,MAAMC,EAAS,CACbC,UAAW,EACXrR,QAAS,EACTsR,KAAM,EACNC,KAAM,EACNC,IAAK,EACLC,QAAS,GACTC,OAAQ,CACNC,OAAQ,OACRC,QAAS,UACTC,OAAQ,WAEVC,aAAc,KAYhB,SAAS7wB,IACPD,UAAUC,aAAagD,mBAAmBrH,KAAMm1B,IAC9C,MAAMC,EAAgBC,aAAaC,QAAQ,kBACrCC,WAACA,EAAUC,QAAEA,EAAOC,OAAEA,GAAU/uB,KAAKC,MAAMyuB,GAE3CM,EAAoBjU,SAASyL,cAAc,8BAC3CyI,EAAqBlU,SAASyL,cAAc,iCAC5C0I,EAAenU,SAASyL,cAAc,8BAEtC2I,EAAoBpU,SAASG,cAAc,UAC3CkU,EAAqBrU,SAASG,cAAc,UAC5CmU,EAAetU,SAASG,cAAc,UAE5C,IAAK,MAAMoU,KAAcb,EAAc,CACrC,MAAMc,EAASxU,SAASG,cAAc,WAChC9Z,SAACA,EAAQH,MAAEA,EAAKnL,KAAEA,GAAQw5B,EAChCC,EAAOtgC,MAAQmS,EACF,eAATtL,GACFy5B,EAAOxM,KAAO9hB,GAAS,eAAc+tB,EAAoBA,EAAkBvgC,OAAS,EAAI,KACpFogC,IAAeztB,IAAUmuB,EAAO7O,UAAW,GAC/CyO,EAAkBlU,YAAYsU,IACZ,gBAATz5B,GACTy5B,EAAOxM,KAAO9hB,GAAS,YAAWguB,EAAqBA,EAAmBxgC,OAAS,EAAI,KACnFqgC,IAAY1tB,IAAUmuB,EAAO7O,UAAW,GAC5C0O,EAAmBnU,YAAYsU,IACb,eAATz5B,IACTy5B,EAAOxM,KAAO9hB,GAAS,WAAUiuB,EAAeA,EAAazgC,OAAS,EAAI,KACtEsgC,IAAW3tB,IAAUmuB,EAAO7O,UAAW,GAC3C2O,EAAapU,YAAYsU,IAI7BtM,EAAE+L,GAAmB1J,SACrBrC,EAAEgM,GAAoB3J,SACtBrC,EAAEiM,GAAc5J,SAEhBrC,EAAE,uBAAuBmC,OAAO+J,GAChClM,EAAE,0BAA0BmC,OAAOgK,GACnCnM,EAAE,uBAAuBmC,OAAOiK,KAMpC,SAASG,EAAmB/pB,EAAM2hB,EAAU7gB,GAC1C,IAAKd,IAAS2hB,IAAa3hB,EAAK0c,OAAQ,OAAO,EAC/C,MAAMqC,EAAW/e,EAAK+e,SAChBiL,EAAczN,OAAO+C,qBAAqBP,GAAUzB,KAEpD2M,EAAYtI,EAASuI,QAC3B1M,EAAE,mCAAmCuB,wBAA+BzB,KAAK2M,GAEvD,IAAdA,GAAiBzM,EAAE,mCAAmCuB,wBAA+BzB,KAAK,IAE9F,MAAMF,EAAOb,OAAOQ,cAAc/c,EAAK0c,QAEvC,GAAIU,GAAwB,SAAhBpd,EAAK0hB,QAAqC,WAAhB1hB,EAAK0hB,OAAqB,CAGtD,IAAI7E,KACF7c,EAAK0c,QAAUU,EAAKV,OAClB1c,EAAK9M,MAAQkqB,EAAKlqB,KAClB8M,EAAK+e,SAKjBvB,EAAE,mCAAmCuB,aAAoBoL,YAAY,UAGvE,GAAInqB,EAAK0c,SAAWsC,WAAWtC,OAAQ,CACrCH,OAAOgB,kBAAkBluB,KAAK,oBAAoB0vB,GAAYoL,YAAY,UAC1E9I,KAAK+I,WAAWpqB,EAAK0c,OAAQ1c,EAAK+e,UA1EPsL,cAAcjC,GA4EzCvgC,OAAOk3B,SAAW,KAElB,MAAMuL,EAAW/N,OAAO+C,qBAAqBP,GAAUwE,cACnD+G,GAAUA,EAASvJ,cAAc,oBAAoBoB,UAAUtC,OAAO,UAE1EoI,EAAc,GAEdzK,EAAE,eAAeqF,IAAI,CACnB0H,UAAW,yBACXC,QAAS,IACR/J,KAAK,CAACgK,eAAe,IAExBpJ,KAAK+I,WAAWpqB,EAAK0c,OAAQ1c,EAAK+e,UAElCxC,OAAO+B,WAAWM,KAAK,iBAAkB,QAAS,QAAQ,GAE1DrC,OAAOwH,gBAGLjjB,GAAoB,mBAAPA,GAAmBA,IAEpCyb,OAAO+B,WAAWM,KAAK,eAAgB5e,EAAM+e,EAAU,QAAS,QAAS4C,EAAU,QAEnFpF,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,GAEjE9G,KAAKF,UAAUnhB,EAAK0c,QAGtB,SAASgO,EAAc1qB,EAAM2hB,GAC3B,IAAK3hB,IAASA,EAAK0c,OAAQ,OAAO,EAElC,MAAMqC,EAAW/e,EAAK+e,SAGhB3B,GAFcb,OAAO+C,qBAAqBP,GAAUzB,KAE7Cf,OAAOQ,cAAc/c,EAAK0c,SAEvC,IAAKU,EAAM,OAAO,EAKlB,MAAM6M,EAAYtI,EAASuI,QAQ3B,GANA1M,EAAE,mCAAmCuB,wBAA+BzB,KAAK2M,GACvD,IAAdA,GAAiBzM,EAAE,mCAAmCuB,wBAA+BzB,KAAK,IAE9FE,EAAE,mCAAmCuB,aAAoB4L,SAAS,UAG9D3qB,EAAK0c,SAAWsC,WAAWtC,OAAQ,CACrC70B,OAAOk3B,SAAW/e,EAAK+e,SApIzBqJ,EAAkBwC,YAAY,KAC5BvC,EAAOC,UAAYzL,KAAKgO,MACxB9C,EAAOnJ,KAAK,SAAUoJ,EAAOngC,OAAOk3B,SAAUxC,OAAOuH,YAAauE,EAAOI,MACxEJ,EAAOU,cAqIR,MAAMuB,EAAW/N,OAAO+C,qBAAqBP,GAAUwE,cACnD+G,GAAUA,EAASvJ,cAAc,oBAAoBoB,UAAUC,IAAI,UAGvEf,KAAKyJ,SAAS9qB,EAAK+e,SAAU3B,EAAKV,QAElCc,EAAE,eAAeqF,IAAI,CACnB0H,UAAW,qBACXC,QAAS,IACR/J,KAAK,CAACgK,eAAe,IAExBlO,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,OAAQoJ,GAChE5L,OAAO+B,WAAWM,KAAK,iBAAkB,QAAS,QAAQ,GAGrDqJ,EAAYvL,QAA+B,IAArBiF,EAASuI,SAClCnC,EAAOnJ,KAAK,gBAAiBoJ,EAAOngC,OAAOk3B,UAG7CkJ,EAAcjoB,EAGduc,OAAO+B,WAAWM,KAAK,yBAA0BG,EAAU4C,GAG7DpF,OAAO+B,WAAWM,KAAK,eAAgB5e,EAAM+e,EAAU,OAAQ,QAAS4C,EAAU,QAGpF,SAASoJ,EAAchM,EAAUiM,EAAUC,GACzC1O,OAAOgB,kBAAkBluB,KAAK,gCAAgC86B,YAAY,UAC1EhC,EAAW8C,EApHsBpjC,OAAOoQ,UAAUC,aAAamB,aAAa,CAACqB,OAAO,EAAMjC,OAAO,IAqH1E5E,KAAM5E,IAE3BstB,OAAOwH,cAAc,KACnBxH,OAAOmB,UAAUK,YAAc9uB,IAGjC,MAAMi8B,EAAmBrjC,OAAO80B,IAAIO,aAAaC,oBAAoB3pB,IAAK23B,GAAMA,EAAEzO,QAElF,IAAKuL,EAAYvL,OACf,OAAOqL,EAAOnJ,KAAK,WAAYoJ,EAAOkD,EAAkBF,EAAU,QAASI,GAG7ErD,EAAOnJ,KAAK,YAAaoJ,EAAOC,EAAa,QAAS,CAACoD,EAAW1J,KAChE2J,EAAkBD,EAAW1J,EAAU,KACrCoG,EAAOnJ,KAAK,WAAYoJ,EAAOkD,EAAkBF,EAAU,QAASI,SAGvEznB,MAAOrP,IACR6D,QAAQC,MAAM9D,GACdioB,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,GACjE5L,OAAO+B,WAAWM,KAAK,iBAAkB,QAAS,QAAQ,GAC1DrC,OAAOwH,gBACPgE,EAAOnJ,KAAK,YAAaoJ,EAAOC,EAAa,QAAS,CAACoD,EAAW1J,KAChE2J,EAAkBD,EAAW1J,KAE/BN,KAAKkK,mBAAmBj3B,EAAKioB,OAAOuH,YAAa/E,KA0CrD,SAASyM,EAAqB7J,EAAU8J,EAAWC,GACjD,SAAI/J,GAAYA,EAASuI,SAAWhC,MAEpCuD,EAAYA,IAAa,KACPC,GAChBlO,EAAEmO,QAAQvJ,IAAI,CACZxB,MAAO,wBACPtD,KAAM,uFAAuF4K,+FAG7F0D,QAAQ,EACRC,WAAY,QACZC,KAAM,UAIH,GAiBT,SAASV,EAAiBprB,EAAM2hB,EAAU8J,GAAY,EAAMM,GAAa,GAGvE,OAFA5zB,QAAQipB,KAAK,gCAAiCphB,EAAM2hB,EAAU8J,GAEzDzrB,EAGDA,GAAQwrB,EAAqB7J,EAAU8J,EAAWM,IAE3CA,EADFrB,EAAc1qB,EAAM2hB,IAI7BpF,OAAOwH,iBACA,GATWyH,EAAqB,MAAM,GAAO,GAYtD,SAASF,EAAkBtrB,EAAM2hB,EAAU7gB,GACzCipB,EAAmB/pB,EAAM2hB,EAAU7gB,GAmErC,MAAO,CACLkrB,YAjEF,SAAqBC,EAAMzI,EAAS0I,EAAWC,GAC7CpE,EAASmE,EACTlE,EAAQmE,EACRjE,EAAiB,IACjB3L,OAAO+B,WAAWM,KAAK,iBAAkB,QAAS,QAAQ,GAC1D1mB,IAEA6vB,EAAOvJ,GAAG,cAAgBxe,IACxB,GAAIuc,OAAOuH,cAAgB9jB,EAAK0c,OAAQ,CACtC,MAAM0P,EAAU,mBAAmBpsB,EAAK0c,OAAOpnB,QAAQ,MAAO,KAE9D,IAAI+2B,EAAQhE,EAAOM,OAAOC,OACtB5oB,EAAKiX,QAAU,KAAOjX,EAAKiX,QAAU,MAAKoV,EAAQhE,EAAOM,OAAOE,SAChE7oB,EAAKiX,QAAU,MAAKoV,EAAQhE,EAAOM,OAAOG,QAE9CtL,EAAElI,UACGjmB,KAAK,IAAI+8B,cACTvJ,IAAI,CAACwJ,MAAAA,IACL/O,KAAQ5d,KAAKqjB,KAAK/iB,EAAKiX,SAAlB,SAGd8Q,EAAOvJ,GAAG,SAAWxe,IACnBqoB,EAAOpR,QAAU4F,KAAKgO,MAAQxC,EAAOC,UAEjCD,EAAOE,MAAQF,EAAOpR,SAAWoR,EAAOpR,SAAWoR,EAAOG,KAAMH,EAAOG,KAAOH,EAAOpR,QAAcoR,EAAOE,KAAOF,EAAOpR,QAIxHoR,EAAOK,QAAQ1/B,OAAS,EAAKq/B,EAAOK,QAAQ53B,MAAMu3B,EAAOG,KAAOH,EAAOE,MAAQ,IACjFF,EAAOI,IAAMJ,EAAOK,QAAQ7f,OAAO,CAAClgB,EAAGiS,IAAMjS,EAAIiS,GAAKytB,EAAOK,QAAQ1/B,OAErEq/B,EAAOK,QAAU,GACjBL,EAAOG,KAAO,GAGhB,IAAI6D,EAAQhE,EAAOM,OAAOC,OACtBP,EAAOI,IAAM,KAAOJ,EAAOI,IAAM,MAAK4D,EAAQhE,EAAOM,OAAOE,SAC5DR,EAAOI,IAAM,MAAK4D,EAAQhE,EAAOM,OAAOG,QAE5CtL,EAAElI,UACGjmB,KAAK,wCACLwzB,IAAI,CAACwJ,MAAAA,IACL/O,KAAQ5d,KAAKqjB,KAAKsF,EAAOI,KAApB,QAMZV,EAAOvJ,GAAG,qBAAuBO,IAC/B,GAAIkJ,EAAYlJ,WAAaA,EAAU,OAAO,EAC9C,MACMiM,EAAW,CACfhD,MAAOhJ,WAAWgJ,OAASngC,OAAO80B,IAAIC,WACtCF,OAAQsC,WAAWtC,QAAU70B,OAAO80B,IAAImH,YACxC/D,SAAUf,WAAWe,UAAY,YACjChB,SAAAA,EACAjoB,OANa,OAOb4qB,OAAQ,QAEVnF,OAAO+B,WAAWM,KAAK,uBAAwBG,EAAU,OAT1C,QAUfgM,EAAchM,EAAUiM,EAVT,WAgBjBsB,SA5JF,SAAkBvN,EAAUiM,EAAUC,GAEpC,OAAKD,GAAaA,EAAStO,OAMvBuL,GAAeA,EAAYlJ,WAAaA,GAC1CxC,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,IAC1D,QAGT4C,EAAchM,EAAUiM,EAAUC,IAVhC1O,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,IAC1D,IAyJThH,UA5HF,SAAmBpC,EAAU/e,EAAMirB,GACjC9C,EAAW8C,EACXlD,EAAOnJ,KAAK,YAAaoJ,EAAOhoB,EAAM,QAASsrB,IA2H/CF,iBAAAA,EACAE,kBAAAA,EACAiB,cAvIF,SAAuBxN,EAAUiM,EAAUC,GACzC,IAAKD,IAAaA,EAAStO,OAEzB,OADAH,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,IAC1D,EAETJ,EAAOnJ,KAAK,qBAAsBoJ,EAAOjJ,IAmIzCyN,qBAjJF,SAA8BzN,EAAUiM,EAAUC,GAChD,IAAKD,IAAaA,EAAStO,OAEzB,OADAH,OAAO+B,WAAWM,KAAK,sBAAuBG,EAAU,QAASoJ,IAC1D,EAGT4C,EAAchM,EAAUiM,EAAUC,IA4IlC/yB,aAAAA,IA7Xc;ACFlB,aAEA,MAAMu0B,SAAW,MACf,IAAI1E,EAAS,KACTC,EAAQ,KACRE,EAAiB,EACjBwE,EAA2B,EAmB/B,SAASC,EAAe1K,EAASlD,EAAUjoB,GAEzC,GAAuB,iBAAZmrB,IACTA,EAAQ2K,kBAGH3K,EAAQ4K,UAAUz6B,UAAU,OAAO,EAO1C,GAJA2sB,EAAWvB,EAAEx1B,MAAMy4B,KAAK,YAAc1B,EACtCkD,EAAUzE,EAAEx1B,MAAMy4B,KAAK,gBAAkBwB,EACzCnrB,EAAS0mB,EAAEx1B,MAAMy4B,KAAK,cAAgB3pB,GAEjCioB,IAAajoB,EAAQ,OAAO,EAGjC,IAAKylB,OAAOmB,UAAUC,OAEpB,YADAxlB,QAAQipB,KAAK,2BAIf,MAAM0L,EAAUtP,EAAEx1B,MAAMy4B,KAAK,QAI7B,GAAIqM,EAAS,CACC,IAAIxW,IAAIwW,GACZjJ,WAAa3N,SAAS2N,WAAUh8B,OAAOquB,SAAW4W,GAG5D,MAAM9B,EAAW,CACfhD,MAAOhJ,WAAWgJ,OAASngC,OAAO80B,IAAIC,WACtCF,OAAQsC,WAAWtC,QAAU70B,OAAO80B,IAAImH,YACxC/D,SAAUf,WAAWe,UAAY,YACjChB,SAAAA,EACAjoB,OAAAA,EACA4qB,OAAQO,GAIV,GAAqC,UAAjC1F,OAAOmB,UAAUI,YAYnB,OAVAN,EAAEmO,QAAQvJ,IAAI,CACZxB,MAAO,gCACPtD,KAAM,8JAINsO,QAAQ,EACRC,WAAY,QACZC,KAAM,WAED,EAGT,GAAgB,SAAZ7J,EACF1F,OAAO+B,WAAWT,gBAAkBmN,EACpCzO,OAAO+B,WAAWM,KAAK,uBAAwBG,EAAUkD,EAASnrB,GAClEoqB,UAAUoL,SAASvN,EAAUiM,EAAUl0B,QAClC,GAAgB,UAAZmrB,EACT1F,OAAO+B,WAAWT,gBAAkB,KACpCqD,UAAUC,UAAUpC,EAAUiM,EAAUl0B,QACnC,GAAgB,WAAZmrB,EACTf,UAAUqL,cAAcxN,EAAUiM,EAAUl0B,EAAQmrB,QAC/C,GAAgB,cAAZA,EACT8K,EAAehO,EAAUjoB,QACpB,GAAgB,qBAAZmrB,GA0Gb,SAA8BlD,GAC5B,MAAMrC,EAASc,EAAEx1B,MAAMy4B,KAAK,YAAc1B,EACpC3B,EAAOv1B,OAAOm3B,WAAWgO,gBAAgBtQ,GAC/C,IAAKU,EAAM,OAAO,EAClB,MAAM6P,EAAc,+BAA+BvQ,KAAUsL,QAAW,IAAInL,MAAOC,YAC7E6D,EAAWvD,EAAKuD,UAAYsM,EAClCzP,EAAE,kCAAkCF,KAAKF,EAAK2C,UAC9CvC,EAAE,kCAAkCF,KAAKF,EAAK8P,OAC9C1P,EAAE,sCAAsCiD,KAAK,CAC3CtK,KAAMoG,OAAOyH,YAAY5G,EAAK+P,UAC9Br2B,OAAQ,WAGV0mB,EAAE,6BAA6BmN,SAAS,6BACxCnN,EAAE,+BAA+BmN,SAAS,qCAC1CnN,EAAE,+BAA+BqF,IAAI,CAAC5B,QAAS,UAE/CzD,EAAE,uCAAuCqF,IAAI,CAC3CuK,sBAAuB,UACvBC,mBAAoB,OAAO1M,KAC3B2M,oBAAqB,YACrBC,kBAAmB,OACnBC,mBAAoB,YA/HpBC,CAAqB1O,QAChB,GAAgB,gBAAZkD,EAA2B,CACpC,MAAM9L,EAAOqH,EAAEx1B,MAAMy4B,KAAK,QAC1BiN,EAAoBvX,IAIxB,MAAMuX,EAAuBpnB,IAC3BA,EAAMA,GAAOze,OAAOquB,SAASC,KAC7B,MAAMwX,EAAY,IAAIC,gBAAgBtnB,GAChCyY,EAAW4O,EAAUx/B,IAAI,MAC/B,IAAI2I,EAAS62B,EAAUx/B,IAAI,UAC3B,MAAMqT,EAAOmsB,EAAUx/B,IAAI,QAE3B,IAAK4wB,EAAU,OAAO,EAEtB,MACM8O,EADY,IAAIvX,IAAIhQ,GACMud,SAASxiB,MAAM,KAAKsX,MAC9CmV,EAAiB5X,SAAS2N,SAASxiB,MAAM,KAAKsX,MAKpD,IAAK4D,OAAOmB,UAAUW,MAAMlwB,IAAI4wB,GAC9B,OAAI8O,IAAkBC,EAAuBjmC,OAAOquB,SAASC,KAAO7P,GACpEkX,EAAEmO,QAAQvJ,IAAI,CACZxB,MAAO,QACPtD,KAAM,yCACNwO,KAAM,IACNF,QAAQ,EACRC,WAAY,WAEP,GAMI,SAATrqB,GAAmB1K,IACrBA,EAASA,EAAOmD,cAEqB,WAAjCsiB,OAAOmB,UAAUI,aAA4B4O,GAA4B,EAC3E5X,WAAW,KACT3c,QAAQkQ,KAAK,yCACekU,OAAOmB,UAAUI,+CAE7C4O,IACAgB,KACC,MACuC,UAAjCnR,OAAOmB,UAAUI,YAC1BhJ,WAAW,IAAM6X,EAAe,OAAQ5N,EAAUjoB,GAAS,KAE3DqB,QAAQC,MAAM,sCACas0B,iEAExBnQ,OAAOmB,UAAUI,YAAa4O,KAMvCpX,SAAS3mB,iBAAiB,cAAgBa,IACxC,MAAM+kB,MAACA,GAAS/kB,EAAMu+B,OACtB,GAAmB,cAAfxZ,EAAMzhB,KAAsB,CAC9B,MAAMqjB,EAAO5B,EAAM4B,KACnBuX,EAAoBvX,MAKxB,MAAM4W,EAAiB,CAACiB,EAAQl3B,KAC9Bk3B,EAASxQ,EAAEx1B,MAAMy4B,KAAK,YAAcuN,EAEpCl3B,GADAA,EAAS0mB,EAAEx1B,MAAMy4B,KAAK,cAAgB3pB,GACtB2E,cAEhB,MAAMmlB,EAAQrE,OAAOgB,kBAAkBluB,KAAK,UAAUouB,WACjDpuB,KAAK,iBAAiBA,KAAK,YAAY2+B,GAAU1Q,OAIhD2Q,EAAO,GAFEpmC,OAAOquB,SAAS0N,OACd/7B,OAAOquB,SAAS2N,mBACWtH,OAAOc,QAAQuD,SAAaoN,YAAiBl3B,cACnFo3B,EAAQ1Q,EAAE,WAChBA,EAAE,QAAQmC,OAAOuO,GACjBA,EAAMtkB,IAAIqkB,GAAME,SAChB7Y,SAAS8Y,YAAY,QACrBF,EAAMrO,SAENrC,EAAEmO,QAAQvJ,IAAI,CACZxB,MAAO,SACPtD,KAAM,iCACNsO,QAAQ,EACRC,WAAY,sBACZC,KAAM,UAuCV,MAAMuC,EAAsB,KAC1B,MAAMC,EAAY/R,OAAOgB,kBAEzB+Q,EAAU9P,GAAG,QAAS,mBAAoBmO,GAC1CnP,EAAElI,UAAUkJ,GAAG,QAAS,mCAAoCmO,GAE5DnP,EAAElI,UAAUkJ,GAAG,aAAc,8BAA+B,KAC1DhB,EAAElI,UAAUjmB,KAAK,8BAA8Bs7B,SAAS,YACvDnM,GAAG,aAAc,8BAA+B,KACjDhB,EAAElI,UAAUjmB,KAAK,8BAA8B86B,YAAY,YAc7DmE,EAAUj/B,KAAK,UAAUouB,WAAWpuB,KAAK,iBACpCmvB,GAAG,QAAS,oBAAoB,WAC/B,MAAMO,EAAWvB,EAAEx1B,MAAMy4B,KAAK,iBAC9BjD,EAAElI,UACGjmB,KAAK,yCAAyC0vB,OAC9CwP,QAAQ,YAInB/Q,EAAElI,UAAUkJ,GAAG,QAAS,yBAAyB,WAC/C,MAAMO,EAAWvB,EAAEx1B,MAAMy4B,KAAK,aACxBtC,EAAO5B,OAAOmB,UAAUW,MAAMlwB,IAAI4wB,GAGxCvB,EAAE,0BAA0BiD,KAAK,UAAW1B,GAC5CvB,EAAE,gCAAgC2M,YAAY,UAC9C3M,EAAE,2CAA2CF,KAAK,IAGlD,MAAMkR,EAAqC,IAAvBrQ,EAAKyD,MAAMsI,QAAgB,GAAK/L,GAAMA,EAAKyD,MAAMsI,SAAS,EAC9E1M,EAAE,2CAA2CF,KAAKkR,GAEvBrQ,EAAKyD,MAAMxB,KAAK/wB,KAAM87B,GAAMA,EAAEzO,SAAWsC,WAAWtC,SAEvDc,EAAE,gCAAgCmN,SAAS,aAUrEnN,EAAElI,UAAUkJ,GAAG,QAAS,8BAA8B,WACpD,IAAKhB,EAAEx1B,MAAMy4B,KAAK,UAAW,OAAO,EACpCjD,EAAEx1B,MAAMymC,YAAY,SACpBjR,EAAE,6CAA6CqD,MAAK,WAClDrD,EAAEx1B,MAAMumC,QAAQ,eAKpB/Q,EAAElI,UAAUkJ,GAAG,QAAS,mCAAmC,WACzD,MAAMe,EAAS/B,EAAEx1B,MAAM0mC,WACjBC,EAAOnR,EAAElI,UAAUjmB,KAAK,kBACxBqJ,EAAQi2B,EAAKxL,aACnBwL,EAAK9L,IAAI,CACPK,KAAS3D,EAAO2D,KAAOxqB,EAAjB,KACN8mB,IAAQD,EAAOC,IAAM,EAAhB,OAENiP,YAAY,cAIjB,IAAI1mC,EAAO,CACT2lC,oBAAAA,EACAf,eAAAA,EACAiC,kBAAmB,SAA2BpL,GAC5C,GAAIA,EAAQqL,OAAQ,CAClB,MAAMzR,EAAOb,OAAOQ,cAAcyG,EAAQqL,QAC1C,GAAIzR,EAAM,CAER,MAAM2C,EAAW3C,EAAKlqB,MAAQ,YAC9BqpB,OAAOgB,kBACFluB,KAAK,0CAA0C+tB,EAAKV,YACpDmG,IAAI,CAACiM,eAAgB1R,EAAKH,UAAUK,KAAKyC,MAIpDiM,YAAa,CAACC,EAAMzI,EAAS0I,EAAWC,KACtCpE,EAASmE,EACTlE,EAAQmE,EACRjE,EAAiBlJ,WAAWC,OAAO8P,eACnCxS,OAAO+B,WAAWM,KAAK,iBAAkB,OAAQ,QAAQ,GAEzDmJ,EAAOvJ,GAAG,WAAY,CAACxe,EAAM2hB,EAAU7qB,KACrCoqB,UAAUkK,iBAAiBprB,EAAM2hB,GAAU,KAG7CoG,EAAOvJ,GAAG,YAAa,CAACxe,EAAM2hB,EAAU7qB,KACtCoqB,UAAUoK,kBAAkBtrB,EAAM2hB,EAAU7qB,KAG9Cu3B,IAIAvZ,WAAW,KACT4Y,KACC,MAELsB,iBAAkB,KAEhB,MAAMC,EAAY1S,OAAOgB,kBACpB0R,GAGLA,EAAU5/B,KAAK,kCAAkCwxB,MAAK,WACpD,MAAMmC,EAAMxF,EAAEx1B,MACRknC,EAAYlM,EAAIvC,KAAK,MACrB0O,EAAa5S,OAAO+C,qBAAqB4P,GAAWlM,IAI1D,GAAImM,EAAWnmC,QAAU,EAEvB,OADAg6B,EAAInD,UACG,EAGTmD,EAAIH,IAAI,CAACrD,IAAQjD,OAAOmG,eAAeyM,GAAc,GAAvC,WAGlBC,gBAAiB,CAACrQ,EAAUp1B,EAAU,CAAC0lC,aAAa,MAClD,IAAKtQ,EAAU,OAAO,EAEtB,MAAMuQ,EAAY/S,OAAOmB,UAAUW,MAAMxW,IAAIkX,GAC7C,IAAKp1B,EAAQ0lC,aAAeC,EAAW,OAAO,EAE9C,MAAMC,EAAehT,OAAO+C,qBAAqBP,GAEjD,IAAKuQ,GAAaC,EAAatM,MAAO,CACpC,MAAMD,EAAMzG,OAAOgB,kBAAkBluB,KAAK,UACrCouB,WACApuB,KAAK,iBACLmgC,SAAS,OACTngC,KAAK,gBAAgB0vB,GAEpB0Q,EAAiBlT,OAAOgB,kBAAkBluB,KAAK,4BAA4BkwB,SAC3EzoB,EAASylB,OAAOgB,kBAAkBluB,KAAK,iBACvCqgC,EA5LW,CAACtQ,IACtB,MAAMxmB,EAASwmB,EAASuD,cAClBC,EAAarG,OAAOgB,kBAAkBluB,KAAK,4BAA4BwzB,IAAI,eAC3EC,EAAkBjkB,SAAS+jB,EAAY,IAE7C,OADkBljB,KAAKqjB,KAAK3D,EAASG,SAASC,IAAMsD,GACjClqB,EAAS,EAAI,IAuLf8pB,CAAeM,GACtB2M,EAAOjwB,KAAKqjB,KAAK0M,EAAevM,MAChC0M,EAAa5M,EAAI6M,SAASA,SAASC,UAAU9mC,OAE7CgX,EAAO,CACX+vB,aAAchR,EACdiR,YAAaN,EACbO,aAAcN,EACdO,UAAWlN,EAAI1F,OACfsS,WAAAA,EACAb,eAAgB7G,GAGlB3L,OAAOmB,UAAUW,MAAM5vB,IAAIswB,EAAU,CAAC6C,MAAO,CAACxB,KAAM,IAAK0B,MAAO,GAAIC,YAAa,IAEjF,MAAMoO,EAAM3S,EAAE,mBAAmBkC,KAAK1f,GACtClJ,EAAOzH,KAAK,mBAAmBswB,OAAOwQ,GAGtCpI,EAAOnJ,KAAK,mBAAoBoJ,EAAOjJ,EAAWrsB,IAC5CA,GAAQ6pB,OAAOsC,aAAaC,KAAKC,EAAUrsB,KAInD3K,EAAKinC,oBAEPoB,iBAAmBrR,IACjBgJ,EAAOnJ,KAAK,mBAAoBoJ,EAAOjJ,EAAWrsB,IAC5CA,GAAQ6pB,OAAOsC,aAAaC,KAAKC,EAAUrsB,OAKrD,OAAO3K,GAvZQ;ACajB,aAEA,MAAMs5B,KAAO,MAEX,IAAIgP,EAAc,EAClB,MAAMC,EAAa,CAACC,MAAO,QAASC,MAAO,SACrCxqB,EAAW,GACjB,IAAIyqB,EAAmB,KACnBC,EAAc,KACdC,EAAoB,KACxB,MAAM1qB,EAAgB,CACpBzM,SAAU,CAAC,CACTo3B,sBAAsB,KAGpBC,EAAiB,CACrB93B,UAAW,CACT+3B,qBAAqB,EACrBC,qBAAqB,IAInBC,EAAe,GACf9gC,EAAK,GAEL+gC,EAAiB,IAAIC,IAC3B,IAAIC,EAAoB,KACpBnJ,EAAQ,KACRD,EAAS,KAEb,IAAIhgC,EAAO,CAETikC,YAAa,CAACoF,EAAU5N,EAAS0I,EAAWC,KAI1C,GAHAnE,EAAQmE,EACRpE,EAASmE,GAEJlN,WAAWC,OAAQ,MAAM,IAAIr2B,MAAM,qCAExCod,EAASE,WAAa8Y,WAAWC,OAAO/Y,WAEpC8Y,WAAWC,OAAOxmB,MAAM44B,MAAMd,QAChCD,EAAWC,MAAWvR,WAAWC,OAAOxmB,MAAM44B,MAAMd,MAAjC,MAEjBvR,WAAWC,OAAOxmB,MAAM44B,MAAMb,QAChCF,EAAWE,MAAWxR,WAAWC,OAAOxmB,MAAM44B,MAAMb,MAAjC,MAGrBzoC,EAAKupC,KAAO9N,EAAQ7G,KAAO90B,OAAO80B,IAElCa,EAAElI,UAAUkJ,GAAG,SAAU,sBAAuBz2B,EAAKwpC,uBACrD/T,EAAElI,UAAUkJ,GAAG,SAAU,sBAAuBz2B,EAAKwpC,uBACrD/T,EAAElI,UAAUkJ,GAAG,SAAU,sBAAuBz2B,EAAKypC,wBAErDhU,EAAE31B,QAAQ22B,GAAG,SAAU,KACrBrmB,QAAQipB,KAAK,0CACbr5B,EAAK0pC,cAEP1J,EAAOvJ,GAAG,cAAgBgF,IAExB,MAAMkO,EAAUlO,EAAQxjB,KAAK0xB,QACzBA,EAAQC,KAAOpV,OAAOuH,aACtB4N,EAAQ1xB,KAAK+e,WAAal3B,OAAOk3B,UAAUh3B,EAAK6pC,eAAepO,EAAQxjB,KAAK0xB,YAGpFG,uBAAwB,KACtB,MAAMC,EAAkBtU,EAAE,mBAAmBkC,KAAK,CAChDqP,eAAgB/P,WAAWC,OAAO8P,eAClChQ,SAAU,KAGZvB,EAAE,QAAQuU,QAAQD,GAElBtU,EAAElI,UAAUkJ,GAAG,QAAS,iCAAiC,WACvD,MAAMwT,EAAUxU,EAAEx1B,MAAM6nC,SAASA,SAC3BnO,EAASlE,EAAEx1B,MAAMy4B,KAAK,eACtBwR,EAAWzU,EAAE,6BAA6B0U,cAEhD1U,EAAEx1B,MAAMqH,KAAK,sBAAsB8iC,SACnC3U,EAAEx1B,MAAMqH,KAAK,oBAAoB8iC,SAElB,aAAXzQ,GACFlE,EAAEx1B,MAAMy4B,KAAK,CAAC2R,cAAe,WAC7BJ,EAAQ3iC,KAAK,gBAAgBgjC,WAAW,UACxC7U,EAAE,eAAeqF,IAAI,CACnB0H,UAAW,oBAAoB0H,WAGjCzU,EAAEx1B,MAAMy4B,KAAK,CAAC2R,cAAe,aAC7BJ,EAAQ3iC,KAAK,gBAAgBoxB,KAAK,CAAC6R,QAAQ,IAC3C9U,EAAE,eAAeqF,IAAI,CACnB0H,UAAW,2BAKjB/M,EAAElI,UAAUkJ,GAAG,QAAS,4BAA4B,WAClD,MAAM+T,EAASjpC,OAAOiK,KAAKrD,GACrBsiC,EAAQhV,EAAEx1B,MACVyqC,EAAWD,EAAM/R,KAAK,eACtBiS,EAASlV,EAAElI,UAAUjmB,KAAK,6BAEhC,GAAIojC,EAQF,OAPAC,EAAO1S,OACH9vB,EAAGqiC,EAAO,KACZvgC,SAAS9B,EAAGqiC,EAAO,IAAM7/B,IACvBA,EAAO0hB,WAGXoe,EAAMH,WAAW,gBACV,EAEPG,EAAM/R,KAAK,CAACgK,eAAe,IAC3BiI,EAAOzS,OAGL/vB,EAAGqiC,EAAO,MAAQE,GACpB,WACE,MAAME,EAAc,SAAqB3Z,GACvC,MACMqY,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,MAC1C,GAAIrY,GAAS,EACX,MAAO,UAET,MAAMzwB,EAAIsW,SAASa,KAAKkzB,MAAMlzB,KAAKzV,IAAI+uB,GAAStZ,KAAKzV,IAL3C,MAKoD,IAE9D,OAAKonC,EAAM9oC,GAIJ,IAAIywB,EAXD,KAWczwB,GAAGsqC,YAAY,MAAMxB,EAAM9oC,KAH1C,WAMXyJ,SAAS9B,EAAGqiC,EAAO,IAAM7/B,IACvB,MAAMogC,EAAY,CAChBre,MAAOke,EAAYjgC,EAAOwe,UAAUuD,OACpCgC,kBAAmB/jB,EAAO6kB,eAAed,kBACzCsD,uBAAwB4Y,EAAYjgC,EAAOwe,UAAU6I,wBACrDthB,MAAO,CACLs6B,cAAergC,EAAO+F,MAAMsH,KAAK2P,OAAOlO,KAAK,MAC7CuW,YAAe,SAASrlB,EAAOqlB,YAAYhY,KAAKrH,iBAAiBhG,EAAOqlB,YAAYhY,KAAKnH,SACzFmf,YAAe,SAASrlB,EAAOqlB,YAAYhB,KAAKre,iBAAiBhG,EAAOqlB,YAAYhB,KAAKne,SACzF8b,UAAaie,EAAYjgC,EAAO+F,MAAMic,WACtCsC,cAAiB2b,EAAYjgC,EAAO+F,MAAMue,gBAE5Ctc,MAAO,CACLq4B,cAAergC,EAAOgI,MAAMqF,KAAK2P,OAAOlO,KAAK,MAE7CkT,UAAaie,EAAYjgC,EAAOgI,MAAMga,WACtCsC,cAAiB2b,EAAYjgC,EAAOgI,MAAMsc,iBAG9CwG,EAAElI,UAAUjmB,KAAK,6BAA6BozB,KAAK,QAAQloB,KAAKE,UAAUq4B,OAAW3pC,EAAW,aAC/F,KApCL,MAyCJq0B,EAAElI,UAAUkJ,GAAG,QAAS,4BAA6B,KACnDhB,EAAE,kBAAkBiR,YAAY,UAChC,MAAMuE,EAAWxV,EAAE,4BACfwV,EAASvS,KAAK,gBAAgBuS,EAASzE,QAAQ,YAGvDK,kBAAoBpL,IAClB,GAAIA,EAAQqL,OAAQ,CAClB,MAAMzR,EAAOb,OAAOQ,cAAcyG,EAAQqL,QAC1C,GAAIzR,EAAM,CACR,MAAM2C,EAAW3C,EAAKlqB,MAAQ,YAC9BsqB,EAAE,UAAUJ,EAAKV,OAAOpnB,QAAQ,MAAO,MAAQutB,IAAI,CACjDiM,eAAgB1R,EAAKH,UACpBgW,SAAS,cAAc3V,KAAKyC,MAIrCoB,UAAW,CAACzE,EAAQ8G,EAAS7P,MAC3B+I,EAASA,GAAU8G,EAAQwH,SAAStO,SACtBxsB,EAAGwsB,KACfwW,OAAS,UACTnrC,EAAKi4B,KAAKtD,GACV30B,EAAKorC,OAAOzW,GAAQ,IAEtBH,OAAOmB,UAAUE,YAAa,EAC1BjK,GAAUA,KAGhByf,gCAAiC,CAACnH,EAAMzI,KAClCA,EAAQkO,QAAQ1xB,KAAK+e,WAAal3B,OAAOk3B,UAC3Ch3B,EAAK6pC,eAAepO,EAAQkO,UAGhCzR,KAAM,KACJzC,EAAE,cAAcmN,SAAS,gBACzBzJ,UAAUhpB,gBAEZqzB,mBAAoB,CAACj3B,EAAKooB,EAAQqC,KAEhC,IAAIsU,EAKJ,OADAl7B,QAAQC,MAAM,uBAAuB9D,GAC7BA,EAAIpB,MACV,IAAK,0BACHmgC,EAAS,wRACTtrC,EAAKurC,cAAc,gBACnB,MACF,IAAK,8BACHD,EAAS,uFACTtrC,EAAKurC,cAAc,oBACnB,MACF,IAAK,kBAIuB,WAAtBpd,SAASvX,UAA+C,cAAtBuX,SAASqd,UAAkD,cAAtBrd,SAASqd,UAClFF,EAAS,0EACTtrC,EAAKurC,cAAc,gBAEnBD,EAAS,uFACTtrC,EAAKurC,cAAc,qBAErB,MACF,IAAK,gBACHD,EAAS,mJACTtrC,EAAKurC,cAAc,YACnB,MACF,IAAK,mBAEHD,EAAS,mGAAmG/+B,EAAIkI,QAChHzU,EAAKurC,cAAc,YACnB,MACF,IAAK,aAEHD,EAAS,2HAA2H/+B,EAAIkI,QACxIzU,EAAKurC,cAAc,SACnB,MACF,QAEED,EAAS,6CAA6C/+B,EACtDvM,EAAKurC,cAAc,WAEvB9V,EAAEmO,QAAQvJ,IAAI,CACZxB,MAAO,QACPtD,KAAS+V,EAAH,eACNvH,KAAM,IACNF,QAAQ,EACRC,WAAY,UAEdnP,EAASA,GAAUsC,WAAWtC,OAC9BqC,EAAWA,GAAYl3B,OAAOk3B,SAC9BmC,UAAUC,UACNpC,EACA,CACEA,SAAAA,EACAiJ,MAAAA,EACAtL,OAAAA,KAIRsD,KAAOtD,IACL,IAAKA,EAAQ,OAAO,EACpBA,EAASA,EAAOrb,MAAM,KAAK,GAC3Bmc,EAAE,WAAWnuB,KAAK,YAAYqtB,GAAUmT,SAAShQ,UAEnDiL,SAAW/L,IACTh3B,EAAKk4B,OACLl4B,EAAK0pC,YACL1pC,EAAKsR,aAAa0lB,GAClBxC,OAAOmB,UAAUE,YAAa,GAEhCwM,WAAY,CAAC1N,EAAQqC,KACnB,IAAKrC,EAAQ,OAAO,EACpB30B,EAAKi4B,KAAKtD,GACV30B,EAAK0pC,UAAU1S,GACfh3B,EAAKorC,OAAOzW,GAAQ,EAAMqC,GACtBxC,OAAOmB,UAAUK,aAAaxB,OAAOwH,gBACzCxH,OAAOmB,UAAUE,YAAa,GAEhC4V,YAAa,KACX,MAAMC,EAAalX,OAAOmB,UAAUK,YAAY7gB,iBAAiB,GACjE,OAAIu2B,IACFA,EAAWC,SAAWD,EAAWC,SACzBD,EAAWC,UAIvBC,YAAa,KACX,MAAMC,EAAarX,OAAOmB,UAAUK,YAAY5gB,iBAAiB,GACjE,GAAIy2B,EAEF,OADAA,EAAWF,SAAWE,EAAWF,SACzBE,EAAWF,SAGvBG,UAAW,CAACnX,EAAQztB,KAClB,IAAKytB,EAAQ,OAAO,EACpB,MAAMoX,EAAUpX,IAAWH,OAAOuH,YAC5BsI,EAAU,SAAS1P,EAAOpnB,QAAQ,MAAO,KAC/C,IAAImD,EAAQ+kB,EAAE,IAAI4O,GAAW,GAE7B,MAAMhP,EAAOb,OAAOQ,cAAcL,GAElC,IAAKjkB,GAASxJ,EAAQ,CACpB,MAAM8kC,EAAiBvW,EAAE,iCAAiCqF,IAAI,CAC5DnqB,MAAS43B,EAAWE,MACpBwD,aAAc1D,EAAWE,QACxByD,SAASzW,EAAE,8BACRuC,EAAW3C,EAAKlqB,MAAQ,YAC9B6gC,EAAepU,OAAOnC,EAAE,2BAA2BF,KAAKyC,IAExDtnB,EAAQ+kB,EAAE,uBAAuBiD,KAAK,KAAM2L,GAASvJ,IAAI,CACvDiM,eAAgB1R,EAAKH,QACrBvkB,MAAS43B,EAAWE,MACpBwD,aAAc1D,EAAWE,QACxBhS,GAAG,CACJ0V,eAAgB,IAAOnsC,EAAKosC,aAAazX,KACxCuX,SAASF,GAAgB,GAE5Bt7B,EAAM27B,UAAW,EACbN,IACFC,EAAepJ,SAAS,cACxBlyB,EAAM47B,OAAQ,GAEhBtsC,EAAKosC,aAAazX,GAEhBztB,EACFqlC,EAAkB77B,EAAOxJ,GAChBwJ,GACT+kB,EAAE/kB,GAAOo3B,SAAShQ,UAGtBsU,aAAezX,IACb,IAAKA,EAAQ,OAAO,EACpB,MAAMoX,EAAUpX,IAAWH,OAAOuH,YAC5BsI,EAAU,SAAS1P,EAAOpnB,QAAQ,MAAO,KACzCi/B,EAAS/W,EAAE,IAAI4O,GAErB,IAAIoI,EAAQhX,EAAE,qDAAqDiD,KAAK,QAAS,QAAQjC,GAAG,CAC1FiW,MAAO,WACL,IAAIJ,EACAP,EACFO,EAAQtsC,EAAKyrC,eAEbe,EAAO,GAAGF,OAASE,EAAO,GAAGF,MAC7BA,EAAQE,EAAO,GAAGF,OAEpBG,EAAM/T,KAAK,QAAS4T,EAAQ,SAAW,QAAQ5F,YAAY,QAAS4F,MAGxE,IAAIK,GAAe,EACnB,IAAIC,EAAgBb,EAAUtW,EAAE,qDAAqDiD,KAAK,QAAS,iBAAiBjC,GAAG,CACrHiW,MAAO,KACL1sC,EAAK4rC,cACLe,GAAgBA,EAChBC,EAAclU,KAAK,QAASiU,EAAe,gBAAkB,gBAAgBjG,YAAY,OAAQiG,MAEhG,KAEL,IAAIE,GAAgB,EACpB,IAAIC,EAAcrX,EAAE,uDAAuDiD,KAAK,QAAS,qBAAqBjC,GAAG,CAC/GiW,MAAO,KACLG,GAAiBA,EAEbA,EACF3D,EAAe7O,IAAI1F,GAEnBuU,EAAelpB,OAAO2U,GAGxBmY,EAAYpU,KAAK,QAASmU,EAAgB,qBAAuB,qBAAqBnG,YAAY,QAASmG,GAE3G,MAAME,EAAYtX,EAAElI,UAAUjmB,KAAK,kCAAkC0lC,SAAS,SAAWzE,EAAWC,MAAQD,EAAWE,MACvH+D,EAAO1E,SAAShN,IAAI,CAACnqB,MAASo8B,EAAWd,aAAcc,IACvDP,EAAO1R,IAAI,CAACnqB,MAASo8B,EAAWd,aAAcc,OAI9CtX,EAAElI,UAAUjmB,KAAK,kCAAkC0lC,SAAS,WAC9DR,EAAO1E,SAAShN,IAAI,CAACnqB,MAAS43B,EAAWC,MAAOyD,aAAc1D,EAAWC,QACzEgE,EAAO1R,IAAI,CAACnqB,MAAS43B,EAAWC,MAAOyD,aAAc1D,EAAWC,SAG9DuD,IAAS3C,EAAoBoD,GAEjC,MAAMS,EAAkBxX,EAAE,+BAE1BA,EAAE,cAAc4O,GAAWvM,SAC3BrC,EAAE,qCAAqCiD,KAAK,KAAM,aAAa2L,GAAWzM,OAAO6U,GAAO7U,OAAOgV,GAAehV,OAAOkV,GAAalV,OAAOqV,GAAiBC,YAAYV,GACtKxsC,EAAKypC,0BAIP8B,cAAgB4B,IACd,MAAMC,EAAM,CAACtqB,UAAW,MAAO/X,KAAM,QAASkN,KAAM,CAACk1B,SAAAA,EAAUpiC,KAAM,gBACrEi1B,EAAOnJ,KAAK,gBAAiBoJ,EAAOngC,OAAOk3B,UAC3CgJ,EAAOnJ,KAAK,UAAWuW,IAEzBC,YAAa,CAACzD,EAAI3xB,EAAMq1B,KACtBtN,EAAOnJ,KAAK,cAAe,CACzB9rB,KAAM,cACN4+B,QAAS,CAAC1xB,KAAAA,EAAM2xB,GAAAA,EAAI3J,MAAAA,EAAOsN,KAAM/Y,OAAOuH,YAAaiE,OAAQ,CAACuN,KAAMvN,EAAOx4B,GAAIoiC,GAAI0D,KACjFr1B,QASN4xB,eAAiBuD,IACf,MAAMjhB,EAAOihB,EAAIG,KACXt1B,EAAOm1B,EAAIn1B,KACXlN,EAAOkN,EAAKlN,KAClB,GAAIohB,IAASqI,OAAOuH,YAQpB,GAAa,WAAThxB,EACF/K,EAAKorC,OAAOjf,GAAM,QACb,GAAa,UAATphB,EAAkB,CACvB5C,EAAGgkB,IACLnsB,EAAKorC,OAAOjf,GAAM,GAClBnsB,EAAKwtC,qBAAqBrhB,EAAMlU,EAAK+e,WAErCh3B,EAAKwtC,qBAAqBrhB,EAAMlU,EAAK+e,UAEnCxC,OAAOmB,UAAUK,cACf7tB,EAAGgkB,GAAMxf,gBACNxE,EAAGgkB,GAAMxf,kBAAkB1L,QAC9BuzB,OAAOmB,UAAUK,YAAYluB,YAAYC,QAASR,IAChDY,EAAGgkB,GAAMtjB,SAAStB,EAAOitB,OAAOmB,UAAUK,eAKrC7tB,EAAGgkB,GAAMshB,eACbtlC,EAAGgkB,GAAMshB,aAAaxsC,QACzBuzB,OAAOmB,UAAUK,YAAYluB,YAAYC,QAASR,IAChDY,EAAGgkB,GAAMtjB,SAAStB,EAAOitB,OAAOmB,UAAUK,iBAMlD,MAAM0X,EAAQ,IAAIjgC,sBAAsBwK,EAAKy1B,OAC7CvlC,EAAGgkB,GAAMplB,qBAAqB2mC,EAAO,KACnCvlC,EAAGgkB,GAAMrS,aAAcxL,IACrBA,EAAK7L,IAAMkrC,EAAWr/B,EAAK7L,KAC3B0F,EAAGgkB,GAAM3d,oBAAoBF,EAAM,KACjCtO,EAAKqtC,YAAYlhB,EAAM,CAACphB,KAAM,SAAU6iC,OAAQt/B,EAAM0oB,SAAU/e,EAAK+e,YACpE6W,IACFA,EAAU/E,IACZ+E,QACE,GAAa,WAAT9iC,GACT,GAAI5C,EAAGgkB,GAAO,CACZ,MAAMyhB,EAAS,IAAIngC,sBAAsBwK,EAAK21B,QAC9CzlC,EAAGgkB,GAAMplB,qBAAqB6mC,EAAQ,OAEnCC,SAEA,GAAa,iBAAT9iC,GACT,GAAI5C,EAAGgkB,GAAO,CACZ,MAAM3W,EAAY,IAAI1G,gBAAgBmJ,EAAKzC,WACrCzU,EAAIoH,EAAGgkB,GAAMxS,gBAAgBnE,GAC/BzU,GACFA,EAAE+K,KAAK,QAEJ8P,MAAM,KACPxL,QAAQC,MAAM,2CAA4C4H,WAKhE7H,QAAQC,MAAM,0BAA2B4H,IAG7CyxB,UAAYoE,IACVvsC,OAAOiK,KAAKrD,GAAIJ,QAAS4sB,IACvB30B,EAAKorC,OAAOzW,GAAQ,EAAMmZ,MAG9B1C,OAAQ,SAAUzW,EAAQoZ,EAAQ/W,GAChC+W,EAA8B,IAArBpsC,UAAUV,QAAsB8sC,EACrC5lC,EAAGwsB,IAAWA,IAAWH,OAAOuH,cAClC/7B,EAAK8rC,UAAUnX,EAAQ,IACvBxsB,EAAGwsB,GAAQqZ,eACJ7lC,EAAGwsB,GACNoZ,GAAQ/tC,EAAKqtC,YAAY1Y,EAAQ,CAAC5pB,KAAM,SAAUisB,SAAAA,MAG1Dh2B,KAAM,CAAC2zB,EAAQqC,KAKb,IAAIzmB,EAAc,CAACkB,SAAU,GAAIT,UAAW,IAE5C,GAA8B,WAA1Bi9B,EACF,IAAK,MAAMC,KAAQ39B,EAAYS,WACA,IAAzBk9B,EAAK/kC,QAAQ,eACRoH,EAAYS,UAAUk9B,GAInC39B,EAAc49B,EAAiB59B,EAAau4B,GAEvC3gC,EAAGwsB,IAAS30B,EAAKwtC,qBAAqB7Y,EAAQqC,GAKnDxC,OAAOmB,UAAUK,YAAYluB,YAAYC,QAASR,IAChDY,EAAGwsB,GAAQ9rB,SAAStB,EAAOitB,OAAOmB,UAAUK,eAG9C7tB,EAAGwsB,GAAQ9a,YAAavL,IACtBA,EAAK7L,IAAMkrC,EAAWr/B,EAAK7L,KAC3B0F,EAAGwsB,GAAQnmB,oBAAoBF,EAAM,KACnCtO,EAAKqtC,YAAY1Y,EAAQ,CAAC5pB,KAAM,QAAS2iC,MAAOp/B,EAAM0oB,SAAAA,KACrD6W,IACFA,EAAUt9B,IAEfi9B,qBAAsB,CAAC7Y,EAAQqC,KACzB7uB,EAAGwsB,IACLvkB,QAAQkQ,KAAK,wDAAyDqU,GAExExsB,EAAGwsB,GAAU,IAAInuB,kBAAkByX,EAAUC,GAC7C/V,EAAGwsB,GAAQyZ,eAAmB3mC,IACxBA,EAAM+N,UACRxV,EAAKqtC,YAAY1Y,EAAQ,CACvB5pB,KAAM,eACNisB,SAAAA,EACAxhB,UAAW/N,EAAM+N,aAGnB8yB,EAAc,EACdtI,EAAOnJ,KAAK,gBAAiBoJ,EAAOngC,OAAOk3B,YAG/C7uB,EAAGwsB,GAAQ0Z,2BAA6B,KACtCj+B,QAAQipB,KAAK,sBAAuBlxB,EAAGwsB,GAASxsB,EAAGwsB,GAAQ9b,qBAE7D1Q,EAAGwsB,GAAQ2Z,QAAW7mC,IACpB2I,QAAQlO,IAAIuF,EAAO,WACnBwhC,EAAatU,GAAUltB,EAAMG,QAAQ,GACrC5H,EAAK8rC,UAAUnX,EAAQltB,EAAMG,QAAQ,KAEvCO,EAAGwsB,GAAQ4Z,eAAiB,IAAMvuC,EAAK8rC,UAAUnX,EAAQ,KAE3D6U,sBAAuB,KACrBhV,OAAOwH,cAAc,KACnBh8B,EAAKsR,aAAaxR,OAAOk3B,aAG7BwX,aAAe,CAACC,EAASC,KAEnBD,GAAWA,EAAQ,SAAmC,IAAtBA,EAAQ,GAAGC,OAC7CD,EAAQ,GAAGE,UAAUD,GAAQ5iC,KAAK,QAE/B8P,MAAOvL,IACR,IAAIu+B,EAAev+B,EACA,kBAAfA,EAAMlF,OACRyjC,EAAe,4DAA4Dv+B,GAE7ED,QAAQC,MAAM,WAAYA,GAE1Bu4B,EAAkBiG,cAAgB,KAGpCz+B,QAAQkQ,KAAK,qDACbmV,EAAElI,UAAUjmB,KAAK,yCAAyC2wB,SAG9DwR,uBAAwB,KACtB,MACMqF,EADoBvhB,SAASyL,cAAc,yCACNv3B,MACrCogC,EAAeuH,EACrBppC,EAAKwuC,aAAa3M,EAAciN,IAElCx9B,aAAe0lB,IACb,MAAM+X,EAAmB,CACvBp8B,OAAO,EACPjC,MAAO,CACLC,MAAO,IACPE,OAAQ,IACRE,UAAW,CAACY,MAAO,GAAIG,IAAK,IAC5BiB,WAAY,SAIhB21B,EAAmBnb,SAASyL,cAAc,8BAC1C4P,EAAoBrb,SAASyL,cAAc,iCAC3C2P,EAAcpb,SAASyL,cAAc,8BAErC,MAAMgW,EAActG,GAAoBA,EAAiBjnC,MACnDwtC,EAActG,GAAeA,EAAYlnC,MACzCytC,EAActG,GAAqBA,EAAkBnnC,MAEvDutC,IAAaD,EAAiBp8B,MAAMiB,SAAW,CAAChC,MAAOo9B,IAEvDC,IAAaF,EAAiBr+B,MAAMkD,SAAW,CAAChC,MAAOq9B,IAG3D9N,aAAagO,QAAQ,gBAAiB38B,KAAKE,UAAU,CAAC2uB,WAAY2N,EAAa1N,QAAS4N,EAAa3N,OAAQ0N,KAC7GxZ,EAAE,6BAA6B2M,YAAY,UAAUnK,OAErDn4B,OAAOoQ,UAAUC,aACZmB,aAAay9B,GACbjjC,KAAM5E,IACLstB,OAAOmB,UAAUK,YAAc9uB,EAC/BlH,EAAK8rC,UAAUtX,OAAOuH,YAAa70B,GACnClH,EAAKupC,KAAKpU,aAAaC,oBAAoBrtB,QAASstB,IAC9CA,EAAKV,SAAWH,OAAOuH,cACrB5zB,EAAGktB,EAAKV,SACV30B,EAAKorC,OAAO/V,EAAKV,QAAQ,EAAOqC,GAElCh3B,EAAKgB,KAAKq0B,EAAKV,OAAQqC,QAG1Bpb,MAAOrP,IACRvM,EAAKwjC,mBAAmBj3B,EAAKioB,OAAOuH,YAAa/E,MAGzDuC,mBAAoB,KAGlB,GAFA+O,IACAl4B,QAAQlO,IAAI,2BAA4BomC,EAlnBrB,IAAA,IAmnBGA,EAEpB,MADAtI,EAAOnJ,KAAK,gBAAiBoJ,EAAOngC,OAAOk3B,UACrC,IAAIn2B,MAAM,kEAElBksB,WAAW,KACT3c,QAAQlO,IAAI,2BACZlC,EAAKsR,aAAaxR,OAAOk3B,WACxBoY,EAAsB,IAAK,QAMlC,MAAM7C,EAAoB,CAACkC,EAASvnC,UACD,IAAtBunC,EAAQY,UACjBZ,EAAQY,UAAYnoC,OACqB,IAAzBunC,EAAQa,aACxBb,EAAQa,aAAepoC,OACS,IAAhBunC,EAAQ9V,IACxB8V,EAAQ9V,IAAMpK,IAAIC,gBAAgBtnB,GAElCkJ,QAAQC,MAAM,qCAAsCo+B,IAIxD,IAAIR,EAAwB,SAE5B,MAAMN,EAAclrC,IAClB,MAAM0mB,EAAY,CAChBmF,OAAQ,IACR3b,MAAO,IACPjC,MAAO,IACP6+B,SAAU,IACVC,SAAU,KACVhR,WAAYvH,WAAWC,OAAOxmB,MAAMsT,OActC,OATAvhB,EAAM25B,cAAc8B,gCAAgCz7B,EAAK0mB,GAFjC,GAGxB1mB,EAAM25B,cAAciC,iBAAiB57B,EAAK,CACxCoP,IAAKsX,EAAUomB,SACfz9B,IAAKqX,EAAUqmB,SACfxrB,MAAOmF,EAAUqV,aAEnB/7B,EAAM25B,cAAc4C,kBAAkBv8B,GACtCA,EAAM25B,cAAcC,YAAY55B,EAAK0mB,EAAUqV,aAK3C2P,EAAmB,CAACsB,EAAOC,KAC/B,MAAMC,EAASF,EACf,IAAK,MAAMtkC,KAAQukC,EAAM1+B,UACvB2+B,EAAO3+B,UAAU7F,GAAQukC,EAAM1+B,UAAU7F,GAG3C,OADAwkC,EAAOl+B,SAAS9B,OAAO+/B,EAAMj+B,UACtBk+B,GAGHP,EAAwB,CAACv9B,EAAKC,IAAQ6F,KAAKkzB,MAAMlzB,KAAKyK,UAAYtQ,EAAMD,EAAM,GAAKA,GAEnFg8B,EAAYx9B,IAEhBrQ,EAAKu5B,qBAILnpB,QAAQC,MAAM,oBAAqBA,GACnColB,EAAE,6BACGyC,OACA0K,SAAS,UACTrN,KAAK,kBAAkBllB,2BAI9B,OADArQ,EAAKmI,GAAKA,EACHnI,GAhsBI","file":"wrtc.heading.mini.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n\n  'use strict';\n\n  var _adapter_factory = require('./adapter_factory.js');\n\n  var adapter = (0, _adapter_factory.adapterFactory)({ window: typeof window === 'undefined' ? undefined : window });\n  module.exports = adapter; // this is the difference from adapter_core.\n\n  },{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.adapterFactory = adapterFactory;\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  var _chrome_shim = require('./chrome/chrome_shim');\n\n  var chromeShim = _interopRequireWildcard(_chrome_shim);\n\n  var _firefox_shim = require('./firefox/firefox_shim');\n\n  var firefoxShim = _interopRequireWildcard(_firefox_shim);\n\n  var _safari_shim = require('./safari/safari_shim');\n\n  var safariShim = _interopRequireWildcard(_safari_shim);\n\n  var _common_shim = require('./common_shim');\n\n  var commonShim = _interopRequireWildcard(_common_shim);\n\n  var _sdp = require('sdp');\n\n  var sdp = _interopRequireWildcard(_sdp);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  // Shimming starts here.\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  function adapterFactory() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        window = _ref.window;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      shimChrome: true,\n      shimFirefox: true,\n      shimSafari: true\n    };\n\n    // Utils.\n    var logging = utils.log;\n    var browserDetails = utils.detectBrowser(window);\n\n    var adapter = {\n      browserDetails: browserDetails,\n      commonShim: commonShim,\n      extractVersion: utils.extractVersion,\n      disableLog: utils.disableLog,\n      disableWarnings: utils.disableWarnings,\n      // Expose sdp as a convenience. For production apps include directly.\n      sdp: sdp\n    };\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n      case 'chrome':\n        if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n          logging('Chrome shim is not included in this adapter release.');\n          return adapter;\n        }\n        if (browserDetails.version === null) {\n          logging('Chrome shim can not determine version, not shimming.');\n          return adapter;\n        }\n        logging('adapter.js shimming chrome.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = chromeShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        chromeShim.shimGetUserMedia(window, browserDetails);\n        chromeShim.shimMediaStream(window, browserDetails);\n        chromeShim.shimPeerConnection(window, browserDetails);\n        chromeShim.shimOnTrack(window, browserDetails);\n        chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n        chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n        chromeShim.shimGetStats(window, browserDetails);\n        chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n        chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      case 'firefox':\n        if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n          logging('Firefox shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming firefox.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = firefoxShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        firefoxShim.shimGetUserMedia(window, browserDetails);\n        firefoxShim.shimPeerConnection(window, browserDetails);\n        firefoxShim.shimOnTrack(window, browserDetails);\n        firefoxShim.shimRemoveStream(window, browserDetails);\n        firefoxShim.shimSenderGetStats(window, browserDetails);\n        firefoxShim.shimReceiverGetStats(window, browserDetails);\n        firefoxShim.shimRTCDataChannel(window, browserDetails);\n        firefoxShim.shimAddTransceiver(window, browserDetails);\n        firefoxShim.shimGetParameters(window, browserDetails);\n        firefoxShim.shimCreateOffer(window, browserDetails);\n        firefoxShim.shimCreateAnswer(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        break;\n      case 'safari':\n        if (!safariShim || !options.shimSafari) {\n          logging('Safari shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming safari.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = safariShim;\n\n        // Must be called before shimCallbackAPI.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        safariShim.shimRTCIceServerUrls(window, browserDetails);\n        safariShim.shimCreateOfferLegacy(window, browserDetails);\n        safariShim.shimCallbacksAPI(window, browserDetails);\n        safariShim.shimLocalStreamsAPI(window, browserDetails);\n        safariShim.shimRemoteStreamsAPI(window, browserDetails);\n        safariShim.shimTrackEventTransceiver(window, browserDetails);\n        safariShim.shimGetUserMedia(window, browserDetails);\n        safariShim.shimAudioContext(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      default:\n        logging('Unsupported browser!');\n        break;\n    }\n\n    return adapter;\n  }\n\n  // Browser shims.\n\n  },{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":10,\"./utils\":11,\"sdp\":12}],3:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimMediaStream = shimMediaStream;\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\n  exports.shimGetStats = shimGetStats;\n  exports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\n  exports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\n  exports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.fixNegotiationNeeded = fixNegotiationNeeded;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimMediaStream(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function get() {\n          return this._ontrack;\n        },\n        set: function set(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        },\n\n        enumerable: true,\n        configurable: true\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var _this = this;\n\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = function (e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function (te) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = { track: te.track };\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function (track) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = { track: track };\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n    } else {\n      // even if RTCRtpTransceiver is in window, it is only used and\n      // emitted in unified-plan. Unfortunately this means we need\n      // to unconditionally wrap the event.\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        if (!e.transceiver) {\n          Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n        }\n        return e;\n      });\n    }\n  }\n\n  function shimGetSendersWithDtmf(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n          var sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          var idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this2 = this;\n\n        this._senders = this._senders || [];\n        origAddStream.apply(this, [stream]);\n        stream.getTracks().forEach(function (track) {\n          _this2._senders.push(shimSenderWithDtmf(_this2, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(function (track) {\n          var sender = _this3._senders.find(function (s) {\n            return s.track === track;\n          });\n          if (sender) {\n            // remove sender\n            _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n          }\n        });\n      };\n    } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this4 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this4;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function get() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  }\n\n  function shimGetStats(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _this5 = this;\n\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n\n\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function fixChromeStats_(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function (report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function (name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function makeMapStats(stats) {\n        return new Map(Object.keys(stats).map(function (key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n          onSucc(makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n      }\n\n      // promise-support\n      return new Promise(function (resolve, reject) {\n        origGetStats.apply(_this5, [function (response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n      return;\n    }\n\n    // shim sender stats.\n    if (!('getStats' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      if (origGetSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          var _this6 = this;\n\n          var senders = origGetSenders.apply(this, []);\n          senders.forEach(function (sender) {\n            return sender._pc = _this6;\n          });\n          return senders;\n        };\n      }\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      if (origAddTrack) {\n        window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n          var sender = origAddTrack.apply(this, arguments);\n          sender._pc = this;\n          return sender;\n        };\n      }\n      window.RTCRtpSender.prototype.getStats = function getStats() {\n        var sender = this;\n        return this._pc.getStats().then(function (result) {\n          return (\n            /* Note: this will include stats of all senders that\n             *   send a track with the same id as sender.track as\n             *   it is not possible to identify the RTCRtpSender.\n             */\n            utils.filterStats(result, sender.track, true)\n          );\n        });\n      };\n    }\n\n    // shim receiver stats.\n    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n      if (origGetReceivers) {\n        window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n          var _this7 = this;\n\n          var receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(function (receiver) {\n            return receiver._pc = _this7;\n          });\n          return receivers;\n        };\n      }\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        e.receiver._pc = e.srcElement;\n        return e;\n      });\n      window.RTCRtpReceiver.prototype.getStats = function getStats() {\n        var receiver = this;\n        return this._pc.getStats().then(function (result) {\n          return utils.filterStats(result, receiver.track, false);\n        });\n      };\n    }\n\n    if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n      return;\n    }\n\n    // shim RTCPeerConnection.getStats(track).\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n        var track = arguments[0];\n        var sender = void 0;\n        var receiver = void 0;\n        var err = void 0;\n        this.getSenders().forEach(function (s) {\n          if (s.track === track) {\n            if (sender) {\n              err = true;\n            } else {\n              sender = s;\n            }\n          }\n        });\n        this.getReceivers().forEach(function (r) {\n          if (r.track === track) {\n            if (receiver) {\n              err = true;\n            } else {\n              receiver = r;\n            }\n          }\n          return r.track === track;\n        });\n        if (err || sender && receiver) {\n          return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n        } else if (sender) {\n          return sender.getStats();\n        } else if (receiver) {\n          return receiver.getStats();\n        }\n        return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n      }\n      return origGetStats.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrackWithNative(window) {\n    // shim addTrack/removeTrack with native variants in order to make\n    // the interactions with legacy getLocalStreams behave as in other browsers.\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this8 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n        return _this8._shimmedLocalStreams[streamId][0];\n      });\n    };\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      var sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this9 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this9.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      var existingSenders = this.getSenders();\n      origAddStream.apply(this, arguments);\n      var newSenders = this.getSenders().filter(function (newSender) {\n        return existingSenders.indexOf(newSender) === -1;\n      });\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this10 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n          var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (_this10._shimmedLocalStreams[streamId].length === 1) {\n            delete _this10._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrack(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n      return shimAddTrackRemoveTrackWithNative(window);\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this11 = this;\n\n      var nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(function (stream) {\n        return _this11._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this12 = this;\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this12.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!this._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(this, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n      delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n      delete this._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      var _this13 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n        return t === track;\n      })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n      }\n\n      var alreadyExists = this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      var oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function () {\n          _this13.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        var _this14 = this;\n\n        var args = arguments;\n        var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(this, [function (description) {\n            var desc = replaceInternalStreamId(_this14, description);\n            args[0].apply(null, [desc]);\n          }, function (err) {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]]);\n        }\n        return nativeMethod.apply(this, arguments).then(function (description) {\n          return replaceInternalStreamId(_this14, description);\n        });\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n\n    var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n      get: function get() {\n        var description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this15 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      var stream = void 0;\n      Object.keys(this._streams).forEach(function (streamid) {\n        var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = _this15._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.webkitRTCPeerConnection;\n    }\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    if (browserDetails.version < 53) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n  }\n\n  // Attempt to fix ONN in plan-b mode.\n  function fixNegotiationNeeded(window, browserDetails) {\n    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n      var pc = e.target;\n      if (browserDetails.version < 72 || pc.getConfiguration && pc.getConfiguration().sdpSemantics === 'plan-b') {\n        if (pc.signalingState !== 'stable') {\n          return;\n        }\n      }\n      return e;\n    });\n  }\n\n  },{\"../utils.js\":11,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, getSourceId) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    // getSourceId is a function that returns a promise resolving with\n    // the sourceId of the screen/window/tab to be shared.\n    if (typeof getSourceId !== 'function') {\n      console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      return getSourceId(constraints).then(function (sourceId) {\n        var widthSpecified = constraints.video && constraints.video.width;\n        var heightSpecified = constraints.video && constraints.video.height;\n        var frameRateSpecified = constraints.video && constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n    };\n  }\n\n  },{}],5:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  var logging = utils.log;\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.mediaDevices) {\n      return;\n    }\n\n    var constraintsToChrome_ = function constraintsToChrome_(c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n        return c;\n      }\n      var cc = {};\n      Object.keys(c).forEach(function (key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n        if (r.exact !== undefined && typeof r.exact === 'number') {\n          r.min = r.max = r.exact;\n        }\n        var oldname_ = function oldname_(prefix, name) {\n          if (prefix) {\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n          }\n          return name === 'deviceId' ? 'sourceId' : name;\n        };\n        if (r.ideal !== undefined) {\n          cc.optional = cc.optional || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[oldname_('min', key)] = r.ideal;\n            cc.optional.push(oc);\n            oc = {};\n            oc[oldname_('max', key)] = r.ideal;\n            cc.optional.push(oc);\n          } else {\n            oc[oldname_('', key)] = r.ideal;\n            cc.optional.push(oc);\n          }\n        }\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\n          cc.mandatory = cc.mandatory || {};\n          cc.mandatory[oldname_('', key)] = r.exact;\n        } else {\n          ['min', 'max'].forEach(function (mix) {\n            if (r[mix] !== undefined) {\n              cc.mandatory = cc.mandatory || {};\n              cc.mandatory[oldname_(mix, key)] = r[mix];\n            }\n          });\n        }\n      });\n      if (c.advanced) {\n        cc.optional = (cc.optional || []).concat(c.advanced);\n      }\n      return cc;\n    };\n\n    var shimConstraints_ = function shimConstraints_(constraints, func) {\n      if (browserDetails.version >= 61) {\n        return func(constraints);\n      }\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (constraints && _typeof(constraints.audio) === 'object') {\n        var remap = function remap(obj, a, b) {\n          if (a in obj && !(b in obj)) {\n            obj[b] = obj[a];\n            delete obj[a];\n          }\n        };\n        constraints = JSON.parse(JSON.stringify(constraints));\n        remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n        remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n        constraints.audio = constraintsToChrome_(constraints.audio);\n      }\n      if (constraints && _typeof(constraints.video) === 'object') {\n        // Shim facingMode for mobile & surface pro.\n        var face = constraints.video.facingMode;\n        face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n        var getSupportedFacingModeLies = browserDetails.version < 66;\n\n        if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n          delete constraints.video.facingMode;\n          var matches = void 0;\n          if (face.exact === 'environment' || face.ideal === 'environment') {\n            matches = ['back', 'rear'];\n          } else if (face.exact === 'user' || face.ideal === 'user') {\n            matches = ['front'];\n          }\n          if (matches) {\n            // Look for matches in label, or use last cam for back (typical).\n            return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n              devices = devices.filter(function (d) {\n                return d.kind === 'videoinput';\n              });\n              var dev = devices.find(function (d) {\n                return matches.some(function (match) {\n                  return d.label.toLowerCase().includes(match);\n                });\n              });\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n          }\n        }\n        constraints.video = constraintsToChrome_(constraints.video);\n      }\n      logging('chrome: ' + JSON.stringify(constraints));\n      return func(constraints);\n    };\n\n    var shimError_ = function shimError_(e) {\n      if (browserDetails.version >= 64) {\n        return e;\n      }\n      return {\n        name: {\n          PermissionDeniedError: 'NotAllowedError',\n          PermissionDismissedError: 'NotAllowedError',\n          InvalidStateError: 'NotAllowedError',\n          DevicesNotFoundError: 'NotFoundError',\n          ConstraintNotSatisfiedError: 'OverconstrainedError',\n          TrackStartError: 'NotReadableError',\n          MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n          MediaDeviceKillSwitchOn: 'NotAllowedError',\n          TabCaptureError: 'AbortError',\n          ScreenCaptureError: 'AbortError',\n          DeviceCaptureError: 'AbortError'\n        }[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraint || e.constraintName,\n        toString: function toString() {\n          return this.name + (this.message && ': ') + this.message;\n        }\n      };\n    };\n\n    var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n      shimConstraints_(constraints, function (c) {\n        navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n          if (onError) {\n            onError(shimError_(e));\n          }\n        });\n      });\n    };\n    navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    if (navigator.mediaDevices.getUserMedia) {\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (cs) {\n        return shimConstraints_(cs, function (c) {\n          return origGetUserMedia(c).then(function (stream) {\n            if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n              stream.getTracks().forEach(function (track) {\n                track.stop();\n              });\n              throw new DOMException('', 'NotFoundError');\n            }\n            return stream;\n          }, function (e) {\n            return Promise.reject(shimError_(e));\n          });\n        });\n      };\n    }\n  }\n\n  },{\"../utils.js\":11}],6:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimRTCIceCandidate = shimRTCIceCandidate;\n  exports.shimMaxMessageSize = shimMaxMessageSize;\n  exports.shimSendThrowTypeError = shimSendThrowTypeError;\n  exports.shimConnectionState = shimConnectionState;\n  exports.removeExtmapAllowMixed = removeExtmapAllowMixed;\n  exports.shimAddIceCandidateNullOrEmpty = shimAddIceCandidateNullOrEmpty;\n  exports.shimParameterlessSetLocalDescription = shimParameterlessSetLocalDescription;\n\n  var _sdp = require('sdp');\n\n  var _sdp2 = _interopRequireDefault(_sdp);\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function shimRTCIceCandidate(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function RTCIceCandidate(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      if (args.candidate && args.candidate.length) {\n        // Augment the native candidate with the parsed fields.\n        var nativeCandidate = new NativeRTCIceCandidate(args);\n        var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n        var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n        // Add a serializer that does not serialize the extra attributes.\n        augmentedCandidate.toJSON = function toJSON() {\n          return {\n            candidate: augmentedCandidate.candidate,\n            sdpMid: augmentedCandidate.sdpMid,\n            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n            usernameFragment: augmentedCandidate.usernameFragment\n          };\n        };\n        return augmentedCandidate;\n      }\n      return new NativeRTCIceCandidate(args);\n    };\n    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  }\n\n  function shimMaxMessageSize(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n        get: function get() {\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\n        }\n      });\n    }\n\n    var sctpInDescription = function sctpInDescription(description) {\n      if (!description || !description.sdp) {\n        return false;\n      }\n      var sections = _sdp2.default.splitSections(description.sdp);\n      sections.shift();\n      return sections.some(function (mediaSection) {\n        var mLine = _sdp2.default.parseMLine(mediaSection);\n        return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n      });\n    };\n\n    var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n      // TODO: Is there a better solution for detecting Firefox?\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (match === null || match.length < 2) {\n        return -1;\n      }\n      var version = parseInt(match[1], 10);\n      // Test for NaN (yes, this is ugly)\n      return version !== version ? -1 : version;\n    };\n\n    var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n      // Every implementation we know can send at least 64 KiB.\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\n      //       data does not reach the other peer reliably.\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n      var canSendMaxMessageSize = 65536;\n      if (browserDetails.browser === 'firefox') {\n        if (browserDetails.version < 57) {\n          if (remoteIsFirefox === -1) {\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n            // fragmentation.\n            canSendMaxMessageSize = 16384;\n          } else {\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n            // messages. Thus, supporting ~2 GiB when sending.\n            canSendMaxMessageSize = 2147483637;\n          }\n        } else if (browserDetails.version < 60) {\n          // Currently, all FF >= 57 will reset the remote maximum message size\n          // to the default value when a data channel is created at a later\n          // stage. :(\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n          canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n        } else {\n          // FF >= 60 supports sending ~2 GiB\n          canSendMaxMessageSize = 2147483637;\n        }\n      }\n      return canSendMaxMessageSize;\n    };\n\n    var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\n      //       every implementation we know supports receiving 65536 bytes.\n      var maxMessageSize = 65536;\n\n      // FF 57 has a slightly incorrect default remote max message size, so\n      // we need to adjust it here to avoid a failure when sending.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n      if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n        maxMessageSize = 65535;\n      }\n\n      var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n      if (match.length > 0) {\n        maxMessageSize = parseInt(match[0].substr(19), 10);\n      } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n        // If the maximum message size is not present in the remote SDP and\n        // both local and remote are Firefox, the remote peer can receive\n        // ~2 GiB.\n        maxMessageSize = 2147483637;\n      }\n      return maxMessageSize;\n    };\n\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        var _getConfiguration = this.getConfiguration(),\n            sdpSemantics = _getConfiguration.sdpSemantics;\n\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get: function get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n\n            enumerable: true,\n            configurable: true\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        var maxMessageSize = void 0;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        var sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get: function get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  }\n\n  function shimSendThrowTypeError(window) {\n    if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n      return;\n    }\n\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\n    //       message size can be reset for all data channels at a later stage.\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n    function wrapDcSend(dc, pc) {\n      var origDataChannelSend = dc.send;\n      dc.send = function send() {\n        var data = arguments[0];\n        var length = data.length || data.size || data.byteLength;\n        if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n          throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n        }\n        return origDataChannelSend.apply(dc, arguments);\n      };\n    }\n    var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n    window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n      var dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n    utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n      wrapDcSend(e.channel, e.target);\n      return e;\n    });\n  }\n\n  /* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n   * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n   * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n   * since DTLS failures would be hidden. See\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n   * for the Firefox tracking bug.\n   */\n  function shimConnectionState(window) {\n    if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    Object.defineProperty(proto, 'connectionState', {\n      get: function get() {\n        return {\n          completed: 'connected',\n          checking: 'connecting'\n        }[this.iceConnectionState] || this.iceConnectionState;\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(proto, 'onconnectionstatechange', {\n      get: function get() {\n        return this._onconnectionstatechange || null;\n      },\n      set: function set(cb) {\n        if (this._onconnectionstatechange) {\n          this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n          delete this._onconnectionstatechange;\n        }\n        if (cb) {\n          this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n\n    ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n      var origMethod = proto[method];\n      proto[method] = function () {\n        if (!this._connectionstatechangepoly) {\n          this._connectionstatechangepoly = function (e) {\n            var pc = e.target;\n            if (pc._lastConnectionState !== pc.connectionState) {\n              pc._lastConnectionState = pc.connectionState;\n              var newEvent = new Event('connectionstatechange', e);\n              pc.dispatchEvent(newEvent);\n            }\n            return e;\n          };\n          this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n        }\n        return origMethod.apply(this, arguments);\n      };\n    });\n  }\n\n  function removeExtmapAllowMixed(window, browserDetails) {\n    /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n      return;\n    }\n    if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n      return;\n    }\n    var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n      if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n        var sdp = desc.sdp.split('\\n').filter(function (line) {\n          return line.trim() !== 'a=extmap-allow-mixed';\n        }).join('\\n');\n        // Safari enforces read-only-ness of RTCSessionDescription fields.\n        if (window.RTCSessionDescription && desc instanceof window.RTCSessionDescription) {\n          arguments[0] = new window.RTCSessionDescription({\n            type: desc.type,\n            sdp: sdp\n          });\n        } else {\n          desc.sdp = sdp;\n        }\n      }\n      return nativeSRD.apply(this, arguments);\n    };\n  }\n\n  function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n    // Support for addIceCandidate(null or undefined)\n    // as well as addIceCandidate({candidate: \"\", ...})\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n    // Note: must be called before other polyfills which change the signature.\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if ((browserDetails.browser === 'chrome' && browserDetails.version < 78 || browserDetails.browser === 'firefox' && browserDetails.version < 68 || browserDetails.browser === 'safari') && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  // Note: Make sure to call this ahead of APIs that modify\n  // setLocalDescription.length\n  function shimParameterlessSetLocalDescription(window, browserDetails) {\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      var _this = this;\n\n      var desc = arguments[0] || {};\n      if ((typeof desc === 'undefined' ? 'undefined' : _typeof(desc)) !== 'object' || desc.type && desc.sdp) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = { type: desc.type, sdp: desc.sdp };\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || desc.type !== 'offer' && desc.type !== 'answer') {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      var func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this).then(function (d) {\n        return nativeSetLocalDescription.apply(_this, [d]);\n      });\n    };\n  }\n\n  },{\"./utils\":11,\"sdp\":12}],7:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.shimSenderGetStats = shimSenderGetStats;\n  exports.shimReceiverGetStats = shimReceiverGetStats;\n  exports.shimRemoveStream = shimRemoveStream;\n  exports.shimRTCDataChannel = shimRTCDataChannel;\n  exports.shimAddTransceiver = shimAddTransceiver;\n  exports.shimGetParameters = shimGetParameters;\n  exports.shimCreateOffer = shimCreateOffer;\n  exports.shimCreateAnswer = shimCreateAnswer;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.mozRTCPeerConnection;\n    }\n\n    if (browserDetails.version < 53) {\n      // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(function (stat) {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach(function (stat, i) {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n      return;\n    }\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n    };\n  }\n\n  function shimReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n      return;\n    }\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this2 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this2;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      return this._pc.getStats(this.track);\n    };\n  }\n\n  function shimRemoveStream(window) {\n    if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(function (sender) {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n\n  function shimRTCDataChannel(window) {\n    // rename DataChannel to RTCDataChannel (native fix in FF60):\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n    if (window.DataChannel && !window.RTCDataChannel) {\n      window.RTCDataChannel = window.DataChannel;\n    }\n  }\n\n  function shimAddTransceiver(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n    if (origAddTransceiver) {\n      window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n        this.setParametersPromises = [];\n        var initParameters = arguments[1];\n        var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach(function (encodingParam) {\n            if ('rid' in encodingParam) {\n              var ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        var transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          var sender = transceiver.sender;\n\n          var params = sender.getParameters();\n          if (!('encodings' in params) ||\n          // Avoid being fooled by patched getParameters() below.\n          params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params).then(function () {\n              delete sender.sendEncodings;\n            }).catch(function () {\n              delete sender.sendEncodings;\n            }));\n          }\n        }\n        return transceiver;\n      };\n    }\n  }\n\n  function shimGetParameters(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCRtpSender)) {\n      return;\n    }\n    var origGetParameters = window.RTCRtpSender.prototype.getParameters;\n    if (origGetParameters) {\n      window.RTCRtpSender.prototype.getParameters = function getParameters() {\n        var params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n    }\n  }\n\n  function shimCreateOffer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n      var _this4 = this,\n          _arguments2 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateOffer.apply(_this4, _arguments2);\n        }).finally(function () {\n          _this4.setParametersPromises = [];\n        });\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimCreateAnswer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n    window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n      var _this5 = this,\n          _arguments3 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateAnswer.apply(_this5, _arguments3);\n        }).finally(function () {\n          _this5.setParametersPromises = [];\n        });\n      }\n      return origCreateAnswer.apply(this, arguments);\n    };\n  }\n\n  },{\"../utils\":11,\"./getdisplaymedia\":8,\"./getusermedia\":9}],8:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, preferredMediaSource) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = { mediaSource: preferredMediaSource };\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n  }\n\n  },{}],9:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n    var MediaStreamTrack = window && window.MediaStreamTrack;\n\n    navigator.getUserMedia = function (constraints, onSuccess, onError) {\n      // Replace Firefox 44+'s deprecation warning with unprefixed version.\n      utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n      navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n\n    if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n\n      var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (c) {\n        if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n          remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeGetUserMedia(c);\n      };\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n        var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n        MediaStreamTrack.prototype.getSettings = function () {\n          var obj = nativeGetSettings.apply(this, arguments);\n          remap(obj, 'mozAutoGainControl', 'autoGainControl');\n          remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n          return obj;\n        };\n      }\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n        var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n        MediaStreamTrack.prototype.applyConstraints = function (c) {\n          if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n            c = JSON.parse(JSON.stringify(c));\n            remap(c, 'autoGainControl', 'mozAutoGainControl');\n            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n          }\n          return nativeApplyConstraints.apply(this, [c]);\n        };\n      }\n    }\n  }\n\n  },{\"../utils\":11}],10:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimLocalStreamsAPI = shimLocalStreamsAPI;\n  exports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\n  exports.shimCallbacksAPI = shimCallbacksAPI;\n  exports.shimGetUserMedia = shimGetUserMedia;\n  exports.shimConstraints = shimConstraints;\n  exports.shimRTCIceServerUrls = shimRTCIceServerUrls;\n  exports.shimTrackEventTransceiver = shimTrackEventTransceiver;\n  exports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n  exports.shimAudioContext = shimAudioContext;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimLocalStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n        // Try to emulate Chrome's behaviour of adding in audio-video order.\n        // Safari orders by track id.\n        stream.getAudioTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n        stream.getVideoTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n        var _this2 = this;\n\n        for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          streams[_key - 1] = arguments[_key];\n        }\n\n        if (streams) {\n          streams.forEach(function (stream) {\n            if (!_this2._localStreams) {\n              _this2._localStreams = [stream];\n            } else if (!_this2._localStreams.includes(stream)) {\n              _this2._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function (sender) {\n          if (tracks.includes(sender.track)) {\n            _this3.removeTrack(sender);\n          }\n        });\n      };\n    }\n  }\n\n  function shimRemoteStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function get() {\n          return this._onaddstream;\n        },\n        set: function set(f) {\n          var _this4 = this;\n\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!_this4._remoteStreams) {\n                _this4._remoteStreams = [];\n              }\n              if (_this4._remoteStreams.includes(stream)) {\n                return;\n              }\n              _this4._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              _this4.dispatchEvent(event);\n            });\n          });\n        }\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  }\n\n  function shimCallbacksAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var origCreateOffer = prototype.createOffer;\n    var origCreateAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function createOffer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function withCallback(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  }\n\n  function shimGetUserMedia(window) {\n    var navigator = window && window.navigator;\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      // shim not needed in Safari 12.1\n      var mediaDevices = navigator.mediaDevices;\n      var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (constraints) {\n        return _getUserMedia(shimConstraints(constraints));\n      };\n    }\n\n    if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n        navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n      }.bind(navigator);\n    }\n  }\n\n  function shimConstraints(constraints) {\n    if (constraints && constraints.video !== undefined) {\n      return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n    }\n\n    return constraints;\n  }\n\n  function shimRTCIceServerUrls(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in OrigPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function get() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  }\n\n  function shimTrackEventTransceiver(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimCreateOfferLegacy(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n        }\n        var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n        }\n        var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimAudioContext(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n      return;\n    }\n    window.AudioContext = window.webkitAudioContext;\n  }\n\n  },{\"../utils\":11}],11:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.extractVersion = extractVersion;\n  exports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\n  exports.disableLog = disableLog;\n  exports.disableWarnings = disableWarnings;\n  exports.log = log;\n  exports.deprecated = deprecated;\n  exports.detectBrowser = detectBrowser;\n  exports.compactObject = compactObject;\n  exports.walkStats = walkStats;\n  exports.filterStats = filterStats;\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  var logDisabled_ = true;\n  var deprecationWarnings_ = true;\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  function extractVersion(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  }\n\n  // Wraps the peerconnection event eventNameToWrap in a function\n  // which returns the modified event object (or false to prevent\n  // the event).\n  function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    var nativeAddEventListener = proto.addEventListener;\n    proto.addEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap) {\n        return nativeAddEventListener.apply(this, arguments);\n      }\n      var wrappedCallback = function wrappedCallback(e) {\n        var modifiedEvent = wrapper(e);\n        if (modifiedEvent) {\n          if (cb.handleEvent) {\n            cb.handleEvent(modifiedEvent);\n          } else {\n            cb(modifiedEvent);\n          }\n        }\n      };\n      this._eventMap = this._eventMap || {};\n      if (!this._eventMap[eventNameToWrap]) {\n        this._eventMap[eventNameToWrap] = new Map();\n      }\n      this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n      return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n    };\n\n    var nativeRemoveEventListener = proto.removeEventListener;\n    proto.removeEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      if (!this._eventMap[eventNameToWrap].has(cb)) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n      this._eventMap[eventNameToWrap].delete(cb);\n      if (this._eventMap[eventNameToWrap].size === 0) {\n        delete this._eventMap[eventNameToWrap];\n      }\n      if (Object.keys(this._eventMap).length === 0) {\n        delete this._eventMap;\n      }\n      return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n    };\n\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\n      get: function get() {\n        return this['_on' + eventNameToWrap];\n      },\n      set: function set(cb) {\n        if (this['_on' + eventNameToWrap]) {\n          this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n          delete this['_on' + eventNameToWrap];\n        }\n        if (cb) {\n          this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n  }\n\n  function disableLog(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n  }\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  function disableWarnings(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  }\n\n  function log() {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  }\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  function deprecated(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n  }\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  function detectBrowser(window) {\n    // Returned result object.\n    var result = { browser: null, version: null };\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    var navigator = window.navigator;\n\n\n    if (navigator.mozGetUserMedia) {\n      // Firefox.\n      result.browser = 'firefox';\n      result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n      // Chrome, Chromium, Webview, Opera.\n      // Version matches Chrome/WebRTC version.\n      // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n      // more complicated fallback to webkitRTCPeerConnection.\n      result.browser = 'chrome';\n      result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n      // Safari.\n      result.browser = 'safari';\n      result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n      result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n    } else {\n      // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n\n  /**\n   * Checks if something is an object.\n   *\n   * @param {*} val The something you want to check.\n   * @return true if val is an object, false otherwise.\n   */\n  function isObject(val) {\n    return Object.prototype.toString.call(val) === '[object Object]';\n  }\n\n  /**\n   * Remove all empty objects and undefined values\n   * from a nested object -- an enhanced and vanilla version\n   * of Lodash's `compact`.\n   */\n  function compactObject(data) {\n    if (!isObject(data)) {\n      return data;\n    }\n\n    return Object.keys(data).reduce(function (accumulator, key) {\n      var isObj = isObject(data[key]);\n      var value = isObj ? compactObject(data[key]) : data[key];\n      var isEmptyObject = isObj && !Object.keys(value).length;\n      if (value === undefined || isEmptyObject) {\n        return accumulator;\n      }\n      return Object.assign(accumulator, _defineProperty({}, key, value));\n    }, {});\n  }\n\n  /* iterates the stats graph recursively. */\n  function walkStats(stats, base, resultSet) {\n    if (!base || resultSet.has(base.id)) {\n      return;\n    }\n    resultSet.set(base.id, base);\n    Object.keys(base).forEach(function (name) {\n      if (name.endsWith('Id')) {\n        walkStats(stats, stats.get(base[name]), resultSet);\n      } else if (name.endsWith('Ids')) {\n        base[name].forEach(function (id) {\n          walkStats(stats, stats.get(id), resultSet);\n        });\n      }\n    });\n  }\n\n  /* filter getStats for a sender/receiver track. */\n  function filterStats(result, track, outbound) {\n    var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n    var filteredResult = new Map();\n    if (track === null) {\n      return filteredResult;\n    }\n    var trackStats = [];\n    result.forEach(function (value) {\n      if (value.type === 'track' && value.trackIdentifier === track.id) {\n        trackStats.push(value);\n      }\n    });\n    trackStats.forEach(function (trackStat) {\n      result.forEach(function (stats) {\n        if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n          walkStats(result, stats, filteredResult);\n        }\n      });\n    });\n    return filteredResult;\n  }\n\n  },{}],12:[function(require,module,exports){\n  /* eslint-env node */\n  'use strict';\n\n  // SDP helpers.\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var SDPUtils = {};\n\n  // Generate an alphanumeric identifier for cname or mids.\n  // TODO: use UUIDs instead? https://gist.github.com/jed/982883\n  SDPUtils.generateIdentifier = function () {\n    return Math.random().toString(36).substr(2, 10);\n  };\n\n  // The RTCP CNAME used by all peerconnections from the same JS.\n  SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n  // Splits SDP into lines, dealing with both CRLF and LF.\n  SDPUtils.splitLines = function (blob) {\n    return blob.trim().split('\\n').map(function (line) {\n      return line.trim();\n    });\n  };\n  // Splits SDP into sessionpart and mediasections. Ensures CRLF.\n  SDPUtils.splitSections = function (blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function (part, index) {\n      return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n  };\n\n  // Returns the session description.\n  SDPUtils.getDescription = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    return sections && sections[0];\n  };\n\n  // Returns the individual media sections.\n  SDPUtils.getMediaSections = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    sections.shift();\n    return sections;\n  };\n\n  // Returns lines that start with a certain prefix.\n  SDPUtils.matchPrefix = function (blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function (line) {\n      return line.indexOf(prefix) === 0;\n    });\n  };\n\n  // Parses an ICE candidate line. Sample input:\n  // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n  // rport 55996\"\n  // Input can be prefixed with a=.\n  SDPUtils.parseCandidate = function (line) {\n    var parts = void 0;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n      parts = line.substring(12).split(' ');\n    } else {\n      parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n      foundation: parts[0],\n      component: { 1: 'rtp', 2: 'rtcp' }[parts[1]] || parts[1],\n      protocol: parts[2].toLowerCase(),\n      priority: parseInt(parts[3], 10),\n      ip: parts[4],\n      address: parts[4], // address is an alias for ip.\n      port: parseInt(parts[5], 10),\n      // skip parts[6] == 'typ'\n      type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n      switch (parts[i]) {\n        case 'raddr':\n          candidate.relatedAddress = parts[i + 1];\n          break;\n        case 'rport':\n          candidate.relatedPort = parseInt(parts[i + 1], 10);\n          break;\n        case 'tcptype':\n          candidate.tcpType = parts[i + 1];\n          break;\n        case 'ufrag':\n          candidate.ufrag = parts[i + 1]; // for backward compatibility.\n          candidate.usernameFragment = parts[i + 1];\n          break;\n        default:\n          // extension handling, in particular ufrag. Don't overwrite.\n          if (candidate[parts[i]] === undefined) {\n            candidate[parts[i]] = parts[i + 1];\n          }\n          break;\n      }\n    }\n    return candidate;\n  };\n\n  // Translates a candidate object into SDP candidate attribute.\n  // This does not include the a= prefix!\n  SDPUtils.writeCandidate = function (candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n\n    var component = candidate.component;\n    if (component === 'rtp') {\n      sdp.push(1);\n    } else if (component === 'rtcp') {\n      sdp.push(2);\n    } else {\n      sdp.push(component);\n    }\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.address || candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress && candidate.relatedPort) {\n      sdp.push('raddr');\n      sdp.push(candidate.relatedAddress);\n      sdp.push('rport');\n      sdp.push(candidate.relatedPort);\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n      sdp.push('tcptype');\n      sdp.push(candidate.tcpType);\n    }\n    if (candidate.usernameFragment || candidate.ufrag) {\n      sdp.push('ufrag');\n      sdp.push(candidate.usernameFragment || candidate.ufrag);\n    }\n    return 'candidate:' + sdp.join(' ');\n  };\n\n  // Parses an ice-options line, returns an array of option tags.\n  // Sample input:\n  // a=ice-options:foo bar\n  SDPUtils.parseIceOptions = function (line) {\n    return line.substr(14).split(' ');\n  };\n\n  // Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n  // a=rtpmap:111 opus/48000/2\n  SDPUtils.parseRtpMap = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n      payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    // legacy alias, got renamed back to channels in ORTC.\n    parsed.numChannels = parsed.channels;\n    return parsed;\n  };\n\n  // Generates a rtpmap line from RTCRtpCodecCapability or\n  // RTCRtpCodecParameters.\n  SDPUtils.writeRtpMap = function (codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    var channels = codec.channels || codec.numChannels || 1;\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate + (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n  };\n\n  // Parses a extmap line (headerextension from RFC 5285). Sample input:\n  // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n  // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n  SDPUtils.parseExtmap = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      id: parseInt(parts[0], 10),\n      direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n      uri: parts[1]\n    };\n  };\n\n  // Generates an extmap line from RTCRtpHeaderExtensionParameters or\n  // RTCRtpHeaderExtension.\n  SDPUtils.writeExtmap = function (headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) + (headerExtension.direction && headerExtension.direction !== 'sendrecv' ? '/' + headerExtension.direction : '') + ' ' + headerExtension.uri + '\\r\\n';\n  };\n\n  // Parses a fmtp line, returns dictionary. Sample input:\n  // a=fmtp:96 vbr=on;cng=on\n  // Also deals with vbr=on; cng=on\n  SDPUtils.parseFmtp = function (line) {\n    var parsed = {};\n    var kv = void 0;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n      kv = parts[j].trim().split('=');\n      parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n  };\n\n  // Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeFmtp = function (codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n      var params = [];\n      Object.keys(codec.parameters).forEach(function (param) {\n        if (codec.parameters[param] !== undefined) {\n          params.push(param + '=' + codec.parameters[param]);\n        } else {\n          params.push(param);\n        }\n      });\n      line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n  };\n\n  // Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n  // a=rtcp-fb:98 nack rpsi\n  SDPUtils.parseRtcpFb = function (line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n      type: parts.shift(),\n      parameter: parts.join(' ')\n    };\n  };\n\n  // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeRtcpFb = function (codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n      // FIXME: special handling for trr-int?\n      codec.rtcpFeedback.forEach(function (fb) {\n        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') + '\\r\\n';\n      });\n    }\n    return lines;\n  };\n\n  // Parses a RFC 5576 ssrc media attribute. Sample input:\n  // a=ssrc:3735928559 cname:something\n  SDPUtils.parseSsrcMedia = function (line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n      ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n      parts.attribute = line.substr(sp + 1, colon - sp - 1);\n      parts.value = line.substr(colon + 1);\n    } else {\n      parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n  };\n\n  // Parse a ssrc-group line (see RFC 5576). Sample input:\n  // a=ssrc-group:semantics 12 34\n  SDPUtils.parseSsrcGroup = function (line) {\n    var parts = line.substr(13).split(' ');\n    return {\n      semantics: parts.shift(),\n      ssrcs: parts.map(function (ssrc) {\n        return parseInt(ssrc, 10);\n      })\n    };\n  };\n\n  // Extracts the MID (RFC 5888) from a media section.\n  // Returns the MID or undefined if no mid line was found.\n  SDPUtils.getMid = function (mediaSection) {\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n    if (mid) {\n      return mid.substr(6);\n    }\n  };\n\n  // Parses a fingerprint line for DTLS-SRTP.\n  SDPUtils.parseFingerprint = function (line) {\n    var parts = line.substr(14).split(' ');\n    return {\n      algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n      value: parts[1].toUpperCase() // the definition is upper-case in RFC 4572.\n    };\n  };\n\n  // Extracts DTLS parameters from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the fingerprint line as input. See also getIceParameters.\n  SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=fingerprint:');\n    // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n    return {\n      role: 'auto',\n      fingerprints: lines.map(SDPUtils.parseFingerprint)\n    };\n  };\n\n  // Serializes DTLS parameters to SDP.\n  SDPUtils.writeDtlsParameters = function (params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function (fp) {\n      sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n  };\n\n  // Parses a=crypto lines into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\n  SDPUtils.parseCryptoLine = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      tag: parseInt(parts[0], 10),\n      cryptoSuite: parts[1],\n      keyParams: parts[2],\n      sessionParams: parts.slice(3)\n    };\n  };\n\n  SDPUtils.writeCryptoLine = function (parameters) {\n    return 'a=crypto:' + parameters.tag + ' ' + parameters.cryptoSuite + ' ' + (_typeof(parameters.keyParams) === 'object' ? SDPUtils.writeCryptoKeyParams(parameters.keyParams) : parameters.keyParams) + (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') + '\\r\\n';\n  };\n\n  // Parses the crypto key parameters into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\n  SDPUtils.parseCryptoKeyParams = function (keyParams) {\n    if (keyParams.indexOf('inline:') !== 0) {\n      return null;\n    }\n    var parts = keyParams.substr(7).split('|');\n    return {\n      keyMethod: 'inline',\n      keySalt: parts[0],\n      lifeTime: parts[1],\n      mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n      mkiLength: parts[2] ? parts[2].split(':')[1] : undefined\n    };\n  };\n\n  SDPUtils.writeCryptoKeyParams = function (keyParams) {\n    return keyParams.keyMethod + ':' + keyParams.keySalt + (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') + (keyParams.mkiValue && keyParams.mkiLength ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength : '');\n  };\n\n  // Extracts all SDES parameters.\n  SDPUtils.getCryptoParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=crypto:');\n    return lines.map(SDPUtils.parseCryptoLine);\n  };\n\n  // Parses ICE information from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the ice-ufrag and ice-pwd lines as input.\n  SDPUtils.getIceParameters = function (mediaSection, sessionpart) {\n    var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-ufrag:')[0];\n    var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-pwd:')[0];\n    if (!(ufrag && pwd)) {\n      return null;\n    }\n    return {\n      usernameFragment: ufrag.substr(12),\n      password: pwd.substr(10)\n    };\n  };\n\n  // Serializes ICE parameters to SDP.\n  SDPUtils.writeIceParameters = function (params) {\n    var sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' + 'a=ice-pwd:' + params.password + '\\r\\n';\n    if (params.iceLite) {\n      sdp += 'a=ice-lite\\r\\n';\n    }\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns RTCRtpParameters.\n  SDPUtils.parseRtpParameters = function (mediaSection) {\n    var description = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: [],\n      rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) {\n      // find all codecs from mline[3..]\n      var pt = mline[i];\n      var rtpmapline = SDPUtils.matchPrefix(mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n      if (rtpmapline) {\n        var codec = SDPUtils.parseRtpMap(rtpmapline);\n        var fmtps = SDPUtils.matchPrefix(mediaSection, 'a=fmtp:' + pt + ' ');\n        // Only the first a=fmtp:<pt> is considered.\n        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n        codec.rtcpFeedback = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:' + pt + ' ').map(SDPUtils.parseRtcpFb);\n        description.codecs.push(codec);\n        // parse FEC mechanisms from rtpmap lines.\n        switch (codec.name.toUpperCase()) {\n          case 'RED':\n          case 'ULPFEC':\n            description.fecMechanisms.push(codec.name.toUpperCase());\n            break;\n          default:\n            // only RED and ULPFEC are recognized as FEC mechanisms.\n            break;\n        }\n      }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function (line) {\n      description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n  };\n\n  // Generates parts of the SDP media section describing the capabilities /\n  // parameters.\n  SDPUtils.writeRtpDescription = function (kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function (codec) {\n      if (codec.preferredPayloadType !== undefined) {\n        return codec.preferredPayloadType;\n      }\n      return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function (codec) {\n      sdp += SDPUtils.writeRtpMap(codec);\n      sdp += SDPUtils.writeFmtp(codec);\n      sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    var maxptime = 0;\n    caps.codecs.forEach(function (codec) {\n      if (codec.maxptime > maxptime) {\n        maxptime = codec.maxptime;\n      }\n    });\n    if (maxptime > 0) {\n      sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n    }\n\n    if (caps.headerExtensions) {\n      caps.headerExtensions.forEach(function (extension) {\n        sdp += SDPUtils.writeExtmap(extension);\n      });\n    }\n    // FIXME: write fecMechanisms.\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns an array of\n  // RTCRtpEncodingParameters.\n  SDPUtils.parseRtpEncodingParameters = function (mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (parts) {\n      return parts.attribute === 'cname';\n    });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc = void 0;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID').map(function (line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function (part) {\n        return parseInt(part, 10);\n      });\n    });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n      secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function (codec) {\n      if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n        var encParam = {\n          ssrc: primarySsrc,\n          codecPayloadType: parseInt(codec.parameters.apt, 10)\n        };\n        if (primarySsrc && secondarySsrc) {\n          encParam.rtx = { ssrc: secondarySsrc };\n        }\n        encodingParameters.push(encParam);\n        if (hasRed) {\n          encParam = JSON.parse(JSON.stringify(encParam));\n          encParam.fec = {\n            ssrc: primarySsrc,\n            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n          };\n          encodingParameters.push(encParam);\n        }\n      }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n      encodingParameters.push({\n        ssrc: primarySsrc\n      });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n      if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n        bandwidth = parseInt(bandwidth[0].substr(7), 10);\n      } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n        // use formula from JSEP to convert b=AS to TIAS value.\n        bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95 - 50 * 40 * 8;\n      } else {\n        bandwidth = undefined;\n      }\n      encodingParameters.forEach(function (params) {\n        params.maxBitrate = bandwidth;\n      });\n    }\n    return encodingParameters;\n  };\n\n  // parses http://draft.ortc.org/#rtcrtcpparameters*\n  SDPUtils.parseRtcpParameters = function (mediaSection) {\n    var rtcpParameters = {};\n\n    // Gets the first SSRC. Note that with RTX there might be multiple\n    // SSRCs.\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (obj) {\n      return obj.attribute === 'cname';\n    })[0];\n    if (remoteSsrc) {\n      rtcpParameters.cname = remoteSsrc.value;\n      rtcpParameters.ssrc = remoteSsrc.ssrc;\n    }\n\n    // Edge uses the compound attribute instead of reducedSize\n    // compound is !reducedSize\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n    rtcpParameters.reducedSize = rsize.length > 0;\n    rtcpParameters.compound = rsize.length === 0;\n\n    // parses the rtcp-mux attrbute.\n    // Note that Edge does not support unmuxed RTCP.\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n    rtcpParameters.mux = mux.length > 0;\n\n    return rtcpParameters;\n  };\n\n  SDPUtils.writeRtcpParameters = function (rtcpParameters) {\n    var sdp = '';\n    if (rtcpParameters.reducedSize) {\n      sdp += 'a=rtcp-rsize\\r\\n';\n    }\n    if (rtcpParameters.mux) {\n      sdp += 'a=rtcp-mux\\r\\n';\n    }\n    if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n      sdp += 'a=ssrc:' + rtcpParameters.ssrc + ' cname:' + rtcpParameters.cname + '\\r\\n';\n    }\n    return sdp;\n  };\n\n  // parses either a=msid: or a=ssrc:... msid lines and returns\n  // the id of the MediaStream and MediaStreamTrack.\n  SDPUtils.parseMsid = function (mediaSection) {\n    var parts = void 0;\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n    if (spec.length === 1) {\n      parts = spec[0].substr(7).split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n    if (planB.length > 0) {\n      parts = planB[0].value.split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n  };\n\n  // SCTP\n  // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n  // to draft-ietf-mmusic-sctp-sdp-05\n  SDPUtils.parseSctpDescription = function (mediaSection) {\n    var mline = SDPUtils.parseMLine(mediaSection);\n    var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n    var maxMessageSize = void 0;\n    if (maxSizeLine.length > 0) {\n      maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n    }\n    if (isNaN(maxMessageSize)) {\n      maxMessageSize = 65536;\n    }\n    var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n    if (sctpPort.length > 0) {\n      return {\n        port: parseInt(sctpPort[0].substr(12), 10),\n        protocol: mline.fmt,\n        maxMessageSize: maxMessageSize\n      };\n    }\n    var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n    if (sctpMapLines.length > 0) {\n      var parts = sctpMapLines[0].substr(10).split(' ');\n      return {\n        port: parseInt(parts[0], 10),\n        protocol: parts[1],\n        maxMessageSize: maxMessageSize\n      };\n    }\n  };\n\n  // SCTP\n  // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n  // support by now receiving in this format, unless we originally parsed\n  // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n  // protocol of DTLS/SCTP -- without UDP/ or TCP/)\n  SDPUtils.writeSctpDescription = function (media, sctp) {\n    var output = [];\n    if (media.protocol !== 'DTLS/SCTP') {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctp-port:' + sctp.port + '\\r\\n'];\n    } else {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'];\n    }\n    if (sctp.maxMessageSize !== undefined) {\n      output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n    }\n    return output.join('');\n  };\n\n  // Generate a session ID for SDP.\n  // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n  // recommends using a cryptographically random +ve 64-bit value\n  // but right now this should be acceptable and within the right range\n  SDPUtils.generateSessionId = function () {\n    return Math.random().toString().substr(2, 21);\n  };\n\n  // Write boiler plate for start of SDP\n  // sessId argument is optional - if not supplied it will\n  // be generated randomly\n  // sessVersion is optional and defaults to 2\n  // sessUser is optional and defaults to 'thisisadapterortc'\n  SDPUtils.writeSessionBoilerplate = function (sessId, sessVer, sessUser) {\n    var sessionId = void 0;\n    var version = sessVer !== undefined ? sessVer : 2;\n    if (sessId) {\n      sessionId = sessId;\n    } else {\n      sessionId = SDPUtils.generateSessionId();\n    }\n    var user = sessUser || 'thisisadapterortc';\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' + 'o=' + user + ' ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' + 's=-\\r\\n' + 't=0 0\\r\\n';\n  };\n\n  // Gets the direction from the mediaSection or the sessionpart.\n  SDPUtils.getDirection = function (mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n      switch (lines[i]) {\n        case 'a=sendrecv':\n        case 'a=sendonly':\n        case 'a=recvonly':\n        case 'a=inactive':\n          return lines[i].substr(2);\n        default:\n        // FIXME: What should happen here?\n      }\n    }\n    if (sessionpart) {\n      return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n  };\n\n  SDPUtils.getKind = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    return mline[0].substr(2);\n  };\n\n  SDPUtils.isRejected = function (mediaSection) {\n    return mediaSection.split(' ', 2)[1] === '0';\n  };\n\n  SDPUtils.parseMLine = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var parts = lines[0].substr(2).split(' ');\n    return {\n      kind: parts[0],\n      port: parseInt(parts[1], 10),\n      protocol: parts[2],\n      fmt: parts.slice(3).join(' ')\n    };\n  };\n\n  SDPUtils.parseOLine = function (mediaSection) {\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n    var parts = line.substr(2).split(' ');\n    return {\n      username: parts[0],\n      sessionId: parts[1],\n      sessionVersion: parseInt(parts[2], 10),\n      netType: parts[3],\n      addressType: parts[4],\n      address: parts[5]\n    };\n  };\n\n  // a very naive interpretation of a valid SDP.\n  SDPUtils.isValidSDP = function (blob) {\n    if (typeof blob !== 'string' || blob.length === 0) {\n      return false;\n    }\n    var lines = SDPUtils.splitLines(blob);\n    for (var i = 0; i < lines.length; i++) {\n      if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n        return false;\n      }\n      // TODO: check the modifier a bit more.\n    }\n    return true;\n  };\n\n  // Expose public methods.\n  if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object') {\n    module.exports = SDPUtils;\n  }\n  },{}]},{},[1])(1)\n  });\n","(function() {\n  if (!navigator.mediaDevices) navigator.mediaDevices = {};\n  if (!navigator.mediaDevices.getUserMedia) {\n    var getUserMedia =\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia ||\n      navigator.getUserMedia;\n\n    if (getUserMedia) {\n      navigator.mediaDevices.getUserMedia = function(constraints) {\n        return new Promise(function(resolve, reject) {\n          getUserMedia(\n            constraints,\n            function(stream) {\n              resolve(stream);\n            },\n            function(error) {\n              reject(error);\n            }\n          );\n        });\n      };\n    } else {\n      navigator.mediaDevices.getUserMedia = function() {\n        // A missing `getUserMedia` seemingly can mean one of two things:\n        //\n        // 1) WebRTC is unsupported or disabled on this browser\n        // 2) This is an insecure connection\n        //   * This handling of insecure connections happens only on certain browsers.\n        //     It was observed in Chromium 80 and Firefox 75, but not Firefox 68. I suspect it's the new behavior.\n        //   * In other browsers, it handles insecure connections by throwing `NotAllowedError`.\n        //     We still handle this case in the calling function.\n        //   * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n        //     As of this writing, this claims that the browser does *both* of these things for\n        //     insecure connections, which is of course impossible and thus confusing.\n        //\n        // We will attempt to distinguish these two cases by checking for various webrtc-related fields on\n        // `window` (inspired by github.com/muaz-khan/DetectRTC). If none of those fields exist, we assume\n        // that WebRTC is not supported on this browser.\n        return new Promise(function(resolve, reject) {\n          if (!(window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.RTCIceGatherer)) {\n            var e = new Error(\"getUserMedia is not supported in this browser.\");\n            // I'd use NotSupportedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomNotSupportedError';\n            reject(e);\n          } else {\n            var e = new Error(\"insecure connection\");\n            // I'd use NotAllowedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomSecureConnectionError';\n            reject(e);\n          }\n        });\n      };\n    }\n  }\n})();\n","'use strict';\n\n// Last time updated: 2019-02-20 3:31:30 PM UTC\n\n// _______________\n// getStats v1.2.0\n\n// Open-Sourced: https://github.com/muaz-khan/getStats\n\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n\"use strict\";var getStats=function(mediaStreamTrack,callback,interval){function getStatsLooper(){getStatsWrapper(function(results){if(results&&results.forEach){results.forEach(function(result){Object.keys(getStatsParser).forEach(function(key){if(\"function\"==typeof getStatsParser[key])try{getStatsParser[key](result)}catch(e){console.error(e.message,e.stack,e)}})});try{peer.iceConnectionState.search(/failed|closed|disconnected/gi)!==-1&&(nomore=!0)}catch(e){nomore=!0}nomore===!0&&(getStatsResult.datachannel&&(getStatsResult.datachannel.state=\"close\"),getStatsResult.ended=!0),getStatsResult.results=results,getStatsResult.audio&&getStatsResult.video&&(getStatsResult.bandwidth.speed=getStatsResult.audio.bytesSent-getStatsResult.bandwidth.helper.audioBytesSent+(getStatsResult.video.bytesSent-getStatsResult.bandwidth.helper.videoBytesSent),getStatsResult.bandwidth.helper.audioBytesSent=getStatsResult.audio.bytesSent,getStatsResult.bandwidth.helper.videoBytesSent=getStatsResult.video.bytesSent),callback(getStatsResult),nomore||void 0!=typeof interval&&interval&&setTimeout(getStatsLooper,interval||1e3)}})}function getStatsWrapper(cb){\"undefined\"!=typeof window.InstallTrigger||isSafari?peer.getStats(window.mediaStreamTrack||null).then(function(res){var items=[];res.forEach(function(r){items.push(r)}),cb(items)})[\"catch\"](cb):peer.getStats(function(res){var items=[];res.result().forEach(function(res){var item={};res.names().forEach(function(name){item[name]=res.stat(name)}),item.id=res.id,item.type=res.type,item.timestamp=res.timestamp,items.push(item)}),cb(items)})}var browserFakeUserAgent=\"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45\";!function(that){that&&\"undefined\"==typeof window&&\"undefined\"!=typeof global&&(global.navigator={userAgent:browserFakeUserAgent,getUserMedia:function(){}},global.console||(global.console={}),\"undefined\"!=typeof global.console.log&&\"undefined\"!=typeof global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),\"undefined\"==typeof document&&(that.document={documentElement:{appendChild:function(){return\"\"}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var obj={getContext:function(){return obj},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return\"\"}};return obj},that.HTMLVideoElement=function(){}),\"undefined\"==typeof location&&(that.location={protocol:\"file:\",href:\"\",hash:\"\"}),\"undefined\"==typeof screen&&(that.screen={width:0,height:0}),\"undefined\"==typeof URL&&(that.URL={createObjectURL:function(){return\"\"},revokeObjectURL:function(){return\"\"}}),\"undefined\"==typeof MediaStreamTrack&&(that.MediaStreamTrack=function(){}),\"undefined\"==typeof RTCPeerConnection&&(that.RTCPeerConnection=function(){}),that.window=global)}(\"undefined\"!=typeof global?global:null);var RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;\"undefined\"==typeof MediaStreamTrack&&(MediaStreamTrack={});var systemNetworkType=((navigator.connection||{}).type||\"unknown\").toString().toLowerCase(),getStatsResult={encryption:\"sha-256\",audio:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},video:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},bandwidth:{systemBandwidth:0,sentPerSecond:0,encodedPerSecond:0,helper:{audioBytesSent:0,videoBytestSent:0},speed:0},results:{},connectionType:{systemNetworkType:systemNetworkType,systemIpAddress:\"192.168.1.2\",local:{candidateType:[],transport:[],ipAddress:[],networkType:[]},remote:{candidateType:[],transport:[],ipAddress:[],networkType:[]}},resolutions:{send:{width:0,height:0},recv:{width:0,height:0}},internal:{audio:{send:{},recv:{}},video:{send:{},recv:{}},candidates:{}},nomore:function(){nomore=!0}},getStatsParser={checkIfOfferer:function(result){\"googLibjingleSession\"===result.type&&(getStatsResult.isOfferer=result.googInitiator)}},isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),peer=this;if(!(arguments[0]instanceof RTCPeerConnection))throw\"1st argument is not instance of RTCPeerConnection.\";peer=arguments[0],arguments[1]instanceof MediaStreamTrack&&(mediaStreamTrack=arguments[1],callback=arguments[2],interval=arguments[3]);var nomore=!1;getStatsParser.datachannel=function(result){\"datachannel\"===result.type&&(getStatsResult.datachannel={state:result.state})},getStatsParser.googCertificate=function(result){\"googCertificate\"==result.type&&(getStatsResult.encryption=result.googFingerprintAlgorithm),\"certificate\"==result.type&&(getStatsResult.encryption=result.fingerprintAlgorithm)},getStatsParser.checkAudioTracks=function(result){if(\"audio\"===result.mediaType){var sendrecvType=result.id.split(\"_\").pop();if(result.isRemote===!0&&(sendrecvType=\"recv\"),result.isRemote===!1&&(sendrecvType=\"send\"),sendrecvType){if(getStatsResult.audio[sendrecvType].codecs.indexOf(result.googCodecName||\"opus\")===-1&&getStatsResult.audio[sendrecvType].codecs.push(result.googCodecName||\"opus\"),result.bytesSent){var kilobytes=0;getStatsResult.internal.audio[sendrecvType].prevBytesSent||(getStatsResult.internal.audio[sendrecvType].prevBytesSent=result.bytesSent);var bytes=result.bytesSent-getStatsResult.internal.audio[sendrecvType].prevBytesSent;getStatsResult.internal.audio[sendrecvType].prevBytesSent=result.bytesSent,kilobytes=bytes/1024,getStatsResult.audio[sendrecvType].availableBandwidth=kilobytes.toFixed(1),getStatsResult.audio.bytesSent=kilobytes.toFixed(1)}if(result.bytesReceived){var kilobytes=0;getStatsResult.internal.audio[sendrecvType].prevBytesReceived||(getStatsResult.internal.audio[sendrecvType].prevBytesReceived=result.bytesReceived);var bytes=result.bytesReceived-getStatsResult.internal.audio[sendrecvType].prevBytesReceived;getStatsResult.internal.audio[sendrecvType].prevBytesReceived=result.bytesReceived,kilobytes=bytes/1024,getStatsResult.audio.bytesReceived=kilobytes.toFixed(1)}if(result.googTrackId&&getStatsResult.audio[sendrecvType].tracks.indexOf(result.googTrackId)===-1&&getStatsResult.audio[sendrecvType].tracks.push(result.googTrackId),result.googCurrentDelayMs){var kilobytes=0;getStatsResult.internal.audio.prevGoogCurrentDelayMs||(getStatsResult.internal.audio.prevGoogCurrentDelayMs=result.googCurrentDelayMs);var bytes=result.googCurrentDelayMs-getStatsResult.internal.audio.prevGoogCurrentDelayMs;getStatsResult.internal.audio.prevGoogCurrentDelayMs=result.googCurrentDelayMs,getStatsResult.audio.latency=bytes.toFixed(1),getStatsResult.audio.latency<0&&(getStatsResult.audio.latency=0)}if(result.packetsLost){var kilobytes=0;getStatsResult.internal.audio.prevPacketsLost||(getStatsResult.internal.audio.prevPacketsLost=result.packetsLost);var bytes=result.packetsLost-getStatsResult.internal.audio.prevPacketsLost;getStatsResult.internal.audio.prevPacketsLost=result.packetsLost,getStatsResult.audio.packetsLost=bytes.toFixed(1),getStatsResult.audio.packetsLost<0&&(getStatsResult.audio.packetsLost=0)}}}},getStatsParser.checkVideoTracks=function(result){if(\"video\"===result.mediaType){var sendrecvType=result.id.split(\"_\").pop();if(result.isRemote===!0&&(sendrecvType=\"recv\"),result.isRemote===!1&&(sendrecvType=\"send\"),sendrecvType){if(getStatsResult.video[sendrecvType].codecs.indexOf(result.googCodecName||\"VP8\")===-1&&getStatsResult.video[sendrecvType].codecs.push(result.googCodecName||\"VP8\"),result.bytesSent){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevBytesSent||(getStatsResult.internal.video[sendrecvType].prevBytesSent=result.bytesSent);var bytes=result.bytesSent-getStatsResult.internal.video[sendrecvType].prevBytesSent;getStatsResult.internal.video[sendrecvType].prevBytesSent=result.bytesSent,kilobytes=bytes/1024,getStatsResult.video[sendrecvType].availableBandwidth=kilobytes.toFixed(1),getStatsResult.video.bytesSent=kilobytes.toFixed(1)}if(result.bytesReceived){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevBytesReceived||(getStatsResult.internal.video[sendrecvType].prevBytesReceived=result.bytesReceived);var bytes=result.bytesReceived-getStatsResult.internal.video[sendrecvType].prevBytesReceived;getStatsResult.internal.video[sendrecvType].prevBytesReceived=result.bytesReceived,kilobytes=bytes/1024,getStatsResult.video.bytesReceived=kilobytes.toFixed(1)}if(result.googFrameHeightReceived&&result.googFrameWidthReceived&&(getStatsResult.resolutions[sendrecvType].width=result.googFrameWidthReceived,getStatsResult.resolutions[sendrecvType].height=result.googFrameHeightReceived),result.googFrameHeightSent&&result.googFrameWidthSent&&(getStatsResult.resolutions[sendrecvType].width=result.googFrameWidthSent,getStatsResult.resolutions[sendrecvType].height=result.googFrameHeightSent),result.googTrackId&&getStatsResult.video[sendrecvType].tracks.indexOf(result.googTrackId)===-1&&getStatsResult.video[sendrecvType].tracks.push(result.googTrackId),result.framerateMean){getStatsResult.bandwidth.framerateMean=result.framerateMean;var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevFramerateMean||(getStatsResult.internal.video[sendrecvType].prevFramerateMean=result.bitrateMean);var bytes=result.bytesSent-getStatsResult.internal.video[sendrecvType].prevFramerateMean;getStatsResult.internal.video[sendrecvType].prevFramerateMean=result.framerateMean,kilobytes=bytes/1024,getStatsResult.video[sendrecvType].framerateMean=bytes.toFixed(1)}if(result.bitrateMean){getStatsResult.bandwidth.bitrateMean=result.bitrateMean;var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevBitrateMean||(getStatsResult.internal.video[sendrecvType].prevBitrateMean=result.bitrateMean);var bytes=result.bytesSent-getStatsResult.internal.video[sendrecvType].prevBitrateMean;getStatsResult.internal.video[sendrecvType].prevBitrateMean=result.bitrateMean,kilobytes=bytes/1024,getStatsResult.video[sendrecvType].bitrateMean=bytes.toFixed(1)}if(result.googCurrentDelayMs){var kilobytes=0;getStatsResult.internal.video.prevGoogCurrentDelayMs||(getStatsResult.internal.video.prevGoogCurrentDelayMs=result.googCurrentDelayMs);var bytes=result.googCurrentDelayMs-getStatsResult.internal.video.prevGoogCurrentDelayMs;getStatsResult.internal.video.prevGoogCurrentDelayMs=result.googCurrentDelayMs,getStatsResult.video.latency=bytes.toFixed(1),getStatsResult.video.latency<0&&(getStatsResult.video.latency=0)}if(result.packetsLost){var kilobytes=0;getStatsResult.internal.video.prevPacketsLost||(getStatsResult.internal.video.prevPacketsLost=result.packetsLost);var bytes=result.packetsLost-getStatsResult.internal.video.prevPacketsLost;getStatsResult.internal.video.prevPacketsLost=result.packetsLost,getStatsResult.video.packetsLost=bytes.toFixed(1),getStatsResult.video.packetsLost<0&&(getStatsResult.video.packetsLost=0)}}}},getStatsParser.bweforvideo=function(result){\"VideoBwe\"===result.type&&(getStatsResult.bandwidth.availableSendBandwidth=result.googAvailableSendBandwidth,getStatsResult.bandwidth.googActualEncBitrate=result.googActualEncBitrate,getStatsResult.bandwidth.googAvailableSendBandwidth=result.googAvailableSendBandwidth,getStatsResult.bandwidth.googAvailableReceiveBandwidth=result.googAvailableReceiveBandwidth,getStatsResult.bandwidth.googRetransmitBitrate=result.googRetransmitBitrate,getStatsResult.bandwidth.googTargetEncBitrate=result.googTargetEncBitrate,getStatsResult.bandwidth.googBucketDelay=result.googBucketDelay,getStatsResult.bandwidth.googTransmitBitrate=result.googTransmitBitrate)},getStatsParser.candidatePair=function(result){if(\"googCandidatePair\"===result.type||\"candidate-pair\"===result.type||\"local-candidate\"===result.type||\"remote-candidate\"===result.type){if(\"true\"==result.googActiveConnection){Object.keys(getStatsResult.internal.candidates).forEach(function(cid){var candidate=getStatsResult.internal.candidates[cid];candidate.ipAddress.indexOf(result.googLocalAddress)!==-1&&(getStatsResult.connectionType.local.candidateType=candidate.candidateType,getStatsResult.connectionType.local.ipAddress=candidate.ipAddress,getStatsResult.connectionType.local.networkType=candidate.networkType,getStatsResult.connectionType.local.transport=candidate.transport),candidate.ipAddress.indexOf(result.googRemoteAddress)!==-1&&(getStatsResult.connectionType.remote.candidateType=candidate.candidateType,getStatsResult.connectionType.remote.ipAddress=candidate.ipAddress,getStatsResult.connectionType.remote.networkType=candidate.networkType,getStatsResult.connectionType.remote.transport=candidate.transport)}),getStatsResult.connectionType.transport=result.googTransportType;var localCandidate=getStatsResult.internal.candidates[result.localCandidateId];localCandidate&&localCandidate.ipAddress&&(getStatsResult.connectionType.systemIpAddress=localCandidate.ipAddress);var remoteCandidate=getStatsResult.internal.candidates[result.remoteCandidateId];remoteCandidate&&remoteCandidate.ipAddress&&(getStatsResult.connectionType.systemIpAddress=remoteCandidate.ipAddress)}if(\"candidate-pair\"===result.type&&result.selected===!0&&result.nominated===!0&&\"succeeded\"===result.state)var localCandidate=getStatsResult.internal.candidates[result.remoteCandidateId],remoteCandidate=getStatsResult.internal.candidates[result.remoteCandidateId];if(\"local-candidate\"===result.type&&(getStatsResult.connectionType.local.candidateType=result.candidateType,getStatsResult.connectionType.local.ipAddress=result.ipAddress,getStatsResult.connectionType.local.networkType=result.networkType,getStatsResult.connectionType.local.transport=result.mozLocalTransport||result.transport),\"remote-candidate\"===result.type&&(getStatsResult.connectionType.remote.candidateType=result.candidateType,getStatsResult.connectionType.remote.ipAddress=result.ipAddress,getStatsResult.connectionType.remote.networkType=result.networkType,getStatsResult.connectionType.remote.transport=result.mozRemoteTransport||result.transport),isSafari){var sendrecvType=result.localCandidateId?\"send\":\"recv\";if(!sendrecvType)return;if(result.bytesSent){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevBytesSent||(getStatsResult.internal.video[sendrecvType].prevBytesSent=result.bytesSent);var bytes=result.bytesSent-getStatsResult.internal.video[sendrecvType].prevBytesSent;getStatsResult.internal.video[sendrecvType].prevBytesSent=result.bytesSent,kilobytes=bytes/1024,getStatsResult.video[sendrecvType].availableBandwidth=kilobytes.toFixed(1),getStatsResult.video.bytesSent=kilobytes.toFixed(1)}if(result.bytesReceived){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevBytesReceived||(getStatsResult.internal.video[sendrecvType].prevBytesReceived=result.bytesReceived);var bytes=result.bytesReceived-getStatsResult.internal.video[sendrecvType].prevBytesReceived;getStatsResult.internal.video[sendrecvType].prevBytesReceived=result.bytesReceived,kilobytes=bytes/1024,getStatsResult.video.bytesReceived=kilobytes.toFixed(1)}if(result.availableOutgoingBitrate){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate||(getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate=result.availableOutgoingBitrate);var bytes=result.availableOutgoingBitrate-getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate;getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate=result.availableOutgoingBitrate,kilobytes=bytes/1024,getStatsResult.video.availableOutgoingBitrate=kilobytes.toFixed(1)}if(result.availableIncomingBitrate){var kilobytes=0;getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate||(getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate=result.availableIncomingBitrate);var bytes=result.availableIncomingBitrate-getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate;getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate=result.availableIncomingBitrate,kilobytes=bytes/1024,getStatsResult.video.availableIncomingBitrate=kilobytes.toFixed(1)}}}};var LOCAL_candidateType={},LOCAL_transport={},LOCAL_ipAddress={},LOCAL_networkType={};getStatsParser.localcandidate=function(result){\"localcandidate\"!==result.type&&\"local-candidate\"!==result.type||result.id&&(LOCAL_candidateType[result.id]||(LOCAL_candidateType[result.id]=[]),LOCAL_transport[result.id]||(LOCAL_transport[result.id]=[]),LOCAL_ipAddress[result.id]||(LOCAL_ipAddress[result.id]=[]),LOCAL_networkType[result.id]||(LOCAL_networkType[result.id]=[]),result.candidateType&&LOCAL_candidateType[result.id].indexOf(result.candidateType)===-1&&LOCAL_candidateType[result.id].push(result.candidateType),result.transport&&LOCAL_transport[result.id].indexOf(result.transport)===-1&&LOCAL_transport[result.id].push(result.transport),result.ipAddress&&LOCAL_ipAddress[result.id].indexOf(result.ipAddress+\":\"+result.portNumber)===-1&&LOCAL_ipAddress[result.id].push(result.ipAddress+\":\"+result.portNumber),result.networkType&&LOCAL_networkType[result.id].indexOf(result.networkType)===-1&&LOCAL_networkType[result.id].push(result.networkType),getStatsResult.internal.candidates[result.id]={candidateType:LOCAL_candidateType[result.id],ipAddress:LOCAL_ipAddress[result.id],portNumber:result.portNumber,networkType:LOCAL_networkType[result.id],priority:result.priority,transport:LOCAL_transport[result.id],timestamp:result.timestamp,id:result.id,type:result.type},getStatsResult.connectionType.local.candidateType=LOCAL_candidateType[result.id],getStatsResult.connectionType.local.ipAddress=LOCAL_ipAddress[result.id],getStatsResult.connectionType.local.networkType=LOCAL_networkType[result.id],getStatsResult.connectionType.local.transport=LOCAL_transport[result.id])};var REMOTE_candidateType={},REMOTE_transport={},REMOTE_ipAddress={},REMOTE_networkType={};getStatsParser.remotecandidate=function(result){\"remotecandidate\"!==result.type&&\"remote-candidate\"!==result.type||result.id&&(REMOTE_candidateType[result.id]||(REMOTE_candidateType[result.id]=[]),REMOTE_transport[result.id]||(REMOTE_transport[result.id]=[]),REMOTE_ipAddress[result.id]||(REMOTE_ipAddress[result.id]=[]),REMOTE_networkType[result.id]||(REMOTE_networkType[result.id]=[]),result.candidateType&&REMOTE_candidateType[result.id].indexOf(result.candidateType)===-1&&REMOTE_candidateType[result.id].push(result.candidateType),result.transport&&REMOTE_transport[result.id].indexOf(result.transport)===-1&&REMOTE_transport[result.id].push(result.transport),result.ipAddress&&REMOTE_ipAddress[result.id].indexOf(result.ipAddress+\":\"+result.portNumber)===-1&&REMOTE_ipAddress[result.id].push(result.ipAddress+\":\"+result.portNumber),result.networkType&&REMOTE_networkType[result.id].indexOf(result.networkType)===-1&&REMOTE_networkType[result.id].push(result.networkType),getStatsResult.internal.candidates[result.id]={candidateType:REMOTE_candidateType[result.id],ipAddress:REMOTE_ipAddress[result.id],portNumber:result.portNumber,networkType:REMOTE_networkType[result.id],priority:result.priority,transport:REMOTE_transport[result.id],timestamp:result.timestamp,id:result.id,type:result.type},getStatsResult.connectionType.remote.candidateType=REMOTE_candidateType[result.id],getStatsResult.connectionType.remote.ipAddress=REMOTE_ipAddress[result.id],getStatsResult.connectionType.remote.networkType=REMOTE_networkType[result.id],getStatsResult.connectionType.remote.transport=REMOTE_transport[result.id])},getStatsParser.dataSentReceived=function(result){!result.googCodecName||\"video\"!==result.mediaType&&\"audio\"!==result.mediaType||(result.bytesSent&&(getStatsResult[result.mediaType].bytesSent=parseInt(result.bytesSent)),result.bytesReceived&&(getStatsResult[result.mediaType].bytesReceived=parseInt(result.bytesReceived)))},getStatsParser.inboundrtp=function(result){if(isSafari&&\"inbound-rtp\"===result.type){var mediaType=result.mediaType||\"audio\",sendrecvType=result.isRemote?\"recv\":\"send\";if(sendrecvType){if(result.bytesSent){var kilobytes=0;getStatsResult.internal[mediaType][sendrecvType].prevBytesSent||(getStatsResult.internal[mediaType][sendrecvType].prevBytesSent=result.bytesSent);var bytes=result.bytesSent-getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;getStatsResult.internal[mediaType][sendrecvType].prevBytesSent=result.bytesSent,kilobytes=bytes/1024,getStatsResult[mediaType][sendrecvType].availableBandwidth=kilobytes.toFixed(1),getStatsResult[mediaType].bytesSent=kilobytes.toFixed(1)}if(result.bytesReceived){var kilobytes=0;getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived||(getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived=result.bytesReceived);var bytes=result.bytesReceived-getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived=result.bytesReceived,kilobytes=bytes/1024,getStatsResult[mediaType].bytesReceived=kilobytes.toFixed(1)}}}},getStatsParser.outboundrtp=function(result){if(isSafari&&\"outbound-rtp\"===result.type){var mediaType=result.mediaType||\"audio\",sendrecvType=result.isRemote?\"recv\":\"send\";if(sendrecvType){if(result.bytesSent){var kilobytes=0;getStatsResult.internal[mediaType][sendrecvType].prevBytesSent||(getStatsResult.internal[mediaType][sendrecvType].prevBytesSent=result.bytesSent);var bytes=result.bytesSent-getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;getStatsResult.internal[mediaType][sendrecvType].prevBytesSent=result.bytesSent,kilobytes=bytes/1024,getStatsResult[mediaType][sendrecvType].availableBandwidth=kilobytes.toFixed(1),getStatsResult[mediaType].bytesSent=kilobytes.toFixed(1)}if(result.bytesReceived){var kilobytes=0;getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived||(getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived=result.bytesReceived);var bytes=result.bytesReceived-getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived=result.bytesReceived,kilobytes=bytes/1024,getStatsResult[mediaType].bytesReceived=kilobytes.toFixed(1)}}}},getStatsParser.track=function(result){if(isSafari&&\"track\"===result.type){var sendrecvType=result.remoteSource===!0?\"send\":\"recv\";result.frameWidth&&result.frameHeight&&(getStatsResult.resolutions[sendrecvType].width=result.frameWidth,getStatsResult.resolutions[sendrecvType].height=result.frameHeight)}};var SSRC={audio:{send:[],recv:[]},video:{send:[],recv:[]}};getStatsParser.ssrc=function(result){if(result.googCodecName&&(\"video\"===result.mediaType||\"audio\"===result.mediaType)&&\"ssrc\"===result.type){var sendrecvType=result.id.split(\"_\").pop();SSRC[result.mediaType][sendrecvType].indexOf(result.ssrc)===-1&&SSRC[result.mediaType][sendrecvType].push(result.ssrc),getStatsResult[result.mediaType][sendrecvType].streams=SSRC[result.mediaType][sendrecvType].length}},getStatsLooper()};\"undefined\"!=typeof module&&(module.exports=getStats),\"function\"==typeof define&&define.amd&&define(\"getStats\",[],function(){return getStats});","'use strict';\n\nconst Helper = (() => {\n  const avatarUrl = '../static/plugins/ep_profile_modal/static/img/user.png';\n  const hElements = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', '.h1', '.h2', '.h3', '.h4', '.h5', '.h6'];\n  let ace;\n\n  const init = (context) => ace = context.ace;\n\n  const getAvatarUrl = (userId) => {\n    if (!userId) return avatarUrl;\n    return `/static/getUserProfileImage/${userId}/${window.pad.getPadId()}?t=${new Date().getTime()}`;\n  };\n\n  const getValidUrl = function () {\n    const url = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n    if (url === '') return '';\n    let newUrl = window.decodeURIComponent(url);\n    newUrl = newUrl.trim().replace(/\\s/g, '');\n\n    if (/^(:\\/\\/)/.test(newUrl)) {\n      return `http${newUrl}`;\n    }\n    if (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\n      return `http://${newUrl}`;\n    }\n\n    return newUrl;\n  };\n\n  const getUserId = () => clientVars.userId || window.pad.getUserId();\n\n  const stopStreaming = (callback) => {\n    const stream = wrtcStore.localstream;\n    if (stream) {\n      stream.getTracks().forEach((track) => {\n        track.stop();\n        stream.removeTrack(track);\n      });\n      wrtcStore.localstream = null;\n      if (callback) callback();\n    }\n  };\n\n  const getUserFromId = (userId) => {\n    const anonymousUser = {name: 'anonymous', userId, colorId: '#FFF'};\n    if (!window.pad || !window.pad.collabClient) return anonymousUser;\n    const result = window.pad.collabClient.getConnectedUsers().filter((user) => user.userId === userId);\n    const user = result.length > 0 ? result[0] : anonymousUser;\n    return user;\n  };\n\n  const slugify = (text) => text.toString().toLowerCase().trim().replace(/\\s+/g, '-') // Replace spaces with -\n      .replace(/&/g, '-and-') // Replace & with 'and'\n      .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n      .replace(/\\--+/g, '-') // Replace multiple - with single -\n      .replace(/^-+/, '') // Trim - from start of text\n      .replace(/-+$/, '') // Trim - from end of text\n  ;\n\n  const $body_ace_outer = () => $(document).find('iframe[name=\"ace_outer\"]').contents();\n\n  const createShareLink = (headerId, headerText = 'headerText') => `${window.location.origin + window.location.pathname}?header=${slugify(headerText)}&id=${headerId}&target=video&join=true`;\n\n\n  // socketState: 'CLOSED', 'OPEND', 'DISCONNECTED'\n  // enable: plugin active/deactivate\n  const wrtcStore = {\n    enable: true,\n    userInRoom: false,\n    currentOpenRoom: null,\n    socketState: 'CLOSED',\n    localstream: null,\n    components: {\n      video: {init: false, open: false},\n      room: {init: false, open: false},\n      wrtc: {init: false, open: false},\n    },\n    rooms: new Map(),\n  };\n\n  const wrtcPubsub = {\n    events: {},\n    on: function on(eventName, fn) {\n      this.events[eventName] = this.events[eventName] || [];\n      this.events[eventName].push(fn);\n    },\n    off: function off(eventName, fn) {\n      if (this.events[eventName]) {\n        for (let i = 0; i < this.events[eventName].length; i++) {\n          if (this.events[eventName][i] === fn) {\n            this.events[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function emit(eventName) {\n      for (var _len = arguments.length, data = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        data[_key - 1] = arguments[_key];\n      }\n\n      if (this.events[eventName]) {\n        this.events[eventName].forEach((fn) => {\n          fn.apply(undefined, data);\n        });\n      }\n    },\n  };\n\n  // search the inlineAvatar in all over\n\n  /**\n\t * @property ROOM\n\t * @property VIDEO\n\t * @property update\n\t */\n  const inlineAvatar = {\n    ROOM: (headerId, room) => {\n      if (!clientVars.webrtc.displayInlineAvatar) return;\n\n      const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n      let $element = $body_ace_outer().find(`#wbrtc_avatarCol .${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n\n      const offsetTop = findAceHeaderElement(headerId).offset.top() - 16;\n\n      if (!$element.length) {\n        const avatarBox = $('#wrtcLinesIcons').tmpl({headerId, offsetTop});\n        $element = $body_ace_outer().find('#wbrtc_avatarCol').append(avatarBox);\n        $element = $element.find(`.${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n      }\n\n      const $videoInlineAvatarIcons = $body_ace_outer().find('#wbrtc_avatarCol .wrtc_inlineAvatars');\n\n      $element.find('.avatar').remove();\n      Object.keys(room).forEach((key, index) => {\n        const userInList = getUserFromId(room[key].userId) || {colorId: '', name: 'anonymous'};\n        if (userInList.userId) {\n          // if user avatar find in other room remove it\n          $videoInlineAvatarIcons.find(`.avatar[data-id=\"${userInList.userId}\"]`).remove();\n\n          if (index < inlineAvatarLimit) {\n            const userName = userInList.name || 'anonymous';\n            $element.find('.avatarMore').hide();\n            $element.append(`<div class=\"avatar btn_roomHandler\" data-join=\"null\" data-action=\"USERPROFILEMODAL\" data-id=\"${userInList.userId}\"><div title='${userName}' style=\"background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50% ; background-size : cover;\"></div></div>`);\n          } else {\n            $element.find('.avatarMore').show().text(`+${index + 1 - inlineAvatarLimit}`);\n          }\n        }\n      });\n    },\n    VIDEO(headerId, room) {\n      const $element = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n      if (!clientVars.webrtc.displayInlineAvatar) {\n        $element.hide();\n        return;\n      }\n      $element.show();\n      $element.find('.avatar').remove();\n      this._append(room.list, $element);\n    },\n    _append(list, $element) {\n      const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n      list.forEach((el, index) => {\n        const userInList = getUserFromId(el.userId) || {colorId: '', name: 'anonymous'};\n        if (userInList.userId) {\n          if (index < inlineAvatarLimit) {\n            const userName = userInList.name || 'anonymous';\n            $element.find('.avatarMore').hide();\n            $element.append(`<div class=\"avatar btn_roomHandler\" data-join=\"null\" data-action=\"USERPROFILEMODAL\" data-id=\"${userInList.userId}\"><div title='${userName}' style=\"background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50% ; background-size : cover;\"></div></div>`);\n          } else {\n            $element.find('.avatarMore').show().text(`+${index + 1 - inlineAvatarLimit}`);\n          }\n        }\n      });\n    },\n    update: (userId, data) => {\n      if (!clientVars.webrtc.displayInlineAvatar) return;\n\n      const $roomBox = $body_ace_outer().find('#wrtcVideoIcons .wrtcIconLine .wrtc_inlineAvatars');\n      const $videoBox = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n\n      if ($roomBox) {\n        $roomBox.find(`.avatar[data-id=\"${userId}\"] img`).attr({\n          src: data.imageUrl,\n          title: data.userName,\n        });\n      }\n\n      if ($videoBox) {\n        $videoBox.find('.avatar img').attr({\n          src: data.imageUrl,\n          title: data.userName,\n        });\n      }\n    },\n  };\n\n\n  /**\n    * @param {boolean} state\n  */\n  wrtcPubsub.on('plugin enable', (state) => {\n    $body_ace_outer().find('iframe').contents()\n        .find('#innerdocbody').find('.videoHeader wrt-inline-icon').each((i, el) => {\n          el.shadowRoot.querySelector('.btn_roomHandler').style.display = state ? 'flex' : 'none';\n        });\n\n    Helper.$body_ace_outer().find('#outerdocbody')\n        .find('#wbrtc_avatarCol')[0].style.display = state ? 'flex' : 'none';\n\n    // deactive\n    if (!state) {\n      videoChat.userLeave(window.headerId, wrtcPubsub.currentOpenRoom, 'PLUS');\n      wrtcPubsub.currentOpenRoom = null;\n    }\n    wrtcStore.enable = state;\n  });\n\n  wrtcPubsub.on('update network information', () => {});\n\n  /**\n\t * state (DISCONNECTED|OPEND)\n\t */\n  wrtcPubsub.on('socket state', (state) => {\n    wrtcStore.socketState = state;\n    console.info('[wrtc]: socket state has been change, new state:', state, wrtcStore.userInRoom, window.headerId);\n    if (state === 'OPEND' && wrtcStore.userInRoom) {\n      console.info('Try reconnecting...');\n      WRTC.attemptToReconnect();\n    }\n  });\n\n  /**\n    * @param {string} flow  @enum\t(init|open)\n    * @param {boolean}  status  @enum (true|false)\n  */\n  wrtcPubsub.on('componentsFlow', (name, flow, status) => {\n    wrtcStore.components[name][flow] = status;\n  });\n\n  wrtcPubsub.on('update inlineAvater info', (userId, data) => {\n    if (clientVars.webrtc.displayInlineAvatar) inlineAvatar.update(userId, data);\n  });\n\n  wrtcPubsub.on('update store', (requestUser, headerId, action, target, roomInfo, callback) => {\n    if (!requestUser || !headerId || !action || !roomInfo || !target) return false;\n\n    if (!wrtcStore.rooms.has(headerId)) {\n      wrtcStore.rooms.set(\n          headerId,\n          {\n            VIDEO: {list: []},\n            TEXT: {list: []},\n            USERS: {},\n            headerCount: 0,\n          }\n      );\n    }\n\n    const room = wrtcStore.rooms.get(headerId);\n    let users = room.USERS;\n\n    room[target] = roomInfo;\n\n    // remove all users\n    users = {};\n\n    if (room.VIDEO.list) {\n      room.VIDEO.list.forEach((el) => {\n        if (!users[el.userId]) users[el.userId] = {};\n        users[el.userId] = el;\n      });\n    }\n\n    inlineAvatar[target](headerId, room[target]);\n    inlineAvatar.ROOM(headerId, users);\n\n    wrtcStore.rooms.set(headerId, room);\n\n    if (callback) callback(room);\n  });\n\n  wrtcPubsub.on('disable room buttons', (headerId, actions, target) => {\n    const btn = $('#header_videochat_icon')[0];\n    if (!btn) return;\n    btn.classList.add('activeLoader');\n    btn.setAttribute('disabled', true);\n  });\n\n  wrtcPubsub.on('enable room buttons', (headerId, action, target) => {\n    const btn = $('#header_videochat_icon')[0];\n    if (!btn) return;\n    const newAction = action === 'JOIN' ? 'LEAVE' : 'JOIN';\n    btn.removeAttribute('disabled');\n    btn.setAttribute('data-action', newAction);\n    btn.classList.remove('activeLoader');\n  });\n\n  wrtcPubsub.on('updateWrtcToolbarModal', (headerId, roomInfo) => {\n    const headerTile = findAceHeaderElement(headerId).text;\n\n    $('#wrtc_modal .nd_title .title').html(headerTile);\n\n    $(document)\n      .find('#wrtc_modal')\n      .find('.btn_leave, .btn_reload, .btn_shareRoom, .btn_videoSetting')\n      .attr('data-id', headerId);\n  });\n\n  wrtcPubsub.on('updateWrtcToolbarTitleModal', (headerTile, headerId) => {\n    if (headerId === window.headerId) {\n      $(`#wrtc_modal #werc_toolbar .nd_title .titleb[data-id='${headerId}'`).html(headerTile);\n      $(document).find(`.wrtc_roomLink[data-id='${headerId}']`).text(headerTile);\n    }\n  });\n\n  const getHeaderRoomY = ($element) => {\n    if (!$element.length) return;\n    const height = $element.outerHeight();\n    const paddingTop = Helper.$body_ace_outer().find('iframe[name=\"ace_inner\"]').css('padding-top');\n    const aceOuterPadding = parseInt(paddingTop, 10);\n    const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n    return offsetTop + height / 2;\n  };\n\n  const getHeaderRoomX = ($element) => {\n    if (!$element.length) return;\n    const width = $element.outerWidth();\n    const aceInner = Helper.$body_ace_outer().find('iframe[name=\"ace_inner\"]');\n    const paddingLeft = aceInner.css('padding-left');\n    const aceOuterPadding = parseInt(paddingLeft, 10);\n    const offsetLeft = Math.ceil(aceInner.offset().left - aceOuterPadding);\n    return offsetLeft - width - 6;\n  };\n\n  const findAceHeaderElement = (headerId) => {\n    const $el = $body_ace_outer().find('iframe').contents()\n        .find('#innerdocbody').find(`.heading.${headerId}`);\n    return {\n      exist: $el.length,\n      $el,\n      text: $el.text(),\n      tag: $el.attr('data-htag'),\n      offset: {\n        top: () => getHeaderRoomY($el),\n        left: () => getHeaderRoomX($el),\n      },\n      $inlineIcon: () => $el.find('wrt-inline-icon').length\n        ? $el.find('wrt-inline-icon')[0].shadowRoot : null,\n    };\n  };\n\n  return {\n    init,\n    hElements,\n    getUserFromId,\n    slugify,\n    $body_ace_outer,\n    createShareLink,\n    wrtcStore,\n    wrtcPubsub,\n    getUserId,\n    stopStreaming,\n    getValidUrl,\n    findAceHeaderElement,\n    inlineAvatar,\n    getHeaderRoomY,\n\n  };\n})();\n","// CodecsHandler.js\n'use strict';\n\nvar CodecsHandler = (function () {\n  function preferCodec(sdp, codecName) {\n    const info = splitLines(sdp);\n\n    codecName = codecName.toLowerCase();\n\n    if (!info.videoCodecNumbers) {\n      return sdp;\n    }\n\n    if (codecName === 'vp8' && info.vp8LineNumber === info.videoCodecNumbers[0]) {\n      return sdp;\n    }\n\n    if (codecName === 'vp9' && info.vp9LineNumber === info.videoCodecNumbers[0]) {\n      return sdp;\n    }\n\n    if (codecName === 'h264' && info.h264LineNumber === info.videoCodecNumbers[0]) {\n      return sdp;\n    }\n\n    sdp = preferCodecHelper(sdp, codecName, info);\n\n    return sdp;\n  }\n\n  function preferCodecHelper(sdp, codec, info, ignore) {\n    let preferCodecNumber = '';\n\n    if (codec === 'vp8') {\n      if (!info.vp8LineNumber) {\n        return sdp;\n      }\n      preferCodecNumber = info.vp8LineNumber;\n    }\n\n    if (codec === 'vp9') {\n      if (!info.vp9LineNumber) {\n        return sdp;\n      }\n      preferCodecNumber = info.vp9LineNumber;\n    }\n\n    if (codec === 'h264') {\n      if (!info.h264LineNumber) {\n        return sdp;\n      }\n\n      preferCodecNumber = info.h264LineNumber;\n    }\n\n    let newLine = `${info.videoCodecNumbersOriginal.split('SAVPF')[0]}SAVPF `;\n\n    let newOrder = [preferCodecNumber];\n\n    if (ignore) {\n      newOrder = [];\n    }\n\n    info.videoCodecNumbers.forEach((codecNumber) => {\n      if (codecNumber === preferCodecNumber) return;\n      newOrder.push(codecNumber);\n    });\n\n    newLine += newOrder.join(' ');\n\n    sdp = sdp.replace(info.videoCodecNumbersOriginal, newLine);\n    return sdp;\n  }\n\n  function splitLines(sdp) {\n    const info = {};\n    sdp.split('\\n').forEach((line) => {\n      if (line.indexOf('m=video') === 0) {\n        info.videoCodecNumbers = [];\n        line.split('SAVPF')[1].split(' ').forEach((codecNumber) => {\n          codecNumber = codecNumber.trim();\n          if (!codecNumber || !codecNumber.length) return;\n          info.videoCodecNumbers.push(codecNumber);\n          info.videoCodecNumbersOriginal = line;\n        });\n      }\n\n      if (line.indexOf('VP8/90000') !== -1 && !info.vp8LineNumber) {\n        info.vp8LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n      }\n\n      if (line.indexOf('VP9/90000') !== -1 && !info.vp9LineNumber) {\n        info.vp9LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n      }\n\n      if (line.indexOf('H264/90000') !== -1 && !info.h264LineNumber) {\n        info.h264LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n      }\n    });\n\n    return info;\n  }\n\n  function removeVPX(sdp) {\n    const info = splitLines(sdp);\n\n    // last parameter below means: ignore these codecs\n    sdp = preferCodecHelper(sdp, 'vp9', info, true);\n    sdp = preferCodecHelper(sdp, 'vp8', info, true);\n\n    return sdp;\n  }\n\n  function disableNACK(sdp) {\n    if (!sdp || typeof sdp !== 'string') {\n      throw 'Invalid arguments.';\n    }\n\n    sdp = sdp.replace('a=rtcp-fb:126 nack\\r\\n', '');\n    sdp = sdp.replace('a=rtcp-fb:126 nack pli\\r\\n', 'a=rtcp-fb:126 pli\\r\\n');\n    sdp = sdp.replace('a=rtcp-fb:97 nack\\r\\n', '');\n    sdp = sdp.replace('a=rtcp-fb:97 nack pli\\r\\n', 'a=rtcp-fb:97 pli\\r\\n');\n\n    return sdp;\n  }\n\n  function prioritize(codecMimeType, peer) {\n    if (!peer || !peer.getSenders || !peer.getSenders().length) {\n      return;\n    }\n\n    if (!codecMimeType || typeof codecMimeType !== 'string') {\n      throw 'Invalid arguments.';\n    }\n\n    peer.getSenders().forEach((sender) => {\n      const params = sender.getParameters();\n      for (let i = 0; i < params.codecs.length; i++) {\n        if (params.codecs[i].mimeType === codecMimeType) {\n          params.codecs.unshift(params.codecs.splice(i, 1));\n          break;\n        }\n      }\n      sender.setParameters(params);\n    });\n  }\n\n  function removeNonG722(sdp) {\n    return sdp.replace(/m=audio ([0-9]+) RTP\\/SAVPF ([0-9 ]*)/g, 'm=audio $1 RTP/SAVPF 9');\n  }\n\n  function setBAS(sdp, bandwidth, isScreen) {\n    if (!!navigator.mozGetUserMedia || !bandwidth) {\n      return sdp;\n    }\n\n    if (isScreen) {\n      if (!bandwidth.screen) {\n        console.warn('It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.');\n      } else if (bandwidth.screen < 300) {\n        console.warn('It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail.');\n      }\n    }\n\n    // if screen; must use at least 300kbs\n    if (bandwidth.screen && isScreen) {\n      sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n      sdp = sdp.replace(/a=mid:video\\r\\n/g, `a=mid:video\\r\\nb=AS:${bandwidth.screen}\\r\\n`);\n    }\n\n    // remove existing bandwidth lines\n    if (bandwidth.audio || bandwidth.video || bandwidth.data) {\n      sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n    }\n\n    if (bandwidth.audio) {\n      sdp = sdp.replace(/a=mid:audio\\r\\n/g, `a=mid:audio\\r\\nb=AS:${bandwidth.audio}\\r\\n`);\n    }\n\n    if (bandwidth.video) {\n      sdp = sdp.replace(/a=mid:video\\r\\n/g, `a=mid:video\\r\\nb=AS:${isScreen ? bandwidth.screen : bandwidth.video}\\r\\n`);\n    }\n\n    return sdp;\n  }\n\n  // Find the line in sdpLines that starts with |prefix|, and, if specified,\n  // contains |substr| (case-insensitive search).\n  function findLine(sdpLines, prefix, substr) {\n    return findLineInRange(sdpLines, 0, -1, prefix, substr);\n  }\n\n  // Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|\n  // and, if specified, contains |substr| (case-insensitive search).\n  function findLineInRange(sdpLines, startLine, endLine, prefix, substr) {\n    const realEndLine = endLine !== -1 ? endLine : sdpLines.length;\n    for (let i = startLine; i < realEndLine; ++i) {\n      if (sdpLines[i].indexOf(prefix) === 0) {\n        if (!substr || sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {\n          return i;\n        }\n      }\n    }\n    return null;\n  }\n\n  // Gets the codec payload type from an a=rtpmap:X line.\n  function getCodecPayloadType(sdpLine) {\n    const pattern = new RegExp('a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+');\n    const result = sdpLine.match(pattern);\n    return result && result.length === 2 ? result[1] : null;\n  }\n\n  function _setVideoBitrates(sdp, params) {\n    params = params || {};\n    const xgoogle_min_bitrate = params.min;\n    const xgoogle_max_bitrate = params.max;\n    const videoCodec = params.codec.toUpperCase() || 'VP8';\n\n    const sdpLines = sdp.split('\\r\\n');\n\n    // VP8\n    const vp8Index = findLine(sdpLines, 'a=rtpmap', `${videoCodec}/90000`);\n    let vp8Payload;\n    if (vp8Index) {\n      vp8Payload = getCodecPayloadType(sdpLines[vp8Index]);\n    }\n\n    if (!vp8Payload) {\n      return sdp;\n    }\n\n    const rtxIndex = findLine(sdpLines, 'a=rtpmap', 'rtx/90000');\n    let rtxPayload;\n    if (rtxIndex) {\n      rtxPayload = getCodecPayloadType(sdpLines[rtxIndex]);\n    }\n\n    if (!rtxIndex) {\n      return sdp;\n    }\n\n    const rtxFmtpLineIndex = findLine(sdpLines, `a=fmtp:${rtxPayload.toString()}`);\n    if (rtxFmtpLineIndex !== null) {\n      let appendrtxNext = '\\r\\n';\n      appendrtxNext += `a=fmtp:${vp8Payload} x-google-min-bitrate=${xgoogle_min_bitrate || '228'}; x-google-max-bitrate=${xgoogle_max_bitrate || '228'}`;\n      sdpLines[rtxFmtpLineIndex] = sdpLines[rtxFmtpLineIndex].concat(appendrtxNext);\n      sdp = sdpLines.join('\\r\\n');\n    }\n\n    return sdp;\n  }\n\n  function _setOpusAttributes(sdp, params) {\n    params = params || {};\n\n    const sdpLines = sdp.split('\\r\\n');\n\n    // Opus\n    const opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000');\n    let opusPayload;\n    if (opusIndex) {\n      opusPayload = getCodecPayloadType(sdpLines[opusIndex]);\n    }\n\n    if (!opusPayload) {\n      return sdp;\n    }\n\n    const opusFmtpLineIndex = findLine(sdpLines, `a=fmtp:${opusPayload.toString()}`);\n    if (opusFmtpLineIndex == null) {\n      return sdp;\n    }\n\n    let appendOpusNext = '';\n    appendOpusNext += `; stereo=${typeof params.stereo !== 'undefined' ? params.stereo : '1'}`;\n    appendOpusNext += `; sprop-stereo=${typeof params['sprop-stereo'] !== 'undefined' ? params['sprop-stereo'] : '1'}`;\n\n    if (typeof params.maxaveragebitrate !== 'undefined') {\n      appendOpusNext += `; maxaveragebitrate=${params.maxaveragebitrate || 128 * 1024 * 8}`;\n    }\n\n    if (typeof params.maxplaybackrate !== 'undefined') {\n      appendOpusNext += `; maxplaybackrate=${params.maxplaybackrate || 128 * 1024 * 8}`;\n    }\n\n    if (typeof params.cbr !== 'undefined') {\n      appendOpusNext += `; cbr=${typeof params.cbr !== 'undefined' ? params.cbr : '1'}`;\n    }\n\n    if (typeof params.useinbandfec !== 'undefined') {\n      appendOpusNext += `; useinbandfec=${params.useinbandfec}`;\n    }\n\n    if (typeof params.usedtx !== 'undefined') {\n      appendOpusNext += `; usedtx=${params.usedtx}`;\n    }\n\n    if (typeof params.maxptime !== 'undefined') {\n      appendOpusNext += `\\r\\na=maxptime:${params.maxptime}`;\n    }\n\n    sdpLines[opusFmtpLineIndex] = sdpLines[opusFmtpLineIndex].concat(appendOpusNext);\n\n    sdp = sdpLines.join('\\r\\n');\n    return sdp;\n  }\n\n  // forceStereoAudio => via webrtcexample.com\n  // requires getUserMedia => echoCancellation:false\n  function forceStereoAudio(sdp) {\n    const sdpLines = sdp.split('\\r\\n');\n    let fmtpLineIndex = null;\n    for (var i = 0; i < sdpLines.length; i++) {\n      if (sdpLines[i].search('opus/48000') !== -1) {\n        var opusPayload = extractSdp(sdpLines[i], /:(\\d+) opus\\/48000/i);\n        break;\n      }\n    }\n    for (var i = 0; i < sdpLines.length; i++) {\n      if (sdpLines[i].search('a=fmtp') !== -1) {\n        const payload = extractSdp(sdpLines[i], /a=fmtp:(\\d+)/);\n        if (payload === opusPayload) {\n          fmtpLineIndex = i;\n          break;\n        }\n      }\n    }\n    if (fmtpLineIndex == null) return sdp;\n    sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1');\n    sdp = sdpLines.join('\\r\\n');\n    return sdp;\n  }\n\n  return {\n    removeVPX,\n    disableNACK,\n    prioritize,\n    removeNonG722,\n    setApplicationSpecificBandwidth: function setApplicationSpecificBandwidth(sdp, bandwidth, isScreen) {\n      return setBAS(sdp, bandwidth, isScreen);\n    },\n    setVideoBitrates: function setVideoBitrates(sdp, params) {\n      return _setVideoBitrates(sdp, params);\n    },\n    setOpusAttributes: function setOpusAttributes(sdp, params) {\n      return _setOpusAttributes(sdp, params);\n    },\n    preferVP9: function preferVP9(sdp) {\n      return preferCodec(sdp, 'vp9');\n    },\n    preferCodec,\n    forceStereoAudio,\n  };\n})();\n","'use strict';\n\nconst videoChat = (() => {\n  let socket = null;\n  let padId = null;\n  let currentRoom = {};\n  let VIDEOCHATLIMIT = 0;\n  let $joinBtn = null;\n  let networkInterval = null;\n  const pingos = {\n    startTime: 0,\n    latency: 0,\n    LMin: 0,\n    LMax: 0,\n    avg: 0,\n    LineAvg: [],\n    colors: {\n      normal: '#fff',\n      warning: '#ffcc00',\n      danger: '#cc3300',\n    },\n    interavCheck: 1000,\n  };\n\n  const startWatchNetwork = function startWatchNetwork() {\n    networkInterval = setInterval(() => {\n      pingos.startTime = Date.now();\n      socket.emit('pingil', padId, window.headerId, Helper.getUserId(), pingos.avg);\n    }, pingos.interavCheck);\n  };\n\n  const stopWatchNetwork = () => clearInterval(networkInterval);\n\n  function mediaDevices() {\n    navigator.mediaDevices.enumerateDevices().then((deviceInputs) => {\n      const videoSettings = localStorage.getItem('videoSettings');\n      const {microphone, speaker, camera} = JSON.parse(videoSettings);\n\n      const audioInputSection = document.querySelector('.select.audioSource select');\n      const audioOutputSection = document.querySelector('.select.audioOutputSec select');\n      const videoSection = document.querySelector('.select.videoSource select');\n\n      const audioInputElement = document.createElement('select');\n      const audioOutputElement = document.createElement('select');\n      const videoElement = document.createElement('select');\n\n      for (const deviceInfo of deviceInputs) {\n        const option = document.createElement('option');\n        const {deviceId, label, kind} = deviceInfo;\n        option.value = deviceId;\n        if (kind === 'audioinput') {\n          option.text = label || `microphone ${audioInputSection ? audioInputSection.length + 1 : '1'}`;\n          if (microphone === deviceId) option.selected = true;\n          audioInputElement.appendChild(option);\n        } else if (kind === 'audiooutput') {\n          option.text = label || `speaker ${audioOutputSection ? audioOutputSection.length + 1 : '1'}`;\n          if (speaker === deviceId) option.selected = true;\n          audioOutputElement.appendChild(option);\n        } else if (kind === 'videoinput') {\n          option.text = label || `camera ${videoSection ? videoSection.length + 1 : '1'}`;\n          if (camera === deviceId) option.selected = true;\n          videoElement.appendChild(option);\n        }\n      }\n\n      $(audioInputSection).remove();\n      $(audioOutputSection).remove();\n      $(videoSection).remove();\n\n      $('.select.audioSource').append(audioInputElement);\n      $('.select.audioOutputSec').append(audioOutputElement);\n      $('.select.videoSource').append(videoElement);\n    });\n  }\n\n  const isUserMediaAvailable = () => window.navigator.mediaDevices.getUserMedia({audio: true, video: true});\n\n  function removeUserFromRoom(data, roomInfo, cb) {\n    if (!data || !roomInfo || !data.userId) return false;\n    const headerId = data.headerId;\n    const headerTitle = Helper.findAceHeaderElement(headerId).text;\n\n    const userCount = roomInfo.present;\n    $(`.header_videochat_icon[data-id='${headerId}'] .icon .userCount`).text(userCount);\n\n    if (userCount === 0) $(`.header_videochat_icon[data-id='${headerId}'] .icon .userCount`).text('');\n\n    const user = Helper.getUserFromId(data.userId);\n\n    if (user && data.action !== 'JOIN' && data.action !== 'RELOAD') {\n      // notify, a user join the video-chat room\n      const msg = {\n        time: new Date(),\n        userId: data.userId || user.userId,\n        userName: data.name || user.name || 'anonymous',\n        headerId: data.headerId,\n        userCount,\n        headerTitle,\n        VIDEOCHATLIMIT,\n      };\n      $(`.header_videochat_icon[data-id='${headerId}'] .icon`).removeClass('active');\n    }\n\n    if (data.userId === clientVars.userId) {\n      Helper.$body_ace_outer().find(`#wrtcVideoIcons #${headerId}`).removeClass('active');\n      WRTC.deactivate(data.userId, data.headerId);\n      stopWatchNetwork();\n      window.headerId = null;\n\n      const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n      if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.remove('active');\n\n      currentRoom = {};\n\n      $('#wrtc_modal').css({\n        transform: 'translate(-50%, -100%)',\n        opacity: 0,\n      }).attr({'data-active': false});\n\n      WRTC.deactivate(data.userId, data.headerId);\n\n      Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n\n      Helper.stopStreaming();\n    }\n\n    if (cb && typeof cb === 'function') cb();\n\n    Helper.wrtcPubsub.emit('update store', data, headerId, 'LEAVE', 'VIDEO', roomInfo, () => {});\n\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n\n    WRTC.userLeave(data.userId);\n  }\n\n  function addUserToRoom(data, roomInfo) {\n    if (!data || !data.userId) return false;\n\n    const headerId = data.headerId;\n    const headerTitle = Helper.findAceHeaderElement(headerId).text;\n\n    const user = Helper.getUserFromId(data.userId);\n    // some user may session does exist but the user info does not available in all over the current pad\n    if (!user) return true;\n\n    // TODO: this is not good idea, use global state\n    // if incoming user has already in the room don't persuade the request\n    // if (IsUserInRooms) return false;\n    const userCount = roomInfo.present;\n\n    $(`.header_videochat_icon[data-id='${headerId}'] .icon .userCount`).text(userCount);\n    if (userCount === 0) $(`.header_videochat_icon[data-id='${headerId}'] .icon .userCount`).text('');\n\n    $(`.header_videochat_icon[data-id='${headerId}'] .icon`).addClass('active');\n\n    // if the current request is from current user\n    if (data.userId === clientVars.userId) {\n      window.headerId = data.headerId;\n\n      startWatchNetwork();\n\n      const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n      if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.add('active');\n\n\n      WRTC.activate(data.headerId, user.userId);\n\n      $('#wrtc_modal').css({\n        transform: 'translate(-50%, 0)',\n        opacity: 1,\n      }).attr({'data-active': true});\n\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'JOIN', $joinBtn);\n      Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', true);\n\n      // this request send once! and must be fire when the room is empty\n      if (!currentRoom.userId && roomInfo.present === 1) {\n        socket.emit('acceptNewCall', padId, window.headerId);\n      }\n\n      currentRoom = data;\n\n      // update modal title, attributes and inline avatart\n      Helper.wrtcPubsub.emit('updateWrtcToolbarModal', headerId, roomInfo);\n    }\n\n    Helper.wrtcPubsub.emit('update store', data, headerId, 'JOIN', 'VIDEO', roomInfo, () => {});\n  }\n\n  function createSession(headerId, userInfo, $joinButton) {\n    Helper.$body_ace_outer().find('button.btn_joinChat_chatRoom').removeClass('active');\n    $joinBtn = $joinButton;\n    isUserMediaAvailable().then((stream) => {\n      // stop last stream\n      Helper.stopStreaming(() => {\n        Helper.wrtcStore.localstream = stream;\n      });\n\n      const padparticipators = window.pad.collabClient.getConnectedUsers().map((x) => x.userId);\n\n      if (!currentRoom.userId) {\n        return socket.emit('userJoin', padId, padparticipators, userInfo, 'video', gateway_userJoin);\n      }\n      // If the user has already joined the video chat, make suer leave that room then join to the new chat room\n      socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n        gateway_userLeave(_userData, roomInfo, () => {\n          socket.emit('userJoin', padId, padparticipators, userInfo, 'video', gateway_userJoin);\n        });\n      });\n    }).catch((err) => {\n      console.error(err);\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n      Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n      Helper.stopStreaming();\n      socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n        gateway_userLeave(_userData, roomInfo);\n      });\n      WRTC.showUserMediaError(err, Helper.getUserId(), headerId);\n    });\n  }\n\n  function userJoin(headerId, userInfo, $joinButton) {\n\n    if (!userInfo || !userInfo.userId) {\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n      return false;\n    }\n\n    // check if has user already in the room\n    if (currentRoom && currentRoom.headerId === headerId) {\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n      return false;\n    }\n\n    createSession(headerId, userInfo, $joinButton);\n  }\n  // depricate\n  function reloadCurrentSession(headerId, userInfo, $joinButton) {\n    if (!userInfo || !userInfo.userId) {\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n      return false;\n    }\n\n    createSession(headerId, userInfo, $joinButton, 'RELOAD');\n  }\n\n  function reloadSession(headerId, userInfo, $joinButton) {\n    if (!userInfo || !userInfo.userId) {\n      Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n      return false;\n    }\n    socket.emit('reloadVideoSession', padId, headerId);\n  }\n\n  function userLeave(headerId, data, $joinButton) {\n    $joinBtn = $joinButton;\n    socket.emit('userLeave', padId, data, 'video', gateway_userLeave);\n  }\n\n  function reachedVideoRoomSize(roomInfo, showAlert, isBulkUpdate) {\n    if (roomInfo && roomInfo.present <= VIDEOCHATLIMIT) return true;\n\n    showAlert = showAlert || true;\n    if (showAlert && !isBulkUpdate) {\n      $.gritter.add({\n        title: 'Video chat Limitation',\n        text: `The video chat room has reached its limit. \\r\\n The size of this video chat room is ${VIDEOCHATLIMIT}.\n\t\t\t\t(If this seems wrong, please share the problem with the support team.)\n\t\t\t\t`,\n        sticky: false,\n        class_name: 'error',\n        time: '5000',\n      });\n    }\n\n    return false;\n  }\n\n  /**\n  *\n  * @param {Object} data @requires\n  * @param {String} data.padId @requires\n  * @param {String} data.userId @requires\n  * @param {String} data.userName @requires\n  * @param {String} data.headerId\n  *\n  * @param {Object} roomInfo\n  * @param {Boolean} showAlert\n  * @param {Boolean} bulkUpdate\n *\n *\t@returns\n  */\n  function gateway_userJoin(data, roomInfo, showAlert = true, bulkUpdate = false) {\n    console.info('[wrtc]: gateway user joining,', data, roomInfo, showAlert);\n    // If user data does not exist reutrn false\n    if (!data) return reachedVideoRoomSize(null, false, false);\n\n    // if user data exist then check room size\n    if (data && reachedVideoRoomSize(roomInfo, showAlert, bulkUpdate)) {\n      return addUserToRoom(data, roomInfo);\n    } else if (bulkUpdate) {\n      return addUserToRoom(data, roomInfo);\n    }\n    Helper.stopStreaming();\n    return false;\n  }\n\n  function gateway_userLeave(data, roomInfo, cb) {\n    removeUserFromRoom(data, roomInfo, cb);\n  }\n\n  function postAceInit(hook, context, webSocket, docId) {\n    socket = webSocket;\n    padId = docId;\n    VIDEOCHATLIMIT = 2000; // clientVars.webrtc.videoChatLimit;\n    Helper.wrtcPubsub.emit('componentsFlow', 'video', 'init', true);\n    mediaDevices();\n\n    socket.on('userLatancy', (data) => {\n      if (Helper.getUserId() !== data.userId) {\n        const videoId = `interface_video_${data.userId.replace(/\\./g, '_')}`;\n\n        let color = pingos.colors.normal;\n        if (data.latency > 200 && data.latency < 300) color = pingos.colors.warning;\n        if (data.latency > 300) color = pingos.colors.danger;\n\n        $(document)\n            .find(`#${videoId} .latency`)\n            .css({color})\n            .text(`${Math.ceil(data.latency)}ms`);\n      }\n    });\n    socket.on('pongol', (data) => {\n      pingos.latency = Date.now() - pingos.startTime;\n\n      if (pingos.LMin <= pingos.latency && pingos.latency >= pingos.LMax) pingos.LMax = pingos.latency; else pingos.LMin = pingos.latency;\n\n      // console.log( 'Websocket RTT: ' + pingos.latency + ' ms', \"min:\", pingos.LMin, \"max\", pingos.LMax, \"avg:\", pingos.avg );\n\n      if (pingos.LineAvg.length < 4) { pingos.LineAvg.push((pingos.LMax + pingos.LMin) / 2); } else {\n        pingos.avg = pingos.LineAvg.reduce((a, b) => a + b) / pingos.LineAvg.length;\n        // console.log(pingos.LineAvg)\n        pingos.LineAvg = [];\n        pingos.LMax = 0;\n      }\n\n      let color = pingos.colors.normal;\n      if (pingos.avg > 200 && pingos.avg < 300) color = pingos.colors.warning;\n      if (pingos.avg > 300) color = pingos.colors.danger;\n\n      $(document)\n          .find('.video-container.local-user .latency')\n          .css({color})\n          .text(`${Math.ceil(pingos.avg)}ms`);\n\n      // $(document).find('#networkStatus').html(`RTT: ${pingos.latency}ms, min: ${pingos.LMin}ms, max: ${pingos.LMax}ms, avg:${pingos.avg}ms`);\n\n      // Helper.wrtcPubsub.emit('update network information', pingos);\n    });\n    socket.on('reloadVideoSession', (headerId) => {\n      if (currentRoom.headerId !== headerId) return false;\n      const target = 'PLUS';\n      const userInfo = {\n        padId: clientVars.padId || window.pad.getPadId(),\n        userId: clientVars.userId || window.pad.getUserId(),\n        userName: clientVars.userName || 'anonymous',\n        headerId,\n        target,\n        action: 'JOIN',\n      };\n      Helper.wrtcPubsub.emit('disable room buttons', headerId, 'JOIN', target);\n      createSession(headerId, userInfo, target);\n    });\n  }\n\n  return {\n    postAceInit,\n    userJoin,\n    userLeave,\n    gateway_userJoin,\n    gateway_userLeave,\n    reloadSession,\n    reloadCurrentSession,\n    mediaDevices,\n\n  };\n})();\n","'use strict';\n\nconst WrtcRoom = (() => {\n  let socket = null;\n  let padId = null;\n  let VIDEOCHATLIMIT = 0;\n  let tryTojoinWithQueryString = 0;\n\n\n  /** ---------d Helper --------- */\n\n  const joinChatRoom = (headerId, userInfo, target) => {\n\n  };\n\n  const leaveChatRoom = (headerId, userInfo, target) => {\n\n  };\n\n  /**\n    *\n    * @param {string} actions @enum (JOIN|LEAVE|RELOAD|SHARELINK|USERPROFILEMODAL|JOINBYQUERY)\n    * @param {string} headerId\n    * @param {string} target @enum (chatRoom|video)\n  */\n  function roomBtnHandler(actions, headerId, target) {\n\n    if (typeof actions !== 'string') {\n      actions.preventDefault();\n      // no idea! but in somecases! this function fire twice!\n      // the first one has selector, but the second one has not any selector\n      if (!actions.handleObj.selector) return false;\n    }\n\n    headerId = $(this).attr('data-id') || headerId;\n    actions = $(this).attr('data-action') || actions;\n    target = $(this).attr('data-join') || target;\n\n    if (!headerId || !target) return true;\n\n    // If the plugin is disabled\n    if (!Helper.wrtcStore.enable) {\n      console.info('[wrtc]: Plugin disabled');\n      return;\n    }\n\n    const hasHref = $(this).attr('href');\n    // if the link belong to the other pad.\n    // navigate to the new pad\n    // TODO: URL should be sanitize and then decided to navigate\n    if (hasHref) {\n      const url = new URL(hasHref);\n      if (url.pathname !== location.pathname) window.location = hasHref;\n    }\n\n    const userInfo = {\n      padId: clientVars.padId || window.pad.getPadId(),\n      userId: clientVars.userId || window.pad.getUserId(),\n      userName: clientVars.userName || 'anonymous',\n      headerId,\n      target,\n      action: actions,\n\n    };\n    // Before handel request, check socket state\n    if (Helper.wrtcStore.socketState !== 'OPEND') {\n      // show the alert that user must reload the page\n      $.gritter.add({\n        title: 'Video chat no longer responds',\n        text: `\n          The socket is disconnected and we can no longer make a stable call,\n          please go to stable internet and then reload the page.\n        `,\n        sticky: false,\n        class_name: 'error',\n        time: '15000',\n      });\n      return false;\n    }\n\n    if (actions === 'JOIN') {\n      Helper.wrtcPubsub.currentOpenRoom = userInfo;\n      Helper.wrtcPubsub.emit('disable room buttons', headerId, actions, target);\n      videoChat.userJoin(headerId, userInfo, target);\n    } else if (actions === 'LEAVE') {\n      Helper.wrtcPubsub.currentOpenRoom = null;\n      videoChat.userLeave(headerId, userInfo, target);\n    } else if (actions === 'RELOAD') {\n      videoChat.reloadSession(headerId, userInfo, target, actions);\n    } else if (actions === 'SHARELINK') {\n      shareRoomsLink(headerId, target);\n    } else if (actions === 'USERPROFILEMODAL') {\n      showUserProfileModal(headerId);\n    } else if (actions === 'JOINBYQUERY') {\n      const href = $(this).attr('href');\n      joinWithQueryString(href);\n    }\n  }\n\n  const joinWithQueryString = (url) => {\n    url = url || window.location.href;\n    const urlParams = new URLSearchParams(url);\n    const headerId = urlParams.get('id');\n    let target = urlParams.get('target');\n    const join = urlParams.get('join');\n\n    if (!headerId) return true;\n\n    const inComeURL = new URL(url);\n    const inComePadName = inComeURL.pathname.split('/').pop();\n    const currentPadName = location.pathname.split('/').pop();\n\n    // check if header id belong to this pad\n    // then if it's not check padName\n\n    if (!Helper.wrtcStore.rooms.get(headerId)) {\n      if (inComePadName !== currentPadName) return window.location.href = url;\n      $.gritter.add({\n        title: 'Error',\n        text: 'The header seems not to exist anymore!',\n        time: 3000,\n        sticky: false,\n        class_name: 'error',\n      });\n      return false;\n    }\n\n    // FIXME: this function move to helper and refactor\n    // if (headerId) scroll2Header(headerId);\n\n    if (join === 'true' && target) {\n      target = target.toUpperCase();\n\n      if (Helper.wrtcStore.socketState === 'CLOSED' && tryTojoinWithQueryString <= 4) {\n        setTimeout(() => {\n          console.warn(`\n            [wrtc]: socket state is ${Helper.wrtcStore.socketState}, try to join again!\n          `);\n          tryTojoinWithQueryString++;\n          joinWithQueryString();\n        }, 1500);\n      } else if (Helper.wrtcStore.socketState === 'OPEND') {\n        setTimeout(() => roomBtnHandler('JOIN', headerId, target), 1000);\n      } else {\n        console.error(`\n          [wrtc]: We try to join ${tryTojoinWithQueryString}th,\n          Joining by query string has problem!\n        `, Helper.wrtcStore.socketState, tryTojoinWithQueryString);\n      }\n    }\n  };\n\n  // if history state has change fire joinQueryString\n  document.addEventListener('onPushState', (event) => {\n    const {state} = event.detail;\n    if (state.type === 'hyperLink') {\n      const href = state.href;\n      joinWithQueryString(href);\n    }\n  });\n\n  // TODO: need refactor with helper and native create share link\n  const shareRoomsLink = (headId, target) => {\n    headId = $(this).attr('data-id') || headId;\n    target = $(this).attr('data-join') || target;\n    target = target.toLowerCase();\n\n    const title = Helper.$body_ace_outer().find('iframe').contents()\n        .find('#innerdocbody').find(`.heading.${headId}`).text();\n\n    const origin = window.location.origin;\n    const pathName = window.location.pathname;\n    const link = `${origin + pathName}?header=${Helper.slugify(title)}&id=${headId}&target=${target}&join=true`;\n    const $temp = $('<input>');\n    $('body').append($temp);\n    $temp.val(link).select();\n    document.execCommand('copy');\n    $temp.remove();\n\n    $.gritter.add({\n      title: 'Copied',\n      text: 'Join link copied to clip board',\n      sticky: false,\n      class_name: 'copyLinkToClipboard',\n      time: '3000',\n    });\n  };\n\n  const getHeaderRoomY = ($element) => {\n    const height = $element.outerHeight();\n    const paddingTop = Helper.$body_ace_outer().find('iframe[name=\"ace_inner\"]').css('padding-top');\n    const aceOuterPadding = parseInt(paddingTop, 10);\n    const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n    return offsetTop + height / 2 - 22;\n  };\n\n  // TODO: need refactore and use bridge strategy\n  function showUserProfileModal(headerId) {\n    const userId = $(this).attr('data-id') || headerId;\n    const user = window.clientVars.ep_profile_list[userId];\n    if (!user) return false;\n    const staticImage = `/static/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n    const imageUrl = user.imageUrl || staticImage;\n    $('#ep_profile_users_profile_name').text(user.userName);\n    $('#ep_profile_users_profile_desc').text(user.about);\n    $('#ep_profile_users_profile_homepage').attr({\n      href: Helper.getValidUrl(user.homepage),\n      target: '_blank',\n    });\n\n    $('#ep_profile_users_profile').addClass('ep_profile_formModal_show');\n    $('#ep_profile_general_overlay').addClass('ep_profile_formModal_overlay_show');\n    $('#ep_profile_general_overlay').css({display: 'block'});\n\n    $('#ep_profile_users_profile_userImage').css({\n      'background-position': '50% 50%',\n      'background-image': `url(${imageUrl})`,\n      'background-repeat': 'no-repeat',\n      'background-size': '69px',\n      'background-color': '#485365',\n    });\n  }\n\n  const activeEventListener = () => {\n    const $AceOuter = Helper.$body_ace_outer();\n\n    $AceOuter.on('click', '.btn_roomHandler', roomBtnHandler);\n    $(document).on('click', '.btn_roomHandler, .wrtc_roomLink', roomBtnHandler);\n\n    $(document).on('mouseenter', '.video-container.local-user', () => {\n      $(document).find('#wrtc_modal #networkStatus').addClass('active');\n    }).on('mouseleave', '.video-container.local-user', () => {\n      $(document).find('#wrtc_modal #networkStatus').removeClass('active');\n    });\n\n\n    // $AceOuter.find('iframe').contents()\n    // .find('#innerdocbody').on('click', 'wrt-inline-icon', function () {\n    //   const $btn = this.shadowRoot.querySelector('.btn_roomHandler');\n    //   const headerId = $btn.getAttribute('data-id');\n    //   const action = $btn.getAttribute('data-action');\n    //   const target = $btn.getAttribute('data-join');\n    //   roomBtnHandler(action, headerId, target);\n    // });\n\n    // TODO: refactore, this need to change and use paddInner variable\n    $AceOuter.find('iframe').contents().find('#innerdocbody')\n        .on('click', 'chat-inline-icon', function () {\n          const headerId = $(this).attr('data-headerid');\n          $(document)\n              .find(`#tocItems .itemRow.tocItem[sectionid='${headerId}']`)\n              .trigger('click');\n        });\n\n    // integration with ep_rocketChat\n    $(document).on('click', '#toc .itemRow.tocItem', function () {\n      const headerId = $(this).attr('sectionid');\n      const room = Helper.wrtcStore.rooms.get(headerId);\n\n      // clear the button\n      $('.header_videochat_icon').attr('data-id', headerId);\n      $('.header_videochat_icon .icon').removeClass('active');\n      $('.header_videochat_icon .icon .userCount').text('');\n\n      // check wrtc store\n      const userPresent = room.VIDEO.present === 0 ? '' : room&&room.VIDEO.present&&0;\n      $('.header_videochat_icon .icon .userCount').text(userPresent);\n      // does the current user present in this room\n      const currentUserPresent = room.VIDEO.list.find((x) => x.userId === clientVars.userId);\n\n      if (currentUserPresent) $('.header_videochat_icon .icon').addClass('active');\n    });\n\n\n    // FIXME: this function move to helper and refactor\n    // $(document).on('click', '#werc_toolbar p, .textChatToolbar b', function click() {\n    //   const headerId = $(this).attr('data-id');\n    //   scroll2Header(headerId);\n    // });\n\n    $(document).on('click', '#werc_toolbar .btn_enlarge', function click() {\n      if (!$(this).attr('active')) return true;\n      $(this).toggleClass('large');\n      $('#wrtc_modal .video-container .enlarge-btn').each(function trigger() {\n        $(this).trigger('click');\n      });\n    });\n\n    // video interface settings\n    $(document).on('click', '#werc_toolbar .btn_videoSetting', function click() {\n      const offset = $(this).position();\n      const $box = $(document).find('#wrtc_settings');\n      const width = $box.outerWidth();\n      $box.css({\n        left: `${offset.left - width}px`,\n        top: `${offset.top + 4}px`\n      })\n      .toggleClass('active');\n    });\n  };\n\n  let self = {\n    joinWithQueryString,\n    roomBtnHandler,\n    aceSetAuthorStyle: function aceSetAuthorStyle(context) {\n      if (context.author) {\n        const user = Helper.getUserFromId(context.author);\n        if (user) {\n          // sync user info\n          const userName = user.name || 'anonymous';\n          Helper.$body_ace_outer()\n              .find(`.wrtc_content.videoChat ul li[data-id='${user.userId}']`)\n              .css({'border-color': user.colorId}).text(userName);\n        }\n      }\n    },\n    postAceInit: (hook, context, webSocket, docId) => {\n      socket = webSocket;\n      padId = docId;\n      VIDEOCHATLIMIT = clientVars.webrtc.videoChatLimit;\n      Helper.wrtcPubsub.emit('componentsFlow', 'room', 'init', true);\n\n      socket.on('userJoin', (data, roomInfo, target) => {\n        videoChat.gateway_userJoin(data, roomInfo, false);\n      });\n\n      socket.on('userLeave', (data, roomInfo, target) => {\n        videoChat.gateway_userLeave(data, roomInfo, target);\n      });\n\n      activeEventListener();\n\n      // check if there is a join request in URI queryString\n      // TODO: refactore check if the plugin is ready to use then try to join\n      setTimeout(() => {\n        joinWithQueryString();\n      }, 500);\n    },\n    adoptHeaderYRoom: () => {\n      // Set all video_heading to be inline with their target REP\n      const $padOuter = Helper.$body_ace_outer();\n      if (!$padOuter) return;\n\n      // TODO: performance issue\n      $padOuter.find('#wbrtc_avatarCol .wrtcIconLine').each(function adjustHeaderIconPosition() {\n        const $el = $(this);\n        const $headerId = $el.attr('id');\n        const $headingEl = Helper.findAceHeaderElement($headerId).$el;\n\n        // if the H tags does not find, remove chatBox\n        // TODO: and kick out the user form the chatBox\n        if ($headingEl.length <= 0) {\n          $el.remove();\n          return false;\n        }\n\n        $el.css({top: `${Helper.getHeaderRoomY($headingEl) - 16}px`});\n      });\n    },\n    appendVideoIcon: (headerId, options = {createAgain: false}) => {\n      if (!headerId) return false;\n\n      const roomExist = Helper.wrtcStore.rooms.has(headerId);\n      if (!options.createAgain && roomExist) return false;\n\n      const $elRoomExist = Helper.findAceHeaderElement(headerId);\n\n      if (!roomExist && $elRoomExist.exist) {\n        const $el = Helper.$body_ace_outer().find('iframe')\n            .contents()\n            .find('#innerdocbody')\n            .children('div')\n            .find(`.videoHeader.${headerId}`);\n\n        const aceInnerOffset = Helper.$body_ace_outer().find('iframe[name=\"ace_inner\"]').offset();\n        const target = Helper.$body_ace_outer().find('#outerdocbody');\n        const newY = getHeaderRoomY($el);\n        const newX = Math.ceil(aceInnerOffset.left);\n        const lineNumber = $el.parent().parent().prevAll().length;\n\n        const data = {\n          headingTagId: headerId,\n          positionTop: newY,\n          positionLeft: newX,\n          headTitle: $el.text(),\n          lineNumber,\n          videoChatLimit: VIDEOCHATLIMIT,\n        };\n\n        Helper.wrtcStore.rooms.set(headerId, {VIDEO: {list: []}, USERS: {}, headerCount: 0});\n\n        const box = $('#wrtcLinesIcons').tmpl(data);\n        target.find('#wrtcVideoIcons').append(box);\n        // check the room that has user in there\n        // padId, headerId\n        socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n          if (result) Helper.inlineAvatar.ROOM(headerId, result);\n        });\n      }\n\n      self.adoptHeaderYRoom();\n    },\n    syncVideoAvatart: (headerId) => {\n      socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n        if (result) Helper.inlineAvatar.ROOM(headerId, result);\n      });\n    },\n  };\n\n  return self;\n})();\n","/**\n * Copyright 2013 j <j@mailb.org>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nconst WRTC = (() => {\n  const attemptRonnect = 60;\n  let reconnected = 0;\n  const videoSizes = {large: '260px', small: '160px'};\n  const pcConfig = {};\n  let audioInputSelect = null;\n  let videoSelect = null;\n  let audioOutputSelect = null;\n  const pcConstraints = {\n    optional: [{\n      DtlsSrtpKeyAgreement: true,\n    }],\n  };\n  const sdpConstraints = {\n    mandatory: {\n      OfferToReceiveAudio: true,\n      OfferToReceiveVideo: true,\n    },\n  };\n\n  const remoteStream = {};\n  const pc = {};\n  const callQueue = [];\n  const enlargedVideos = new Set();\n  let localVideoElement = null;\n  let padId = null;\n  let socket = null;\n\n  var self = {\n    // API HOOKS\n    postAceInit: (hookName, context, webSocket, docId) => {\n      padId = docId;\n      socket = webSocket;\n\n      if (!clientVars.webrtc) throw new Error('[wrtc]: webrtc settings not found');\n\n      pcConfig.iceServers = clientVars.webrtc.iceServers;\n\n      if (clientVars.webrtc.video.sizes.large) {\n        videoSizes.large = `${clientVars.webrtc.video.sizes.large}px`;\n      }\n      if (clientVars.webrtc.video.sizes.small) {\n        videoSizes.small = `${clientVars.webrtc.video.sizes.small}px`;\n      }\n\n      self._pad = context.pad || window.pad;\n\n      $(document).on('change', '.select.videoSource', self.audioVideoInputChange);\n      $(document).on('change', '.select.audioSource', self.audioVideoInputChange);\n      $(document).on('change', '.select.audioOutput', self.changeAudioDestination);\n\n      $(window).on('unload', () => {\n        console.info('[wrtc]: windos unloaded, now hangupAll');\n        self.hangupAll();\n      });\n      socket.on('RTC_MESSAGE', (context) => {\n        // filter RTC_message just for how is in headerId room\n        const payload = context.data.payload;\n        if (payload.to !== Helper.getUserId()) return;\n        if (payload.data.headerId === window.headerId) self.receiveMessage(context.data.payload);\n      });\n    },\n    appendVideoModalToBody: () => {\n      const $wrtcVideoModal = $('#wrtcVideoModal').tmpl({\n        videoChatLimit: clientVars.webrtc.videoChatLimit,\n        headerId: '',\n      });\n\n      $('body').prepend($wrtcVideoModal);\n\n      $(document).on('click', '#wrtc_modal .btn_toggle_modal', function () {\n        const $parent = $(this).parent().parent();\n        const action = $(this).attr('data-action');\n        const videoBox = $('#wrtc_modal .videoWrapper').innerHeight();\n\n        $(this).find('.fa_arrow-from-top').toggle();\n        $(this).find('.fa_arrow-to-top').toggle();\n\n        if (action === 'collapse') {\n          $(this).attr({'data-action': 'expand'});\n          $parent.find('.btn_enlarge').removeAttr('active');\n          $('#wrtc_modal').css({\n            transform: `translate(-50%, -${videoBox}px)`,\n          });\n        } else {\n          $(this).attr({'data-action': 'collapse'});\n          $parent.find('.btn_enlarge').attr({active: true});\n          $('#wrtc_modal').css({\n            transform: 'translate(-50%, 0)',\n          });\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_info', function click() {\n        const userID = Object.keys(pc);\n        const $this = $(this);\n        const isActive = $this.attr('data-active');\n        const $modal = $(document).find('#wrtc_settings .wrtc_info');\n\n        if (isActive) {\n          $modal.hide();\n          if (pc[userID[0]]) {\n            getStats(pc[userID[0]], (result) => {\n              result.nomore();\n            });\n          }\n          $this.removeAttr('data-active');\n          return true;\n        } else {\n          $this.attr({'data-active': true});\n          $modal.show();\n        }\n\n        if (pc[userID[0]] && !isActive) {\n          (function () {\n            const bytesToSize = function bytesToSize(bytes) {\n              const k = 1000;\n              const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n              if (bytes <= 0) {\n                return '0 Bytes';\n              }\n              const i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n\n              if (!sizes[i]) {\n                return '0 Bytes';\n              }\n\n              return `${(bytes / k ** i).toPrecision(3)} ${sizes[i]}`;\n            };\n\n            getStats(pc[userID[0]], (result) => {\n              const statistic = {\n                speed: bytesToSize(result.bandwidth.speed),\n                systemNetworkType: result.connectionType.systemNetworkType,\n                availableSendBandwidth: bytesToSize(result.bandwidth.availableSendBandwidth),\n                video: {\n                  'send.codecs': result.video.send.codecs.join(', '),\n                  'resolutions': `width ${result.resolutions.send.width}, height ${result.resolutions.send.height}`,\n                  'resolutions': `width ${result.resolutions.recv.width}, height ${result.resolutions.recv.height}`,\n                  'bytesSent': bytesToSize(result.video.bytesSent),\n                  'bytesReceived': bytesToSize(result.video.bytesReceived),\n                },\n                audio: {\n                  'send.codecs': result.audio.send.codecs.join(', '),\n                  // \"recv.codecs\": result.audio.recv.codecs.join(\", \"),\n                  'bytesSent': bytesToSize(result.audio.bytesSent),\n                  'bytesReceived': bytesToSize(result.audio.bytesReceived),\n                },\n              };\n              $(document).find('#wrtc_settings .wrtc_info').html(`<pre>${JSON.stringify(statistic, undefined, 2)}</pre>`);\n            }, 1000);\n          })();\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_close', () => {\n        $('#wrtc_settings').toggleClass('active');\n        const $btnInfo = $('#wrtc_settings .btn_info');\n        if ($btnInfo.attr('data-active')) $btnInfo.trigger('click');\n      });\n    },\n    aceSetAuthorStyle: (context) => {\n      if (context.author) {\n        const user = Helper.getUserFromId(context.author);\n        if (user) {\n          const userName = user.name || 'anonymous';\n          $(`#video_${user.userId.replace(/\\./g, '_')}`).css({\n            'border-color': user.colorId,\n          }).siblings('.user-name').text(userName);\n        }\n      }\n    },\n    userLeave: (userId, context, callback) => {\n      userId = userId || context.userInfo.userId;\n      if (userId && pc[userId]) {\n        gState = 'LEAVING';\n        self.hide(userId);\n        self.hangup(userId, true);\n      }\n      Helper.wrtcStore.userInRoom = false;\n      if (callback) callback();\n    },\n    // deprecated function\n    handleClientMessage_RTC_MESSAGE: (hook, context) => {\n      if (context.payload.data.headerId === window.headerId)\n        self.receiveMessage(context.payload);\n    },\n    // END OF API HOOKS\n    show: () => {\n      $('#pad_title').addClass('f_wrtcActive');\n      videoChat.mediaDevices();\n    },\n    showUserMediaError: (err, userId, headerId) => {\n      // show an error returned from getUserMedia\n      let reason;\n      // For reference on standard errors returned by getUserMedia:\n      // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n      // However keep in mind that we add our own errors in getUserMediaPolyfill\n      console.error(`[wrtc]: mediaError, ${err}`);\n      switch (err.name) {\n        case 'CustomNotSupportedError':\n          reason = 'Sorry, your browser does not support WebRTC. (or you have it disabled in your settings).<br><br>' + 'To participate in this audio/video chat you have to user a browser with WebRTC support like Chrome, Firefox or Opera.' + '<a href=\"http://www.webrtc.org/\" target=\"_new\">Find out more</a>';\n          self.sendErrorStat('NotSupported');\n          break;\n        case 'CustomSecureConnectionError':\n          reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n          self.sendErrorStat('SecureConnection');\n          break;\n        case 'NotAllowedError':\n          // For certain (I suspect older) browsers, `NotAllowedError` indicates either an insecure connection or the user rejecting camera permissions.\n          // The error for both cases appears to be identical, so our best guess at telling them apart is to guess whether we are in a secure context.\n          // (webrtc is considered secure for https connections or on localhost)\n          if (location.protocol === 'https:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1') {\n            reason = 'Sorry, you need to give us permission to use your camera and microphone';\n            self.sendErrorStat('Permission');\n          } else {\n            reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n            self.sendErrorStat('SecureConnection');\n          }\n          break;\n        case 'NotFoundError':\n          reason = \"Sorry, we couldn't find a suitable camera on your device. If you have a camera, make sure it set up correctly and refresh this website to retry.\";\n          self.sendErrorStat('NotFound');\n          break;\n        case 'NotReadableError':\n          // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, a hardware error occurred that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Hardware');\n          break;\n        case 'AbortError':\n          // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, an error occurred (probably not hardware related) that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Abort');\n          break;\n        default:\n          // `err` as a string might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, there was an unknown Error:<br><br>${err}`;\n          self.sendErrorStat('Unknown');\n      }\n      $.gritter.add({\n        title: 'Error',\n        text: `${reason}; try again!`,\n        time: 4000,\n        sticky: false,\n        class_name: 'error',\n      });\n      userId = userId || clientVars.userId;\n      headerId = headerId || window.headerId;\n      videoChat.userLeave(\n          headerId,\n          {\n            headerId,\n            padId,\n            userId,\n          }\n      );\n    },\n    hide: (userId) => {\n      if (!userId) return false;\n      userId = userId.split('.')[1];\n      $('#rtcbox').find(`#video_a_${userId}`).parent().remove();\n    },\n    activate: (headerId) => {\n      self.show();\n      self.hangupAll();\n      self.getUserMedia(headerId);\n      Helper.wrtcStore.userInRoom = true;\n    },\n    deactivate: (userId, headerId) => {\n      if (!userId) return false;\n      self.hide(userId);\n      self.hangupAll(headerId);\n      self.hangup(userId, true, headerId);\n      if (Helper.wrtcStore.localstream) Helper.stopStreaming();\n      Helper.wrtcStore.userInRoom = false;\n    },\n    toggleMuted: () => {\n      const audioTrack = Helper.wrtcStore.localstream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        return !audioTrack.enabled; // returning \"Muted\" state, which is !enabled\n      }\n      return true; // if there's no audio track, it's muted\n    },\n    toggleVideo: () => {\n      const videoTrack = Helper.wrtcStore.localstream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        return !videoTrack.enabled;\n      }\n    },\n    setStream: (userId, stream) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      let video = $(`#${videoId}`)[0];\n\n      const user = Helper.getUserFromId(userId);\n\n      if (!video && stream) {\n        const videoContainer = $(\"<div class='video-container'>\").css({\n          'width': videoSizes.small,\n          'max-height': videoSizes.small,\n        }).appendTo($('#wrtc_modal .videoWrapper'));\n        const userName = user.name || 'anonymous';\n        videoContainer.append($('<div class=\"user-name\">').text(userName));\n\n        video = $('<video playsinline>').attr('id', videoId).css({\n          'border-color': user.colorId,\n          'width': videoSizes.small,\n          'max-height': videoSizes.small,\n        }).on({\n          loadedmetadata: () =>  self.addInterface(userId),\n        }).appendTo(videoContainer)[0];\n\n        video.autoplay = true;\n        if (isLocal) {\n          videoContainer.addClass('local-user');\n          video.muted = true;\n        }\n        self.addInterface(userId);\n      }\n      if (stream) {\n        attachMediaStream(video, stream);\n      } else if (video) {\n        $(video).parent().remove();\n      }\n    },\n    addInterface: (userId) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      const $video = $(`#${videoId}`);\n\n      var $mute = $(\"<span class='interface-btn audio-btn buttonicon'>\").attr('title', 'Mute').on({\n        click: function click() {\n          let muted;\n          if (isLocal) {\n            muted = self.toggleMuted();\n          } else {\n            $video[0].muted = !$video[0].muted;\n            muted = $video[0].muted;\n          }\n          $mute.attr('title', muted ? 'Unmute' : 'Mute').toggleClass('muted', muted);\n        },\n      });\n      let videoEnabled = true;\n      var $disableVideo = isLocal ? $(\"<span class='interface-btn video-btn buttonicon'>\").attr('title', 'Disable video').on({\n        click: () => {\n          self.toggleVideo();\n          videoEnabled = !videoEnabled;\n          $disableVideo.attr('title', videoEnabled ? 'Disable video' : 'Enable video').toggleClass('off', !videoEnabled);\n        },\n      }) : null;\n\n      let videoEnlarged = false;\n      var $largeVideo = $(\"<span class='interface-btn enlarge-btn buttonicon'>\").attr('title', 'Make video larger').on({\n        click: () => {\n          videoEnlarged = !videoEnlarged;\n\n          if (videoEnlarged) {\n            enlargedVideos.add(userId);\n          } else {\n            enlargedVideos.delete(userId);\n          }\n\n          $largeVideo.attr('title', videoEnlarged ? 'Make video smaller' : 'Make video larger').toggleClass('large', videoEnlarged);\n\n          const videoSize = $(document).find('#wrtc_modal .ndbtn.btn_enlarge').hasClass('large') ? videoSizes.large : videoSizes.small;\n          $video.parent().css({'width': videoSize, 'max-height': videoSize});\n          $video.css({'width': videoSize, 'max-height': videoSize});\n        },\n      });\n\n      if ($(document).find('#wrtc_modal .ndbtn.btn_enlarge').hasClass('large')) {\n        $video.parent().css({'width': videoSizes.large, 'max-height': videoSizes.large});\n        $video.css({'width': videoSizes.large, 'max-height': videoSizes.large});\n      }\n\n      if (isLocal) localVideoElement = $video;\n\n      const $networkLatancy = $(\"<div class='latency'></div>\");\n\n      $(`#interface_${videoId}`).remove();\n      $(\"<div class='interface-container'>\").attr('id', `interface_${videoId}`).append($mute).append($disableVideo).append($largeVideo).append($networkLatancy).insertAfter($video);\n      self.changeAudioDestination();\n    },\n    // Sends a stat to the back end. `statName` must be in the\n    // approved list on the server side.\n    sendErrorStat: (statName) => {\n      const msg = {component: 'pad', type: 'STATS', data: {statName, type: 'RTC_MESSAGE'}};\n      socket.emit('acceptNewCall', padId, window.headerId);\n      socket.emit('message', msg);\n    },\n    sendMessage: (to, data, socketIdTo) => {\n      socket.emit('RTC_MESSAGE', {\n        type: 'RTC_MESSAGE',\n        payload: {data, to, padId, from: Helper.getUserId(), socket: {from: socket.id, to: socketIdTo}},\n      }, (data) => {\n        // console.log('coming data', data);\n      });\n      // deprecated function\n      // self._pad.collabClient.sendMessage({\n      // \ttype: 'RTC_MESSAGE',\n      //   payload: {data, to},\n      // });\n    },\n    receiveMessage: (msg) => {\n      const peer = msg.from; // userId\n      const data = msg.data;\n      const type = data.type;\n      if (peer === Helper.getUserId()) {\n        // console.info('ignore own messages');\n        return;\n      }\n      /*\n      if (type != 'icecandidate')\n        console.info('receivedMessage', 'peer', peer, 'type', type, 'data', data);\n      */\n      if (type === 'hangup') {\n        self.hangup(peer, true);\n      } else if (type === 'offer') {\n        if (pc[peer]) {\n          self.hangup(peer, true);\n          self.createPeerConnection(peer, data.headerId);\n        } else {\n          self.createPeerConnection(peer, data.headerId);\n        }\n        if (Helper.wrtcStore.localstream) {\n          if (pc[peer].getLocalStreams) {\n            if (!pc[peer].getLocalStreams().length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n\n              // pc[peer].addStream(localStream);\n            }\n          } else if (pc[peer].localStreams) {\n            if (!pc[peer].localStreams.length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n              // pc[peer].addStream(localStream);\n            }\n          }\n        }\n        const offer = new RTCSessionDescription(data.offer);\n        pc[peer].setRemoteDescription(offer, () => {\n          pc[peer].createAnswer((desc) => {\n            desc.sdp = cleanupSdp(desc.sdp);\n            pc[peer].setLocalDescription(desc, () => {\n              self.sendMessage(peer, {type: 'answer', answer: desc, headerId: data.headerId});\n            }, logError);\n          }, logError, sdpConstraints);\n        }, logError);\n      } else if (type === 'answer') {\n        if (pc[peer]) {\n          const answer = new RTCSessionDescription(data.answer);\n          pc[peer].setRemoteDescription(answer, () => {\n            // console.log(\"call setRemoteDescription\", new Date().getSeconds())\n          }, logError);\n        }\n      } else if (type === 'icecandidate') {\n        if (pc[peer]) {\n          const candidate = new RTCIceCandidate(data.candidate);\n          const p = pc[peer].addIceCandidate(candidate);\n          if (p) {\n            p.then(() => {\n              // Do stuff when the candidate is successfully passed to the ICE agent\n            }).catch(() => {\n              console.error('[wrtc]: Failure during addIceCandidate()', data);\n            });\n          }\n        }\n      } else {\n        console.error('[wrtc]: unknown message', data);\n      }\n    },\n    hangupAll: (_headerId) => {\n      Object.keys(pc).forEach((userId) => {\n        self.hangup(userId, true, _headerId);\n      });\n    },\n    hangup: function (userId, notify, headerId) {\n      notify = arguments.length === 1 ? true : notify;\n      if (pc[userId] && userId !== Helper.getUserId()) {\n        self.setStream(userId, '');\n        pc[userId].close();\n        delete pc[userId];\n        if (notify) self.sendMessage(userId, {type: 'hangup', headerId});\n      }\n    },\n    call: (userId, headerId) => {\n      // if (!localStream) {\n      //   callQueue.push(userId);\n      //   return;\n      // }\n      let constraints = {optional: [], mandatory: {}};\n      // temporary measure to remove Moz* constraints in Chrome\n      if (webrtcDetectedBrowser === 'chrome') {\n        for (const prop in constraints.mandatory) {\n          if (prop.indexOf('Moz') !== -1) {\n            delete constraints.mandatory[prop];\n          }\n        }\n      }\n      constraints = mergeConstraints(constraints, sdpConstraints);\n\n      if (!pc[userId]) self.createPeerConnection(userId, headerId);\n\n\n      // pc[userId].addStream(localStream);\n\n      Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n        pc[userId].addTrack(track, Helper.wrtcStore.localstream);\n      });\n\n      pc[userId].createOffer((desc) => {\n        desc.sdp = cleanupSdp(desc.sdp);\n        pc[userId].setLocalDescription(desc, () => {\n          self.sendMessage(userId, {type: 'offer', offer: desc, headerId});\n        }, logError);\n      }, logError, constraints);\n    },\n    createPeerConnection: (userId, headerId) => {\n      if (pc[userId]) {\n        console.warn('WARNING creating PC connection even though one exists', userId);\n      }\n      pc[userId] = new RTCPeerConnection(pcConfig, pcConstraints);\n      pc[userId].onicecandidate =  (event) => {\n        if (event.candidate) {\n          self.sendMessage(userId, {\n            type: 'icecandidate',\n            headerId,\n            candidate: event.candidate,\n          });\n        } else {\n          reconnected = 0;\n          socket.emit('acceptNewCall', padId, window.headerId);\n        }\n      };\n      pc[userId].oniceconnectionstatechange = () => {\n        console.info('[wrtc]: ICE state: ', pc[userId], pc[userId].iceConnectionState);\n\t\t \t};\n      pc[userId].ontrack = (event) => {\n        console.log(event, 'ontrack');\n        remoteStream[userId] = event.streams[0];\n        self.setStream(userId, event.streams[0]);\n      };\n      pc[userId].onremovestream = () => self.setStream(userId, '');\n    },\n    audioVideoInputChange: () => {\n      Helper.stopStreaming(() => {\n        self.getUserMedia(window.headerId);\n      });\n    },\n    attachSinkId:  (element, sinkId) => {\n      // Attach audio output device to video element using device/sink ID.\n      if (element && element[0] && typeof element[0].sinkId !== 'undefined') {\n        element[0].setSinkId(sinkId).then(() => {\n          // console.info(`Success, audio output device attached: ${sinkId}`);\n        }).catch((error) => {\n          let errorMessage = error;\n          if (error.name === 'SecurityError') {\n            errorMessage = `You need to use HTTPS for selecting audio output device: ${error}`;\n          }\n          console.error('[wrtc]: ', error);\n          // Jump back to first output device in the list as it's the default.\n          audioOutputSelect.selectedIndex = 0;\n        });\n      } else {\n        console.warn('Browser does not support output device selection.');\n        $(document).find('#wrtc_settings .select.audioOutputSec').hide();\n      }\n    },\n    changeAudioDestination: () => {\n      const audioOutputSelect = document.querySelector('#wrtc_settings .select.audioOutputSec');\n      const audioDestination = audioOutputSelect.value;\n      const videoElement = localVideoElement;\n      self.attachSinkId(videoElement, audioDestination);\n    },\n    getUserMedia: (headerId) => {\n      const mediaConstraints = {\n        audio: true,\n        video: {\n          width: 320,\n          height: 240,\n          frameRate: {ideal: 15, max: 30},\n          facingMode: 'user',\n        },\n      };\n\n      audioInputSelect = document.querySelector('.select.audioSource select');\n      audioOutputSelect = document.querySelector('.select.audioOutputSec select');\n      videoSelect = document.querySelector('.select.videoSource select');\n\n      const audioSource = audioInputSelect && audioInputSelect.value;\n      const videoSource = videoSelect && videoSelect.value;\n      const audioOutput = audioOutputSelect && audioOutputSelect.value;\n\n      if (audioSource) mediaConstraints.audio.deviceId = {exact: audioSource};\n\n      if (videoSource) mediaConstraints.video.deviceId = {exact: videoSource};\n\n\n      localStorage.setItem('videoSettings', JSON.stringify({microphone: audioSource, speaker: audioOutput, camera: videoSource}));\n      $('#wrtc_modal #networkError').removeClass('active').hide();\n\n      window.navigator.mediaDevices\n          .getUserMedia(mediaConstraints)\n          .then((stream) => {\n            Helper.wrtcStore.localstream = stream;\n            self.setStream(Helper.getUserId(), stream);\n            self._pad.collabClient.getConnectedUsers().forEach((user) => {\n              if (user.userId !== Helper.getUserId()) {\n                if (pc[user.userId]) {\n                  self.hangup(user.userId, false, headerId);\n                }\n                self.call(user.userId, headerId);\n              }\n            });\n          }).catch((err) => {\n            self.showUserMediaError(err, Helper.getUserId(), headerId);\n          });\n    },\n    attemptToReconnect: () => {\n      reconnected++;\n      console.log('[wrtc]: Try reconnecting', reconnected, attemptRonnect);\n      if (attemptRonnect <= reconnected) {\n        socket.emit('acceptNewCall', padId, window.headerId);\n        throw new Error('[wrtc]: please reload the video chat and try again to connect!');\n      }\n      setTimeout(() => {\n        console.log('[wrtc]: reconnecting...');\n        self.getUserMedia(window.headerId);\n      }, randomIntFromInterval(200, 1000));\n    },\n  };\n\n  // Normalize RTC implementation between browsers\n  // var getUserMedia = window.navigator.mediaDevices.getUserMedia\n  const attachMediaStream = (element, stream) => {\n    if (typeof element.srcObject !== 'undefined') {\n      element.srcObject = stream;\n    } else if (typeof element.mozSrcObject !== 'undefined') {\n      element.mozSrcObject = stream;\n    } else if (typeof element.src !== 'undefined') {\n      element.src = URL.createObjectURL(stream);\n    } else {\n      console.error('Error attaching stream to element.', element);\n    }\n  };\n\n  let webrtcDetectedBrowser = 'chrome';\n\n  const cleanupSdp = (sdp) => {\n    const bandwidth = {\n      screen: 300, // 300kbits minimum\n      audio: 256, // 64kbits  minimum\n      video: 500,\n      minVideo: 128, // 125kbits  min\n      maxVideo: 2048, // 125kbits  max\n      videoCodec: clientVars.webrtc.video.codec,\n    };\n\n    const isScreenSharing = false;\n\n    sdp = CodecsHandler.setApplicationSpecificBandwidth(sdp, bandwidth, isScreenSharing);\n    sdp = CodecsHandler.setVideoBitrates(sdp, {\n      min: bandwidth.minVideo,\n      max: bandwidth.maxVideo,\n      codec: bandwidth.videoCodec,\n    });\n    sdp = CodecsHandler.setOpusAttributes(sdp);\n    sdp = CodecsHandler.preferCodec(sdp, bandwidth.videoCodec);\n\n    return sdp;\n  };\n\n  const mergeConstraints = (cons1, cons2) => {\n    const merged = cons1;\n    for (const name in cons2.mandatory) {\n      merged.mandatory[name] = cons2.mandatory[name];\n    }\n    merged.optional.concat(cons2.optional);\n    return merged;\n  };\n\n  const randomIntFromInterval = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);\n\n  const logError = (error) => {\n    // if (error && error.message.includes(\"Failed to set remote answer sdp\")) {\n    self.attemptToReconnect();\n    // } else {\n    // socket.emit('acceptNewCall', padId, window.headerId);\n    // }\n    console.error('[wrtc]: LogError:', error);\n    $('#wrtc_modal #networkError')\n        .show()\n        .addClass('active')\n        .text(`[wrtc]: Error: ${error} ,Reload the session.`);\n  };\n\n  self.pc = pc;\n  return self;\n})();\n"]}