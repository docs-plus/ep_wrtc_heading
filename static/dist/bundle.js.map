{"version":3,"file":"bundle.js","sources":["../../node_modules/lodash-es/isObject.js","../../node_modules/lodash-es/_freeGlobal.js","../../node_modules/lodash-es/_root.js","../../node_modules/lodash-es/now.js","../../node_modules/lodash-es/_trimmedEndIndex.js","../../node_modules/lodash-es/_baseTrim.js","../../node_modules/lodash-es/_Symbol.js","../../node_modules/lodash-es/_getRawTag.js","../../node_modules/lodash-es/_objectToString.js","../../node_modules/lodash-es/_baseGetTag.js","../../node_modules/lodash-es/isSymbol.js","../../node_modules/lodash-es/isObjectLike.js","../../node_modules/lodash-es/toNumber.js","../../node_modules/lodash-es/debounce.js","../../node_modules/parseuri/index.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/socket.io-client/build/url.js","../../node_modules/has-cors/index.js","../../node_modules/engine.io-client/lib/globalThis.browser.js","../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../node_modules/engine.io-parser/lib/commons.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/engine.io-parser/lib/encodePacket.browser.js","../../node_modules/engine.io-parser/lib/decodePacket.browser.js","../../node_modules/engine.io-parser/lib/index.js","../../node_modules/component-emitter/index.js","../../node_modules/engine.io-client/lib/transport.js","../../node_modules/yeast/index.js","../../node_modules/parseqs/index.js","../../node_modules/engine.io-client/lib/transports/polling.js","../../node_modules/engine.io-client/lib/util.js","../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js","../../node_modules/engine.io-client/lib/transports/websocket.js","../../node_modules/engine.io-client/lib/transports/index.js","../../node_modules/engine.io-client/lib/socket.js","../../node_modules/engine.io-client/lib/index.js","../../node_modules/socket.io-parser/dist/is-binary.js","../../node_modules/socket.io-parser/dist/binary.js","../../node_modules/socket.io-parser/dist/index.js","../../node_modules/socket.io-client/build/on.js","../../node_modules/socket.io-client/build/socket.js","../../node_modules/backo2/index.js","../../node_modules/socket.io-client/build/manager.js","../../node_modules/socket.io-client/build/index.js","../../node_modules/socket.io-client/wrapper.mjs","../js/lib/getUserMediaPolyfill.js","../js/lib/adapter.js","../../node_modules/getstats/getStats.js","../js/lib/codecsHandler.js","../js/lib/webrtc.js","../js/lib/videoChat.js","../js/lib/helpers.js","../js/lib/webrtcRoom.js","../js/index.js"],"sourcesContent":["/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.url = void 0;\nconst parseuri = require(\"parseuri\");\nconst debug = require(\"debug\")(\"socket.io-client:url\");\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nfunction url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug(\"protocol-less url %s\", uri);\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        debug(\"parse %s\", uri);\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\nexports.url = url;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","module.exports = (() => {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n})();\n","// browser shim for xmlhttprequest module\n\nconst hasCORS = require(\"has-cors\");\nconst globalThis = require(\"./globalThis\");\n\nmodule.exports = function(opts) {\n  const xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  const xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  const enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {}\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if (\"undefined\" !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\n        \"Microsoft.XMLHTTP\"\n      );\n    } catch (e) {}\n  }\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\n\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\n\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\n\nmodule.exports = {\n  PACKET_TYPES,\n  PACKET_TYPES_REVERSE,\n  ERROR_PACKET\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","const { PACKET_TYPES } = require(\"./commons\");\n\nconst withNativeBlob =\n  typeof Blob === \"function\" ||\n  (typeof Blob !== \"undefined\" &&\n    Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n  return typeof ArrayBuffer.isView === \"function\"\n    ? ArrayBuffer.isView(obj)\n    : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (\n    withNativeArrayBuffer &&\n    (data instanceof ArrayBuffer || isView(data))\n  ) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  }\n  // plain string\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nconst encodeBlobAsBase64 = (data, callback) => {\n  const fileReader = new FileReader();\n  fileReader.onload = function() {\n    const content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n  return fileReader.readAsDataURL(data);\n};\n\nmodule.exports = encodePacket;\n","const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require(\"./commons\");\n\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nlet base64decoder;\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nconst decodePacket = (encodedPacket, binaryType) => {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n  const type = encodedPacket.charAt(0);\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n  const packetType = PACKET_TYPES_REVERSE[type];\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n  return encodedPacket.length > 1\n    ? {\n        type: PACKET_TYPES_REVERSE[type],\n        data: encodedPacket.substring(1)\n      }\n    : {\n        type: PACKET_TYPES_REVERSE[type]\n      };\n};\n\nconst decodeBase64Packet = (data, binaryType) => {\n  if (base64decoder) {\n    const decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return { base64: true, data }; // fallback for old browsers\n  }\n};\n\nconst mapBinary = (data, binaryType) => {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n    case \"arraybuffer\":\n    default:\n      return data; // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;\n","const encodePacket = require(\"./encodePacket\");\nconst decodePacket = require(\"./decodePacket\");\n\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nconst encodePayload = (packets, callback) => {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  const length = packets.length;\n  const encodedPackets = new Array(length);\n  let count = 0;\n\n  packets.forEach((packet, i) => {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, encodedPacket => {\n      encodedPackets[i] = encodedPacket;\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nconst decodePayload = (encodedPayload, binaryType) => {\n  const encodedPackets = encodedPayload.split(SEPARATOR);\n  const packets = [];\n  for (let i = 0; i < encodedPackets.length; i++) {\n    const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket,\n  encodePayload,\n  decodePacket,\n  decodePayload\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","const parser = require(\"engine.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:transport\");\n\nclass Transport extends Emitter {\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} options.\n   * @api private\n   */\n  constructor(opts) {\n    super();\n\n    this.opts = opts;\n    this.query = opts.query;\n    this.readyState = \"\";\n    this.socket = opts.socket;\n  }\n\n  /**\n   * Emits an error.\n   *\n   * @param {String} str\n   * @return {Transport} for chaining\n   * @api public\n   */\n  onError(msg, desc) {\n    const err = new Error(msg);\n    err.type = \"TransportError\";\n    err.description = desc;\n    this.emit(\"error\", err);\n    return this;\n  }\n\n  /**\n   * Opens the transport.\n   *\n   * @api public\n   */\n  open() {\n    if (\"closed\" === this.readyState || \"\" === this.readyState) {\n      this.readyState = \"opening\";\n      this.doOpen();\n    }\n\n    return this;\n  }\n\n  /**\n   * Closes the transport.\n   *\n   * @api private\n   */\n  close() {\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.doClose();\n      this.onClose();\n    }\n\n    return this;\n  }\n\n  /**\n   * Sends multiple packets.\n   *\n   * @param {Array} packets\n   * @api private\n   */\n  send(packets) {\n    if (\"open\" === this.readyState) {\n      this.write(packets);\n    } else {\n      // this might happen if the transport was silently closed in the beforeunload event handler\n      debug(\"transport is not open, discarding packets\");\n    }\n  }\n\n  /**\n   * Called upon open\n   *\n   * @api private\n   */\n  onOpen() {\n    this.readyState = \"open\";\n    this.writable = true;\n    this.emit(\"open\");\n  }\n\n  /**\n   * Called with data.\n   *\n   * @param {String} data\n   * @api private\n   */\n  onData(data) {\n    const packet = parser.decodePacket(data, this.socket.binaryType);\n    this.onPacket(packet);\n  }\n\n  /**\n   * Called with a decoded packet.\n   */\n  onPacket(packet) {\n    this.emit(\"packet\", packet);\n  }\n\n  /**\n   * Called upon close.\n   *\n   * @api private\n   */\n  onClose() {\n    this.readyState = \"closed\";\n    this.emit(\"close\");\n  }\n}\n\nmodule.exports = Transport;\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","const Transport = require(\"../transport\");\nconst parseqs = require(\"parseqs\");\nconst parser = require(\"engine.io-parser\");\nconst yeast = require(\"yeast\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling\");\n\nclass Polling extends Transport {\n  /**\n   * Transport name.\n   */\n  get name() {\n    return \"polling\";\n  }\n\n  /**\n   * Opens the socket (triggers polling). We write a PING message to determine\n   * when the transport is open.\n   *\n   * @api private\n   */\n  doOpen() {\n    this.poll();\n  }\n\n  /**\n   * Pauses polling.\n   *\n   * @param {Function} callback upon buffers are flushed and transport is paused\n   * @api private\n   */\n  pause(onPause) {\n    const self = this;\n\n    this.readyState = \"pausing\";\n\n    function pause() {\n      debug(\"paused\");\n      self.readyState = \"paused\";\n      onPause();\n    }\n\n    if (this.polling || !this.writable) {\n      let total = 0;\n\n      if (this.polling) {\n        debug(\"we are currently polling - waiting to pause\");\n        total++;\n        this.once(\"pollComplete\", function() {\n          debug(\"pre-pause polling complete\");\n          --total || pause();\n        });\n      }\n\n      if (!this.writable) {\n        debug(\"we are currently writing - waiting to pause\");\n        total++;\n        this.once(\"drain\", function() {\n          debug(\"pre-pause writing complete\");\n          --total || pause();\n        });\n      }\n    } else {\n      pause();\n    }\n  }\n\n  /**\n   * Starts polling cycle.\n   *\n   * @api public\n   */\n  poll() {\n    debug(\"polling\");\n    this.polling = true;\n    this.doPoll();\n    this.emit(\"poll\");\n  }\n\n  /**\n   * Overloads onData to detect payloads.\n   *\n   * @api private\n   */\n  onData(data) {\n    const self = this;\n    debug(\"polling got data %s\", data);\n    const callback = function(packet, index, total) {\n      // if its the first message we consider the transport open\n      if (\"opening\" === self.readyState && packet.type === \"open\") {\n        self.onOpen();\n      }\n\n      // if its a close packet, we close the ongoing requests\n      if (\"close\" === packet.type) {\n        self.onClose();\n        return false;\n      }\n\n      // otherwise bypass onData and handle the message\n      self.onPacket(packet);\n    };\n\n    // decode payload\n    parser.decodePayload(data, this.socket.binaryType).forEach(callback);\n\n    // if an event did not trigger closing\n    if (\"closed\" !== this.readyState) {\n      // if we got data we're not polling\n      this.polling = false;\n      this.emit(\"pollComplete\");\n\n      if (\"open\" === this.readyState) {\n        this.poll();\n      } else {\n        debug('ignoring poll - transport state \"%s\"', this.readyState);\n      }\n    }\n  }\n\n  /**\n   * For polling, send a close packet.\n   *\n   * @api private\n   */\n  doClose() {\n    const self = this;\n\n    function close() {\n      debug(\"writing close packet\");\n      self.write([{ type: \"close\" }]);\n    }\n\n    if (\"open\" === this.readyState) {\n      debug(\"transport open - closing\");\n      close();\n    } else {\n      // in case we're trying to close while\n      // handshaking is in progress (GH-164)\n      debug(\"transport not open - deferring close\");\n      this.once(\"open\", close);\n    }\n  }\n\n  /**\n   * Writes a packets payload.\n   *\n   * @param {Array} data packets\n   * @param {Function} drain callback\n   * @api private\n   */\n  write(packets) {\n    this.writable = false;\n\n    parser.encodePayload(packets, data => {\n      this.doWrite(data, () => {\n        this.writable = true;\n        this.emit(\"drain\");\n      });\n    });\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"https\" : \"http\";\n    let port = \"\";\n\n    // cache busting is forced\n    if (false !== this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    if (!this.supportsBinary && !query.sid) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n        (\"http\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n}\n\nmodule.exports = Polling;\n","module.exports.pick = (obj, ...attr) => {\n  return attr.reduce((acc, k) => {\n    if (obj.hasOwnProperty(k)) {\n      acc[k] = obj[k];\n    }\n    return acc;\n  }, {});\n};\n","/* global attachEvent */\n\nconst XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst Polling = require(\"./polling\");\nconst Emitter = require(\"component-emitter\");\nconst { pick } = require(\"../util\");\nconst globalThis = require(\"../globalThis\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling-xhr\");\n\n/**\n * Empty function\n */\n\nfunction empty() {}\n\nconst hasXHR2 = (function() {\n  const xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\nclass XHR extends Polling {\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    if (typeof location !== \"undefined\") {\n      const isSSL = \"https:\" === location.protocol;\n      let port = location.port;\n\n      // some user agents have empty `location.port`\n      if (!port) {\n        port = isSSL ? 443 : 80;\n      }\n\n      this.xd =\n        (typeof location !== \"undefined\" &&\n          opts.hostname !== location.hostname) ||\n        port !== opts.port;\n      this.xs = opts.secure !== isSSL;\n    }\n    /**\n     * XHR supports binary\n     */\n    const forceBase64 = opts && opts.forceBase64;\n    this.supportsBinary = hasXHR2 && !forceBase64;\n  }\n\n  /**\n   * Creates a request.\n   *\n   * @param {String} method\n   * @api private\n   */\n  request(opts = {}) {\n    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n    return new Request(this.uri(), opts);\n  }\n\n  /**\n   * Sends data.\n   *\n   * @param {String} data to send.\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const req = this.request({\n      method: \"POST\",\n      data: data\n    });\n    const self = this;\n    req.on(\"success\", fn);\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr post error\", err);\n    });\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    debug(\"xhr poll\");\n    const req = this.request();\n    const self = this;\n    req.on(\"data\", function(data) {\n      self.onData(data);\n    });\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr poll error\", err);\n    });\n    this.pollXhr = req;\n  }\n}\n\nclass Request extends Emitter {\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts) {\n    super();\n    this.opts = opts;\n\n    this.method = opts.method || \"GET\";\n    this.uri = uri;\n    this.async = false !== opts.async;\n    this.data = undefined !== opts.data ? opts.data : null;\n\n    this.create();\n  }\n\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @api private\n   */\n  create() {\n    const opts = pick(\n      this.opts,\n      \"agent\",\n      \"enablesXDR\",\n      \"pfx\",\n      \"key\",\n      \"passphrase\",\n      \"cert\",\n      \"ca\",\n      \"ciphers\",\n      \"rejectUnauthorized\"\n    );\n    opts.xdomain = !!this.opts.xd;\n    opts.xscheme = !!this.opts.xs;\n\n    const xhr = (this.xhr = new XMLHttpRequest(opts));\n    const self = this;\n\n    try {\n      debug(\"xhr open %s: %s\", this.method, this.uri);\n      xhr.open(this.method, this.uri, this.async);\n      try {\n        if (this.opts.extraHeaders) {\n          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n          for (let i in this.opts.extraHeaders) {\n            if (this.opts.extraHeaders.hasOwnProperty(i)) {\n              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n            }\n          }\n        }\n      } catch (e) {}\n\n      if (\"POST\" === this.method) {\n        try {\n          xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n        } catch (e) {}\n      }\n\n      try {\n        xhr.setRequestHeader(\"Accept\", \"*/*\");\n      } catch (e) {}\n\n      // ie6 check\n      if (\"withCredentials\" in xhr) {\n        xhr.withCredentials = this.opts.withCredentials;\n      }\n\n      if (this.opts.requestTimeout) {\n        xhr.timeout = this.opts.requestTimeout;\n      }\n\n      if (this.hasXDR()) {\n        xhr.onload = function() {\n          self.onLoad();\n        };\n        xhr.onerror = function() {\n          self.onError(xhr.responseText);\n        };\n      } else {\n        xhr.onreadystatechange = function() {\n          if (4 !== xhr.readyState) return;\n          if (200 === xhr.status || 1223 === xhr.status) {\n            self.onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            setTimeout(function() {\n              self.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n      }\n\n      debug(\"xhr data %s\", this.data);\n      xhr.send(this.data);\n    } catch (e) {\n      // Need to defer since .create() is called directly from the constructor\n      // and thus the 'error' event can only be only bound *after* this exception\n      // occurs.  Therefore, also, we cannot throw here at all.\n      setTimeout(function() {\n        self.onError(e);\n      }, 0);\n      return;\n    }\n\n    if (typeof document !== \"undefined\") {\n      this.index = Request.requestsCount++;\n      Request.requests[this.index] = this;\n    }\n  }\n\n  /**\n   * Called upon successful response.\n   *\n   * @api private\n   */\n  onSuccess() {\n    this.emit(\"success\");\n    this.cleanup();\n  }\n\n  /**\n   * Called if we have data.\n   *\n   * @api private\n   */\n  onData(data) {\n    this.emit(\"data\", data);\n    this.onSuccess();\n  }\n\n  /**\n   * Called upon error.\n   *\n   * @api private\n   */\n  onError(err) {\n    this.emit(\"error\", err);\n    this.cleanup(true);\n  }\n\n  /**\n   * Cleans up house.\n   *\n   * @api private\n   */\n  cleanup(fromError) {\n    if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n      return;\n    }\n    // xmlhttprequest\n    if (this.hasXDR()) {\n      this.xhr.onload = this.xhr.onerror = empty;\n    } else {\n      this.xhr.onreadystatechange = empty;\n    }\n\n    if (fromError) {\n      try {\n        this.xhr.abort();\n      } catch (e) {}\n    }\n\n    if (typeof document !== \"undefined\") {\n      delete Request.requests[this.index];\n    }\n\n    this.xhr = null;\n  }\n\n  /**\n   * Called upon load.\n   *\n   * @api private\n   */\n  onLoad() {\n    const data = this.xhr.responseText;\n    if (data !== null) {\n      this.onData(data);\n    }\n  }\n\n  /**\n   * Check if it has XDomainRequest.\n   *\n   * @api private\n   */\n  hasXDR() {\n    return typeof XDomainRequest !== \"undefined\" && !this.xs && this.enablesXDR;\n  }\n\n  /**\n   * Aborts the request.\n   *\n   * @api public\n   */\n  abort() {\n    this.cleanup();\n  }\n}\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== \"undefined\") {\n  if (typeof attachEvent === \"function\") {\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (let i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n","const Polling = require(\"./polling\");\nconst globalThis = require(\"../globalThis\");\n\nconst rNewline = /\\n/g;\nconst rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nlet callbacks;\n\nclass JSONPPolling extends Polling {\n  /**\n   * JSONP Polling constructor.\n   *\n   * @param {Object} opts.\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.query = this.query || {};\n\n    // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n    if (!callbacks) {\n      // we need to consider multiple engines in the same page\n      callbacks = globalThis.___eio = globalThis.___eio || [];\n    }\n\n    // callback identifier\n    this.index = callbacks.length;\n\n    // add callback to jsonp global\n    const self = this;\n    callbacks.push(function(msg) {\n      self.onData(msg);\n    });\n\n    // append to query string\n    this.query.j = this.index;\n  }\n\n  /**\n   * JSONP only supports binary as base64 encoded strings\n   */\n  get supportsBinary() {\n    return false;\n  }\n\n  /**\n   * Closes the socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (this.script) {\n      // prevent spurious errors from being emitted when the window is unloaded\n      this.script.onerror = () => {};\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    if (this.form) {\n      this.form.parentNode.removeChild(this.form);\n      this.form = null;\n      this.iframe = null;\n    }\n\n    super.doClose();\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    const self = this;\n    const script = document.createElement(\"script\");\n\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    script.async = true;\n    script.src = this.uri();\n    script.onerror = function(e) {\n      self.onError(\"jsonp poll error\", e);\n    };\n\n    const insertAt = document.getElementsByTagName(\"script\")[0];\n    if (insertAt) {\n      insertAt.parentNode.insertBefore(script, insertAt);\n    } else {\n      (document.head || document.body).appendChild(script);\n    }\n    this.script = script;\n\n    const isUAgecko =\n      \"undefined\" !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n    if (isUAgecko) {\n      setTimeout(function() {\n        const iframe = document.createElement(\"iframe\");\n        document.body.appendChild(iframe);\n        document.body.removeChild(iframe);\n      }, 100);\n    }\n  }\n\n  /**\n   * Writes with a hidden iframe.\n   *\n   * @param {String} data to send\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const self = this;\n    let iframe;\n\n    if (!this.form) {\n      const form = document.createElement(\"form\");\n      const area = document.createElement(\"textarea\");\n      const id = (this.iframeId = \"eio_iframe_\" + this.index);\n\n      form.className = \"socketio\";\n      form.style.position = \"absolute\";\n      form.style.top = \"-1000px\";\n      form.style.left = \"-1000px\";\n      form.target = id;\n      form.method = \"POST\";\n      form.setAttribute(\"accept-charset\", \"utf-8\");\n      area.name = \"d\";\n      form.appendChild(area);\n      document.body.appendChild(form);\n\n      this.form = form;\n      this.area = area;\n    }\n\n    this.form.action = this.uri();\n\n    function complete() {\n      initIframe();\n      fn();\n    }\n\n    function initIframe() {\n      if (self.iframe) {\n        try {\n          self.form.removeChild(self.iframe);\n        } catch (e) {\n          self.onError(\"jsonp polling iframe removal error\", e);\n        }\n      }\n\n      try {\n        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n        const html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n        iframe = document.createElement(html);\n      } catch (e) {\n        iframe = document.createElement(\"iframe\");\n        iframe.name = self.iframeId;\n        iframe.src = \"javascript:0\";\n      }\n\n      iframe.id = self.iframeId;\n\n      self.form.appendChild(iframe);\n      self.iframe = iframe;\n    }\n\n    initIframe();\n\n    // escape \\n to prevent it from being converted into \\r\\n by some UAs\n    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n    data = data.replace(rEscapedNewline, \"\\\\\\n\");\n    this.area.value = data.replace(rNewline, \"\\\\n\");\n\n    try {\n      this.form.submit();\n    } catch (e) {}\n\n    if (this.iframe.attachEvent) {\n      this.iframe.onreadystatechange = function() {\n        if (self.iframe.readyState === \"complete\") {\n          complete();\n        }\n      };\n    } else {\n      this.iframe.onload = complete;\n    }\n  }\n}\n\nmodule.exports = JSONPPolling;\n","const globalThis = require(\"../globalThis\");\n\nmodule.exports = {\n  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,\n  usingBrowserWebSocket: true,\n  defaultBinaryType: \"arraybuffer\"\n};\n","const Transport = require(\"../transport\");\nconst parser = require(\"engine.io-parser\");\nconst parseqs = require(\"parseqs\");\nconst yeast = require(\"yeast\");\nconst { pick } = require(\"../util\");\nconst {\n  WebSocket,\n  usingBrowserWebSocket,\n  defaultBinaryType\n} = require(\"./websocket-constructor\");\n\nconst debug = require(\"debug\")(\"engine.io-client:websocket\");\n\n// detect ReactNative environment\nconst isReactNative =\n  typeof navigator !== \"undefined\" &&\n  typeof navigator.product === \"string\" &&\n  navigator.product.toLowerCase() === \"reactnative\";\n\nclass WS extends Transport {\n  /**\n   * WebSocket transport constructor.\n   *\n   * @api {Object} connection options\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.supportsBinary = !opts.forceBase64;\n  }\n\n  /**\n   * Transport name.\n   *\n   * @api public\n   */\n  get name() {\n    return \"websocket\";\n  }\n\n  /**\n   * Opens socket.\n   *\n   * @api private\n   */\n  doOpen() {\n    if (!this.check()) {\n      // let probe timeout\n      return;\n    }\n\n    const uri = this.uri();\n    const protocols = this.opts.protocols;\n\n    // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n    const opts = isReactNative\n      ? {}\n      : pick(\n          this.opts,\n          \"agent\",\n          \"perMessageDeflate\",\n          \"pfx\",\n          \"key\",\n          \"passphrase\",\n          \"cert\",\n          \"ca\",\n          \"ciphers\",\n          \"rejectUnauthorized\",\n          \"localAddress\",\n          \"protocolVersion\",\n          \"origin\",\n          \"maxPayload\",\n          \"family\",\n          \"checkServerIdentity\"\n        );\n\n    if (this.opts.extraHeaders) {\n      opts.headers = this.opts.extraHeaders;\n    }\n\n    try {\n      this.ws =\n        usingBrowserWebSocket && !isReactNative\n          ? protocols\n            ? new WebSocket(uri, protocols)\n            : new WebSocket(uri)\n          : new WebSocket(uri, protocols, opts);\n    } catch (err) {\n      return this.emit(\"error\", err);\n    }\n\n    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n\n    this.addEventListeners();\n  }\n\n  /**\n   * Adds event listeners to the socket\n   *\n   * @api private\n   */\n  addEventListeners() {\n    const self = this;\n\n    this.ws.onopen = function() {\n      self.onOpen();\n    };\n    this.ws.onclose = function() {\n      self.onClose();\n    };\n    this.ws.onmessage = function(ev) {\n      self.onData(ev.data);\n    };\n    this.ws.onerror = function(e) {\n      self.onError(\"websocket error\", e);\n    };\n  }\n\n  /**\n   * Writes data to socket.\n   *\n   * @param {Array} array of packets.\n   * @api private\n   */\n  write(packets) {\n    const self = this;\n    this.writable = false;\n\n    // encodePacket efficient as it uses WS framing\n    // no need for encodePayload\n    let total = packets.length;\n    let i = 0;\n    const l = total;\n    for (; i < l; i++) {\n      (function(packet) {\n        parser.encodePacket(packet, self.supportsBinary, function(data) {\n          // always create a new object (GH-437)\n          const opts = {};\n          if (!usingBrowserWebSocket) {\n            if (packet.options) {\n              opts.compress = packet.options.compress;\n            }\n\n            if (self.opts.perMessageDeflate) {\n              const len =\n                \"string\" === typeof data\n                  ? Buffer.byteLength(data)\n                  : data.length;\n              if (len < self.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n              }\n            }\n          }\n\n          // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n          try {\n            if (usingBrowserWebSocket) {\n              // TypeError is thrown when passing the second argument on Safari\n              self.ws.send(data);\n            } else {\n              self.ws.send(data, opts);\n            }\n          } catch (e) {\n            debug(\"websocket closed before onclose event\");\n          }\n\n          --total || done();\n        });\n      })(packets[i]);\n    }\n\n    function done() {\n      self.emit(\"flush\");\n\n      // fake drain\n      // defer to next tick to allow Socket to clear writeBuffer\n      setTimeout(function() {\n        self.writable = true;\n        self.emit(\"drain\");\n      }, 0);\n    }\n  }\n\n  /**\n   * Called upon close\n   *\n   * @api private\n   */\n  onClose() {\n    Transport.prototype.onClose.call(this);\n  }\n\n  /**\n   * Closes socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (typeof this.ws !== \"undefined\") {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"wss\" : \"ws\";\n    let port = \"\";\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n        (\"ws\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // append timestamp to URI\n    if (this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    // communicate binary support capabilities\n    if (!this.supportsBinary) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n\n  /**\n   * Feature detection for WebSocket.\n   *\n   * @return {Boolean} whether this transport is available.\n   * @api public\n   */\n  check() {\n    return (\n      !!WebSocket &&\n      !(\"__initialize\" in WebSocket && this.name === WS.prototype.name)\n    );\n  }\n}\n\nmodule.exports = WS;\n","const XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst XHR = require(\"./polling-xhr\");\nconst JSONP = require(\"./polling-jsonp\");\nconst websocket = require(\"./websocket\");\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts) {\n  let xhr;\n  let xd = false;\n  let xs = false;\n  const jsonp = false !== opts.jsonp;\n\n  if (typeof location !== \"undefined\") {\n    const isSSL = \"https:\" === location.protocol;\n    let port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if (\"open\" in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error(\"JSONP disabled\");\n    return new JSONP(opts);\n  }\n}\n","const transports = require(\"./transports/index\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:socket\");\nconst parser = require(\"engine.io-parser\");\nconst parseuri = require(\"parseuri\");\nconst parseqs = require(\"parseqs\");\n\nclass Socket extends Emitter {\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri or options\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts = {}) {\n    super();\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parseuri(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parseuri(opts.host).host;\n    }\n\n    this.secure =\n      null != opts.secure\n        ? opts.secure\n        : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? \"443\" : \"80\";\n    }\n\n    this.hostname =\n      opts.hostname ||\n      (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    this.port =\n      opts.port ||\n      (typeof location !== \"undefined\" && location.port\n        ? location.port\n        : this.secure\n        ? 443\n        : 80);\n\n    this.transports = opts.transports || [\"polling\", \"websocket\"];\n    this.readyState = \"\";\n    this.writeBuffer = [];\n    this.prevBufferLen = 0;\n\n    this.opts = Object.assign(\n      {\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        jsonp: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {}\n      },\n      opts\n    );\n\n    this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n    if (typeof this.opts.query === \"string\") {\n      this.opts.query = parseqs.decode(this.opts.query);\n    }\n\n    // set on handshake\n    this.id = null;\n    this.upgrades = null;\n    this.pingInterval = null;\n    this.pingTimeout = null;\n\n    // set on heartbeat\n    this.pingTimeoutTimer = null;\n\n    if (typeof addEventListener === \"function\") {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (this.transport) {\n            // silently close the transport\n            this.transport.removeAllListeners();\n            this.transport.close();\n          }\n        },\n        false\n      );\n    }\n\n    this.open();\n  }\n\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} transport name\n   * @return {Transport}\n   * @api private\n   */\n  createTransport(name) {\n    debug('creating transport \"%s\"', name);\n    const query = clone(this.opts.query);\n\n    // append engine.io protocol identifier\n    query.EIO = parser.protocol;\n\n    // transport name\n    query.transport = name;\n\n    // session id if we already have one\n    if (this.id) query.sid = this.id;\n\n    const opts = Object.assign(\n      {},\n      this.opts.transportOptions[name],\n      this.opts,\n      {\n        query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }\n    );\n\n    debug(\"options: %j\", opts);\n\n    return new transports[name](opts);\n  }\n\n  /**\n   * Initializes transport to use and starts probe.\n   *\n   * @api private\n   */\n  open() {\n    let transport;\n    if (\n      this.opts.rememberUpgrade &&\n      Socket.priorWebsocketSuccess &&\n      this.transports.indexOf(\"websocket\") !== -1\n    ) {\n      transport = \"websocket\";\n    } else if (0 === this.transports.length) {\n      // Emit error on next tick so it can be listened to\n      const self = this;\n      setTimeout(function() {\n        self.emit(\"error\", \"No transports available\");\n      }, 0);\n      return;\n    } else {\n      transport = this.transports[0];\n    }\n    this.readyState = \"opening\";\n\n    // Retry with the next transport if the transport is disabled (jsonp: false)\n    try {\n      transport = this.createTransport(transport);\n    } catch (e) {\n      debug(\"error while creating transport: %s\", e);\n      this.transports.shift();\n      this.open();\n      return;\n    }\n\n    transport.open();\n    this.setTransport(transport);\n  }\n\n  /**\n   * Sets the current transport. Disables the existing one (if any).\n   *\n   * @api private\n   */\n  setTransport(transport) {\n    debug(\"setting transport %s\", transport.name);\n    const self = this;\n\n    if (this.transport) {\n      debug(\"clearing existing transport %s\", this.transport.name);\n      this.transport.removeAllListeners();\n    }\n\n    // set up transport\n    this.transport = transport;\n\n    // set up transport listeners\n    transport\n      .on(\"drain\", function() {\n        self.onDrain();\n      })\n      .on(\"packet\", function(packet) {\n        self.onPacket(packet);\n      })\n      .on(\"error\", function(e) {\n        self.onError(e);\n      })\n      .on(\"close\", function() {\n        self.onClose(\"transport close\");\n      });\n  }\n\n  /**\n   * Probes a transport.\n   *\n   * @param {String} transport name\n   * @api private\n   */\n  probe(name) {\n    debug('probing transport \"%s\"', name);\n    let transport = this.createTransport(name, { probe: 1 });\n    let failed = false;\n    const self = this;\n\n    Socket.priorWebsocketSuccess = false;\n\n    function onTransportOpen() {\n      if (self.onlyBinaryUpgrades) {\n        const upgradeLosesBinary =\n          !this.supportsBinary && self.transport.supportsBinary;\n        failed = failed || upgradeLosesBinary;\n      }\n      if (failed) return;\n\n      debug('probe transport \"%s\" opened', name);\n      transport.send([{ type: \"ping\", data: \"probe\" }]);\n      transport.once(\"packet\", function(msg) {\n        if (failed) return;\n        if (\"pong\" === msg.type && \"probe\" === msg.data) {\n          debug('probe transport \"%s\" pong', name);\n          self.upgrading = true;\n          self.emit(\"upgrading\", transport);\n          if (!transport) return;\n          Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n          debug('pausing current transport \"%s\"', self.transport.name);\n          self.transport.pause(function() {\n            if (failed) return;\n            if (\"closed\" === self.readyState) return;\n            debug(\"changing transport and sending upgrade packet\");\n\n            cleanup();\n\n            self.setTransport(transport);\n            transport.send([{ type: \"upgrade\" }]);\n            self.emit(\"upgrade\", transport);\n            transport = null;\n            self.upgrading = false;\n            self.flush();\n          });\n        } else {\n          debug('probe transport \"%s\" failed', name);\n          const err = new Error(\"probe error\");\n          err.transport = transport.name;\n          self.emit(\"upgradeError\", err);\n        }\n      });\n    }\n\n    function freezeTransport() {\n      if (failed) return;\n\n      // Any callback called by transport should be ignored since now\n      failed = true;\n\n      cleanup();\n\n      transport.close();\n      transport = null;\n    }\n\n    // Handle any error that happens while probing\n    function onerror(err) {\n      const error = new Error(\"probe error: \" + err);\n      error.transport = transport.name;\n\n      freezeTransport();\n\n      debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n      self.emit(\"upgradeError\", error);\n    }\n\n    function onTransportClose() {\n      onerror(\"transport closed\");\n    }\n\n    // When the socket is closed while we're probing\n    function onclose() {\n      onerror(\"socket closed\");\n    }\n\n    // When the socket is upgraded while we're probing\n    function onupgrade(to) {\n      if (transport && to.name !== transport.name) {\n        debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n        freezeTransport();\n      }\n    }\n\n    // Remove all listeners on the transport and on self\n    function cleanup() {\n      transport.removeListener(\"open\", onTransportOpen);\n      transport.removeListener(\"error\", onerror);\n      transport.removeListener(\"close\", onTransportClose);\n      self.removeListener(\"close\", onclose);\n      self.removeListener(\"upgrading\", onupgrade);\n    }\n\n    transport.once(\"open\", onTransportOpen);\n    transport.once(\"error\", onerror);\n    transport.once(\"close\", onTransportClose);\n\n    this.once(\"close\", onclose);\n    this.once(\"upgrading\", onupgrade);\n\n    transport.open();\n  }\n\n  /**\n   * Called when connection is deemed open.\n   *\n   * @api public\n   */\n  onOpen() {\n    debug(\"socket open\");\n    this.readyState = \"open\";\n    Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n    this.emit(\"open\");\n    this.flush();\n\n    // we check for `readyState` in case an `open`\n    // listener already closed the socket\n    if (\n      \"open\" === this.readyState &&\n      this.opts.upgrade &&\n      this.transport.pause\n    ) {\n      debug(\"starting upgrade probes\");\n      let i = 0;\n      const l = this.upgrades.length;\n      for (; i < l; i++) {\n        this.probe(this.upgrades[i]);\n      }\n    }\n  }\n\n  /**\n   * Handles a packet.\n   *\n   * @api private\n   */\n  onPacket(packet) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n      this.emit(\"packet\", packet);\n\n      // Socket is live - any packet counts\n      this.emit(\"heartbeat\");\n\n      switch (packet.type) {\n        case \"open\":\n          this.onHandshake(JSON.parse(packet.data));\n          break;\n\n        case \"ping\":\n          this.resetPingTimeout();\n          this.sendPacket(\"pong\");\n          this.emit(\"pong\");\n          break;\n\n        case \"error\":\n          const err = new Error(\"server error\");\n          err.code = packet.data;\n          this.onError(err);\n          break;\n\n        case \"message\":\n          this.emit(\"data\", packet.data);\n          this.emit(\"message\", packet.data);\n          break;\n      }\n    } else {\n      debug('packet received with socket readyState \"%s\"', this.readyState);\n    }\n  }\n\n  /**\n   * Called upon handshake completion.\n   *\n   * @param {Object} handshake obj\n   * @api private\n   */\n  onHandshake(data) {\n    this.emit(\"handshake\", data);\n    this.id = data.sid;\n    this.transport.query.sid = data.sid;\n    this.upgrades = this.filterUpgrades(data.upgrades);\n    this.pingInterval = data.pingInterval;\n    this.pingTimeout = data.pingTimeout;\n    this.onOpen();\n    // In case open handler closes socket\n    if (\"closed\" === this.readyState) return;\n    this.resetPingTimeout();\n  }\n\n  /**\n   * Sets and resets ping timeout timer based on server pings.\n   *\n   * @api private\n   */\n  resetPingTimeout() {\n    clearTimeout(this.pingTimeoutTimer);\n    this.pingTimeoutTimer = setTimeout(() => {\n      this.onClose(\"ping timeout\");\n    }, this.pingInterval + this.pingTimeout);\n  }\n\n  /**\n   * Called on `drain` event\n   *\n   * @api private\n   */\n  onDrain() {\n    this.writeBuffer.splice(0, this.prevBufferLen);\n\n    // setting prevBufferLen = 0 is very important\n    // for example, when upgrading, upgrade packet is sent over,\n    // and a nonzero prevBufferLen could cause problems on `drain`\n    this.prevBufferLen = 0;\n\n    if (0 === this.writeBuffer.length) {\n      this.emit(\"drain\");\n    } else {\n      this.flush();\n    }\n  }\n\n  /**\n   * Flush write buffers.\n   *\n   * @api private\n   */\n  flush() {\n    if (\n      \"closed\" !== this.readyState &&\n      this.transport.writable &&\n      !this.upgrading &&\n      this.writeBuffer.length\n    ) {\n      debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n      this.transport.send(this.writeBuffer);\n      // keep track of current length of writeBuffer\n      // splice writeBuffer and callbackBuffer on `drain`\n      this.prevBufferLen = this.writeBuffer.length;\n      this.emit(\"flush\");\n    }\n  }\n\n  /**\n   * Sends a message.\n   *\n   * @param {String} message.\n   * @param {Function} callback function.\n   * @param {Object} options.\n   * @return {Socket} for chaining.\n   * @api public\n   */\n  write(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  send(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  /**\n   * Sends a packet.\n   *\n   * @param {String} packet type.\n   * @param {String} data.\n   * @param {Object} options.\n   * @param {Function} callback function.\n   * @api private\n   */\n  sendPacket(type, data, options, fn) {\n    if (\"function\" === typeof data) {\n      fn = data;\n      data = undefined;\n    }\n\n    if (\"function\" === typeof options) {\n      fn = options;\n      options = null;\n    }\n\n    if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n      return;\n    }\n\n    options = options || {};\n    options.compress = false !== options.compress;\n\n    const packet = {\n      type: type,\n      data: data,\n      options: options\n    };\n    this.emit(\"packetCreate\", packet);\n    this.writeBuffer.push(packet);\n    if (fn) this.once(\"flush\", fn);\n    this.flush();\n  }\n\n  /**\n   * Closes the connection.\n   *\n   * @api private\n   */\n  close() {\n    const self = this;\n\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.readyState = \"closing\";\n\n      if (this.writeBuffer.length) {\n        this.once(\"drain\", function() {\n          if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        });\n      } else if (this.upgrading) {\n        waitForUpgrade();\n      } else {\n        close();\n      }\n    }\n\n    function close() {\n      self.onClose(\"forced close\");\n      debug(\"socket closing - telling transport to close\");\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener(\"upgrade\", cleanupAndClose);\n      self.removeListener(\"upgradeError\", cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once(\"upgrade\", cleanupAndClose);\n      self.once(\"upgradeError\", cleanupAndClose);\n    }\n\n    return this;\n  }\n\n  /**\n   * Called upon transport error\n   *\n   * @api private\n   */\n  onError(err) {\n    debug(\"socket error %j\", err);\n    Socket.priorWebsocketSuccess = false;\n    this.emit(\"error\", err);\n    this.onClose(\"transport error\", err);\n  }\n\n  /**\n   * Called upon transport close.\n   *\n   * @api private\n   */\n  onClose(reason, desc) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket close with reason: \"%s\"', reason);\n      const self = this;\n\n      // clear timers\n      clearTimeout(this.pingIntervalTimer);\n      clearTimeout(this.pingTimeoutTimer);\n\n      // stop event from firing again for transport\n      this.transport.removeAllListeners(\"close\");\n\n      // ensure transport won't stay open\n      this.transport.close();\n\n      // ignore further transport communication\n      this.transport.removeAllListeners();\n\n      // set ready state\n      this.readyState = \"closed\";\n\n      // clear session id\n      this.id = null;\n\n      // emit close event\n      this.emit(\"close\", reason, desc);\n\n      // clean buffers after, so users can still\n      // grab the buffers on `close` event\n      self.writeBuffer = [];\n      self.prevBufferLen = 0;\n    }\n  }\n\n  /**\n   * Filters upgrades, returning only those matching client transports.\n   *\n   * @param {Array} server upgrades\n   * @api private\n   *\n   */\n  filterUpgrades(upgrades) {\n    const filteredUpgrades = [];\n    let i = 0;\n    const j = upgrades.length;\n    for (; i < j; i++) {\n      if (~this.transports.indexOf(upgrades[i]))\n        filteredUpgrades.push(upgrades[i]);\n    }\n    return filteredUpgrades;\n  }\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\nfunction clone(obj) {\n  const o = {};\n  for (let i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\nmodule.exports = Socket;\n","const Socket = require(\"./socket\");\n\nmodule.exports = (uri, opts) => new Socket(uri, opts);\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nmodule.exports.Socket = Socket;\nmodule.exports.protocol = Socket.protocol; // this is an int\nmodule.exports.Transport = require(\"./transport\");\nmodule.exports.transports = require(\"./transports/index\");\nmodule.exports.parser = require(\"engine.io-parser\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasBinary = exports.isBinary = void 0;\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nfunction isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexports.isBinary = isBinary;\nfunction hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasBinary = hasBinary;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reconstructPacket = exports.deconstructPacket = void 0;\nconst is_binary_1 = require(\"./is-binary\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nfunction deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nexports.deconstructPacket = deconstructPacket;\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (is_binary_1.isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nfunction reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nexports.reconstructPacket = reconstructPacket;\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\nconst Emitter = require(\"component-emitter\");\nconst binary_1 = require(\"./binary\");\nconst is_binary_1 = require(\"./is-binary\");\nconst debug = require(\"debug\")(\"socket.io-parser\");\n/**\n * Protocol version.\n *\n * @public\n */\nexports.protocol = 5;\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nclass Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        debug(\"encoding packet %j\", obj);\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (is_binary_1.hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        debug(\"encoded %j as %s\", obj, str);\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = binary_1.deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nclass Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emit(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emit(\"decoded\", packet);\n            }\n        }\n        else if (is_binary_1.isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emit(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        debug(\"decoded %s as %j\", str, p);\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nexports.Decoder = Decoder;\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.on = void 0;\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\nexports.on = on;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst socket_io_parser_1 = require(\"socket.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst on_1 = require(\"./on\");\nconst debug = require(\"debug\")(\"socket.io-client:socket\");\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nclass Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        this.ids = 0;\n        this.acks = {};\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.connected = false;\n        this.disconnected = true;\n        this.flags = {};\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on_1.on(io, \"open\", this.onopen.bind(this)),\n            on_1.on(io, \"packet\", this.onpacket.bind(this)),\n            on_1.on(io, \"error\", this.onerror.bind(this)),\n            on_1.on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param ev - event name\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: socket_io_parser_1.PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            debug(\"emitting packet with ack id %d\", this.ids);\n            this.acks[this.ids] = args.pop();\n            packet.id = this.ids++;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n            debug(\"discard packet as the transport is not currently writable\");\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"transport is open - connecting\");\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            super.emit(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        debug(\"close (%s)\", reason);\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        super.emit(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case socket_io_parser_1.PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    super.emit(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case socket_io_parser_1.PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case socket_io_parser_1.PacketType.CONNECT_ERROR:\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                super.emit(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        debug(\"emitting event %j\", args);\n        if (null != packet.id) {\n            debug(\"attaching ack callback to event\");\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            debug(\"sending ack %j\", args);\n            self.packet({\n                type: socket_io_parser_1.PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            debug(\"calling ack %s with %j\", packet.id, packet.data);\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n            debug(\"bad ack %s\", packet.id);\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        debug(\"socket connected with id %s\", id);\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        super.emit(\"connect\");\n        this.emitBuffered();\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        debug(\"server disconnect (%s)\", this.nsp);\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            debug(\"performing disconnect (%s)\", this.nsp);\n            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\nexports.Socket = Socket;\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst eio = require(\"engine.io-client\");\nconst socket_1 = require(\"./socket\");\nconst Emitter = require(\"component-emitter\");\nconst parser = require(\"socket.io-parser\");\nconst on_1 = require(\"./on\");\nconst Backoff = require(\"backo2\");\nconst debug = require(\"debug\")(\"socket.io-client:manager\");\nclass Manager extends Emitter {\n    constructor(uri, opts) {\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor(opts.randomizationFactor || 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = eio(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            super.emit(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = setTimeout(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        super.emit(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_1.on(socket, \"ping\", this.onping.bind(this)), on_1.on(socket, \"data\", this.ondata.bind(this)), on_1.on(socket, \"error\", this.onerror.bind(this)), on_1.on(socket, \"close\", this.onclose.bind(this)), on_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        super.emit(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        super.emit(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        if (\"opening\" === this._readyState) {\n            // `onclose` will not fire because\n            // an open event never happened\n            this.cleanup();\n        }\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        debug(\"onclose\");\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        super.emit(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            super.emit(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = setTimeout(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                super.emit(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        super.emit(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        super.emit(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = exports.io = exports.Manager = exports.protocol = void 0;\nconst url_1 = require(\"./url\");\nconst manager_1 = require(\"./manager\");\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nconst debug = require(\"debug\")(\"socket.io-client\");\n/**\n * Module exports.\n */\nmodule.exports = exports = lookup;\n/**\n * Managers cache.\n */\nconst cache = (exports.managers = {});\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url_1.url(uri, opts.path);\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        debug(\"ignoring socket cache for %s\", source);\n        io = new manager_1.Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug(\"new io instance for %s\", source);\n            cache[id] = new manager_1.Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\nexports.io = lookup;\n/**\n * Protocol version.\n *\n * @public\n */\nvar socket_io_parser_1 = require(\"socket.io-parser\");\nObject.defineProperty(exports, \"protocol\", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } });\n/**\n * `connect`.\n *\n * @param {String} uri\n * @public\n */\nexports.connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nvar manager_2 = require(\"./manager\");\nObject.defineProperty(exports, \"Manager\", { enumerable: true, get: function () { return manager_2.Manager; } });\n","import io from \"./build/index.js\";\n\nexport const Manager = io.Manager;\nexport { io };\nexport default io;\n","(function() {\n  if (!navigator.mediaDevices) navigator.mediaDevices = {};\n  if (!navigator.mediaDevices.getUserMedia) {\n    var getUserMedia =\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia ||\n      navigator.getUserMedia;\n\n    if (getUserMedia) {\n      navigator.mediaDevices.getUserMedia = function(constraints) {\n        return new Promise(function(resolve, reject) {\n          getUserMedia(\n            constraints,\n            function(stream) {\n              resolve(stream);\n            },\n            function(error) {\n              reject(error);\n            }\n          );\n        });\n      };\n    } else {\n      navigator.mediaDevices.getUserMedia = function() {\n        // A missing `getUserMedia` seemingly can mean one of two things:\n        //\n        // 1) WebRTC is unsupported or disabled on this browser\n        // 2) This is an insecure connection\n        //   * This handling of insecure connections happens only on certain browsers.\n        //     It was observed in Chromium 80 and Firefox 75, but not Firefox 68. I suspect it's the new behavior.\n        //   * In other browsers, it handles insecure connections by throwing `NotAllowedError`.\n        //     We still handle this case in the calling function.\n        //   * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n        //     As of this writing, this claims that the browser does *both* of these things for\n        //     insecure connections, which is of course impossible and thus confusing.\n        //\n        // We will attempt to distinguish these two cases by checking for various webrtc-related fields on\n        // `window` (inspired by github.com/muaz-khan/DetectRTC). If none of those fields exist, we assume\n        // that WebRTC is not supported on this browser.\n        return new Promise(function(resolve, reject) {\n          if (!(window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.RTCIceGatherer)) {\n            var e = new Error(\"getUserMedia is not supported in this browser.\");\n            // I'd use NotSupportedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomNotSupportedError';\n            reject(e);\n          } else {\n            var e = new Error(\"insecure connection\");\n            // I'd use NotAllowedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomSecureConnectionError';\n            reject(e);\n          }\n        });\n      };\n    }\n  }\n})();","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n\n  'use strict';\n\n  var _adapter_factory = require('./adapter_factory.js');\n\n  var adapter = (0, _adapter_factory.adapterFactory)({ window: typeof window === 'undefined' ? undefined : window });\n  module.exports = adapter; // this is the difference from adapter_core.\n\n  },{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.adapterFactory = adapterFactory;\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  var _chrome_shim = require('./chrome/chrome_shim');\n\n  var chromeShim = _interopRequireWildcard(_chrome_shim);\n\n  var _firefox_shim = require('./firefox/firefox_shim');\n\n  var firefoxShim = _interopRequireWildcard(_firefox_shim);\n\n  var _safari_shim = require('./safari/safari_shim');\n\n  var safariShim = _interopRequireWildcard(_safari_shim);\n\n  var _common_shim = require('./common_shim');\n\n  var commonShim = _interopRequireWildcard(_common_shim);\n\n  var _sdp = require('sdp');\n\n  var sdp = _interopRequireWildcard(_sdp);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  // Shimming starts here.\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  function adapterFactory() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        window = _ref.window;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      shimChrome: true,\n      shimFirefox: true,\n      shimSafari: true\n    };\n\n    // Utils.\n    var logging = utils.log;\n    var browserDetails = utils.detectBrowser(window);\n\n    var adapter = {\n      browserDetails: browserDetails,\n      commonShim: commonShim,\n      extractVersion: utils.extractVersion,\n      disableLog: utils.disableLog,\n      disableWarnings: utils.disableWarnings,\n      // Expose sdp as a convenience. For production apps include directly.\n      sdp: sdp\n    };\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n      case 'chrome':\n        if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n          logging('Chrome shim is not included in this adapter release.');\n          return adapter;\n        }\n        if (browserDetails.version === null) {\n          logging('Chrome shim can not determine version, not shimming.');\n          return adapter;\n        }\n        logging('adapter.js shimming chrome.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = chromeShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        chromeShim.shimGetUserMedia(window, browserDetails);\n        chromeShim.shimMediaStream(window, browserDetails);\n        chromeShim.shimPeerConnection(window, browserDetails);\n        chromeShim.shimOnTrack(window, browserDetails);\n        chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n        chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n        chromeShim.shimGetStats(window, browserDetails);\n        chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n        chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      case 'firefox':\n        if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n          logging('Firefox shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming firefox.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = firefoxShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        firefoxShim.shimGetUserMedia(window, browserDetails);\n        firefoxShim.shimPeerConnection(window, browserDetails);\n        firefoxShim.shimOnTrack(window, browserDetails);\n        firefoxShim.shimRemoveStream(window, browserDetails);\n        firefoxShim.shimSenderGetStats(window, browserDetails);\n        firefoxShim.shimReceiverGetStats(window, browserDetails);\n        firefoxShim.shimRTCDataChannel(window, browserDetails);\n        firefoxShim.shimAddTransceiver(window, browserDetails);\n        firefoxShim.shimGetParameters(window, browserDetails);\n        firefoxShim.shimCreateOffer(window, browserDetails);\n        firefoxShim.shimCreateAnswer(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        break;\n      case 'safari':\n        if (!safariShim || !options.shimSafari) {\n          logging('Safari shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming safari.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = safariShim;\n\n        // Must be called before shimCallbackAPI.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        safariShim.shimRTCIceServerUrls(window, browserDetails);\n        safariShim.shimCreateOfferLegacy(window, browserDetails);\n        safariShim.shimCallbacksAPI(window, browserDetails);\n        safariShim.shimLocalStreamsAPI(window, browserDetails);\n        safariShim.shimRemoteStreamsAPI(window, browserDetails);\n        safariShim.shimTrackEventTransceiver(window, browserDetails);\n        safariShim.shimGetUserMedia(window, browserDetails);\n        safariShim.shimAudioContext(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      default:\n        logging('Unsupported browser!');\n        break;\n    }\n\n    return adapter;\n  }\n\n  // Browser shims.\n\n  },{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":10,\"./utils\":11,\"sdp\":12}],3:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimMediaStream = shimMediaStream;\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\n  exports.shimGetStats = shimGetStats;\n  exports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\n  exports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\n  exports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.fixNegotiationNeeded = fixNegotiationNeeded;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimMediaStream(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function get() {\n          return this._ontrack;\n        },\n        set: function set(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        },\n\n        enumerable: true,\n        configurable: true\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var _this = this;\n\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = function (e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function (te) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = { track: te.track };\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function (track) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = { track: track };\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n    } else {\n      // even if RTCRtpTransceiver is in window, it is only used and\n      // emitted in unified-plan. Unfortunately this means we need\n      // to unconditionally wrap the event.\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        if (!e.transceiver) {\n          Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n        }\n        return e;\n      });\n    }\n  }\n\n  function shimGetSendersWithDtmf(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n          var sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          var idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this2 = this;\n\n        this._senders = this._senders || [];\n        origAddStream.apply(this, [stream]);\n        stream.getTracks().forEach(function (track) {\n          _this2._senders.push(shimSenderWithDtmf(_this2, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(function (track) {\n          var sender = _this3._senders.find(function (s) {\n            return s.track === track;\n          });\n          if (sender) {\n            // remove sender\n            _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n          }\n        });\n      };\n    } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this4 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this4;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function get() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  }\n\n  function shimGetStats(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _this5 = this;\n\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n\n\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function fixChromeStats_(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function (report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function (name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function makeMapStats(stats) {\n        return new Map(Object.keys(stats).map(function (key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n          onSucc(makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n      }\n\n      // promise-support\n      return new Promise(function (resolve, reject) {\n        origGetStats.apply(_this5, [function (response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n      return;\n    }\n\n    // shim sender stats.\n    if (!('getStats' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      if (origGetSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          var _this6 = this;\n\n          var senders = origGetSenders.apply(this, []);\n          senders.forEach(function (sender) {\n            return sender._pc = _this6;\n          });\n          return senders;\n        };\n      }\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      if (origAddTrack) {\n        window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n          var sender = origAddTrack.apply(this, arguments);\n          sender._pc = this;\n          return sender;\n        };\n      }\n      window.RTCRtpSender.prototype.getStats = function getStats() {\n        var sender = this;\n        return this._pc.getStats().then(function (result) {\n          return (\n            /* Note: this will include stats of all senders that\n             *   send a track with the same id as sender.track as\n             *   it is not possible to identify the RTCRtpSender.\n             */\n            utils.filterStats(result, sender.track, true)\n          );\n        });\n      };\n    }\n\n    // shim receiver stats.\n    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n      if (origGetReceivers) {\n        window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n          var _this7 = this;\n\n          var receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(function (receiver) {\n            return receiver._pc = _this7;\n          });\n          return receivers;\n        };\n      }\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        e.receiver._pc = e.srcElement;\n        return e;\n      });\n      window.RTCRtpReceiver.prototype.getStats = function getStats() {\n        var receiver = this;\n        return this._pc.getStats().then(function (result) {\n          return utils.filterStats(result, receiver.track, false);\n        });\n      };\n    }\n\n    if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n      return;\n    }\n\n    // shim RTCPeerConnection.getStats(track).\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n        var track = arguments[0];\n        var sender = void 0;\n        var receiver = void 0;\n        var err = void 0;\n        this.getSenders().forEach(function (s) {\n          if (s.track === track) {\n            if (sender) {\n              err = true;\n            } else {\n              sender = s;\n            }\n          }\n        });\n        this.getReceivers().forEach(function (r) {\n          if (r.track === track) {\n            if (receiver) {\n              err = true;\n            } else {\n              receiver = r;\n            }\n          }\n          return r.track === track;\n        });\n        if (err || sender && receiver) {\n          return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n        } else if (sender) {\n          return sender.getStats();\n        } else if (receiver) {\n          return receiver.getStats();\n        }\n        return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n      }\n      return origGetStats.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrackWithNative(window) {\n    // shim addTrack/removeTrack with native variants in order to make\n    // the interactions with legacy getLocalStreams behave as in other browsers.\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this8 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n        return _this8._shimmedLocalStreams[streamId][0];\n      });\n    };\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      var sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this9 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this9.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      var existingSenders = this.getSenders();\n      origAddStream.apply(this, arguments);\n      var newSenders = this.getSenders().filter(function (newSender) {\n        return existingSenders.indexOf(newSender) === -1;\n      });\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this10 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n          var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (_this10._shimmedLocalStreams[streamId].length === 1) {\n            delete _this10._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrack(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n      return shimAddTrackRemoveTrackWithNative(window);\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this11 = this;\n\n      var nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(function (stream) {\n        return _this11._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this12 = this;\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this12.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!this._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(this, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n      delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n      delete this._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      var _this13 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n        return t === track;\n      })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n      }\n\n      var alreadyExists = this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      var oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function () {\n          _this13.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        var _this14 = this;\n\n        var args = arguments;\n        var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(this, [function (description) {\n            var desc = replaceInternalStreamId(_this14, description);\n            args[0].apply(null, [desc]);\n          }, function (err) {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]]);\n        }\n        return nativeMethod.apply(this, arguments).then(function (description) {\n          return replaceInternalStreamId(_this14, description);\n        });\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n\n    var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n      get: function get() {\n        var description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this15 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      var stream = void 0;\n      Object.keys(this._streams).forEach(function (streamid) {\n        var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = _this15._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.webkitRTCPeerConnection;\n    }\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    if (browserDetails.version < 53) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n  }\n\n  // Attempt to fix ONN in plan-b mode.\n  function fixNegotiationNeeded(window, browserDetails) {\n    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n      var pc = e.target;\n      if (browserDetails.version < 72 || pc.getConfiguration && pc.getConfiguration().sdpSemantics === 'plan-b') {\n        if (pc.signalingState !== 'stable') {\n          return;\n        }\n      }\n      return e;\n    });\n  }\n\n  },{\"../utils.js\":11,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, getSourceId) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    // getSourceId is a function that returns a promise resolving with\n    // the sourceId of the screen/window/tab to be shared.\n    if (typeof getSourceId !== 'function') {\n      console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      return getSourceId(constraints).then(function (sourceId) {\n        var widthSpecified = constraints.video && constraints.video.width;\n        var heightSpecified = constraints.video && constraints.video.height;\n        var frameRateSpecified = constraints.video && constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n    };\n  }\n\n  },{}],5:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  var logging = utils.log;\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.mediaDevices) {\n      return;\n    }\n\n    var constraintsToChrome_ = function constraintsToChrome_(c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n        return c;\n      }\n      var cc = {};\n      Object.keys(c).forEach(function (key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n        if (r.exact !== undefined && typeof r.exact === 'number') {\n          r.min = r.max = r.exact;\n        }\n        var oldname_ = function oldname_(prefix, name) {\n          if (prefix) {\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n          }\n          return name === 'deviceId' ? 'sourceId' : name;\n        };\n        if (r.ideal !== undefined) {\n          cc.optional = cc.optional || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[oldname_('min', key)] = r.ideal;\n            cc.optional.push(oc);\n            oc = {};\n            oc[oldname_('max', key)] = r.ideal;\n            cc.optional.push(oc);\n          } else {\n            oc[oldname_('', key)] = r.ideal;\n            cc.optional.push(oc);\n          }\n        }\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\n          cc.mandatory = cc.mandatory || {};\n          cc.mandatory[oldname_('', key)] = r.exact;\n        } else {\n          ['min', 'max'].forEach(function (mix) {\n            if (r[mix] !== undefined) {\n              cc.mandatory = cc.mandatory || {};\n              cc.mandatory[oldname_(mix, key)] = r[mix];\n            }\n          });\n        }\n      });\n      if (c.advanced) {\n        cc.optional = (cc.optional || []).concat(c.advanced);\n      }\n      return cc;\n    };\n\n    var shimConstraints_ = function shimConstraints_(constraints, func) {\n      if (browserDetails.version >= 61) {\n        return func(constraints);\n      }\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (constraints && _typeof(constraints.audio) === 'object') {\n        var remap = function remap(obj, a, b) {\n          if (a in obj && !(b in obj)) {\n            obj[b] = obj[a];\n            delete obj[a];\n          }\n        };\n        constraints = JSON.parse(JSON.stringify(constraints));\n        remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n        remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n        constraints.audio = constraintsToChrome_(constraints.audio);\n      }\n      if (constraints && _typeof(constraints.video) === 'object') {\n        // Shim facingMode for mobile & surface pro.\n        var face = constraints.video.facingMode;\n        face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n        var getSupportedFacingModeLies = browserDetails.version < 66;\n\n        if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n          delete constraints.video.facingMode;\n          var matches = void 0;\n          if (face.exact === 'environment' || face.ideal === 'environment') {\n            matches = ['back', 'rear'];\n          } else if (face.exact === 'user' || face.ideal === 'user') {\n            matches = ['front'];\n          }\n          if (matches) {\n            // Look for matches in label, or use last cam for back (typical).\n            return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n              devices = devices.filter(function (d) {\n                return d.kind === 'videoinput';\n              });\n              var dev = devices.find(function (d) {\n                return matches.some(function (match) {\n                  return d.label.toLowerCase().includes(match);\n                });\n              });\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n          }\n        }\n        constraints.video = constraintsToChrome_(constraints.video);\n      }\n      logging('chrome: ' + JSON.stringify(constraints));\n      return func(constraints);\n    };\n\n    var shimError_ = function shimError_(e) {\n      if (browserDetails.version >= 64) {\n        return e;\n      }\n      return {\n        name: {\n          PermissionDeniedError: 'NotAllowedError',\n          PermissionDismissedError: 'NotAllowedError',\n          InvalidStateError: 'NotAllowedError',\n          DevicesNotFoundError: 'NotFoundError',\n          ConstraintNotSatisfiedError: 'OverconstrainedError',\n          TrackStartError: 'NotReadableError',\n          MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n          MediaDeviceKillSwitchOn: 'NotAllowedError',\n          TabCaptureError: 'AbortError',\n          ScreenCaptureError: 'AbortError',\n          DeviceCaptureError: 'AbortError'\n        }[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraint || e.constraintName,\n        toString: function toString() {\n          return this.name + (this.message && ': ') + this.message;\n        }\n      };\n    };\n\n    var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n      shimConstraints_(constraints, function (c) {\n        navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n          if (onError) {\n            onError(shimError_(e));\n          }\n        });\n      });\n    };\n    navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    if (navigator.mediaDevices.getUserMedia) {\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (cs) {\n        return shimConstraints_(cs, function (c) {\n          return origGetUserMedia(c).then(function (stream) {\n            if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n              stream.getTracks().forEach(function (track) {\n                track.stop();\n              });\n              throw new DOMException('', 'NotFoundError');\n            }\n            return stream;\n          }, function (e) {\n            return Promise.reject(shimError_(e));\n          });\n        });\n      };\n    }\n  }\n\n  },{\"../utils.js\":11}],6:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimRTCIceCandidate = shimRTCIceCandidate;\n  exports.shimMaxMessageSize = shimMaxMessageSize;\n  exports.shimSendThrowTypeError = shimSendThrowTypeError;\n  exports.shimConnectionState = shimConnectionState;\n  exports.removeExtmapAllowMixed = removeExtmapAllowMixed;\n  exports.shimAddIceCandidateNullOrEmpty = shimAddIceCandidateNullOrEmpty;\n  exports.shimParameterlessSetLocalDescription = shimParameterlessSetLocalDescription;\n\n  var _sdp = require('sdp');\n\n  var _sdp2 = _interopRequireDefault(_sdp);\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function shimRTCIceCandidate(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function RTCIceCandidate(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      if (args.candidate && args.candidate.length) {\n        // Augment the native candidate with the parsed fields.\n        var nativeCandidate = new NativeRTCIceCandidate(args);\n        var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n        var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n        // Add a serializer that does not serialize the extra attributes.\n        augmentedCandidate.toJSON = function toJSON() {\n          return {\n            candidate: augmentedCandidate.candidate,\n            sdpMid: augmentedCandidate.sdpMid,\n            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n            usernameFragment: augmentedCandidate.usernameFragment\n          };\n        };\n        return augmentedCandidate;\n      }\n      return new NativeRTCIceCandidate(args);\n    };\n    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  }\n\n  function shimMaxMessageSize(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n        get: function get() {\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\n        }\n      });\n    }\n\n    var sctpInDescription = function sctpInDescription(description) {\n      if (!description || !description.sdp) {\n        return false;\n      }\n      var sections = _sdp2.default.splitSections(description.sdp);\n      sections.shift();\n      return sections.some(function (mediaSection) {\n        var mLine = _sdp2.default.parseMLine(mediaSection);\n        return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n      });\n    };\n\n    var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n      // TODO: Is there a better solution for detecting Firefox?\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (match === null || match.length < 2) {\n        return -1;\n      }\n      var version = parseInt(match[1], 10);\n      // Test for NaN (yes, this is ugly)\n      return version !== version ? -1 : version;\n    };\n\n    var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n      // Every implementation we know can send at least 64 KiB.\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\n      //       data does not reach the other peer reliably.\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n      var canSendMaxMessageSize = 65536;\n      if (browserDetails.browser === 'firefox') {\n        if (browserDetails.version < 57) {\n          if (remoteIsFirefox === -1) {\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n            // fragmentation.\n            canSendMaxMessageSize = 16384;\n          } else {\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n            // messages. Thus, supporting ~2 GiB when sending.\n            canSendMaxMessageSize = 2147483637;\n          }\n        } else if (browserDetails.version < 60) {\n          // Currently, all FF >= 57 will reset the remote maximum message size\n          // to the default value when a data channel is created at a later\n          // stage. :(\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n          canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n        } else {\n          // FF >= 60 supports sending ~2 GiB\n          canSendMaxMessageSize = 2147483637;\n        }\n      }\n      return canSendMaxMessageSize;\n    };\n\n    var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\n      //       every implementation we know supports receiving 65536 bytes.\n      var maxMessageSize = 65536;\n\n      // FF 57 has a slightly incorrect default remote max message size, so\n      // we need to adjust it here to avoid a failure when sending.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n      if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n        maxMessageSize = 65535;\n      }\n\n      var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n      if (match.length > 0) {\n        maxMessageSize = parseInt(match[0].substr(19), 10);\n      } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n        // If the maximum message size is not present in the remote SDP and\n        // both local and remote are Firefox, the remote peer can receive\n        // ~2 GiB.\n        maxMessageSize = 2147483637;\n      }\n      return maxMessageSize;\n    };\n\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        var _getConfiguration = this.getConfiguration(),\n            sdpSemantics = _getConfiguration.sdpSemantics;\n\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get: function get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n\n            enumerable: true,\n            configurable: true\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        var maxMessageSize = void 0;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        var sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get: function get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  }\n\n  function shimSendThrowTypeError(window) {\n    if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n      return;\n    }\n\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\n    //       message size can be reset for all data channels at a later stage.\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n    function wrapDcSend(dc, pc) {\n      var origDataChannelSend = dc.send;\n      dc.send = function send() {\n        var data = arguments[0];\n        var length = data.length || data.size || data.byteLength;\n        if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n          throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n        }\n        return origDataChannelSend.apply(dc, arguments);\n      };\n    }\n    var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n    window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n      var dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n    utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n      wrapDcSend(e.channel, e.target);\n      return e;\n    });\n  }\n\n  /* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n   * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n   * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n   * since DTLS failures would be hidden. See\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n   * for the Firefox tracking bug.\n   */\n  function shimConnectionState(window) {\n    if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    Object.defineProperty(proto, 'connectionState', {\n      get: function get() {\n        return {\n          completed: 'connected',\n          checking: 'connecting'\n        }[this.iceConnectionState] || this.iceConnectionState;\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(proto, 'onconnectionstatechange', {\n      get: function get() {\n        return this._onconnectionstatechange || null;\n      },\n      set: function set(cb) {\n        if (this._onconnectionstatechange) {\n          this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n          delete this._onconnectionstatechange;\n        }\n        if (cb) {\n          this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n\n    ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n      var origMethod = proto[method];\n      proto[method] = function () {\n        if (!this._connectionstatechangepoly) {\n          this._connectionstatechangepoly = function (e) {\n            var pc = e.target;\n            if (pc._lastConnectionState !== pc.connectionState) {\n              pc._lastConnectionState = pc.connectionState;\n              var newEvent = new Event('connectionstatechange', e);\n              pc.dispatchEvent(newEvent);\n            }\n            return e;\n          };\n          this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n        }\n        return origMethod.apply(this, arguments);\n      };\n    });\n  }\n\n  function removeExtmapAllowMixed(window, browserDetails) {\n    /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n      return;\n    }\n    if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n      return;\n    }\n    var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n      if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n        var sdp = desc.sdp.split('\\n').filter(function (line) {\n          return line.trim() !== 'a=extmap-allow-mixed';\n        }).join('\\n');\n        // Safari enforces read-only-ness of RTCSessionDescription fields.\n        if (window.RTCSessionDescription && desc instanceof window.RTCSessionDescription) {\n          arguments[0] = new window.RTCSessionDescription({\n            type: desc.type,\n            sdp: sdp\n          });\n        } else {\n          desc.sdp = sdp;\n        }\n      }\n      return nativeSRD.apply(this, arguments);\n    };\n  }\n\n  function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n    // Support for addIceCandidate(null or undefined)\n    // as well as addIceCandidate({candidate: \"\", ...})\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n    // Note: must be called before other polyfills which change the signature.\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if ((browserDetails.browser === 'chrome' && browserDetails.version < 78 || browserDetails.browser === 'firefox' && browserDetails.version < 68 || browserDetails.browser === 'safari') && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  // Note: Make sure to call this ahead of APIs that modify\n  // setLocalDescription.length\n  function shimParameterlessSetLocalDescription(window, browserDetails) {\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      var _this = this;\n\n      var desc = arguments[0] || {};\n      if ((typeof desc === 'undefined' ? 'undefined' : _typeof(desc)) !== 'object' || desc.type && desc.sdp) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = { type: desc.type, sdp: desc.sdp };\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || desc.type !== 'offer' && desc.type !== 'answer') {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      var func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this).then(function (d) {\n        return nativeSetLocalDescription.apply(_this, [d]);\n      });\n    };\n  }\n\n  },{\"./utils\":11,\"sdp\":12}],7:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.shimSenderGetStats = shimSenderGetStats;\n  exports.shimReceiverGetStats = shimReceiverGetStats;\n  exports.shimRemoveStream = shimRemoveStream;\n  exports.shimRTCDataChannel = shimRTCDataChannel;\n  exports.shimAddTransceiver = shimAddTransceiver;\n  exports.shimGetParameters = shimGetParameters;\n  exports.shimCreateOffer = shimCreateOffer;\n  exports.shimCreateAnswer = shimCreateAnswer;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.mozRTCPeerConnection;\n    }\n\n    if (browserDetails.version < 53) {\n      // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(function (stat) {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach(function (stat, i) {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n      return;\n    }\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n    };\n  }\n\n  function shimReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n      return;\n    }\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this2 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this2;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      return this._pc.getStats(this.track);\n    };\n  }\n\n  function shimRemoveStream(window) {\n    if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(function (sender) {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n\n  function shimRTCDataChannel(window) {\n    // rename DataChannel to RTCDataChannel (native fix in FF60):\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n    if (window.DataChannel && !window.RTCDataChannel) {\n      window.RTCDataChannel = window.DataChannel;\n    }\n  }\n\n  function shimAddTransceiver(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n    if (origAddTransceiver) {\n      window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n        this.setParametersPromises = [];\n        var initParameters = arguments[1];\n        var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach(function (encodingParam) {\n            if ('rid' in encodingParam) {\n              var ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        var transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          var sender = transceiver.sender;\n\n          var params = sender.getParameters();\n          if (!('encodings' in params) ||\n          // Avoid being fooled by patched getParameters() below.\n          params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params).then(function () {\n              delete sender.sendEncodings;\n            }).catch(function () {\n              delete sender.sendEncodings;\n            }));\n          }\n        }\n        return transceiver;\n      };\n    }\n  }\n\n  function shimGetParameters(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCRtpSender)) {\n      return;\n    }\n    var origGetParameters = window.RTCRtpSender.prototype.getParameters;\n    if (origGetParameters) {\n      window.RTCRtpSender.prototype.getParameters = function getParameters() {\n        var params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n    }\n  }\n\n  function shimCreateOffer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n      var _this4 = this,\n          _arguments2 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateOffer.apply(_this4, _arguments2);\n        }).finally(function () {\n          _this4.setParametersPromises = [];\n        });\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimCreateAnswer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n    window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n      var _this5 = this,\n          _arguments3 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateAnswer.apply(_this5, _arguments3);\n        }).finally(function () {\n          _this5.setParametersPromises = [];\n        });\n      }\n      return origCreateAnswer.apply(this, arguments);\n    };\n  }\n\n  },{\"../utils\":11,\"./getdisplaymedia\":8,\"./getusermedia\":9}],8:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, preferredMediaSource) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = { mediaSource: preferredMediaSource };\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n  }\n\n  },{}],9:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n    var MediaStreamTrack = window && window.MediaStreamTrack;\n\n    navigator.getUserMedia = function (constraints, onSuccess, onError) {\n      // Replace Firefox 44+'s deprecation warning with unprefixed version.\n      utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n      navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n\n    if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n\n      var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (c) {\n        if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n          remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeGetUserMedia(c);\n      };\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n        var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n        MediaStreamTrack.prototype.getSettings = function () {\n          var obj = nativeGetSettings.apply(this, arguments);\n          remap(obj, 'mozAutoGainControl', 'autoGainControl');\n          remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n          return obj;\n        };\n      }\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n        var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n        MediaStreamTrack.prototype.applyConstraints = function (c) {\n          if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n            c = JSON.parse(JSON.stringify(c));\n            remap(c, 'autoGainControl', 'mozAutoGainControl');\n            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n          }\n          return nativeApplyConstraints.apply(this, [c]);\n        };\n      }\n    }\n  }\n\n  },{\"../utils\":11}],10:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimLocalStreamsAPI = shimLocalStreamsAPI;\n  exports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\n  exports.shimCallbacksAPI = shimCallbacksAPI;\n  exports.shimGetUserMedia = shimGetUserMedia;\n  exports.shimConstraints = shimConstraints;\n  exports.shimRTCIceServerUrls = shimRTCIceServerUrls;\n  exports.shimTrackEventTransceiver = shimTrackEventTransceiver;\n  exports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n  exports.shimAudioContext = shimAudioContext;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimLocalStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n        // Try to emulate Chrome's behaviour of adding in audio-video order.\n        // Safari orders by track id.\n        stream.getAudioTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n        stream.getVideoTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n        var _this2 = this;\n\n        for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          streams[_key - 1] = arguments[_key];\n        }\n\n        if (streams) {\n          streams.forEach(function (stream) {\n            if (!_this2._localStreams) {\n              _this2._localStreams = [stream];\n            } else if (!_this2._localStreams.includes(stream)) {\n              _this2._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function (sender) {\n          if (tracks.includes(sender.track)) {\n            _this3.removeTrack(sender);\n          }\n        });\n      };\n    }\n  }\n\n  function shimRemoteStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function get() {\n          return this._onaddstream;\n        },\n        set: function set(f) {\n          var _this4 = this;\n\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!_this4._remoteStreams) {\n                _this4._remoteStreams = [];\n              }\n              if (_this4._remoteStreams.includes(stream)) {\n                return;\n              }\n              _this4._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              _this4.dispatchEvent(event);\n            });\n          });\n        }\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  }\n\n  function shimCallbacksAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var origCreateOffer = prototype.createOffer;\n    var origCreateAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function createOffer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function withCallback(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  }\n\n  function shimGetUserMedia(window) {\n    var navigator = window && window.navigator;\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      // shim not needed in Safari 12.1\n      var mediaDevices = navigator.mediaDevices;\n      var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (constraints) {\n        return _getUserMedia(shimConstraints(constraints));\n      };\n    }\n\n    if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n        navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n      }.bind(navigator);\n    }\n  }\n\n  function shimConstraints(constraints) {\n    if (constraints && constraints.video !== undefined) {\n      return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n    }\n\n    return constraints;\n  }\n\n  function shimRTCIceServerUrls(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in OrigPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function get() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  }\n\n  function shimTrackEventTransceiver(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimCreateOfferLegacy(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n        }\n        var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n          this.addTransceiver('audio', { direction: 'recvonly' });\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n        }\n        var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n          this.addTransceiver('video', { direction: 'recvonly' });\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimAudioContext(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n      return;\n    }\n    window.AudioContext = window.webkitAudioContext;\n  }\n\n  },{\"../utils\":11}],11:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.extractVersion = extractVersion;\n  exports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\n  exports.disableLog = disableLog;\n  exports.disableWarnings = disableWarnings;\n  exports.log = log;\n  exports.deprecated = deprecated;\n  exports.detectBrowser = detectBrowser;\n  exports.compactObject = compactObject;\n  exports.walkStats = walkStats;\n  exports.filterStats = filterStats;\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  var logDisabled_ = true;\n  var deprecationWarnings_ = true;\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  function extractVersion(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  }\n\n  // Wraps the peerconnection event eventNameToWrap in a function\n  // which returns the modified event object (or false to prevent\n  // the event).\n  function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    var nativeAddEventListener = proto.addEventListener;\n    proto.addEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap) {\n        return nativeAddEventListener.apply(this, arguments);\n      }\n      var wrappedCallback = function wrappedCallback(e) {\n        var modifiedEvent = wrapper(e);\n        if (modifiedEvent) {\n          if (cb.handleEvent) {\n            cb.handleEvent(modifiedEvent);\n          } else {\n            cb(modifiedEvent);\n          }\n        }\n      };\n      this._eventMap = this._eventMap || {};\n      if (!this._eventMap[eventNameToWrap]) {\n        this._eventMap[eventNameToWrap] = new Map();\n      }\n      this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n      return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n    };\n\n    var nativeRemoveEventListener = proto.removeEventListener;\n    proto.removeEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      if (!this._eventMap[eventNameToWrap].has(cb)) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n      this._eventMap[eventNameToWrap].delete(cb);\n      if (this._eventMap[eventNameToWrap].size === 0) {\n        delete this._eventMap[eventNameToWrap];\n      }\n      if (Object.keys(this._eventMap).length === 0) {\n        delete this._eventMap;\n      }\n      return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n    };\n\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\n      get: function get() {\n        return this['_on' + eventNameToWrap];\n      },\n      set: function set(cb) {\n        if (this['_on' + eventNameToWrap]) {\n          this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n          delete this['_on' + eventNameToWrap];\n        }\n        if (cb) {\n          this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n  }\n\n  function disableLog(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n  }\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  function disableWarnings(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  }\n\n  function log() {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  }\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  function deprecated(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n  }\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  function detectBrowser(window) {\n    // Returned result object.\n    var result = { browser: null, version: null };\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    var navigator = window.navigator;\n\n\n    if (navigator.mozGetUserMedia) {\n      // Firefox.\n      result.browser = 'firefox';\n      result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n      // Chrome, Chromium, Webview, Opera.\n      // Version matches Chrome/WebRTC version.\n      // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n      // more complicated fallback to webkitRTCPeerConnection.\n      result.browser = 'chrome';\n      result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n      // Safari.\n      result.browser = 'safari';\n      result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n      result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n    } else {\n      // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n\n  /**\n   * Checks if something is an object.\n   *\n   * @param {*} val The something you want to check.\n   * @return true if val is an object, false otherwise.\n   */\n  function isObject(val) {\n    return Object.prototype.toString.call(val) === '[object Object]';\n  }\n\n  /**\n   * Remove all empty objects and undefined values\n   * from a nested object -- an enhanced and vanilla version\n   * of Lodash's `compact`.\n   */\n  function compactObject(data) {\n    if (!isObject(data)) {\n      return data;\n    }\n\n    return Object.keys(data).reduce(function (accumulator, key) {\n      var isObj = isObject(data[key]);\n      var value = isObj ? compactObject(data[key]) : data[key];\n      var isEmptyObject = isObj && !Object.keys(value).length;\n      if (value === undefined || isEmptyObject) {\n        return accumulator;\n      }\n      return Object.assign(accumulator, _defineProperty({}, key, value));\n    }, {});\n  }\n\n  /* iterates the stats graph recursively. */\n  function walkStats(stats, base, resultSet) {\n    if (!base || resultSet.has(base.id)) {\n      return;\n    }\n    resultSet.set(base.id, base);\n    Object.keys(base).forEach(function (name) {\n      if (name.endsWith('Id')) {\n        walkStats(stats, stats.get(base[name]), resultSet);\n      } else if (name.endsWith('Ids')) {\n        base[name].forEach(function (id) {\n          walkStats(stats, stats.get(id), resultSet);\n        });\n      }\n    });\n  }\n\n  /* filter getStats for a sender/receiver track. */\n  function filterStats(result, track, outbound) {\n    var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n    var filteredResult = new Map();\n    if (track === null) {\n      return filteredResult;\n    }\n    var trackStats = [];\n    result.forEach(function (value) {\n      if (value.type === 'track' && value.trackIdentifier === track.id) {\n        trackStats.push(value);\n      }\n    });\n    trackStats.forEach(function (trackStat) {\n      result.forEach(function (stats) {\n        if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n          walkStats(result, stats, filteredResult);\n        }\n      });\n    });\n    return filteredResult;\n  }\n\n  },{}],12:[function(require,module,exports){\n  /* eslint-env node */\n  'use strict';\n\n  // SDP helpers.\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var SDPUtils = {};\n\n  // Generate an alphanumeric identifier for cname or mids.\n  // TODO: use UUIDs instead? https://gist.github.com/jed/982883\n  SDPUtils.generateIdentifier = function () {\n    return Math.random().toString(36).substr(2, 10);\n  };\n\n  // The RTCP CNAME used by all peerconnections from the same JS.\n  SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n  // Splits SDP into lines, dealing with both CRLF and LF.\n  SDPUtils.splitLines = function (blob) {\n    return blob.trim().split('\\n').map(function (line) {\n      return line.trim();\n    });\n  };\n  // Splits SDP into sessionpart and mediasections. Ensures CRLF.\n  SDPUtils.splitSections = function (blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function (part, index) {\n      return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n  };\n\n  // Returns the session description.\n  SDPUtils.getDescription = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    return sections && sections[0];\n  };\n\n  // Returns the individual media sections.\n  SDPUtils.getMediaSections = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    sections.shift();\n    return sections;\n  };\n\n  // Returns lines that start with a certain prefix.\n  SDPUtils.matchPrefix = function (blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function (line) {\n      return line.indexOf(prefix) === 0;\n    });\n  };\n\n  // Parses an ICE candidate line. Sample input:\n  // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n  // rport 55996\"\n  // Input can be prefixed with a=.\n  SDPUtils.parseCandidate = function (line) {\n    var parts = void 0;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n      parts = line.substring(12).split(' ');\n    } else {\n      parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n      foundation: parts[0],\n      component: { 1: 'rtp', 2: 'rtcp' }[parts[1]] || parts[1],\n      protocol: parts[2].toLowerCase(),\n      priority: parseInt(parts[3], 10),\n      ip: parts[4],\n      address: parts[4], // address is an alias for ip.\n      port: parseInt(parts[5], 10),\n      // skip parts[6] == 'typ'\n      type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n      switch (parts[i]) {\n        case 'raddr':\n          candidate.relatedAddress = parts[i + 1];\n          break;\n        case 'rport':\n          candidate.relatedPort = parseInt(parts[i + 1], 10);\n          break;\n        case 'tcptype':\n          candidate.tcpType = parts[i + 1];\n          break;\n        case 'ufrag':\n          candidate.ufrag = parts[i + 1]; // for backward compatibility.\n          candidate.usernameFragment = parts[i + 1];\n          break;\n        default:\n          // extension handling, in particular ufrag. Don't overwrite.\n          if (candidate[parts[i]] === undefined) {\n            candidate[parts[i]] = parts[i + 1];\n          }\n          break;\n      }\n    }\n    return candidate;\n  };\n\n  // Translates a candidate object into SDP candidate attribute.\n  // This does not include the a= prefix!\n  SDPUtils.writeCandidate = function (candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n\n    var component = candidate.component;\n    if (component === 'rtp') {\n      sdp.push(1);\n    } else if (component === 'rtcp') {\n      sdp.push(2);\n    } else {\n      sdp.push(component);\n    }\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.address || candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress && candidate.relatedPort) {\n      sdp.push('raddr');\n      sdp.push(candidate.relatedAddress);\n      sdp.push('rport');\n      sdp.push(candidate.relatedPort);\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n      sdp.push('tcptype');\n      sdp.push(candidate.tcpType);\n    }\n    if (candidate.usernameFragment || candidate.ufrag) {\n      sdp.push('ufrag');\n      sdp.push(candidate.usernameFragment || candidate.ufrag);\n    }\n    return 'candidate:' + sdp.join(' ');\n  };\n\n  // Parses an ice-options line, returns an array of option tags.\n  // Sample input:\n  // a=ice-options:foo bar\n  SDPUtils.parseIceOptions = function (line) {\n    return line.substr(14).split(' ');\n  };\n\n  // Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n  // a=rtpmap:111 opus/48000/2\n  SDPUtils.parseRtpMap = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n      payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    // legacy alias, got renamed back to channels in ORTC.\n    parsed.numChannels = parsed.channels;\n    return parsed;\n  };\n\n  // Generates a rtpmap line from RTCRtpCodecCapability or\n  // RTCRtpCodecParameters.\n  SDPUtils.writeRtpMap = function (codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    var channels = codec.channels || codec.numChannels || 1;\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate + (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n  };\n\n  // Parses a extmap line (headerextension from RFC 5285). Sample input:\n  // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n  // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n  SDPUtils.parseExtmap = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      id: parseInt(parts[0], 10),\n      direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n      uri: parts[1]\n    };\n  };\n\n  // Generates an extmap line from RTCRtpHeaderExtensionParameters or\n  // RTCRtpHeaderExtension.\n  SDPUtils.writeExtmap = function (headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) + (headerExtension.direction && headerExtension.direction !== 'sendrecv' ? '/' + headerExtension.direction : '') + ' ' + headerExtension.uri + '\\r\\n';\n  };\n\n  // Parses a fmtp line, returns dictionary. Sample input:\n  // a=fmtp:96 vbr=on;cng=on\n  // Also deals with vbr=on; cng=on\n  SDPUtils.parseFmtp = function (line) {\n    var parsed = {};\n    var kv = void 0;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n      kv = parts[j].trim().split('=');\n      parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n  };\n\n  // Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeFmtp = function (codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n      var params = [];\n      Object.keys(codec.parameters).forEach(function (param) {\n        if (codec.parameters[param] !== undefined) {\n          params.push(param + '=' + codec.parameters[param]);\n        } else {\n          params.push(param);\n        }\n      });\n      line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n  };\n\n  // Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n  // a=rtcp-fb:98 nack rpsi\n  SDPUtils.parseRtcpFb = function (line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n      type: parts.shift(),\n      parameter: parts.join(' ')\n    };\n  };\n\n  // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeRtcpFb = function (codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n      // FIXME: special handling for trr-int?\n      codec.rtcpFeedback.forEach(function (fb) {\n        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') + '\\r\\n';\n      });\n    }\n    return lines;\n  };\n\n  // Parses a RFC 5576 ssrc media attribute. Sample input:\n  // a=ssrc:3735928559 cname:something\n  SDPUtils.parseSsrcMedia = function (line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n      ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n      parts.attribute = line.substr(sp + 1, colon - sp - 1);\n      parts.value = line.substr(colon + 1);\n    } else {\n      parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n  };\n\n  // Parse a ssrc-group line (see RFC 5576). Sample input:\n  // a=ssrc-group:semantics 12 34\n  SDPUtils.parseSsrcGroup = function (line) {\n    var parts = line.substr(13).split(' ');\n    return {\n      semantics: parts.shift(),\n      ssrcs: parts.map(function (ssrc) {\n        return parseInt(ssrc, 10);\n      })\n    };\n  };\n\n  // Extracts the MID (RFC 5888) from a media section.\n  // Returns the MID or undefined if no mid line was found.\n  SDPUtils.getMid = function (mediaSection) {\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n    if (mid) {\n      return mid.substr(6);\n    }\n  };\n\n  // Parses a fingerprint line for DTLS-SRTP.\n  SDPUtils.parseFingerprint = function (line) {\n    var parts = line.substr(14).split(' ');\n    return {\n      algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n      value: parts[1].toUpperCase() // the definition is upper-case in RFC 4572.\n    };\n  };\n\n  // Extracts DTLS parameters from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the fingerprint line as input. See also getIceParameters.\n  SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=fingerprint:');\n    // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n    return {\n      role: 'auto',\n      fingerprints: lines.map(SDPUtils.parseFingerprint)\n    };\n  };\n\n  // Serializes DTLS parameters to SDP.\n  SDPUtils.writeDtlsParameters = function (params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function (fp) {\n      sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n  };\n\n  // Parses a=crypto lines into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\n  SDPUtils.parseCryptoLine = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      tag: parseInt(parts[0], 10),\n      cryptoSuite: parts[1],\n      keyParams: parts[2],\n      sessionParams: parts.slice(3)\n    };\n  };\n\n  SDPUtils.writeCryptoLine = function (parameters) {\n    return 'a=crypto:' + parameters.tag + ' ' + parameters.cryptoSuite + ' ' + (_typeof(parameters.keyParams) === 'object' ? SDPUtils.writeCryptoKeyParams(parameters.keyParams) : parameters.keyParams) + (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') + '\\r\\n';\n  };\n\n  // Parses the crypto key parameters into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\n  SDPUtils.parseCryptoKeyParams = function (keyParams) {\n    if (keyParams.indexOf('inline:') !== 0) {\n      return null;\n    }\n    var parts = keyParams.substr(7).split('|');\n    return {\n      keyMethod: 'inline',\n      keySalt: parts[0],\n      lifeTime: parts[1],\n      mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n      mkiLength: parts[2] ? parts[2].split(':')[1] : undefined\n    };\n  };\n\n  SDPUtils.writeCryptoKeyParams = function (keyParams) {\n    return keyParams.keyMethod + ':' + keyParams.keySalt + (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') + (keyParams.mkiValue && keyParams.mkiLength ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength : '');\n  };\n\n  // Extracts all SDES parameters.\n  SDPUtils.getCryptoParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=crypto:');\n    return lines.map(SDPUtils.parseCryptoLine);\n  };\n\n  // Parses ICE information from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the ice-ufrag and ice-pwd lines as input.\n  SDPUtils.getIceParameters = function (mediaSection, sessionpart) {\n    var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-ufrag:')[0];\n    var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-pwd:')[0];\n    if (!(ufrag && pwd)) {\n      return null;\n    }\n    return {\n      usernameFragment: ufrag.substr(12),\n      password: pwd.substr(10)\n    };\n  };\n\n  // Serializes ICE parameters to SDP.\n  SDPUtils.writeIceParameters = function (params) {\n    var sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' + 'a=ice-pwd:' + params.password + '\\r\\n';\n    if (params.iceLite) {\n      sdp += 'a=ice-lite\\r\\n';\n    }\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns RTCRtpParameters.\n  SDPUtils.parseRtpParameters = function (mediaSection) {\n    var description = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: [],\n      rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) {\n      // find all codecs from mline[3..]\n      var pt = mline[i];\n      var rtpmapline = SDPUtils.matchPrefix(mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n      if (rtpmapline) {\n        var codec = SDPUtils.parseRtpMap(rtpmapline);\n        var fmtps = SDPUtils.matchPrefix(mediaSection, 'a=fmtp:' + pt + ' ');\n        // Only the first a=fmtp:<pt> is considered.\n        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n        codec.rtcpFeedback = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:' + pt + ' ').map(SDPUtils.parseRtcpFb);\n        description.codecs.push(codec);\n        // parse FEC mechanisms from rtpmap lines.\n        switch (codec.name.toUpperCase()) {\n          case 'RED':\n          case 'ULPFEC':\n            description.fecMechanisms.push(codec.name.toUpperCase());\n            break;\n          default:\n            // only RED and ULPFEC are recognized as FEC mechanisms.\n            break;\n        }\n      }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function (line) {\n      description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n  };\n\n  // Generates parts of the SDP media section describing the capabilities /\n  // parameters.\n  SDPUtils.writeRtpDescription = function (kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function (codec) {\n      if (codec.preferredPayloadType !== undefined) {\n        return codec.preferredPayloadType;\n      }\n      return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function (codec) {\n      sdp += SDPUtils.writeRtpMap(codec);\n      sdp += SDPUtils.writeFmtp(codec);\n      sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    var maxptime = 0;\n    caps.codecs.forEach(function (codec) {\n      if (codec.maxptime > maxptime) {\n        maxptime = codec.maxptime;\n      }\n    });\n    if (maxptime > 0) {\n      sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n    }\n\n    if (caps.headerExtensions) {\n      caps.headerExtensions.forEach(function (extension) {\n        sdp += SDPUtils.writeExtmap(extension);\n      });\n    }\n    // FIXME: write fecMechanisms.\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns an array of\n  // RTCRtpEncodingParameters.\n  SDPUtils.parseRtpEncodingParameters = function (mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (parts) {\n      return parts.attribute === 'cname';\n    });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc = void 0;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID').map(function (line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function (part) {\n        return parseInt(part, 10);\n      });\n    });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n      secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function (codec) {\n      if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n        var encParam = {\n          ssrc: primarySsrc,\n          codecPayloadType: parseInt(codec.parameters.apt, 10)\n        };\n        if (primarySsrc && secondarySsrc) {\n          encParam.rtx = { ssrc: secondarySsrc };\n        }\n        encodingParameters.push(encParam);\n        if (hasRed) {\n          encParam = JSON.parse(JSON.stringify(encParam));\n          encParam.fec = {\n            ssrc: primarySsrc,\n            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n          };\n          encodingParameters.push(encParam);\n        }\n      }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n      encodingParameters.push({\n        ssrc: primarySsrc\n      });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n      if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n        bandwidth = parseInt(bandwidth[0].substr(7), 10);\n      } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n        // use formula from JSEP to convert b=AS to TIAS value.\n        bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95 - 50 * 40 * 8;\n      } else {\n        bandwidth = undefined;\n      }\n      encodingParameters.forEach(function (params) {\n        params.maxBitrate = bandwidth;\n      });\n    }\n    return encodingParameters;\n  };\n\n  // parses http://draft.ortc.org/#rtcrtcpparameters*\n  SDPUtils.parseRtcpParameters = function (mediaSection) {\n    var rtcpParameters = {};\n\n    // Gets the first SSRC. Note that with RTX there might be multiple\n    // SSRCs.\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (obj) {\n      return obj.attribute === 'cname';\n    })[0];\n    if (remoteSsrc) {\n      rtcpParameters.cname = remoteSsrc.value;\n      rtcpParameters.ssrc = remoteSsrc.ssrc;\n    }\n\n    // Edge uses the compound attribute instead of reducedSize\n    // compound is !reducedSize\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n    rtcpParameters.reducedSize = rsize.length > 0;\n    rtcpParameters.compound = rsize.length === 0;\n\n    // parses the rtcp-mux attrbute.\n    // Note that Edge does not support unmuxed RTCP.\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n    rtcpParameters.mux = mux.length > 0;\n\n    return rtcpParameters;\n  };\n\n  SDPUtils.writeRtcpParameters = function (rtcpParameters) {\n    var sdp = '';\n    if (rtcpParameters.reducedSize) {\n      sdp += 'a=rtcp-rsize\\r\\n';\n    }\n    if (rtcpParameters.mux) {\n      sdp += 'a=rtcp-mux\\r\\n';\n    }\n    if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n      sdp += 'a=ssrc:' + rtcpParameters.ssrc + ' cname:' + rtcpParameters.cname + '\\r\\n';\n    }\n    return sdp;\n  };\n\n  // parses either a=msid: or a=ssrc:... msid lines and returns\n  // the id of the MediaStream and MediaStreamTrack.\n  SDPUtils.parseMsid = function (mediaSection) {\n    var parts = void 0;\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n    if (spec.length === 1) {\n      parts = spec[0].substr(7).split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n    if (planB.length > 0) {\n      parts = planB[0].value.split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n  };\n\n  // SCTP\n  // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n  // to draft-ietf-mmusic-sctp-sdp-05\n  SDPUtils.parseSctpDescription = function (mediaSection) {\n    var mline = SDPUtils.parseMLine(mediaSection);\n    var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n    var maxMessageSize = void 0;\n    if (maxSizeLine.length > 0) {\n      maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n    }\n    if (isNaN(maxMessageSize)) {\n      maxMessageSize = 65536;\n    }\n    var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n    if (sctpPort.length > 0) {\n      return {\n        port: parseInt(sctpPort[0].substr(12), 10),\n        protocol: mline.fmt,\n        maxMessageSize: maxMessageSize\n      };\n    }\n    var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n    if (sctpMapLines.length > 0) {\n      var parts = sctpMapLines[0].substr(10).split(' ');\n      return {\n        port: parseInt(parts[0], 10),\n        protocol: parts[1],\n        maxMessageSize: maxMessageSize\n      };\n    }\n  };\n\n  // SCTP\n  // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n  // support by now receiving in this format, unless we originally parsed\n  // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n  // protocol of DTLS/SCTP -- without UDP/ or TCP/)\n  SDPUtils.writeSctpDescription = function (media, sctp) {\n    var output = [];\n    if (media.protocol !== 'DTLS/SCTP') {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctp-port:' + sctp.port + '\\r\\n'];\n    } else {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'];\n    }\n    if (sctp.maxMessageSize !== undefined) {\n      output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n    }\n    return output.join('');\n  };\n\n  // Generate a session ID for SDP.\n  // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n  // recommends using a cryptographically random +ve 64-bit value\n  // but right now this should be acceptable and within the right range\n  SDPUtils.generateSessionId = function () {\n    return Math.random().toString().substr(2, 21);\n  };\n\n  // Write boiler plate for start of SDP\n  // sessId argument is optional - if not supplied it will\n  // be generated randomly\n  // sessVersion is optional and defaults to 2\n  // sessUser is optional and defaults to 'thisisadapterortc'\n  SDPUtils.writeSessionBoilerplate = function (sessId, sessVer, sessUser) {\n    var sessionId = void 0;\n    var version = sessVer !== undefined ? sessVer : 2;\n    if (sessId) {\n      sessionId = sessId;\n    } else {\n      sessionId = SDPUtils.generateSessionId();\n    }\n    var user = sessUser || 'thisisadapterortc';\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' + 'o=' + user + ' ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' + 's=-\\r\\n' + 't=0 0\\r\\n';\n  };\n\n  // Gets the direction from the mediaSection or the sessionpart.\n  SDPUtils.getDirection = function (mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n      switch (lines[i]) {\n        case 'a=sendrecv':\n        case 'a=sendonly':\n        case 'a=recvonly':\n        case 'a=inactive':\n          return lines[i].substr(2);\n        default:\n        // FIXME: What should happen here?\n      }\n    }\n    if (sessionpart) {\n      return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n  };\n\n  SDPUtils.getKind = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    return mline[0].substr(2);\n  };\n\n  SDPUtils.isRejected = function (mediaSection) {\n    return mediaSection.split(' ', 2)[1] === '0';\n  };\n\n  SDPUtils.parseMLine = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var parts = lines[0].substr(2).split(' ');\n    return {\n      kind: parts[0],\n      port: parseInt(parts[1], 10),\n      protocol: parts[2],\n      fmt: parts.slice(3).join(' ')\n    };\n  };\n\n  SDPUtils.parseOLine = function (mediaSection) {\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n    var parts = line.substr(2).split(' ');\n    return {\n      username: parts[0],\n      sessionId: parts[1],\n      sessionVersion: parseInt(parts[2], 10),\n      netType: parts[3],\n      addressType: parts[4],\n      address: parts[5]\n    };\n  };\n\n  // a very naive interpretation of a valid SDP.\n  SDPUtils.isValidSDP = function (blob) {\n    if (typeof blob !== 'string' || blob.length === 0) {\n      return false;\n    }\n    var lines = SDPUtils.splitLines(blob);\n    for (var i = 0; i < lines.length; i++) {\n      if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n        return false;\n      }\n      // TODO: check the modifier a bit more.\n    }\n    return true;\n  };\n\n  // Expose public methods.\n  if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object') {\n    module.exports = SDPUtils;\n  }\n  },{}]},{},[1])(1)\n  });\n","'use strict';\r\n\r\n// Last time updated: 2019-02-20 3:31:29 PM UTC\r\n\r\n// _______________\r\n// getStats v1.2.0\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/getStats\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nvar getStats = function(mediaStreamTrack, callback, interval) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    }\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        if (typeof MediaStreamTrack === 'undefined') {\r\n            /*global screen:true */\r\n            that.MediaStreamTrack = function() {};\r\n        }\r\n\r\n        if (typeof RTCPeerConnection === 'undefined') {\r\n            /*global screen:true */\r\n            that.RTCPeerConnection = function() {};\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    var RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\n\r\n    if (typeof MediaStreamTrack === 'undefined') {\r\n        MediaStreamTrack = {}; // todo?\r\n    }\r\n\r\n    var systemNetworkType = ((navigator.connection || {}).type || 'unknown').toString().toLowerCase();\r\n\r\n    var getStatsResult = {\r\n        encryption: 'sha-256',\r\n        audio: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        video: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        bandwidth: {\r\n            systemBandwidth: 0,\r\n            sentPerSecond: 0,\r\n            encodedPerSecond: 0,\r\n            helper: {\r\n                audioBytesSent: 0,\r\n                videoBytestSent: 0\r\n            },\r\n            speed: 0\r\n        },\r\n        results: {},\r\n        connectionType: {\r\n            systemNetworkType: systemNetworkType,\r\n            systemIpAddress: '192.168.1.2',\r\n            local: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            },\r\n            remote: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            }\r\n        },\r\n        resolutions: {\r\n            send: {\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            recv: {\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        },\r\n        internal: {\r\n            audio: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            video: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            candidates: {}\r\n        },\r\n        nomore: function() {\r\n            nomore = true;\r\n        }\r\n    };\r\n\r\n    var getStatsParser = {\r\n        checkIfOfferer: function(result) {\r\n            if (result.type === 'googLibjingleSession') {\r\n                getStatsResult.isOfferer = result.googInitiator;\r\n            }\r\n        }\r\n    };\r\n\r\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\n    var peer = this;\r\n\r\n    if (!(arguments[0] instanceof RTCPeerConnection)) {\r\n        throw '1st argument is not instance of RTCPeerConnection.';\r\n    }\r\n\r\n    peer = arguments[0];\r\n\r\n    if (arguments[1] instanceof MediaStreamTrack) {\r\n        mediaStreamTrack = arguments[1]; // redundant on non-safari\r\n        callback = arguments[2];\r\n        interval = arguments[3];\r\n    }\r\n\r\n    var nomore = false;\r\n\r\n    function getStatsLooper() {\r\n        getStatsWrapper(function(results) {\r\n            if (!results || !results.forEach) return;\r\n\r\n            results.forEach(function(result) {\r\n                // console.error('result', result);\r\n                Object.keys(getStatsParser).forEach(function(key) {\r\n                    if (typeof getStatsParser[key] === 'function') {\r\n                        try {\r\n                            getStatsParser[key](result);\r\n                        } catch (e) {\r\n                            console.error(e.message, e.stack, e);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            try {\r\n                if (peer.iceConnectionState.search(/failed|closed|disconnected/gi) !== -1) {\r\n                    nomore = true;\r\n                }\r\n            } catch (e) {\r\n                nomore = true;\r\n            }\r\n\r\n            if (nomore === true) {\r\n                if (getStatsResult.datachannel) {\r\n                    getStatsResult.datachannel.state = 'close';\r\n                }\r\n                getStatsResult.ended = true;\r\n            }\r\n\r\n            // allow users to access native results\r\n            getStatsResult.results = results;\r\n\r\n            if (getStatsResult.audio && getStatsResult.video) {\r\n                getStatsResult.bandwidth.speed = (getStatsResult.audio.bytesSent - getStatsResult.bandwidth.helper.audioBytesSent) + (getStatsResult.video.bytesSent - getStatsResult.bandwidth.helper.videoBytesSent);\r\n                getStatsResult.bandwidth.helper.audioBytesSent = getStatsResult.audio.bytesSent;\r\n                getStatsResult.bandwidth.helper.videoBytesSent = getStatsResult.video.bytesSent;\r\n            }\r\n\r\n            callback(getStatsResult);\r\n\r\n            // second argument checks to see, if target-user is still connected.\r\n            if (!nomore) {\r\n                typeof interval != undefined && interval && setTimeout(getStatsLooper, interval || 1000);\r\n            }\r\n        });\r\n    }\r\n\r\n    // a wrapper around getStats which hides the differences (where possible)\r\n    // following code-snippet is taken from somewhere on the github\r\n    function getStatsWrapper(cb) {\r\n        // if !peer or peer.signalingState == 'closed' then return;\r\n\r\n        if (typeof window.InstallTrigger !== 'undefined' || isSafari) { // maybe \"isEdge?\"\r\n            peer.getStats(window.mediaStreamTrack || null).then(function(res) {\r\n                var items = [];\r\n                res.forEach(function(r) {\r\n                    items.push(r);\r\n                });\r\n                cb(items);\r\n            }).catch(cb);\r\n        } else {\r\n            peer.getStats(function(res) {\r\n                var items = [];\r\n                res.result().forEach(function(res) {\r\n                    var item = {};\r\n                    res.names().forEach(function(name) {\r\n                        item[name] = res.stat(name);\r\n                    });\r\n                    item.id = res.id;\r\n                    item.type = res.type;\r\n                    item.timestamp = res.timestamp;\r\n                    items.push(item);\r\n                });\r\n                cb(items);\r\n            });\r\n        }\r\n    };\r\n\r\n    getStatsParser.datachannel = function(result) {\r\n        if (result.type !== 'datachannel') return;\r\n\r\n        getStatsResult.datachannel = {\r\n            state: result.state // open or connecting\r\n        }\r\n    };\r\n\r\n    getStatsParser.googCertificate = function(result) {\r\n        if (result.type == 'googCertificate') {\r\n            getStatsResult.encryption = result.googFingerprintAlgorithm;\r\n        }\r\n\r\n        // Safari-11 or higher\r\n        if (result.type == 'certificate') {\r\n            // todo: is it possible to have different encryption methods for senders and receivers?\r\n            // if yes, then we need to set:\r\n            //    getStatsResult.encryption.local = value;\r\n            //    getStatsResult.encryption.remote = value;\r\n            getStatsResult.encryption = result.fingerprintAlgorithm;\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkAudioTracks = function(result) {\r\n        if (result.mediaType !== 'audio') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.audio[sendrecvType].codecs.indexOf(result.googCodecName || 'opus') === -1) {\r\n            getStatsResult.audio[sendrecvType].codecs.push(result.googCodecName || 'opus');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.audio[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.audio[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            // getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.audio[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.audio[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.audio.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.audio.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.latency < 0) {\r\n                getStatsResult.audio.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevPacketsLost) {\r\n                getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.audio.prevPacketsLost;\r\n            getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.audio.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.packetsLost < 0) {\r\n                getStatsResult.audio.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkVideoTracks = function(result) {\r\n        if (result.mediaType !== 'video') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.video[sendrecvType].codecs.indexOf(result.googCodecName || 'VP8') === -1) {\r\n            getStatsResult.video[sendrecvType].codecs.push(result.googCodecName || 'VP8');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googFrameHeightReceived && result.googFrameWidthReceived) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthReceived;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightReceived;\r\n        }\r\n\r\n        if (result.googFrameHeightSent && result.googFrameWidthSent) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthSent;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightSent;\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.video[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.video[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        if (result.framerateMean) {\r\n            getStatsResult.bandwidth.framerateMean = result.framerateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevFramerateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevFramerateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.framerateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].framerateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        if (result.bitrateMean) {\r\n            getStatsResult.bandwidth.bitrateMean = result.bitrateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBitrateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBitrateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].bitrateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.video.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.video.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.latency < 0) {\r\n                getStatsResult.video.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevPacketsLost) {\r\n                getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.video.prevPacketsLost;\r\n            getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.video.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.packetsLost < 0) {\r\n                getStatsResult.video.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.bweforvideo = function(result) {\r\n        if (result.type !== 'VideoBwe') return;\r\n\r\n        getStatsResult.bandwidth.availableSendBandwidth = result.googAvailableSendBandwidth;\r\n\r\n        getStatsResult.bandwidth.googActualEncBitrate = result.googActualEncBitrate;\r\n        getStatsResult.bandwidth.googAvailableSendBandwidth = result.googAvailableSendBandwidth;\r\n        getStatsResult.bandwidth.googAvailableReceiveBandwidth = result.googAvailableReceiveBandwidth;\r\n        getStatsResult.bandwidth.googRetransmitBitrate = result.googRetransmitBitrate;\r\n        getStatsResult.bandwidth.googTargetEncBitrate = result.googTargetEncBitrate;\r\n        getStatsResult.bandwidth.googBucketDelay = result.googBucketDelay;\r\n        getStatsResult.bandwidth.googTransmitBitrate = result.googTransmitBitrate;\r\n    };\r\n\r\n    getStatsParser.candidatePair = function(result) {\r\n        if (result.type !== 'googCandidatePair' && result.type !== 'candidate-pair' && result.type !== 'local-candidate' && result.type !== 'remote-candidate') return;\r\n\r\n        // result.googActiveConnection means either STUN or TURN is used.\r\n\r\n        if (result.googActiveConnection == 'true') {\r\n            // id === 'Conn-audio-1-0'\r\n            // localCandidateId, remoteCandidateId\r\n\r\n            // bytesSent, bytesReceived\r\n\r\n            Object.keys(getStatsResult.internal.candidates).forEach(function(cid) {\r\n                var candidate = getStatsResult.internal.candidates[cid];\r\n                if (candidate.ipAddress.indexOf(result.googLocalAddress) !== -1) {\r\n                    getStatsResult.connectionType.local.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.local.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.local.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.local.transport = candidate.transport;\r\n                }\r\n                if (candidate.ipAddress.indexOf(result.googRemoteAddress) !== -1) {\r\n                    getStatsResult.connectionType.remote.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.remote.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.remote.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.remote.transport = candidate.transport;\r\n                }\r\n            });\r\n\r\n            getStatsResult.connectionType.transport = result.googTransportType;\r\n\r\n            var localCandidate = getStatsResult.internal.candidates[result.localCandidateId];\r\n            if (localCandidate) {\r\n                if (localCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = localCandidate.ipAddress;\r\n                }\r\n            }\r\n\r\n            var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n            if (remoteCandidate) {\r\n                if (remoteCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = remoteCandidate.ipAddress;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.type === 'candidate-pair') {\r\n            if (result.selected === true && result.nominated === true && result.state === 'succeeded') {\r\n                // remoteCandidateId, localCandidateId, componentId\r\n                var localCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n                var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n\r\n                // Firefox used above two pairs for connection\r\n            }\r\n        }\r\n\r\n        if (result.type === 'local-candidate') {\r\n            getStatsResult.connectionType.local.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.local.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.local.networkType = result.networkType;\r\n            getStatsResult.connectionType.local.transport = result.mozLocalTransport || result.transport;\r\n        }\r\n\r\n        if (result.type === 'remote-candidate') {\r\n            getStatsResult.connectionType.remote.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.remote.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.remote.networkType = result.networkType;\r\n            getStatsResult.connectionType.remote.transport = result.mozRemoteTransport || result.transport;\r\n        }\r\n\r\n        if (isSafari) {\r\n            // result.remoteCandidateId\r\n            // todo: below line will always force \"send\" on Safari; find a solution\r\n            var sendrecvType = result.localCandidateId ? 'send' : 'recv';\r\n\r\n            if (!sendrecvType) return;\r\n\r\n            if (!!result.bytesSent) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n                }\r\n\r\n                var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n                kilobytes = bytes / 1024;\r\n\r\n                getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.bytesReceived) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n                }\r\n\r\n                var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableOutgoingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableOutgoingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableOutgoingBitrate = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableIncomingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableIncomingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableIncomingBitrate = kilobytes.toFixed(1);\r\n            }\r\n        }\r\n    };\r\n\r\n    var LOCAL_candidateType = {};\r\n    var LOCAL_transport = {};\r\n    var LOCAL_ipAddress = {};\r\n    var LOCAL_networkType = {};\r\n\r\n    getStatsParser.localcandidate = function(result) {\r\n        if (result.type !== 'localcandidate' && result.type !== 'local-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!LOCAL_candidateType[result.id]) {\r\n            LOCAL_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_transport[result.id]) {\r\n            LOCAL_transport[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_ipAddress[result.id]) {\r\n            LOCAL_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_networkType[result.id]) {\r\n            LOCAL_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && LOCAL_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            LOCAL_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && LOCAL_transport[result.id].indexOf(result.transport) === -1) {\r\n            LOCAL_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && LOCAL_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            LOCAL_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && LOCAL_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            LOCAL_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: LOCAL_candidateType[result.id],\r\n            ipAddress: LOCAL_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: LOCAL_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: LOCAL_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.local.candidateType = LOCAL_candidateType[result.id];\r\n        getStatsResult.connectionType.local.ipAddress = LOCAL_ipAddress[result.id];\r\n        getStatsResult.connectionType.local.networkType = LOCAL_networkType[result.id];\r\n        getStatsResult.connectionType.local.transport = LOCAL_transport[result.id];\r\n    };\r\n\r\n    var REMOTE_candidateType = {};\r\n    var REMOTE_transport = {};\r\n    var REMOTE_ipAddress = {};\r\n    var REMOTE_networkType = {};\r\n\r\n    getStatsParser.remotecandidate = function(result) {\r\n        if (result.type !== 'remotecandidate' && result.type !== 'remote-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!REMOTE_candidateType[result.id]) {\r\n            REMOTE_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_transport[result.id]) {\r\n            REMOTE_transport[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_ipAddress[result.id]) {\r\n            REMOTE_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_networkType[result.id]) {\r\n            REMOTE_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && REMOTE_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            REMOTE_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && REMOTE_transport[result.id].indexOf(result.transport) === -1) {\r\n            REMOTE_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && REMOTE_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            REMOTE_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && REMOTE_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            REMOTE_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: REMOTE_candidateType[result.id],\r\n            ipAddress: REMOTE_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: REMOTE_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: REMOTE_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.remote.candidateType = REMOTE_candidateType[result.id];\r\n        getStatsResult.connectionType.remote.ipAddress = REMOTE_ipAddress[result.id];\r\n        getStatsResult.connectionType.remote.networkType = REMOTE_networkType[result.id];\r\n        getStatsResult.connectionType.remote.transport = REMOTE_transport[result.id];\r\n    };\r\n\r\n    getStatsParser.dataSentReceived = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            getStatsResult[result.mediaType].bytesSent = parseInt(result.bytesSent);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            getStatsResult[result.mediaType].bytesReceived = parseInt(result.bytesReceived);\r\n        }\r\n    };\r\n\r\n    getStatsParser.inboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'inbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.outboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'outbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.track = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'track') return;\r\n\r\n        var sendrecvType = result.remoteSource === true ? 'send' : 'recv';\r\n\r\n        if (result.frameWidth && result.frameHeight) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.frameWidth;\r\n            getStatsResult.resolutions[sendrecvType].height = result.frameHeight;\r\n        }\r\n\r\n        // framesSent, framesReceived\r\n    };\r\n\r\n    var SSRC = {\r\n        audio: {\r\n            send: [],\r\n            recv: []\r\n        },\r\n        video: {\r\n            send: [],\r\n            recv: []\r\n        }\r\n    };\r\n\r\n    getStatsParser.ssrc = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n        if (result.type !== 'ssrc') return;\r\n        var sendrecvType = result.id.split('_').pop();\r\n\r\n        if (SSRC[result.mediaType][sendrecvType].indexOf(result.ssrc) === -1) {\r\n            SSRC[result.mediaType][sendrecvType].push(result.ssrc)\r\n        }\r\n\r\n        getStatsResult[result.mediaType][sendrecvType].streams = SSRC[result.mediaType][sendrecvType].length;\r\n    };\r\n\r\n    getStatsLooper();\r\n\r\n};\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = getStats;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('getStats', [], function() {\r\n        return getStats;\r\n    });\r\n}\n","// CodecsHandler.js\n\nconst splitLines = (sdp) => {\n  const info = {};\n  sdp.split('\\n').forEach((line) => {\n    if (line.indexOf('m=video') === 0) {\n      info.videoCodecNumbers = [];\n      line.split('SAVPF')[1].split(' ').forEach((codecNumber) => {\n        codecNumber = codecNumber.trim();\n        if (!codecNumber || !codecNumber.length) return;\n        info.videoCodecNumbers.push(codecNumber);\n        info.videoCodecNumbersOriginal = line;\n      });\n    }\n\n    if (line.indexOf('VP8/90000') !== -1 && !info.vp8LineNumber) {\n      info.vp8LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n\n    if (line.indexOf('VP9/90000') !== -1 && !info.vp9LineNumber) {\n      info.vp9LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n\n    if (line.indexOf('H264/90000') !== -1 && !info.h264LineNumber) {\n      info.h264LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n  });\n\n  return info;\n};\n\nconst preferCodecHelper = (sdp, codec, info, ignore) => {\n  let preferCodecNumber = '';\n\n  if (codec === 'vp8') {\n    if (!info.vp8LineNumber) {\n      return sdp;\n    }\n    preferCodecNumber = info.vp8LineNumber;\n  }\n\n  if (codec === 'vp9') {\n    if (!info.vp9LineNumber) {\n      return sdp;\n    }\n    preferCodecNumber = info.vp9LineNumber;\n  }\n\n  if (codec === 'h264') {\n    if (!info.h264LineNumber) {\n      return sdp;\n    }\n\n    preferCodecNumber = info.h264LineNumber;\n  }\n\n  let newLine = `${info.videoCodecNumbersOriginal.split('SAVPF')[0]}SAVPF `;\n\n  let newOrder = [preferCodecNumber];\n\n  if (ignore) {\n    newOrder = [];\n  }\n\n  info.videoCodecNumbers.forEach((codecNumber) => {\n    if (codecNumber === preferCodecNumber) return;\n    newOrder.push(codecNumber);\n  });\n\n  newLine += newOrder.join(' ');\n\n  sdp = sdp.replace(info.videoCodecNumbersOriginal, newLine);\n  return sdp;\n};\n\nexport const preferCodec = (sdp, codecName) => {\n  const info = splitLines(sdp);\n\n  codecName = codecName.toLowerCase();\n\n  if (!info.videoCodecNumbers) {\n    return sdp;\n  }\n\n  if (codecName === 'vp8' && info.vp8LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  if (codecName === 'vp9' && info.vp9LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  if (codecName === 'h264' && info.h264LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  sdp = preferCodecHelper(sdp, codecName, info);\n\n  return sdp;\n};\n\nexport const removeVPX = (sdp) => {\n  const info = splitLines(sdp);\n\n  // last parameter below means: ignore these codecs\n  sdp = preferCodecHelper(sdp, 'vp9', info, true);\n  sdp = preferCodecHelper(sdp, 'vp8', info, true);\n\n  return sdp;\n};\n\nexport const disableNACK = (sdp) => {\n  if (!sdp || typeof sdp !== 'string') {\n    throw new Error('Invalid arguments.');\n  }\n\n  sdp = sdp.replace('a=rtcp-fb:126 nack\\r\\n', '');\n  sdp = sdp.replace('a=rtcp-fb:126 nack pli\\r\\n', 'a=rtcp-fb:126 pli\\r\\n');\n  sdp = sdp.replace('a=rtcp-fb:97 nack\\r\\n', '');\n  sdp = sdp.replace('a=rtcp-fb:97 nack pli\\r\\n', 'a=rtcp-fb:97 pli\\r\\n');\n\n  return sdp;\n};\n\nexport const prioritize = (codecMimeType, peer) => {\n  if (!peer || !peer.getSenders || !peer.getSenders().length) {\n    return;\n  }\n\n  if (!codecMimeType || typeof codecMimeType !== 'string') {\n    throw new Error('Invalid arguments.');\n  }\n\n  peer.getSenders().forEach((sender) => {\n    const params = sender.getParameters();\n    for (let i = 0; i < params.codecs.length; i++) {\n      if (params.codecs[i].mimeType === codecMimeType) {\n        params.codecs.unshift(params.codecs.splice(i, 1));\n        break;\n      }\n    }\n    sender.setParameters(params);\n  });\n};\n\nexport const removeNonG722 = (sdp) => (\n  sdp.replace(/m=audio ([0-9]+) RTP\\/SAVPF ([0-9 ]*)/g, 'm=audio $1 RTP/SAVPF 9')\n);\n\n\nconst setBAS = (sdp, bandwidth, isScreen) => {\n  if (!!navigator.mozGetUserMedia || !bandwidth) {\n    return sdp;\n  }\n\n  if (isScreen) {\n    if (!bandwidth.screen) {\n      console.warn(`\n        It seems that you are not using bandwidth for screen.\n        Screen sharing is expected to fail.\n    `);\n    } else if (bandwidth.screen < 300) {\n      console.warn(`\n        It seems that you are using wrong bandwidth value for screen.\n        Screen sharing is expected to fail.\n      `);\n    }\n  }\n\n  // if screen; must use at least 300kbs\n  if (bandwidth.screen && isScreen) {\n    sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n    sdp = sdp.replace(/a=mid:video\\r\\n/g, `a=mid:video\\r\\nb=AS:${bandwidth.screen}\\r\\n`);\n  }\n\n  // remove existing bandwidth lines\n  if (bandwidth.audio || bandwidth.video || bandwidth.data) {\n    sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n  }\n\n  if (bandwidth.audio) {\n    sdp = sdp.replace(/a=mid:audio\\r\\n/g, `a=mid:audio\\r\\nb=AS:${bandwidth.audio}\\r\\n`);\n  }\n\n  if (bandwidth.video) {\n    const regex = /a=mid:video\\r\\n/g;\n    sdp = sdp.replace(regex, `\n      a=mid:video\n      b=AS:${isScreen ? bandwidth.screen : bandwidth.video}\n    `);\n  }\n\n  return sdp;\n};\n\n// Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|\n// and, if specified, contains |substr| (case-insensitive search).\nconst findLineInRange = (sdpLines, startLine, endLine, prefix, substr) => {\n  const realEndLine = endLine !== -1 ? endLine : sdpLines.length;\n  for (let i = startLine; i < realEndLine; ++i) {\n    if (sdpLines[i].indexOf(prefix) === 0) {\n      if (!substr || sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {\n        return i;\n      }\n    }\n  }\n  return null;\n};\n\n// Find the line in sdpLines that starts with |prefix|, and, if specified,\n// contains |substr| (case-insensitive search).\nconst findLine = (sdpLines, prefix, substr) => (\n  findLineInRange(sdpLines, 0, -1, prefix, substr)\n);\n\n// Gets the codec payload type from an a=rtpmap:X line.\nconst getCodecPayloadType = (sdpLine) => {\n  const pattern = new RegExp('a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+');\n  const result = sdpLine.match(pattern);\n  return result && result.length === 2 ? result[1] : null;\n};\n\nconst _setVideoBitrates = (sdp, params) => {\n  params = params || {};\n  const xgoogleMinBitrate = params.min;\n  const xgoogleMaxBitrate = params.max;\n  const videoCodec = params.codec.toUpperCase() || 'VP8';\n\n  const sdpLines = sdp.split('\\r\\n');\n\n  // VP8\n  const vp8Index = findLine(sdpLines, 'a=rtpmap', `${videoCodec}/90000`);\n  let vp8Payload;\n  if (vp8Index) {\n    vp8Payload = getCodecPayloadType(sdpLines[vp8Index]);\n  }\n\n  if (!vp8Payload) {\n    return sdp;\n  }\n\n  const rtxIndex = findLine(sdpLines, 'a=rtpmap', 'rtx/90000');\n  let rtxPayload;\n  if (rtxIndex) {\n    rtxPayload = getCodecPayloadType(sdpLines[rtxIndex]);\n  }\n\n  if (!rtxIndex) {\n    return sdp;\n  }\n\n  const rtxFmtpLineIndex = findLine(sdpLines, `a=fmtp:${rtxPayload.toString()}`);\n  if (rtxFmtpLineIndex != null) {\n    let appendrtxNext = '\\r\\n';\n    appendrtxNext += `a=fmtp:${vp8Payload} x-google-min-bitrate=${xgoogleMinBitrate || '228'}; x-google-max-bitrate=${xgoogleMaxBitrate || '228'}`;\n    sdpLines[rtxFmtpLineIndex] = sdpLines[rtxFmtpLineIndex].concat(appendrtxNext);\n    sdp = sdpLines.join('\\r\\n');\n  }\n\n  return sdp;\n};\n\nconst _setOpusAttributes = (sdp, params) => {\n  params = params || {};\n\n  const sdpLines = sdp.split('\\r\\n');\n\n  // Opus\n  const opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000');\n  let opusPayload;\n  if (opusIndex) {\n    opusPayload = getCodecPayloadType(sdpLines[opusIndex]);\n  }\n\n  if (!opusPayload) {\n    return sdp;\n  }\n\n  const opusFmtpLineIndex = findLine(sdpLines, `a=fmtp:${opusPayload.toString()}`);\n  if (opusFmtpLineIndex == null) {\n    return sdp;\n  }\n\n  const stereo = typeof params.stereo !== 'undefined' ? params.stereo : '1';\n  const spropStereo = typeof params['sprop-stereo'] !== 'undefined' ? params['sprop-stereo'] : '1';\n\n  let appendOpusNext = '';\n  appendOpusNext += `; stereo=${stereo}`;\n  appendOpusNext += `; sprop-stereo=${spropStereo}`;\n\n  if (typeof params.maxaveragebitrate !== 'undefined') {\n    appendOpusNext += `; maxaveragebitrate=${params.maxaveragebitrate || 128 * 1024 * 8}`;\n  }\n\n  if (typeof params.maxplaybackrate !== 'undefined') {\n    appendOpusNext += `; maxplaybackrate=${params.maxplaybackrate || 128 * 1024 * 8}`;\n  }\n\n  if (typeof params.cbr !== 'undefined') {\n    appendOpusNext += `; cbr=${typeof params.cbr !== 'undefined' ? params.cbr : '1'}`;\n  }\n\n  if (typeof params.useinbandfec !== 'undefined') {\n    appendOpusNext += `; useinbandfec=${params.useinbandfec}`;\n  }\n\n  if (typeof params.usedtx !== 'undefined') {\n    appendOpusNext += `; usedtx=${params.usedtx}`;\n  }\n\n  if (typeof params.maxptime !== 'undefined') {\n    appendOpusNext += `\\r\\na=maxptime:${params.maxptime}`;\n  }\n\n  sdpLines[opusFmtpLineIndex] = sdpLines[opusFmtpLineIndex].concat(appendOpusNext);\n\n  sdp = sdpLines.join('\\r\\n');\n  return sdp;\n};\n\n// forceStereoAudio => via webrtcexample.com\n// requires getUserMedia => echoCancellation:false\nexport const forceStereoAudio = (sdp) => {\n  const sdpLines = sdp.split('\\r\\n');\n  let opusPayload;\n  let fmtpLineIndex = null;\n  for (let i = 0; i < sdpLines.length; i++) {\n    if (sdpLines[i].search('opus/48000') !== -1) {\n      opusPayload = extractSdp(sdpLines[i], /:(\\d+) opus\\/48000/i);\n      break;\n    }\n  }\n  for (let i = 0; i < sdpLines.length; i++) {\n    if (sdpLines[i].search('a=fmtp') !== -1) {\n      const payload = extractSdp(sdpLines[i], /a=fmtp:(\\d+)/);\n      if (payload === opusPayload) {\n        fmtpLineIndex = i;\n        break;\n      }\n    }\n  }\n  if (fmtpLineIndex == null) return sdp;\n  sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1');\n  sdp = sdpLines.join('\\r\\n');\n  return sdp;\n};\n\nexport const setApplicationSpecificBandwidth = (sdp, bandwidth, isScreen) => (\n  setBAS(sdp, bandwidth, isScreen)\n);\n\nexport const setVideoBitrates = (sdp, params) => _setVideoBitrates(sdp, params);\n\nexport const setOpusAttributes = (sdp, params) => _setOpusAttributes(sdp, params);\n\nexport const preferVP9 = (sdp) => preferCodec(sdp, 'vp9');\n","/**\n * Copyright 2013 j <j@mailb.org>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Helper from './helpers';\nimport getStats from 'getstats';\nimport * as videoChat from './videoChat';\n\n\nimport * as CodecsHandler from './codecsHandler';\n\n\n// Normalize RTC implementation between browsers\n// var getUserMedia = window.navigator.mediaDevices.getUserMedia\nconst attachMediaStream = (element, stream) => {\n  if (typeof element.srcObject !== 'undefined') {\n    element.srcObject = stream;\n  } else if (typeof element.mozSrcObject !== 'undefined') {\n    element.mozSrcObject = stream;\n  } else if (typeof element.src !== 'undefined') {\n    element.src = URL.createObjectURL(stream);\n  } else {\n    console.error('Error attaching stream to element.', element);\n  }\n};\n\nconst webrtcDetectedBrowser = 'chrome';\n\nconst cleanupSdp = (sdp) => {\n  const bandwidth = {\n    screen: 300, // 300kbits minimum\n    audio: 256, // 64kbits  minimum\n    video: 500,\n    minVideo: 128, // 125kbits  min\n    maxVideo: 2048, // 125kbits  max\n    videoCodec: clientVars.webrtc.video.codec,\n  };\n\n  const isScreenSharing = false;\n\n  sdp = CodecsHandler.setApplicationSpecificBandwidth(sdp, bandwidth, isScreenSharing);\n  sdp = CodecsHandler.setVideoBitrates(sdp, {\n    min: bandwidth.minVideo,\n    max: bandwidth.maxVideo,\n    codec: bandwidth.videoCodec,\n  });\n  sdp = CodecsHandler.setOpusAttributes(sdp);\n  sdp = CodecsHandler.preferCodec(sdp, bandwidth.videoCodec);\n\n  return sdp;\n};\n\nconst mergeConstraints = (cons1, cons2) => {\n  const merged = cons1;\n  for (const name in cons2.mandatory) {\n    merged.mandatory[name] = cons2.mandatory[name];\n  }\n  merged.optional.concat(cons2.optional);\n  return merged;\n};\n\nconst randomIntFromInterval = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);\n\nexport default (() => {\n  const attemptReconnect = 60;\n  let reconnected = 0;\n  const videoSizes = {large: '260px', small: '160px'};\n  const pcConfig = {};\n  const audioInputSelect = null;\n  const videoSelect = null;\n  const audioOutputSelect = null;\n  const pcConstraints = {\n    optional: [{\n      DtlsSrtpKeyAgreement: true,\n    }],\n  };\n  const sdpConstraints = {\n    mandatory: {\n      OfferToReceiveAudio: true,\n      OfferToReceiveVideo: true,\n    },\n  };\n\n  const remoteStream = {};\n  const pc = {};\n  const enlargedVideos = new Set();\n  let localVideoElement = null;\n  let padId = null;\n  let socket = null;\n\n  const self = {\n    // API HOOKS\n    postAceInit: (hookName, context, webSocket, docId) => {\n      padId = docId;\n      socket = webSocket;\n\n      if (!clientVars.webrtc) throw new Error('[wrtc]: webrtc settings not found');\n\n      pcConfig.iceServers = clientVars.webrtc.iceServers;\n\n      if (clientVars.webrtc.video.sizes.large) {\n        videoSizes.large = `${clientVars.webrtc.video.sizes.large}px`;\n      }\n      if (clientVars.webrtc.video.sizes.small) {\n        videoSizes.small = `${clientVars.webrtc.video.sizes.small}px`;\n      }\n\n      self._pad = context.pad || window.pad;\n\n      $(document).on('change', '.select.audioSource select', self.audioVideoInputChange);\n      $(document).on('change', '.select.videoSource select', self.audioVideoInputChange);\n      $(document).on('change', '.select.audioOutputSec select', self.changeAudioDestination);\n\n      $(window).on('unload', () => {\n        console.info('[wrtc]: window unloaded, now hangupAll');\n        self.hangupAll();\n      });\n      socket.on('RTC_MESSAGE', (context) => {\n        // filter RTC_message just for how is in headerId room\n        const payload = context.data.payload;\n        if (payload.to !== Helper.getUserId()) return;\n        if (payload.data.headerId === window.headerId) {\n          self.receiveMessage(context.data.payload);\n        }\n      });\n    },\n    appendVideoModalToBody: () => {\n      const $wrtcVideoModal = $('#wrtcVideoModal').tmpl({\n        videoChatLimit: clientVars.webrtc.videoChatLimit,\n        headerId: '',\n      });\n\n      $('body').prepend($wrtcVideoModal);\n\n      $(document).on('click', '#wrtc_modal .btn_toggle_modal', function () {\n        const $parent = $(this).parent()\n            .parent();\n        const action = $(this).attr('data-action');\n        const videoBox = $('#wrtc_modal .videoWrapper').innerHeight();\n\n        $(this).find('.fa_arrow-from-top')\n            .toggle();\n        $(this).find('.fa_arrow-to-top')\n            .toggle();\n\n        if (action === 'collapse') {\n          $(this).attr({'data-action': 'expand'});\n          $parent.find('.btn_enlarge').removeAttr('active');\n          $('#wrtc_modal').css({\n            transform: `translate(-50%, -${videoBox}px)`,\n          });\n        } else {\n          $(this).attr({'data-action': 'collapse'});\n          $parent.find('.btn_enlarge').attr({active: true});\n          $('#wrtc_modal').css({\n            transform: 'translate(-50%, 0)',\n          });\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_info', function click() {\n        const userID = Object.keys(pc);\n        const $this = $(this);\n        const isActive = $this.attr('data-active');\n        const $modal = $(document).find('#wrtc_settings .wrtc_info');\n\n        if (isActive) {\n          $modal.hide();\n          if (pc[userID[0]]) {\n            getStats(pc[userID[0]], (result) => {\n              result.nomore();\n            });\n          }\n          $this.removeAttr('data-active');\n          return true;\n        } else {\n          $this.attr({'data-active': true});\n          $modal.show();\n        }\n\n        if (pc[userID[0]] && !isActive) {\n          const bytesToSize = (bytes) => {\n            const k = 1000;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n            if (bytes <= 0) {\n              return '0 Bytes';\n            }\n            const i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n\n            if (!sizes[i]) {\n              return '0 Bytes';\n            }\n\n            return `${(bytes / k ** i).toPrecision(3)} ${sizes[i]}`;\n          };\n\n          (pc[userID[0]], (result) => {\n            const {video, audio, bandwidth, resolutions: {send, recv}} = result;\n            const statistic = {\n              speed: bytesToSize(bandwidth.speed),\n              systemNetworkType: result.connectionType.systemNetworkType,\n              availableSendBandwidth: bytesToSize(bandwidth.availableSendBandwidth),\n              video: {\n                'send.codecs': video.send.codecs.join(', '),\n                'resolutionsSend': `width ${send.width}, height ${send.height}`,\n                'resolutionsReceive': `width ${recv.width}, height ${recv.height}`,\n                'bytesSent': bytesToSize(video.bytesSent),\n                'bytesReceived': bytesToSize(video.bytesReceived),\n              },\n              audio: {\n                'send.codecs': audio.send.codecs.join(', '),\n                // \"recv.codecs\": result.audio.recv.codecs.join(\", \"),\n                'bytesSent': bytesToSize(audio.bytesSent),\n                'bytesReceived': bytesToSize(audio.bytesReceived),\n              },\n            };\n            $(document).find('#wrtc_settings .wrtc_info')\n                .html(`<pre>${JSON.stringify(statistic, undefined, 2)}</pre>`);\n          }, 1000);\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_close', () => {\n        $('#wrtc_settings').toggleClass('active');\n        const $btnInfo = $('#wrtc_settings .btn_info');\n        if ($btnInfo.attr('data-active')) $btnInfo.trigger('click');\n      });\n    },\n    userLeave: (userId, context, callback) => {\n      userId = userId || context.userInfo.userId;\n      if (userId && pc[userId]) {\n        // gState = 'LEAVING';\n        self.hide(userId);\n        self.hangup(userId, true);\n      }\n      Helper.wrtcStore.userInRoom = false;\n      if (callback) callback();\n    },\n    // deprecated function\n    handleClientMessage_RTC_MESSAGE: (hook, context) => {\n      if (context.payload.data.headerId === window.headerId) {\n        self.receiveMessage(context.payload);\n      }\n    },\n    // END OF API HOOKS\n    show: () => {\n      $('#pad_title').addClass('f_wrtcActive');\n      videoChat.mediaDevices();\n    },\n    showUserMediaError: (err, userId, headerId) => {\n      // show an error returned from getUserMedia\n      let reason;\n      // For reference on standard errors returned by getUserMedia:\n      // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n      // However keep in mind that we add our own errors in getUserMediaPolyfill\n      console.error(`[wrtc]: mediaError, ${err}`);\n      switch (err.name) {\n        case 'CustomNotSupportedError':\n          reason = 'Sorry, your browser does not support WebRTC. (or you have it disabled in your settings).<br><br>' + 'To participate in this audio/video chat you have to user a browser with WebRTC support like Chrome, Firefox or Opera.' + '<a href=\"http://www.webrtc.org/\" target=\"_new\">Find out more</a>';\n          self.sendErrorStat('NotSupported');\n          break;\n        case 'CustomSecureConnectionError':\n          reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n          self.sendErrorStat('SecureConnection');\n          break;\n        case 'NotAllowedError':\n        // For certain (I suspect older) browsers, `NotAllowedError` indicates either an insecure connection or the user rejecting camera permissions.\n        // The error for both cases appears to be identical, so our best guess at telling them apart is to guess whether we are in a secure context.\n        // (webrtc is considered secure for https connections or on localhost)\n          if (location.protocol === 'https:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1') {\n            reason = 'Sorry, you need to give us permission to use your camera and microphone';\n            self.sendErrorStat('Permission');\n          } else {\n            reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n            self.sendErrorStat('SecureConnection');\n          }\n          break;\n        case 'NotFoundError':\n          reason = \"Sorry, we couldn't find a suitable camera on your device. If you have a camera, make sure it set up correctly and refresh this website to retry.\";\n          self.sendErrorStat('NotFound');\n          break;\n        case 'NotReadableError':\n        // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, a hardware error occurred that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Hardware');\n          break;\n        case 'AbortError':\n        // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, an error occurred (probably not hardware related) that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Abort');\n          break;\n        default:\n        // `err` as a string might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, there was an unknown Error:<br><br>${err}`;\n          self.sendErrorStat('Unknown');\n      }\n      $.gritter.add({\n        title: 'Error',\n        text: `${reason}; try again!`,\n        time: 4000,\n        sticky: false,\n        class_name: 'error',\n      });\n      userId = userId || clientVars.userId;\n      headerId = headerId || window.headerId;\n      videoChat.userLeave(headerId,\n          {\n            headerId,\n            padId,\n            userId,\n          }\n      );\n    },\n    hide: (userId) => {\n      if (!userId) return false;\n      userId = userId.split('.')[1];\n      $('#rtcbox').find(`#video_a_${userId}`)\n          .parent()\n          .remove();\n    },\n    activate: (headerId) => {\n      self.show();\n      self.hangupAll();\n      self.getUserMedia(headerId);\n      Helper.wrtcStore.userInRoom = true;\n    },\n    deactivate: async (userId, headerId) => {\n      if (!userId) return false;\n      self.hide(userId);\n      self.hangupAll(headerId);\n      self.hangup(userId, true, headerId);\n      if (Helper.wrtcStore.localstream) await Helper.stopStreaming();\n      Helper.wrtcStore.userInRoom = false;\n    },\n    toggleMuted: () => {\n      const audioTrack = Helper.wrtcStore.localstream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        return !audioTrack.enabled; // returning \"Muted\" state, which is !enabled\n      }\n      return true; // if there's no audio track, it's muted\n    },\n    toggleVideo: () => {\n      const videoTrack = Helper.wrtcStore.localstream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        return !videoTrack.enabled;\n      }\n    },\n    setStream: (userId, stream) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      let video = $(`#${videoId}`)[0];\n\n      const user = Helper.getUserFromId(userId);\n\n      if (!video && stream) {\n        const videoContainer = $(\"<div class='video-container'>\").css({\n          'width': videoSizes.small,\n          'max-height': videoSizes.small,\n        })\n            .appendTo($('#wrtc_modal .videoWrapper'));\n        const userName = user.name || 'anonymous';\n        videoContainer.append($('<div class=\"user-name\">').text(userName));\n\n        video = $('<video playsinline>').attr('id', videoId)\n            .css({\n              'border-color': user.colorId,\n              'width': videoSizes.small,\n              'max-height': videoSizes.small,\n            })\n            .on({\n              loadedmetadata: () => {\n                self.addInterface(userId);\n              },\n            })\n            .appendTo(videoContainer)[0];\n\n        video.autoplay = true;\n        if (isLocal) {\n          videoContainer.addClass('local-user');\n          video.muted = true;\n        }\n        self.addInterface(userId);\n      }\n      if (stream) {\n        attachMediaStream(video, stream);\n      } else if (video) {\n        $(video).parent()\n            .remove();\n      }\n    },\n    addInterface: (userId) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      const $video = $(`#${videoId}`);\n\n      const $mute = $(\"<span class='interface-btn audio-btn buttonicon'>\")\n          .attr('title', 'Mute')\n          .on({\n            click: () => {\n              let muted;\n              if (isLocal) {\n                muted = self.toggleMuted();\n              } else {\n                $video[0].muted = !$video[0].muted;\n                muted = $video[0].muted;\n              }\n              $mute.attr('title', muted ? 'Unmute' : 'Mute').toggleClass('muted', muted);\n            },\n          });\n\n      let videoEnabled = true;\n      let $disableVideo;\n      if (isLocal) {\n        $disableVideo = $(\"<span class='interface-btn video-btn buttonicon'>\")\n            .attr('title', 'Disable video')\n            .on('click', function () {\n              self.toggleVideo();\n              videoEnabled = !videoEnabled;\n              const title = videoEnabled ? 'Disable video' : 'Enable video';\n              $(this).attr('title', title)\n                  .toggleClass('off', !videoEnabled);\n            });\n      }\n\n      let videoEnlarged = false;\n      const $largeVideo = $(\"<span class='interface-btn enlarge-btn buttonicon'>\")\n          .attr('title', 'Make video larger')\n          .on('click', function () {\n            videoEnlarged = !videoEnlarged;\n\n            if (videoEnlarged) {\n              enlargedVideos.add(userId);\n            } else {\n              enlargedVideos.delete(userId);\n            }\n\n            const title = videoEnlarged ? 'Make video smaller' : 'Make video larger';\n            $(this).attr('title', title)\n                .toggleClass('large', videoEnlarged);\n\n            const videoSize = $(document).find('#wrtc_modal .ndbtn.btn_enlarge')\n                .hasClass('large') ? videoSizes.large : videoSizes.small;\n\n            $video.parent().css({'width': videoSize, 'max-height': videoSize});\n            $video.css({'width': videoSize, 'max-height': videoSize});\n          });\n\n      if ($(document).find('#wrtc_modal .ndbtn.btn_enlarge')\n          .hasClass('large')) {\n        $video.parent().css({\n          'width': videoSizes.large, 'max-height': videoSizes.large,\n        });\n        $video.css({'width': videoSizes.large, 'max-height': videoSizes.large});\n      }\n\n      if (isLocal) localVideoElement = $video;\n\n      const $networkLatency = $(\"<div class='latency'></div>\");\n\n      $(`#interface_${videoId}`).remove();\n      $(\"<div class='interface-container'>\").attr('id', `interface_${videoId}`)\n          .append($mute)\n          .append($disableVideo)\n          .append($largeVideo)\n          .append($networkLatency)\n          .insertAfter($video);\n      self.changeAudioDestination();\n    },\n    // Sends a stat to the back end. `statName` must be in the\n    // approved list on the server side.\n    sendErrorStat: (statName) => {\n      const msg = {component: 'pad', type: 'STATS', data: {statName, type: 'RTC_MESSAGE'}};\n      socket.emit('acceptNewCall', padId, window.headerId);\n      socket.emit('message', msg);\n    },\n    sendMessage: (to, data, socketIdTo) => {\n      socket.emit('RTC_MESSAGE', {\n        type: 'RTC_MESSAGE',\n        payload: {data, to, padId, from: Helper.getUserId(), socket: {from: socket.id, to: socketIdTo}},\n      }, (data) => {\n        // console.log('coming data', data);\n      });\n      // deprecated function\n      // self._pad.collabClient.sendMessage({\n      // type: 'RTC_MESSAGE',\n      //   payload: {data, to},\n      // });\n    },\n    receiveMessage: (msg) => {\n      const peer = msg.from; // userId\n      const data = msg.data;\n      const type = data.type;\n      if (peer === Helper.getUserId()) {\n        // console.info('ignore own messages');\n        return;\n      }\n      /*\n      if (type != 'icecandidate')\n        console.info('receivedMessage', 'peer', peer, 'type', type, 'data', data);\n      */\n      if (type === 'hangup') {\n        self.hangup(peer, true);\n      } else if (type === 'offer') {\n        if (pc[peer]) {\n          self.hangup(peer, true);\n          self.createPeerConnection(peer, data.headerId);\n        } else {\n          self.createPeerConnection(peer, data.headerId);\n        }\n        if (Helper.wrtcStore.localstream) {\n          if (pc[peer].getLocalStreams) {\n            if (!pc[peer].getLocalStreams().length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n\n              // pc[peer].addStream(localStream);\n            }\n          } else if (pc[peer].localStreams) {\n            if (!pc[peer].localStreams.length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n              // pc[peer].addStream(localStream);\n            }\n          }\n        }\n        const offer = new RTCSessionDescription(data.offer);\n        pc[peer].setRemoteDescription(offer, () => {\n          pc[peer].createAnswer((desc) => {\n            desc.sdp = cleanupSdp(desc.sdp);\n            pc[peer].setLocalDescription(desc, () => {\n              self.sendMessage(peer, {type: 'answer', answer: desc, headerId: data.headerId});\n            }, logError);\n          }, logError, sdpConstraints);\n        }, logError);\n      } else if (type === 'answer') {\n        if (pc[peer]) {\n          const answer = new RTCSessionDescription(data.answer);\n          pc[peer].setRemoteDescription(answer, () => {\n            // console.log(\"call setRemoteDescription\", new Date().getSeconds())\n          }, logError);\n        }\n      } else if (type === 'icecandidate') {\n        if (pc[peer]) {\n          const candidate = new RTCIceCandidate(data.candidate);\n          const p = pc[peer].addIceCandidate(candidate);\n          if (p) {\n            p.then(() => {\n              // Do stuff when the candidate is successfully passed to the ICE agent\n            }).catch(() => {\n              console.error('[wrtc]: Failure during addIceCandidate()', data);\n            });\n          }\n        }\n      } else {\n        console.error('[wrtc]: unknown message', data);\n      }\n    },\n    hangupAll: (_headerId) => {\n      Object.keys(pc).forEach((userId) => {\n        self.hangup(userId, true, _headerId);\n      });\n    },\n    hangup: (userId, notify = false, headerId) => {\n      notify = userId ? true : notify;\n      if (pc[userId] && userId !== Helper.getUserId()) {\n        self.setStream(userId, '');\n        pc[userId].close();\n        delete pc[userId];\n        if (notify) self.sendMessage(userId, {type: 'hangup', headerId});\n      }\n    },\n    call: (userId, headerId) => {\n      if (!Helper.wrtcStore.localstream) {\n        // callQueue.push(userId);\n        return;\n      }\n      let constraints = {optional: [], mandatory: {}};\n      // temporary measure to remove Moz* constraints in Chrome\n      if (webrtcDetectedBrowser === 'chrome') {\n        for (const prop in constraints.mandatory) {\n          if (prop.indexOf('Moz') !== -1) {\n            delete constraints.mandatory[prop];\n          }\n        }\n      }\n      constraints = mergeConstraints(constraints, sdpConstraints);\n\n      if (!pc[userId]) self.createPeerConnection(userId, headerId);\n\n      // pc[userId].addStream(localStream);\n\n      Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n        pc[userId].addTrack(track, Helper.wrtcStore.localstream);\n      });\n\n      pc[userId].createOffer((desc) => {\n        desc.sdp = cleanupSdp(desc.sdp);\n        pc[userId].setLocalDescription(desc, () => {\n          self.sendMessage(userId, {type: 'offer', offer: desc, headerId});\n        }, logError);\n      }, logError, constraints);\n    },\n    createPeerConnection: (userId, headerId) => {\n      if (pc[userId]) {\n        console.warn('WARNING creating PC connection even though one exists', userId);\n      }\n      pc[userId] = new RTCPeerConnection(pcConfig, pcConstraints);\n      pc[userId].onicecandidate = (event) => {\n        if (event.candidate) {\n          self.sendMessage(userId, {\n            type: 'icecandidate',\n            headerId,\n            candidate: event.candidate,\n          });\n        } else {\n          reconnected = 0;\n          socket.emit('acceptNewCall', padId, window.headerId);\n        }\n      };\n\n      pc[userId].oniceconnectionstatechange = () => {\n        console.info('[wrtc]: ICE state: ', pc[userId], pc[userId].iceConnectionState);\n      };\n\n      pc[userId].ontrack = (event) => {\n        console.info(event, 'ontrack');\n        remoteStream[userId] = event.streams[0];\n        self.setStream(userId, event.streams[0]);\n      };\n\n      pc[userId].onremovestream = () => {\n        self.setStream(userId, '');\n      };\n    },\n    audioVideoInputChange: async () => {\n      await Helper.stopStreaming();\n      self.getUserMedia(window.headerId);\n    },\n    attachSinkId: (element, sinkId) => {\n      // Attach audio output device to video element using device/sink ID.\n      if (element && element[0] && typeof element[0].sinkId !== 'undefined') {\n        element[0].setSinkId(sinkId).then(() => {\n          // console.info(`Success, audio output device attached: ${sinkId}`);\n        }).catch((error) => {\n          let errorMessage = error;\n          if (error.name === 'SecurityError') {\n            errorMessage = `\n                You need to use HTTPS for selecting audio output device: ${error}\n              `;\n          }\n          console.error(errorMessage);\n          // Jump back to first output device in the list as it's the default.\n          audioOutputSelect.selectedIndex = 0;\n        });\n      } else {\n        console.warn('Browser does not support output device selection.');\n        $(document).find('.select.audioOutputSec')\n            .hide();\n      }\n    },\n    changeAudioDestination: () => {\n      const cls = '.select.audioOutputSec select';\n      const audioOutputSelect = document.querySelector(cls);\n      if (!audioOutputSelect) return;\n      const audioDestination = audioOutputSelect.value;\n      const videoElement = localVideoElement;\n      self.attachSinkId(videoElement, audioDestination);\n    },\n    getUserMedia: async (headerId) => {\n      $('#wrtc_modal #networkError')\n          .removeClass('active')\n          .hide();\n\n      // window.navigator.mediaDevices\n      //     .getUserMedia(mediaConstraints)\n      //     .then((stream) => {\n      //       Helper.wrtcStore.localstream = stream;\n      //       self.setStream(Helper.getUserId(), stream);\n      //       self._pad.collabClient.getConnectedUsers().forEach((user) => {\n      //         if (user.userId !== Helper.getUserId()) {\n      //           if (pc[user.userId]) {\n      //             self.hangup(user.userId, false, headerId);\n      //           }\n      //           self.call(user.userId, headerId);\n      //         }\n      //       });\n      //     })\n      //     .catch((err) => {\n      //       self.showUserMediaError(err, Helper.getUserId(), headerId);\n      //     });\n\n      const stream = await videoChat.isUserMediaAvailable()\n          .catch(async (err) => {\n            console.error(err);\n            Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', 'VIDEO');\n            Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n            await Helper.stopStreaming();\n            // socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n            //   gatewayUserLeave(_userData, roomInfo);\n            // });\n            self.showUserMediaError(err, Helper.getUserId(), headerId);\n          });\n\n\n      Helper.wrtcStore.localstream = stream;\n      // if (!stream) {\n      //   stream = await videoChat.isUserMediaAvailable()\n      //   Helper.wrtcStore.localstream = stream\n      // }\n      self.setStream(Helper.getUserId(), stream);\n      self._pad.collabClient.getConnectedUsers().forEach((user) => {\n        if (user.userId !== Helper.getUserId()) {\n          if (pc[user.userId]) {\n            self.hangup(user.userId, false, headerId);\n          }\n          self.call(user.userId, headerId);\n        }\n      });\n    },\n    attemptToReconnect: () => {\n      reconnected++;\n      console.info('[wrtc]: Try reconnecting', reconnected, attemptReconnect);\n      if (attemptReconnect <= reconnected) {\n        socket.emit('acceptNewCall', padId, window.headerId);\n        throw new Error('[wrtc]: please reload the video chat and try again to connect!');\n      }\n      setTimeout(() => {\n        console.info('[wrtc]: reconnecting...');\n        self.getUserMedia(window.headerId);\n      }, randomIntFromInterval(200, 1000));\n    },\n  };\n\n  const logError = (error) => {\n    // if (error && error.message.includes(\"Failed to set remote answer sdp\")) {\n    self.attemptToReconnect();\n    // } else {\n    // socket.emit('acceptNewCall', padId, window.headerId);\n    console.error('[wrtc]: LogError:', error);\n    // }\n    $('#wrtc_modal #networkError').show()\n        .addClass('active')\n        .text(`[wrtc]: Error: ${error} ,Reload the session.`);\n  };\n\n  self.pc = pc;\n  return self;\n})();\n","import * as Helper from './helpers';\nimport WRTC from './webrtc';\n\nlet socket = null;\nlet padId = null;\nlet currentRoom = {};\nlet VIDEOCHATLIMIT = 0;\nlet $joinBtn = null;\nlet networkInterval = null;\n\nconst pingos = {\n  startTime: 0,\n  latency: 0,\n  LMin: 0,\n  LMax: 0,\n  avg: 0,\n  LineAvg: [],\n  colors: {\n    normal: '#fff',\n    warning: '#ffcc00',\n    danger: '#cc3300',\n  },\n  interavCheck: 1000,\n};\n\n\nconst reachedVideoRoomSize = (roomInfo, showAlert, isBulkUpdate) => {\n  if (roomInfo && roomInfo.present <= VIDEOCHATLIMIT) return true;\n\n  showAlert = showAlert || true;\n  if (showAlert && !isBulkUpdate) {\n    $.gritter.add({\n      title: 'Video chat Limitation',\n      text: `\n          The video chat room has reached its limit. \\r\\n\n          The size of this video chat room is ${ VIDEOCHATLIMIT }.\n          (If this seems wrong, please share the problem with the support team.)\n        `,\n      sticky: false,\n      class_name: 'error',\n      time: '5000',\n    });\n  }\n\n  return false;\n};\n\nconst startWatchNetwork = () => {\n  networkInterval = setInterval(() => {\n    pingos.startTime = Date.now();\n    socket.emit('pingil', padId, window.headerId, Helper.getUserId(), pingos.avg);\n  }, pingos.interavCheck);\n};\n\nconst addUserToRoom = (data, roomInfo) => {\n  if (!data || !data.userId) return false;\n  const headerId = data.headerId;\n\n\n  const user = Helper.getUserFromId(data.userId);\n  // some user may session does exist but\n  // the user info does not available in all over the current pad\n\n  if (!user) return true;\n\n  // TODO: this is not good idea, use global state\n  // if incoming user has already in the room don't persuade the request\n  // if (IsUserInRooms) return false;\n  const userCount = roomInfo.present;\n\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text(userCount);\n  if (userCount === 0) {\n    $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text('');\n  }\n\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon`).addClass('active');\n\n  if (data.userId === clientVars.userId) {\n    window.headerId = data.headerId;\n\n    startWatchNetwork();\n\n    const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n    if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.add('active');\n\n    WRTC.activate(data.headerId, user.userId);\n\n    $('#wrtc_modal').css({\n      transform: 'translate(-50%, 0)',\n      opacity: 1,\n    }).attr({ 'data-active': true });\n\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'JOIN', $joinBtn);\n    Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', true);\n\n    // this request send once! and must be fire when the room is empty\n    if (!currentRoom.userId && roomInfo.present === 1) {\n      socket.emit('acceptNewCall', padId, window.headerId);\n    }\n\n    currentRoom = data;\n\n    // update modal title, attributes and inline avatar\n    Helper.wrtcPubsub.emit('updateWrtcToolbarModal', headerId, roomInfo);\n  }\n\n  Helper.wrtcPubsub.emit('update store', data, headerId, 'JOIN', 'VIDEO', roomInfo);\n};\n\n/**\n*\n* @param {Object} data @requires\n* @param {String} data.padId @requires\n* @param {String} data.userId @requires\n* @param {String} data.userName @requires\n* @param {String} data.headerId\n*\n* @param {Object} roomInfo\n* @param {Boolean} showAlert\n* @param {Boolean} bulkUpdate\n*\n* @returns\n*/\nexport const gatewayUserJoin = async (data, roomInfo, showAlert = true, bulkUpdate = false) => {\n  console.info('[wrtc]: gateway user joining,', data, roomInfo, showAlert);\n  // If user data does not exist return false\n  if (!data) return reachedVideoRoomSize(null, false, false);\n\n  // if user data exist then check room size\n  if (data && reachedVideoRoomSize(roomInfo, showAlert, bulkUpdate)) {\n    return addUserToRoom(data, roomInfo);\n  } else if (bulkUpdate) {\n    return addUserToRoom(data, roomInfo);\n  }\n  await Helper.stopStreaming();\n  return false;\n};\n\n\nconst stopWatchNetwork = () => clearInterval(networkInterval);\n\nexport const mediaDevices = () => {\n  navigator.mediaDevices.enumerateDevices().then((deviceInputs) => {\n    const videoSettings = localStorage.getItem('videoSettings');\n    const { microphone, speaker, camera } = JSON.parse(videoSettings);\n\n    const audioInputSection = document.querySelector('.select.audioSource select');\n    const audioOutputSection = document.querySelector('.select.audioOutputSec select');\n    const videoSection = document.querySelector('.select.videoSource select');\n\n    const audioInputElement = document.createElement('select');\n    const audioOutputElement = document.createElement('select');\n    const videoElement = document.createElement('select');\n\n    for (const deviceInfo of deviceInputs) {\n      const option = document.createElement('option');\n      const { deviceId, label, kind } = deviceInfo;\n      option.value = deviceId;\n      if (kind === 'audioinput') {\n        option.text = label || `microphone ${ audioInputSection ? audioInputSection.length + 1 : '1' }`;\n        if (microphone === deviceId) option.selected = true;\n        audioInputElement.appendChild(option);\n      } else if (kind === 'audiooutput') {\n        option.text = label || `speaker ${ audioOutputSection ? audioOutputSection.length + 1 : '1' }`;\n        if (speaker === deviceId) option.selected = true;\n        audioOutputElement.appendChild(option);\n      } else if (kind === 'videoinput') {\n        option.text = label || `camera ${ videoSection ? videoSection.length + 1 : '1' }`;\n        if (camera === deviceId) option.selected = true;\n        videoElement.appendChild(option);\n      }\n    }\n\n    $(audioInputSection).remove();\n    $(audioOutputSection).remove();\n    $(videoSection).remove();\n\n    $('.select.audioSource').append(audioInputElement);\n    $('.select.audioOutputSec').append(audioOutputElement);\n    $('.select.videoSource').append(videoElement);\n  });\n};\n\nexport const isUserMediaAvailable = () => {\n  const audioInputSelect = document.querySelector('#wrtc_settings .select.audioSource');\n  const audioOutputSelect = document.querySelector('#wrtc_settings .select.audioOutputSec');\n  const videoSelect = document.querySelector('#wrtc_settings .select.videoSource');\n\n  const audioSource = audioInputSelect ? audioInputSelect.value : undefined;\n  const videoSource = videoSelect ? videoSelect.value : undefined;\n  const audioOutput = audioOutputSelect ? audioOutputSelect.value : undefined;\n\n  const mediaConstraints = {\n    audio: true,\n    video: {\n      width: 320,\n      height: 240,\n      frameRate: { ideal: 15, max: 30 },\n      facingMode: 'user',\n    },\n  };\n\n  if (audioSource) {\n    mediaConstraints.audio.deviceId = { exact: audioSource };\n  }\n  if (videoSource) {\n    mediaConstraints.video.deviceId = { exact: videoSource };\n  }\n\n  const newSettings = {\n    microphone: audioSource,\n    speaker: audioOutput,\n    camera: videoSource,\n  };\n\n  localStorage.setItem('videoSettings', JSON.stringify(newSettings));\n\n  return window.navigator.mediaDevices.getUserMedia(mediaConstraints);\n};\n\nexport const catchBrowserError = (userId, headerId) => {\n  currentRoom = {};\n\n  $('#wrtc_modal').css({\n    transform: 'translate(-50%, -100%)',\n    opacity: 0,\n  }).attr({ 'data-active': false });\n\n  Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n\n  socket.removeListener(`receiveTextMessage:${ headerId }`);\n  WRTC.deactivate(userId, headerId);\n  stopWatchNetwork();\n  window.headerId = null;\n  Helper.wrtcPubsub.emit('update store', {}, headerId, 'LEAVE', 'VIDEO', {});\n  Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', 'VIDEO');\n  WRTC.userLeave(userId);\n  $('.header_videochat_icon .userCount').text('');\n};\n\nconst removeUserFromRoom = async (data, roomInfo, cb) => {\n  if (!data || !roomInfo || !data.userId) return false;\n  const headerId = data.headerId;\n\n  const userCount = roomInfo.present;\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text(userCount);\n\n  if (userCount === 0) {\n    $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text('');\n  }\n\n  if (data.userId === clientVars.userId) {\n    Helper.$bodyAceOuter()\n      .find(`#wrtcVideoIcons #${ headerId }`)\n      .removeClass('active');\n\n    WRTC.deactivate(data.userId, data.headerId);\n    stopWatchNetwork();\n    window.headerId = null;\n\n    const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n    if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.remove('active');\n\n    currentRoom = {};\n\n    $('#wrtc_modal').css({\n      transform: 'translate(-50%, -100%)',\n      opacity: 0,\n    }).attr({ 'data-active': false });\n\n    Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n\n    // we don't need this remove later\n    await Helper.stopStreaming();\n    socket.removeListener(`receiveTextMessage:${ data.headerId }`);\n  }\n\n  if (cb && typeof cb === 'function') cb();\n\n  Helper.wrtcPubsub.emit('update store', data, headerId, 'LEAVE', 'VIDEO', roomInfo);\n\n  Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n\n  WRTC.userLeave(data.userId);\n};\n\nexport const gatewayUserLeave = (data, roomInfo, cb) => {\n  removeUserFromRoom(data, roomInfo, cb);\n};\n\n\nconst createSession = async (headerId, userInfo, $joinButton) => {\n  Helper.$bodyAceOuter()\n    .find('button.btn_joinChat_chatRoom')\n    .removeClass('active');\n  $joinBtn = $joinButton;\n\n  const participators = window.pad.collabClient.getConnectedUsers().map((x) => x.userId);\n\n  if (!currentRoom.userId) {\n    return socket.emit('userJoin', padId, participators, userInfo, 'video', gatewayUserJoin);\n  }\n  // If the user has already joined the video chat,\n  // make suer leave that room then join to the new chat room\n  socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n    gatewayUserLeave(_userData, roomInfo, () => {\n      socket.emit('userJoin', padId, participators, userInfo, 'video', gatewayUserJoin);\n    });\n  });\n};\n\nexport const userJoin = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  // check if has user already in the room\n  if (currentRoom && currentRoom.headerId === headerId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  createSession(headerId, userInfo, $joinButton);\n};\n// deprecate\nexport const reloadCurrentSession = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  createSession(headerId, userInfo, $joinButton, 'RELOAD');\n};\n\nexport const reloadSession = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n  socket.emit('reloadVideoSession', padId, headerId);\n};\n\nexport const userLeave = (headerId, data, $joinButton) => {\n  $joinBtn = $joinButton;\n  socket.emit('userLeave', padId, data, 'video', gatewayUserLeave);\n};\n\n\nexport const postAceInit = (hookName, context, webSocket, docId) => {\n  socket = webSocket;\n  padId = docId;\n  VIDEOCHATLIMIT = 2000; // clientVars.webrtc.videoChatLimit;\n  Helper.wrtcPubsub.emit('componentsFlow', 'video', 'init', true);\n  // mediaDevices();\n\n  socket.on('userLatency', (data) => {\n    if (Helper.getUserId() !== data.userId) {\n      const videoId = `interface_video_${ data.userId.replace(/\\./g, '_') }`;\n\n      let color = pingos.colors.normal;\n      if (data.latency > 200 && data.latency < 300) color = pingos.colors.warning;\n      if (data.latency > 300) color = pingos.colors.danger;\n\n      $(document)\n        .find(`#${ videoId } .latency`)\n        .css({ color })\n        .text(`${ Math.ceil(data.latency) }ms`);\n    }\n  });\n  socket.on('pongol', (data) => {\n    pingos.latency = Date.now() - pingos.startTime;\n\n    if (pingos.LMin <= pingos.latency && pingos.latency >= pingos.LMax) { pingos.LMax = pingos.latency; } else { pingos.LMin = pingos.latency; }\n\n    if (pingos.LineAvg.length < 4) {\n      pingos.LineAvg.push((pingos.LMax + pingos.LMin) / 2);\n    } else {\n      pingos.avg = pingos.LineAvg.reduce((a, b) => a + b) / pingos.LineAvg.length;\n      pingos.LineAvg = [];\n      pingos.LMax = 0;\n    }\n\n    let color = pingos.colors.normal;\n    if (pingos.avg > 200 && pingos.avg < 300) color = pingos.colors.warning;\n    if (pingos.avg > 300) color = pingos.colors.danger;\n\n    $(document)\n      .find('.video-container.local-user .latency')\n      .css({ color })\n      .text(`${ Math.ceil(pingos.avg) }ms`);\n\n    // Helper.wrtcPubsub.emit('update network information', pingos);\n  });\n\n  socket.on('reloadVideoSession', (headerId) => {\n    if (currentRoom.headerId !== headerId) return false;\n    const target = 'PLUS';\n    const userInfo = {\n      padId: clientVars.padId || window.pad.getPadId(),\n      userId: clientVars.userId || window.pad.getUserId(),\n      userName: clientVars.userName || 'anonymous',\n      headerId,\n      target,\n      action: 'JOIN',\n    };\n    Helper.wrtcPubsub.emit('disable room buttons', headerId, 'JOIN', target);\n    createSession(headerId, userInfo, target);\n  });\n};\n","import * as videoChat from './videoChat';\n\nconst avatarUrl = '../static/plugins/ep_profile_modal/static/img/user.png';\n\nconst getAvatarUrl = (userId) => {\n  if (!userId) return avatarUrl;\n  return `/static/getUserProfileImage/${userId}/${window.pad.getPadId()}?t=${new Date().getTime()}`;\n};\n\n// export const padId = clientVars.padId || window.pad.getPadId();\n// export const userId = clientVars.userId || window.pad.getUserId();\n\nexport const hElements = [\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  '.h1',\n  '.h2',\n  '.h3',\n  '.h4',\n  '.h5',\n  '.h6',\n];\n\nexport const hTags = ['h1', 'h2', 'h3', 'h4'];\n\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nexport const getValidUrl = function (url = '') {\n  if (url === '') return '';\n  let newUrl = window.decodeURIComponent(url);\n  newUrl = newUrl.trim().replace(/\\s/g, '');\n\n  if (/^(:\\/\\/)/.test(newUrl)) {\n    return `http${newUrl}`;\n  }\n  if (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\n    return `http://${newUrl}`;\n  }\n\n  return newUrl;\n};\nexport const getUserId = () => clientVars.userId || window.pad.getUserId();\nexport const stopStreaming = (callback) => new Promise((resolve, reject) => {\n  const stream = wrtcStore.localstream;\n  if (!stream) resolve();\n  stream.getTracks().forEach((track) => {\n    track.stop();\n    stream.removeTrack(track);\n  });\n  wrtcStore.localstream = null;\n  resolve();\n});\n\nexport const getUserFromId = (userId) => {\n  const anonymousUser = {name: 'anonymous', userId, colorId: '#FFF'};\n  if (!window.pad || !window.pad.collabClient) return anonymousUser;\n  const result = window.pad.collabClient\n      .getConnectedUsers()\n      .filter((user) => user.userId === userId);\n  const user = result.length > 0 ? result[0] : anonymousUser;\n  return user;\n};\n\nexport const slugify = (text) => text\n    .toString()\n    .toLowerCase()\n    .trim()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n    .replace(/\\--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n\nexport const $bodyAceOuter = () => $(document).find('iframe[name=\"ace_outer\"]')\n    .contents();\n\nexport const createShareLink = (headerId, headerText = 'headerText') => {\n  const padAddress = window.location.origin + window.location.pathname;\n  const slug = slugify(headerText);\n  return `${padAddress}?header=${slug}&id=${headerId}&target=video&join=true`;\n};\n\nexport const findAceHeaderElement = (headerId) => {\n  const $el = $bodyAceOuter().find('iframe')\n      .contents()\n      .find('#innerdocbody')\n      .find(`.heading.${headerId}`);\n  return {\n    exist: $el.length,\n    $el,\n    text: $el.text(),\n    tag: $el.attr('data-htag'),\n    offset: {\n      top: () => getHeaderRoomY($el),\n      left: () => getHeaderRoomX($el),\n    },\n    $inlineIcon: () => $el.find('wrt-inline-icon').length\n      ? $el.find('wrt-inline-icon')[0].shadowRoot : null,\n  };\n};\n\nexport const wrtcPubsub = {\n  events: {},\n  on: function on(eventName, fn) {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(fn);\n  },\n  off: function off(eventName, fn) {\n    if (this.events[eventName]) {\n      for (let i = 0; i < this.events[eventName].length; i++) {\n        if (this.events[eventName][i] === fn) {\n          this.events[eventName].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  emit: function emit(eventName) {\n    const _len = arguments.length;\n    const data = Array(_len > 1 ? _len - 1 : 0);\n    let _key = 1;\n    for (_key = 1; _key < _len; _key++) {\n      data[_key - 1] = arguments[_key];\n    }\n\n    if (this.events[eventName]) {\n      this.events[eventName].forEach((fn) => {\n        fn.apply(undefined, data);\n      });\n    }\n  },\n};\n\n// socketState: 'CLOSED', 'OPENED', 'DISCONNECTED'\n// enable: plugin active/deactivate\nexport const wrtcStore = {\n  enable: true,\n  epProfileState: true,\n  userInRoom: false,\n  currentOpenRoom: null,\n  socketState: 'CLOSED',\n  socket: null,\n  localstream: null,\n  components: {\n    video: {init: false, open: false},\n    room: {init: false, open: false},\n    wrtc: {init: false, open: false},\n  },\n  rooms: new Map(),\n  globalVar: {},\n  staticVar: {\n    webSocket: {\n      DISCONNECTED: 'DISCONNECTED',\n      OPENED: 'OPENED',\n    },\n  },\n};\n\n/**\n   * @param {boolean} state\n   */\nwrtcPubsub.on('plugin enable', (state) => {\n  $bodyAceOuter()\n      .find('iframe')\n      .contents()\n      .find('#innerdocbody')\n      .find('.heading wrt-inline-icon')\n      .each((i, el) => {\n        el.shadowRoot.querySelector('.btn_roomHandler').style.display = state\n          ? 'flex'\n          : 'none';\n      });\n\n  $bodyAceOuter()\n      .find('#outerdocbody')\n      .find('#wbrtc_avatarCol')[0].style.display = state ? 'flex' : 'none';\n\n  // deactivate\n  if (!state) {\n    videoChat.userLeave(window.headerId, wrtcPubsub.currentOpenRoom, 'PLUS');\n    wrtcPubsub.currentOpenRoom = null;\n  }\n  wrtcStore.enable = state;\n});\n\nwrtcPubsub.on('update network information', () => {});\n\n/**\n   * state (DISCONNECTED|OPENED)\n   */\nwrtcPubsub.on('socket state', (state) => {\n  wrtcStore.socketState = state;\n  console.info(\n      '[wrtc]: socket state has been change, new state:',\n      state,\n      wrtcStore.userInRoom,\n      window.headerId\n  );\n  if (state === 'OPENED' && wrtcStore.userInRoom) {\n    console.info('Try reconnecting...');\n    WRTC.attemptToReconnect();\n  }\n});\n\n/**\n   * @param {string}  name @enum(text|video|room|wrtc)\n   * @param {string}  flow @enum(init|open)\n   * @param {boolean} status @enum (true|false)\n   */\nwrtcPubsub.on('componentsFlow', (name, flow, status) => {\n  wrtcStore.components[name][flow] = status;\n});\n\nwrtcPubsub.on('update inlineAvatar info', (userId, data) => {\n  if (clientVars.webrtc.displayInlineAvatar) inlineAvatar.update(userId, data);\n});\n\nwrtcPubsub.on('update store', (requestUser, headerId, action, target, roomInfo, callback) => {\n  if (!requestUser || !headerId || !action || !roomInfo || !target) return false;\n\n  if (!wrtcStore.rooms.has(headerId)) {\n    wrtcStore.rooms.set(headerId, {\n      VIDEO: {list: []},\n      TEXT: {list: []},\n      USERS: {},\n      headerCount: 0,\n    });\n  }\n\n  const room = wrtcStore.rooms.get(headerId);\n  let users = room.USERS;\n\n  room[target] = roomInfo;\n\n  // remove all users\n  users = {};\n\n  if (room.VIDEO.list) {\n    room.VIDEO.list.forEach((el) => {\n      if (!users[el.userId]) users[el.userId] = {};\n      users[el.userId] = el;\n    });\n  }\n\n  inlineAvatar[target](headerId, room[target]);\n  inlineAvatar.ROOM(headerId, users);\n\n  wrtcStore.rooms.set(headerId, room);\n\n  if (callback) callback(room);\n}\n);\n\nwrtcPubsub.on('disable room buttons', (headerId, actions, target) => {\n  const btn = $('#header_videochat_icon')[0];\n  if (!btn) return;\n  btn.classList.add('activeLoader');\n  btn.setAttribute('disabled', true);\n});\n\nwrtcPubsub.on('enable room buttons', (headerId, action, target) => {\n  const btn = $('#header_videochat_icon')[0];\n  if (!btn) return;\n  const newAction = action === 'JOIN' ? 'LEAVE' : 'JOIN';\n  btn.removeAttribute('disabled');\n  btn.setAttribute('data-action', newAction);\n  btn.classList.remove('activeLoader');\n});\n\nwrtcPubsub.on('updateWrtcToolbarModal', (headerId, roomInfo) => {\n  // find toolbar attribute and update all of them.\n  // update toolbar title\n  // update inlineAvatar\n\n  const headerTile = findAceHeaderElement(headerId).text;\n\n  $('#wrtc_modal .btn_roomHandler, #werc_toolbar p').attr('data-id', headerId);\n  $('#wrtc_modal .nd_title .title').html(headerTile);\n});\n\nwrtcPubsub.on('updateWrtcToolbarTitleModal', (headerTile, headerId) => {\n  if (headerId === window.headerId) {\n    $(`#werc_toolbar .nd_title .titleb[data-id='${headerId}'`).html(headerTile);\n    $(document)\n        .find(`.wrtc_roomLink[data-id='${headerId}']`)\n        .text(headerTile);\n  }\n});\n\n/**\n  * @property ROOM\n  * @property VIDEO\n  * @property update\n  */\nexport const inlineAvatar = {\n  ROOM: (headerId, room) => {\n    if (!clientVars.webrtc.displayInlineAvatar) return;\n\n    const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n    let $element = $bodyAceOuter()\n        .find(`#wbrtc_avatarCol .${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n\n    const offsetTop = findAceHeaderElement(headerId).offset.top() - 16;\n\n    if (!$element.length) {\n      const avatarBox = $('#wrtcLinesIcons').tmpl({headerId, offsetTop, userId: clientVars.userId});\n      $element = $bodyAceOuter().find('#wbrtc_avatarCol')\n          .append(avatarBox);\n      $element = $element.find(`.${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n    }\n\n    const $videoInlineAvatarIcons = $bodyAceOuter()\n        .find('#wbrtc_avatarCol .wrtc_inlineAvatars');\n\n    $element.find('.avatar').remove();\n    Object.keys(room).forEach((key, index) => {\n      const userInList = getUserFromId(room[key].userId) ||\n        {colorId: '', name: 'anonymous'};\n\n      if (userInList.userId) {\n        // if user avatar find in other room remove it\n        $videoInlineAvatarIcons.find(`.avatar[data-id=\"${userInList.userId}\"]`).remove();\n\n        if (index < inlineAvatarLimit) {\n          const userName = userInList.name || 'anonymous';\n          $element.find('.avatarMore').hide();\n          $element.append(`\n            <div\n              class=\"avatar btn_roomHandler\"\n              data-join=\"popup\"\n              data-action=\"USERPROFILEMODAL\"\n              data-id=\"${userInList.userId}\"\n            >\n              <div\n                title='${userName}'\n                style=\"\n                  background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50%;\n                  background-size : cover;\"\n              >\n              </div>\n            </div>`);\n        } else {\n          $element.find('.avatarMore').show()\n              .text(`+${index + 1 - inlineAvatarLimit}`);\n        }\n      }\n    });\n  },\n  VIDEO: function VIDEO(headerId, room) {\n    const $element = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n    if (!clientVars.webrtc.displayInlineAvatar) {\n      $element.hide();\n      return;\n    }\n    $element.show();\n    $element.find('.avatar').remove();\n    this._append(room.list, $element);\n  },\n  _append: (list, $element) => {\n    if (!list) return;\n    const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n    list.forEach((el, index) => {\n      const userInList = getUserFromId(el.userId) || {colorId: '', name: 'anonymous'};\n      if (userInList.userId) {\n        if (index < inlineAvatarLimit) {\n          const userName = userInList.name || 'anonymous';\n          $element.find('.avatarMore').hide();\n          $element.append(`\n          <div\n            class=\"avatar btn_roomHandler\"\n            data-join=\"popup\"\n            data-action=\"USERPROFILEMODAL\"\n            data-id=\"${userInList.userId}\"\n          >\n            <div\n              title='${userName}'\n              style=\"\n                background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50%;\n                background-size : cover;\n              \"\n            >\n              </div>\n          </div>`);\n        } else {\n          $element.find('.avatarMore').show()\n              .text(`+${index + 1 - inlineAvatarLimit}`);\n        }\n      }\n    });\n  },\n  update: (userId, data) => {\n    if (!clientVars.webrtc.displayInlineAvatar) return;\n\n    const $roomBox = $bodyAceOuter()\n        .find('#wrtcVideoIcons .wrtcIconLine .wrtc_inlineAvatars');\n    const $videoBox = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n\n    if ($roomBox) {\n      $roomBox.find(`.avatar[data-id=\"${userId}\"] img`).attr({\n        src: data.imageUrl,\n        title: data.userName,\n      });\n    }\n\n    if ($videoBox) {\n      $videoBox.find('.avatar img').attr({\n        src: data.imageUrl,\n        title: data.userName,\n      });\n    }\n  },\n};\n\nexport const getHeaderRoomY = ($element) => {\n  if (!$element.length) return;\n  const height = $element.outerHeight();\n  const paddingTop = $bodyAceOuter()\n      .find('iframe[name=\"ace_inner\"]')\n      .css('padding-top');\n  const aceOuterPadding = parseInt(paddingTop, 10);\n  const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n  return offsetTop + height / 2;\n};\n\nexport const getHeaderRoomX = ($element) => {\n  if (!$element.length) return;\n  const width = $element.outerWidth();\n  const aceInner = $bodyAceOuter().find('iframe[name=\"ace_inner\"]');\n  const paddingLeft = aceInner.css('padding-left');\n  const aceOuterPadding = parseInt(paddingLeft, 10);\n  const offsetLeft = Math.ceil(aceInner.offset().left - aceOuterPadding);\n  return offsetLeft - width - 6;\n};\n","import * as Helper from './helpers';\nimport * as videoChat from './videoChat';\n\nconst showGeneralOverlay = () => {\n  $('#ep_profile_general_overlay').addClass('ep_profile_formModal_overlay_show');\n  $('#ep_profile_general_overlay').css({display: 'block'});\n};\n\nconst hideGeneralOverlay = () => {\n  $('#ep_profile_general_overlay').removeClass('ep_profile_formModal_overlay_show');\n  $('#ep_profile_general_overlay').css({display: 'none'});\n  $('#ep_profile_modal').removeClass('ep_profile_modal-show');\n  $('#ep_profile_modal_user_list').removeClass('ep_profile_modal-show');\n  $('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n};\n\nexport default (() => {\n  let socket = null;\n  let padId = null;\n  let VIDEOCHATLIMIT = 0;\n  let tryToJoinByQueryString = 0;\n\n  /** --------- Helper --------- */\n\n  const scroll2Header = (headerId) => {\n    const padContainer = $('iframe[name=\"ace_outer\"]')\n        .contents()\n        .find('iframe')\n        .contents();\n    const header = padContainer.find(`.${headerId}`);\n    if (header.length === 0) return false;\n    header[0].scrollIntoView({\n      behavior: 'smooth',\n    });\n  };\n\n  function shareRoomsLink(headId, target) {\n    headId = $(this).attr('data-id') || headId;\n    target = $(this).attr('data-join') || target;\n    target = target.toLowerCase();\n\n    const title = Helper.$bodyAceOuter()\n        .find('iframe')\n        .contents()\n        .find('#innerdocbody')\n        .find(`.heading.${headId}`)\n        .text();\n\n    const origin = window.location.origin;\n    const pathName = window.location.pathname;\n    const queryString = `header=${Helper.slugify(\n        title\n    )}&id=${headId}&target=${target}&join=true`;\n    const link = `${origin + pathName}?${queryString}`;\n\n    const $temp = $('<input>');\n    $('body').append($temp);\n    $temp.val(link).select();\n    document.execCommand('copy');\n    $temp.remove();\n\n    $.gritter.add({\n      title: 'Copied',\n      text: 'Join link copied to clip board',\n      sticky: false,\n      // eslint-disable-next-line camelcase\n      class_name: 'copyLinkToClipboard',\n      time: '3000',\n    });\n  }\n\n  function showUserProfileModal(headerId) {\n    const userId = $(this).attr('data-id') || headerId;\n    const padId = pad.getPadId();\n    $.ajax({\n      url: `/static/${padId}/pluginfw/ep_profile_modal/getUserInfo/${userId}`,\n      type: 'get',\n      data: {},\n      contentType: false,\n      processData: false,\n      beforeSend: () => {\n        const imageUrl = '../static/plugins/ep_profile_modal/static/dist/img/loading.gif';\n        $('#ep_profile_users_profile_userImage')\n            .css({\n              'background-position': '50% 50%',\n              'background-image': `url(${imageUrl})`,\n              'background-repeat': 'no-repeat',\n              'background-size': '69px',\n            });// , 'background-color': '#3873E0'\n\n        $('#ep_profile_users_profile_name').text('');\n        $('#ep_profile_users_profile_desc').text('');\n\n        $('#ep_profile_users_profile').addClass('ep_profile_formModal_show');\n        showGeneralOverlay();\n      },\n      error: (xhr) => { // if error occurred\n        $('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n        hideGeneralOverlay();\n      },\n      success: (response) => {\n        const imageUrl = `/static/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n        let username = response.user.username;\n        if (!username || username === '') { username = 'Anonymous'; }\n        const about = response.user.about || '';\n        const homepage = response.user.homepage || '';\n\n        $('#ep_profile_users_profile_name').text(username);\n        $('#ep_profile_users_profile_desc').text(about);\n        if (homepage === '') {\n          $('#ep_profile_users_profile_homepage').hide();\n        } else {\n          $('#ep_profile_users_profile_homepage').attr({\n            href: Helper.getValidUrl(homepage),\n            target: '_blank',\n          });\n        }\n\n        $('#ep_profile_users_profile_userImage').css({\n          'background-position': '50% 50%',\n          'background-image': `url(${imageUrl})`,\n          'background-repeat': 'no-repeat',\n          'background-size': '69px',\n        });\n      },\n    });\n  }\n\n  /**\n   *\n   * @param {string} actions @enum (JOIN|LEAVE|RELOAD|SHARELINK|USERPROFILEMODAL|JOINBYQUERY)\n   * @param {string} headerId\n   * @param {string} target @enum (chatRoom|video|text)\n   */\n  function roomBtnHandler(actions, headerId, target) {\n    if (typeof actions !== 'string') {\n      actions.preventDefault();\n      // no idea! but in some cases! this function fire twice!\n      // the first one has selector, but the second one has not any selector\n      if (!actions.handleObj.selector) return false;\n    }\n\n    headerId = $(this).attr('data-id') || headerId;\n    actions = $(this).attr('data-action') || actions;\n    target = $(this).attr('data-join') || target;\n\n    if (!headerId || !target) return true;\n\n    // If the plugin is disabled\n    if (!Helper.wrtcStore.enable) {\n      console.info('[wrtc]: Plugin disabled');\n      return;\n    }\n\n    const hasHref = $(this).attr('href');\n    // if the link belong to the other pad.\n    // navigate to the new pad\n    // TODO: URL should be sanitize and then decided to navigate\n    if (hasHref) {\n      const url = new URL(hasHref);\n      if (url.pathname !== location.pathname) window.location = hasHref;\n    }\n\n    const userInfo = {\n      padId: clientVars.padId || window.pad.getPadId(),\n      userId: clientVars.userId || window.pad.getUserId(),\n      userName: clientVars.userName || 'anonymous',\n      headerId,\n      target,\n      action: actions,\n    };\n\n    // Before handel request, check socket state\n    if (Helper.wrtcStore.socketState !== 'OPENED') {\n      // show the alert that user must reload the page\n      $.gritter.add({\n        title: 'Video chat no longer responds',\n        text: `\n          The socket is disconnected and we can no longer make a stable call,\n          please go to stable internet and then reload the page.\n        `,\n        sticky: false,\n        // eslint-disable-next-line camelcase\n        class_name: 'error',\n        time: '15000',\n      });\n      return false;\n    }\n\n    if (actions === 'JOIN') {\n      Helper.wrtcPubsub.currentOpenRoom = userInfo;\n      Helper.wrtcPubsub.emit('disable room buttons', headerId, actions, target);\n      videoChat.userJoin(headerId, userInfo, target);\n    } else if (actions === 'LEAVE') {\n      Helper.wrtcPubsub.currentOpenRoom = null;\n      videoChat.userLeave(headerId, userInfo, target);\n    } else if (actions === 'RELOAD') {\n      videoChat.reloadSession(headerId, userInfo, target, actions);\n    } else if (actions === 'SHARELINK') {\n      shareRoomsLink(headerId, target);\n    } else if (actions === 'USERPROFILEMODAL') {\n      showUserProfileModal(headerId);\n    } else if (actions === 'JOINBYQUERY') {\n      const href = $(this).attr('href');\n      joinByQueryString(href);\n    }\n  }\n\n  const joinByQueryString = (url) => {\n    url = url || window.location.href;\n    const urlParams = new URLSearchParams(url);\n    const headerId = urlParams.get('id');\n    let target = urlParams.get('target');\n    const join = urlParams.get('join');\n\n    if (!headerId) return true;\n\n    const inComeURL = new URL(url);\n    const inComePadName = inComeURL.pathname.split('/').pop();\n    const currentPadName = location.pathname.split('/').pop();\n\n    // check if header id belong to this pad\n    // then if it's not check padName\n\n    if (!Helper.wrtcStore.rooms.get(headerId)) {\n      if (inComePadName !== currentPadName) return (window.location.href = url);\n      $.gritter.add({\n        title: 'Error',\n        text: 'The header seems not to exist anymore!',\n        time: 3000,\n        sticky: false,\n        class_name: 'error',\n      });\n      return false;\n    }\n\n    if (headerId) scroll2Header(headerId);\n\n    if (join === 'true' && target) {\n      target = target.toUpperCase();\n\n      if (\n        Helper.wrtcStore.socketState === 'CLOSED' &&\n        tryToJoinByQueryString <= 4\n      ) {\n        setTimeout(() => {\n          console.warn(\n              `[wrtc]: socket state is ${Helper.wrtcStore.socketState}, try to join again!`\n          );\n          tryToJoinByQueryString++;\n          joinByQueryString();\n        }, 1500);\n      } else if (Helper.wrtcStore.socketState === 'OPENED') {\n        setTimeout(() => roomBtnHandler('JOIN', headerId, target), 1000);\n      } else {\n        console.error(`\n          [wrtc]: We try to join ${tryToJoinByQueryString}th,\n          Joining by query string has problem!\n        `,\n        Helper.wrtcStore.socketState,\n        tryToJoinByQueryString\n        );\n      }\n    }\n  };\n\n  // if history state has change fire joinQueryString\n  document.addEventListener('onPushState', (event) => {\n    const {state} = event.detail;\n    if (state.type === 'hyperLink') {\n      const href = state.href;\n      joinByQueryString(href);\n    }\n  });\n\n  const getHeaderRoomY = ($element) => {\n    const height = $element.outerHeight();\n    const paddingTop = Helper.$bodyAceOuter()\n        .find('iframe[name=\"ace_inner\"]')\n        .css('padding-top');\n    const aceOuterPadding = parseInt(paddingTop, 10);\n    const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n    return offsetTop + height / 2 - 22;\n  };\n\n  const activeEventListener = () => {\n    const $AceOuter = Helper.$bodyAceOuter();\n\n    $AceOuter.on('click', '.btn_roomHandler', roomBtnHandler);\n\n    $AceOuter\n        .find('iframe')\n        .contents()\n        .find('#innerdocbody')\n        .on('click', 'chat-inline-icon', function () {\n          const headerId = $(this).attr('headerid');\n          $(document)\n              .find('#header_videochat_icon')\n              .attr({\n                'data-action': 'JOIN',\n                'data-id': headerId,\n              });\n\n          $(document)\n              .find(`#tocItems .itemRow.tocItem[sectionid='${headerId}']`)\n              .trigger('click');\n        });\n\n    // integration with ep_rocketChat\n    $(document).on('click', '#toc .itemRow.tocItem', function () {\n      const headerId = $(this).attr('sectionid');\n      const room = Helper.wrtcStore.rooms.get(headerId);\n\n      if (!room) {\n        console.error('[wrtc]: room does not founded!', headerId, room);\n        return false;\n      }\n\n      // clear the button\n      $('.header_videochat_icon').attr('data-id', headerId);\n      $('.header_videochat_icon .icon').removeClass('active');\n      $('.header_videochat_icon .icon .userCount').text('');\n\n      // check wrtc store\n      const userPresent = room.VIDEO.present === 0 ? '' : room.VIDEO.present;\n      $('.header_videochat_icon .icon .userCount').text(userPresent);\n      // does the current user present in this room\n      const currentUserPresent = room.VIDEO.list && room.VIDEO.list.find(\n          (x) => x.userId === clientVars.userId\n      );\n\n      if (currentUserPresent) $('.header_videochat_icon .icon').addClass('active');\n    });\n\n    $(document).on('click', '.btn_roomHandler, .wrtc_roomLink', roomBtnHandler);\n\n    $(document)\n        .on('mouseenter', '.video-container.local-user', () => {\n          $(document).find('#wrtc_modal #networkStatus')\n              .addClass('active');\n        })\n        .on('mouseleave', '.video-container.local-user', () => {\n          $(document).find('#wrtc_modal #networkStatus')\n              .removeClass('active');\n        });\n\n    $(document).on('click', '#werc_toolbar p',\n        function click() {\n          const headerId = $(this).attr('data-id');\n          scroll2Header(headerId);\n        }\n    );\n\n    $(document).on('click', '#werc_toolbar .btn_enlarge', function click() {\n      if (!$(this).attr('active')) return true;\n\n      $(this).toggleClass('large');\n\n      $('#wrtc_modal .video-container .enlarge-btn').each(function trigger() {\n        $(this).trigger('click');\n      });\n    });\n\n    // video interface settings\n    $(document).on('click', '#werc_toolbar .btn_videoSetting',\n        function click() {\n          const offset = $(this).position();\n          const $box = $(document).find('#wrtc_settings');\n          const width = $box.outerWidth();\n          $box\n              .css({left: `${offset.left - width}px`, top: `${offset.top + 4}px`})\n              .toggleClass('active');\n        }\n    );\n  };\n\n  const self = {\n    joinByQueryString,\n    roomBtnHandler,\n    userLeave: (context, callback) => {\n      // Deprecated, we use socket disconnect\n    },\n    postAceInit: (hookName, context, webSocket, docId) => {\n      socket = webSocket;\n      padId = docId;\n      VIDEOCHATLIMIT = clientVars.webrtc.videoChatLimit;\n      Helper.wrtcPubsub.emit('componentsFlow', 'room', 'init', true);\n\n      socket.on('userJoin', (data, roomInfo, target) => {\n        videoChat.gatewayUserJoin(data, roomInfo, false);\n      });\n\n      socket.on('userLeave', (data, roomInfo, target) => {\n        videoChat.gatewayUserLeave(data, roomInfo, target);\n      });\n\n      activeEventListener();\n\n      // check if there is a join request in URI queryString\n      setTimeout(() => {\n        joinByQueryString();\n      }, 500);\n    },\n    adoptHeaderYRoom: () => {\n      // Set all video_heading to be inline with their target REP\n      const $padOuter = Helper.$bodyAceOuter();\n      if (!$padOuter) return;\n\n      // TODO: performance issue\n      $padOuter\n          .find('#wbrtc_avatarCol .wrtcIconLine')\n          .each(function adjustHeaderIconPosition() {\n            const $el = $(this);\n            const $headerId = $el.attr('id');\n            const $headingEl = Helper.findAceHeaderElement($headerId).$el;\n\n            // if the H tags does not find, remove chatBox\n            // TODO: and kick out the user form the chatBox\n            if ($headingEl.length <= 0) {\n              $el.remove();\n              return false;\n            }\n\n            $el.css({top: `${Helper.getHeaderRoomY($headingEl) - 14}px`});\n          });\n    },\n    appendVideoIcon: (headerId, options = {createAgain: false}) => {\n      if (!headerId) return false;\n\n      const roomExist = Helper.wrtcStore.rooms.has(headerId);\n      if (!options.createAgain && roomExist) return false;\n\n      const $elRoomExist = Helper.findAceHeaderElement(headerId);\n\n      if (!roomExist && $elRoomExist.exist) {\n        const $el = Helper.$bodyAceOuter()\n            .find('iframe')\n            .contents()\n            .find('#innerdocbody')\n            .children('div')\n            .find(`.heading.${headerId}`);\n\n        const aceInnerOffset = Helper.$bodyAceOuter()\n            .find('iframe[name=\"ace_inner\"]')\n            .offset();\n\n        const target = Helper.$bodyAceOuter().find('#outerdocbody');\n        const newY = getHeaderRoomY($el);\n        const newX = Math.ceil(aceInnerOffset.left);\n        const lineNumber = $el.parent().parent()\n            .prevAll().length;\n\n        const data = {\n          headingTagId: headerId,\n          positionTop: newY,\n          positionLeft: newX,\n          headTitle: $el.text(),\n          lineNumber,\n          videoChatLimit: VIDEOCHATLIMIT,\n          userId: clientVars.userId,\n        };\n\n        Helper.wrtcStore.rooms.set(headerId, {\n          VIDEO: {list: []},\n          USERS: {},\n          headerCount: 0,\n        });\n\n        const box = $('#wrtcLinesIcons').tmpl(data);\n        target.find('#wrtcVideoIcons').append(box);\n        // check the room that has user in there\n        // padId, headerId\n        socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n          if (result) Helper.inlineAvatar.ROOM(headerId, result);\n        });\n      }\n\n      self.adoptHeaderYRoom();\n    },\n    syncVideoAvatars: (headerId) => {\n      if (!socket) return false;\n      socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n        if (result) Helper.inlineAvatar.ROOM(headerId, result);\n      });\n    },\n  };\n\n  return self;\n})();\n","import debounce from 'lodash-es/debounce';\nimport ioClient from 'socket.io-client';\nimport './lib/getUserMediaPolyfill';\nimport './lib/adapter';\nimport * as Helper from './lib/helpers';\nimport WRTC from './lib/webrtc';\nimport WrtcRoom from './lib/webrtcRoom';\nimport * as videoChat from './lib/videoChat';\n\nconst getSocket = () => window.pad && window.pad.socket;\n\nconst enableWrtcHeading = () => {\n  Helper.wrtcPubsub.emit('plugin enable', true);\n};\n\nconst disableWrtcHeading = () => {\n  Helper.wrtcPubsub.emit('plugin enable', false);\n};\n\nconst initialWebSocket = (ace, padId, userId) => {\n  // socket connection\n  let newIo = ioClient;\n  const {\n    webSocket: {OPENED, DISCONNECTED},\n  } = Helper.wrtcStore.staticVar;\n\n  const loc = document.location;\n  const port = loc.port === '' ? loc.protocol === 'https:' ? 443 : 80 : loc.port;\n  let socketURL = clientVars.webrtc.socketRemoteAddress;\n  // if plugin run in the localhost or mention\n  // manually use The Etherpad socket instead of ws-gateway\n  if (clientVars.webrtc.useEtherpadSocket || loc.hostname === 'localhost') {\n    newIo = io;\n    socketURL = `${loc.protocol}//${loc.hostname}:${port}`;\n  }\n\n  socketURL = `${socketURL}/${clientVars.webrtc.socketNamespace}`;\n\n  console.info(`socket address: ${socketURL}`);\n\n  const socket = newIo.connect(socketURL, {\n    reconnectionDelay: 1000,\n    autoConnect: true,\n    reconnection: true,\n    transports: ['websocket'], // 'polling'\n  });\n\n  // unfortunately when reconnection happen, etherpad break down totally\n  socket.on('connect', () => {\n    socket.emit('join pad', padId, userId);\n    Helper.wrtcPubsub.emit('socket state', OPENED, socket);\n  });\n\n  // reason (String) either io server disconnect,\n  // io client disconnect, or ping timeout\n  socket.on('disconnect', (reason) => {\n    console.error('[wrtc]: socket disconnection, reason:', reason);\n    Helper.wrtcPubsub.emit('socket state', DISCONNECTED, socket);\n  });\n\n  socket.on('connect_error', (error) => {\n    console.error('[wrtc]: socket connect_error:', error);\n    Helper.wrtcPubsub.emit('socket state', DISCONNECTED, socket);\n  });\n\n  return socket;\n};\n\nexport const postAceInit = (hookName, context) => {\n  const videoSettings = localStorage.getItem('videoSettings');\n  if (!videoSettings) {\n    const data = JSON.stringify({microphone: null, speaker: null, camera: null});\n    localStorage.setItem('videoSettings', data);\n  }\n\n  // If the ep_profile_modal plugin is disabled\n  if (!clientVars.plugins.plugins.ep_profile_modal) {\n    clientVars.webrtc.displayInlineAvatar = false;\n  }\n\n  // Bridge into the ep_profiles\n  window.clientVars.ep_profile_list = {};\n  getSocket().on('message', (obj) => {\n    if (obj.type === 'COLLABROOM' && obj.data && obj.data.type === 'CUSTOM') {\n      const data = obj.data.payload;\n      if (data.action === 'EP_PROFILE_USERS_LIST') {\n        data.list.forEach((el) => {\n          if (!window.clientVars.ep_profile_list[el.userId]) {\n            window.clientVars.ep_profile_list[el.userId] = {};\n          }\n\n          window.clientVars.ep_profile_list[el.userId] = el;\n        });\n      }\n      if (data.action === 'EP_PROFILE_USER_LOGIN_UPDATE') {\n        window.clientVars.ep_profile_list[data.userId] = data;\n        if (Helper && Helper.wrtcPubsub) {\n          Helper.wrtcPubsub.emit('update inlineAvatar info', data.userId, data);\n        }\n      }\n    }\n  });\n\n  const ace = context.ace;\n  const userId = window.pad.getUserId() || clientVars.padId;\n  const padId = window.pad.getPadId() || clientVars.userId;\n\n  // TODO: make sure the priority of these components are in line\n  // TODO: make sure clientVars contain all data that's necessary\n\n  if (!clientVars.userId || !clientVars.padId) {\n    throw new Error(\"[wrtc]: clientVars doesn't exists\");\n  }\n\n  const socket = initialWebSocket(ace, padId, userId);\n  WRTC.postAceInit(hookName, context, socket, padId);\n  // Helper.init(context);\n  videoChat.postAceInit(hookName, context, socket, padId);\n  WrtcRoom.postAceInit(hookName, context, socket, padId);\n\n  // When Editor is ready, append video modal to body\n  $('#editorcontainer iframe').ready(() => {\n    WRTC.appendVideoModalToBody();\n  });\n\n  // module settings\n  $('#options-wrtc-heading').on('change', (e) => {\n    const activated = $('#options-wrtc-heading').is(':checked');\n    activated ? enableWrtcHeading() : disableWrtcHeading();\n  });\n\n  window.onerror = (message, source, lineno, colno, error) => {\n    console.error('[wrtc]: windows error, close stream');\n    if (window.headerId) videoChat.catchBrowserError(clientVars.userId, window.headerId);\n  };\n\n  // find containers\n  const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n  const outerBody = padOuter.find('#outerdocbody');\n\n  // insert wbrtc containers\n  const $target = outerBody;\n  if ($target.find('#wbrtc_avatarCol').length) return false;\n  $target.prepend('<div id=\"wbrtc_avatarCol\" class=\"usersIconList\"></div>');\n\n\n  $(window).resize(debounce(WrtcRoom.adoptHeaderYRoom, 250));\n};\n\nexport const aceEditEvent = (hookName, context) => {\n  const eventType = context.callstack.editEvent.eventType;\n  // ignore these types\n  const invalidTypes = 'handleClick,idleWorkTimer,setup,importText,setBaseText,setWraps';\n  if (invalidTypes.includes(eventType)) return;\n\n  // when a new line create\n  if (context.callstack.domClean) WrtcRoom.adoptHeaderYRoom();\n};\n\nexport const aceEditorCSS = () => {\n  const version = clientVars.webrtc.version || 1;\n  if ($('body').hasClass('mobileView')) {\n    return [`ep_wrtc_heading/static/dist/css/innerLayer_mobile.css?v=${version}`];\n  }\n  return [`ep_wrtc_heading/static/dist/css/innerLayer.css?v=${version}`];\n};\n\nexport const userLeave = (hookName, context) => {\n  WrtcRoom.userLeave(context);\n  WRTC.userLeave(null, context);\n  return;\n};\n\nexport const handleClientMessage_RTC_MESSAGE = (hookName, context) => {\n  WRTC.handleClientMessage_RTC_MESSAGE(hookName, context);\n  return;\n};\n\nexport const acePostWriteDomLineHTML = (hookName, context) => {\n  const hasHeader = $(context.node).find(':header');\n  if (hasHeader.length) {\n    const headerId = hasHeader.attr('data-id');\n    // FIXME: performance issue\n    setTimeout(() => {\n      WrtcRoom.syncVideoAvatars(headerId);\n    }, 250);\n  }\n  return;\n};\n\n// TODO: refactor\nexport const aceDomLineProcessLineAttributes = (hookName, context) => {\n  const cls = context.cls;\n  const headingType = /(?:^| )headerId:([A-Za-z0-9]*)/.exec(cls);\n  const result = [];\n  if (typeof Helper === 'undefined') return result;\n\n  if (headingType) {\n    const headerType = /(?:^| )heading:([A-Za-z0-9]*)/.exec(cls);\n    const headerId = headingType[1];\n    const htagNum = headerType && headerType[1];\n\n    // if video modal is open! update modal title\n    if (Helper.wrtcStore.components.video.open) {\n      const $header = Helper.findAceHeaderElement(headerId);\n      Helper.wrtcPubsub.emit('updateWrtcToolbarTitleModal', $header.text, headerId);\n    }\n\n    const mobileAttr = $('body').hasClass('mobileView') ? 'mobile' : 'desktop';\n\n    const modifier = {\n      preHtml: '',\n      postHtml: `<chat-inline-icon headerid=\"${headerId}\" ${mobileAttr}></chat-inline-icon>`,\n      processedMarker: true,\n    };\n\n    Helper.wrtcStore.rooms.set(headerId, {\n      VIDEO: {list: []},\n      USERS: {},\n      headerCount: 0,\n    });\n    if (htagNum && Helper.hTags.includes(htagNum)) result.push(modifier);\n  }\n\n  return result;\n};\n"],"names":["isObject","value","type","global","Object","freeSelf","self","freeGlobal","Function","root","Date","now","reWhitespace","reTrimStart","baseTrim","string","slice","index","length","test","charAt","trimmedEndIndex","replace","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","baseGetTag","isOwn","call","tag","unmasked","e","result","getRawTag","objectToString","isSymbol","_typeof","isObjectLike","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","this","clearTimeout","cancel","flush","re","parts","parseuri","str","src","b","indexOf","substring","query","data","m","exec","uri","i","source","host","authority","ipv6uri","pathNames","obj","path","regx","names","split","substr","splice","queryKey","$0","$1","$2","s","h","d","w","y","ms","val","String","match","n","parseFloat","toLowerCase","parse","isFinite","msAbs","abs","plural","fmtLong","round","fmtShort","Error","JSON","stringify","name","isPlural","common","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","enabled","curr","Number","diff","prev","coerce","unshift","format","formatter","formatters","formatArgs","logFn","log","useColors","color","selectColor","extend","destroy","defineProperty","enumerable","configurable","get","namespaces","set","v","init","delimiter","newDebug","toNamespace","regexp","stack","message","disable","map","skips","join","enable","save","len","push","RegExp","humanize","require$$0","console","warn","keys","forEach","key","hash","charCodeAt","colors","load","warned","exports","module","c","lastC","storage","setItem","removeItem","error","r","getItem","process","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","localStorage","localstorage","j","url_1","require$$1","loc","location","protocol","port","ipv6","id","href","hasCorsModule","XMLHttpRequest","err","globalThis_browser","hasCORS","globalThis","xmlhttprequest","opts","xdomain","xscheme","enablesXDR","XDomainRequest","concat","PACKET_TYPES","create","PACKET_TYPES_REVERSE","chars","commons","ERROR_PACKET","withNativeBlob","Blob","withNativeArrayBuffer","ArrayBuffer","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","readAsDataURL","encodePacket_browser","supportsBinary","isView","buffer","arraybuffer","bytes","Uint8Array","base64","encoded1","encoded2","encoded3","encoded4","bufferLength","p","base64decoder","decodeBase64Packet","binaryType","decoded","decode","mapBinary","encodePacket","decodePacket","encodedPacket","SEPARATOR","fromCharCode","lib","encodePayload","packets","encodedPackets","Array","count","packet","decodePayload","encodedPayload","decodedPacket","Emitter","mixin","on","addEventListener","event","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","emit","listeners","hasListeners","parser","require$$2","Transport","readyState","socket","msg","desc","description","doOpen","doClose","onClose","write","writable","onPacket","transport","encodeURIComponent","qs","qry","pairs","l","pair","decodeURIComponent","alphabet","seed","encode","num","encoded","floor","yeast","yeast_1","parseqs","require$$3","require$$4","Polling","poll","onPause","pause","polling","total","doPoll","onOpen","close","_this","doWrite","schema","secure","timestampRequests","timestampParam","sid","b64","hostname","attr","reduce","acc","k","pick","require$$5","empty","hasXHR2","responseType","XHR","isSSL","xd","xs","forceBase64","assign","Request","req","request","method","onError","onData","pollXhr","async","xhr","open","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","hasXDR","onLoad","onerror","responseText","onreadystatechange","status","send","requestsCount","requests","cleanup","onSuccess","fromError","abort","attachEvent","unloadHandler","pollingXhrModule","rNewline","rEscapedNewline","pollingJsonp","___eio","script","parentNode","removeChild","form","iframe","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","area","iframeId","className","position","top","left","target","setAttribute","complete","initIframe","html","action","submit","websocketConstructor_browser","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","require$$6","isReactNative","product","WS","check","protocols","headers","ws","addEventListeners","onopen","onclose","onmessage","ev","done","websocket","JSONP","jsonp","forceJSONP","transports","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","o","clone","EIO","priorWebsocketSuccess","createTransport","shift","setTransport","onDrain","probe","failed","onTransportOpen","onlyBinaryUpgrades","upgradeLosesBinary","upgrading","freezeTransport","onTransportClose","onupgrade","to","onHandshake","resetPingTimeout","sendPacket","code","filterUpgrades","_this2","compress","cleanupAndClose","waitForUpgrade","reason","pingIntervalTimer","filteredUpgrades","libModule","isBinary_1","withNativeFile","File","hasBinary","toJSON","isArray","binary","is_binary_1","_deconstructPacket","buffers","placeholder","_placeholder","newData","_reconstructPacket","packetData","pack","attachments","PacketType","binary_1","Encoder","EVENT","ACK","encodeAsString","BINARY_EVENT","BINARY_ACK","encodeAsBinary","nsp","deconstruction","deconstructPacket","Decoder","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","start","buf","next","payload","tryParse","isPayloadValid","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","reconPack","binData","reconstructPacket","on_1","socket_io_parser_1","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","receiveBuffer","sendBuffer","ids","acks","flags","connected","disconnected","auth","_autoConnect","subs","bind","onpacket","subEvents","_readyState","pop","isTransportWritable","engine","discardPacket","_packet","onconnect","onevent","onack","ondisconnect","ack","emitEvent","_anyListeners","sent","emitBuffered","_this3","subDestroy","listener","backo2","Backoff","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","manager","eio","socket_1","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","_reconnection","_reconnectionAttempts","_a","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","_reconnecting","reconnect","skipReconnect","openSubDestroy","errorSub","maybeReconnectOnOpen","timer","onping","ondata","ondecoded","add","active","_close","delay","onreconnect","attempt","manager_1","lookup","cache","parsed","url","sameNamespace","forceNew","multiplex","manager_2","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","constraints","Promise","resolve","reject","stream","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer","t","f","require","u","a","adapter","adapterFactory","utils","_interopRequireWildcard","chromeShim","firefoxShim","safariShim","commonShim","sdp","__esModule","newObj","default","shimChrome","shimFirefox","shimSafari","logging","browserDetails","detectBrowser","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","version","browserShim","shimAddIceCandidateNullOrEmpty","shimParameterlessSetLocalDescription","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeExtmapAllowMixed","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","shimGetDisplayMedia","iterator","constructor","_getusermedia","_getdisplaymedia","shimAddTrackRemoveTrackWithNative","_defineProperty","MediaStream","webkitMediaStream","_ontrack","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","find","track","Event","transceiver","streams","dispatchEvent","getTracks","wrapPeerConnectionEvent","shimSenderWithDtmf","pc","dtmf","_dtmf","kind","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","origAddStream","addStream","origRemoveStream","removeStream","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","getStats","_this5","_arguments","selector","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","stat","makeMapStats","stats","Map","successCallbackWrapper_","then","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","DOMException","getLocalStreams","_this8","_shimmedLocalStreams","streamId","_this9","alreadyExists","existingSenders","newSenders","filter","newSender","_this10","origGetLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","newStream","_this13","signalingState","oldStream","nativeMethod","methodObj","_this14","replaceInternalStreamId","origSetLocalDescription","setLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","_this15","streamid","internalId","externalStream","internalStream","RTCSessionDescription","RTCIceCandidate","getConfiguration","sdpSemantics","getSourceId","getDisplayMedia","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","constraintsToChrome_","optional","cc","ideal","exact","oldname_","prefix","toUpperCase","oc","mix","advanced","shimConstraints_","audio","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia_","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","_sdp2","_interopRequireDefault","NativeRTCIceCandidate","candidate","nativeCandidate","parsedCandidate","parseCandidate","augmentedCandidate","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","mediaSection","mLine","parseMLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","isFirefox","canSendMMS","remoteMMS","POSITIVE_INFINITY","sctp","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","size","byteLength","proto","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","nativeSRD","line","trim","nativeAddIceCandidate","addIceCandidate","nativeSetLocalDescription","createOffer","createAnswer","RTCTrackEvent","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","deprecated","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","rid","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","catch","origGetParameters","origCreateOffer","_arguments2","all","finally","origCreateAnswer","_arguments3","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","shimConstraints","_localStreams","_addTrack","_len","_key","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","errcb","compactObject","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","generateCertificate","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","AudioContext","webkitAudioContext","walkStats","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","bool","oldMethod","newMethod","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","accumulator","isObj","isEmptyObject","base","resultSet","endsWith","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","SDPUtils","localCName","generateIdentifier","splitLines","blob","part","getDescription","getMediaSections","foundation","component","priority","ip","address","relatedAddress","relatedPort","tcpType","ufrag","writeCandidate","parseIceOptions","parseRtpMap","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","getDirection","getKind","isRejected","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","mediaStreamTrack","interval","that","browserFakeUserAgent","captureStream","mozCaptureStream","getContext","play","drawImage","toDataURL","HTMLVideoElement","screen","URL","createObjectURL","revokeObjectURL","getStatsResult","encryption","availableBandwidth","framerateMean","bitrateMean","recv","bytesSent","bytesReceived","latency","packetsLost","systemBandwidth","sentPerSecond","encodedPerSecond","helper","audioBytesSent","videoBytestSent","speed","results","connectionType","systemNetworkType","connection","systemIpAddress","local","candidateType","ipAddress","networkType","remote","resolutions","internal","candidates","nomore","getStatsParser","checkIfOfferer","isOfferer","googInitiator","isSafari","peer","getStatsLooper","getStatsWrapper","search","datachannel","state","ended","videoBytesSent","InstallTrigger","res","items","item","googCertificate","googFingerprintAlgorithm","fingerprintAlgorithm","checkAudioTracks","mediaType","sendrecvType","isRemote","googCodecName","kilobytes","prevBytesSent","toFixed","prevBytesReceived","googTrackId","googCurrentDelayMs","prevGoogCurrentDelayMs","prevPacketsLost","checkVideoTracks","googFrameHeightReceived","googFrameWidthReceived","googFrameHeightSent","googFrameWidthSent","prevFramerateMean","prevBitrateMean","bweforvideo","availableSendBandwidth","googAvailableSendBandwidth","googActualEncBitrate","googAvailableReceiveBandwidth","googRetransmitBitrate","googTargetEncBitrate","googBucketDelay","googTransmitBitrate","candidatePair","googActiveConnection","cid","googLocalAddress","googRemoteAddress","googTransportType","localCandidate","localCandidateId","remoteCandidate","remoteCandidateId","selected","nominated","mozLocalTransport","mozRemoteTransport","availableOutgoingBitrate","prevAvailableOutgoingBitrate","availableIncomingBitrate","prevAvailableIncomingBitrate","LOCAL_candidateType","LOCAL_transport","LOCAL_ipAddress","LOCAL_networkType","portNumber","REMOTE_candidateType","REMOTE_transport","REMOTE_ipAddress","REMOTE_networkType","dataSentReceived","remoteSource","frameWidth","frameHeight","SSRC","findLine","sdpLines","startLine","endLine","realEndLine","getCodecPayloadType","sdpLine","pattern","setApplicationSpecificBandwidth","isScreen","regex","setVideoBitrates","xgoogleMinBitrate","xgoogleMaxBitrate","videoCodec","vp8Index","vp8Payload","rtxIndex","rtxPayload","rtxFmtpLineIndex","appendrtxNext","_setVideoBitrates","setOpusAttributes","opusIndex","opusPayload","opusFmtpLineIndex","appendOpusNext","stereo","maxaveragebitrate","maxplaybackrate","cbr","useinbandfec","usedtx","_setOpusAttributes","cleanupSdp","minVideo","maxVideo","clientVars","webrtc","CodecsHandler.setApplicationSpecificBandwidth","CodecsHandler.setVideoBitrates","codecName","info","videoCodecNumbers","codecNumber","videoCodecNumbersOriginal","vp8LineNumber","vp9LineNumber","h264LineNumber","ignore","preferCodecNumber","newLine","newOrder","preferCodecHelper","CodecsHandler.preferCodec","CodecsHandler.setOpusAttributes","reconnected","videoSizes","large","small","DtlsSrtpKeyAgreement","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","remoteStream","enlargedVideos","Set","localVideoElement","padId","postAceInit","hookName","context","webSocket","docId","sizes","_pad","pad","$","audioVideoInputChange","changeAudioDestination","hangupAll","Helper.getUserId","headerId","receiveMessage","appendVideoModalToBody","$wrtcVideoModal","tmpl","videoChatLimit","prepend","$parent","parent","videoBox","innerHeight","toggle","removeAttr","css","transform","userID","$this","isActive","$modal","hide","show","toggleClass","$btnInfo","trigger","userLeave","userId","userInfo","hangup","Helper.wrtcStore","userInRoom","handleClientMessage_RTC_MESSAGE","hook","addClass","videoChat.mediaDevices","showUserMediaError","sendErrorStat","gritter","title","text","sticky","class_name","videoChat.userLeave","remove","activate","deactivate","localstream","Helper.stopStreaming","toggleMuted","audioTrack","toggleVideo","videoTrack","setStream","isLocal","videoId","user","Helper.getUserFromId","videoContainer","appendTo","userName","append","colorId","loadedmetadata","addInterface","autoplay","muted","element","srcObject","mozSrcObject","attachMediaStream","$video","$mute","click","$disableVideo","videoEnabled","videoEnlarged","$largeVideo","videoSize","hasClass","$networkLatency","insertAfter","statName","sendMessage","socketIdTo","from","createPeerConnection","localStreams","offer","answer","logError","_headerId","notify","prop","cons1","cons2","merged","mergeConstraints","onicecandidate","oniceconnectionstatechange","ontrack","onremovestream","attachSinkId","sinkId","setSinkId","errorMessage","selectedIndex","audioOutputSelect","querySelector","audioDestination","videoElement","removeClass","videoChat.isUserMediaAvailable","Helper.wrtcPubsub","collabClient","getConnectedUsers","attemptToReconnect","currentRoom","VIDEOCHATLIMIT","$joinBtn","networkInterval","pingos","startTime","LMin","LMax","avg","LineAvg","normal","warning","danger","interavCheck","reachedVideoRoomSize","roomInfo","showAlert","isBulkUpdate","present","addUserToRoom","userCount","setInterval","videoBtn","Helper.findAceHeaderElement","$inlineIcon","classList","WRTC","opacity","gatewayUserJoin","bulkUpdate","stopWatchNetwork","clearInterval","deviceInputs","videoSettings","microphone","speaker","camera","audioInputSection","audioOutputSection","videoSection","audioInputElement","audioOutputElement","deviceInfo","option","isUserMediaAvailable","audioInputSelect","videoSelect","audioSource","videoSource","audioOutput","mediaConstraints","newSettings","catchBrowserError","gatewayUserLeave","Helper.$bodyAceOuter","removeUserFromRoom","createSession","$joinButton","participators","x","_userData","reloadSession","ceil","getPadId","getUserId","getAvatarUrl","getTime","hTags","getValidUrl","newUrl","stopStreaming","wrtcStore","getUserFromId","anonymousUser","slugify","$bodyAceOuter","contents","findAceHeaderElement","$el","exist","offset","getHeaderRoomY","getHeaderRoomX","shadowRoot","wrtcPubsub","events","eventName","epProfileState","currentOpenRoom","socketState","components","room","wrtc","rooms","globalVar","staticVar","DISCONNECTED","OPENED","each","el","display","flow","displayInlineAvatar","inlineAvatar","update","requestUser","VIDEO","list","TEXT","USERS","headerCount","users","ROOM","actions","btn","newAction","removeAttribute","headerTile","inlineAvatarLimit","$element","offsetTop","avatarBox","$videoInlineAvatarIcons","userInList","_append","$roomBox","$videoBox","imageUrl","outerHeight","paddingTop","aceOuterPadding","outerWidth","aceInner","paddingLeft","headerText","origin","pathname","tryToJoinByQueryString","scroll2Header","header","scrollIntoView","behavior","showUserProfileModal","ajax","contentType","processData","beforeSend","success","about","homepage","Helper.getValidUrl","roomBtnHandler","preventDefault","handleObj","hasHref","videoChat.userJoin","videoChat.reloadSession","headId","link","Helper.slugify","$temp","select","execCommand","shareRoomsLink","joinByQueryString","urlParams","URLSearchParams","inComePadName","currentPadName","detail","activeEventListener","$AceOuter","userPresent","$box","videoChat.gatewayUserJoin","videoChat.gatewayUserLeave","adoptHeaderYRoom","$padOuter","$headerId","$headingEl","Helper.getHeaderRoomY","appendVideoIcon","createAgain","roomExist","$elRoomExist","children","aceInnerOffset","newY","newX","lineNumber","prevAll","headingTagId","positionTop","positionLeft","headTitle","box","Helper.inlineAvatar","syncVideoAvatars","cls","headingType","Helper","headerType","htagNum","$header","modifier","preHtml","postHtml","processedMarker","Helper.hTags","eventType","callstack","editEvent","domClean","WrtcRoom","hasHeader","node","plugins","ep_profile_modal","ep_profile_list","ace","newIo","ioClient","socketURL","socketRemoteAddress","useEtherpadSocket","socketNamespace","initialWebSocket","videoChat.postAceInit","ready","is","lineno","colno","videoChat.catchBrowserError","$target","resize"],"mappings":"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"}