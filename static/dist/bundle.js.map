{"version":3,"file":"bundle.js","sources":["../../node_modules/lodash-es/isObject.js","../../node_modules/lodash-es/_freeGlobal.js","../../node_modules/lodash-es/_root.js","../../node_modules/lodash-es/now.js","../../node_modules/lodash-es/_trimmedEndIndex.js","../../node_modules/lodash-es/_baseTrim.js","../../node_modules/lodash-es/_Symbol.js","../../node_modules/lodash-es/_getRawTag.js","../../node_modules/lodash-es/_objectToString.js","../../node_modules/lodash-es/_baseGetTag.js","../../node_modules/lodash-es/isSymbol.js","../../node_modules/lodash-es/isObjectLike.js","../../node_modules/lodash-es/toNumber.js","../../node_modules/lodash-es/debounce.js","../../node_modules/parseuri/index.js","../../node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../node_modules/socket.io-client/build/url.js","../../node_modules/has-cors/index.js","../../node_modules/engine.io-client/lib/globalThis.browser.js","../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../node_modules/engine.io-parser/lib/commons.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/engine.io-parser/lib/encodePacket.browser.js","../../node_modules/engine.io-parser/lib/decodePacket.browser.js","../../node_modules/engine.io-parser/lib/index.js","../../node_modules/component-emitter/index.js","../../node_modules/engine.io-client/lib/transport.js","../../node_modules/yeast/index.js","../../node_modules/parseqs/index.js","../../node_modules/engine.io-client/lib/transports/polling.js","../../node_modules/engine.io-client/lib/util.js","../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../node_modules/engine.io-client/lib/transports/websocket-constructor.browser.js","../../node_modules/engine.io-client/lib/transports/websocket.js","../../node_modules/engine.io-client/lib/transports/index.js","../../node_modules/engine.io-client/lib/socket.js","../../node_modules/engine.io-client/lib/index.js","../../node_modules/socket.io-parser/dist/is-binary.js","../../node_modules/socket.io-parser/dist/binary.js","../../node_modules/socket.io-parser/dist/index.js","../../node_modules/socket.io-client/build/on.js","../../node_modules/socket.io-client/build/socket.js","../../node_modules/backo2/index.js","../../node_modules/socket.io-client/build/manager.js","../../node_modules/socket.io-client/build/index.js","../../node_modules/socket.io-client/wrapper.mjs","../js/lib/getUserMediaPolyfill.js","../js/lib/adapter.js","../../node_modules/getstats/getStats.js","../js/lib/codecsHandler.js","../js/lib/webrtc.js","../js/lib/videoChat.js","../js/lib/helpers.js","../js/lib/webrtcRoom.js","../js/index.js"],"sourcesContent":["/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.url = void 0;\nconst parseuri = require(\"parseuri\");\nconst debug = require(\"debug\")(\"socket.io-client:url\");\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nfunction url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug(\"protocol-less url %s\", uri);\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        debug(\"parse %s\", uri);\n        obj = parseuri(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\nexports.url = url;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","module.exports = (() => {\n  if (typeof self !== \"undefined\") {\n    return self;\n  } else if (typeof window !== \"undefined\") {\n    return window;\n  } else {\n    return Function(\"return this\")();\n  }\n})();\n","// browser shim for xmlhttprequest module\n\nconst hasCORS = require(\"has-cors\");\nconst globalThis = require(\"./globalThis\");\n\nmodule.exports = function(opts) {\n  const xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  const xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  const enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) {}\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if (\"undefined\" !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) {}\n\n  if (!xdomain) {\n    try {\n      return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\n        \"Microsoft.XMLHTTP\"\n      );\n    } catch (e) {}\n  }\n};\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\n\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n  PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\n\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\n\nmodule.exports = {\n  PACKET_TYPES,\n  PACKET_TYPES_REVERSE,\n  ERROR_PACKET\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","const { PACKET_TYPES } = require(\"./commons\");\n\nconst withNativeBlob =\n  typeof Blob === \"function\" ||\n  (typeof Blob !== \"undefined\" &&\n    Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n  return typeof ArrayBuffer.isView === \"function\"\n    ? ArrayBuffer.isView(obj)\n    : obj && obj.buffer instanceof ArrayBuffer;\n};\n\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n  if (withNativeBlob && data instanceof Blob) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(data, callback);\n    }\n  } else if (\n    withNativeArrayBuffer &&\n    (data instanceof ArrayBuffer || isView(data))\n  ) {\n    if (supportsBinary) {\n      return callback(data);\n    } else {\n      return encodeBlobAsBase64(new Blob([data]), callback);\n    }\n  }\n  // plain string\n  return callback(PACKET_TYPES[type] + (data || \"\"));\n};\n\nconst encodeBlobAsBase64 = (data, callback) => {\n  const fileReader = new FileReader();\n  fileReader.onload = function() {\n    const content = fileReader.result.split(\",\")[1];\n    callback(\"b\" + content);\n  };\n  return fileReader.readAsDataURL(data);\n};\n\nmodule.exports = encodePacket;\n","const { PACKET_TYPES_REVERSE, ERROR_PACKET } = require(\"./commons\");\n\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n\nlet base64decoder;\nif (withNativeArrayBuffer) {\n  base64decoder = require(\"base64-arraybuffer\");\n}\n\nconst decodePacket = (encodedPacket, binaryType) => {\n  if (typeof encodedPacket !== \"string\") {\n    return {\n      type: \"message\",\n      data: mapBinary(encodedPacket, binaryType)\n    };\n  }\n  const type = encodedPacket.charAt(0);\n  if (type === \"b\") {\n    return {\n      type: \"message\",\n      data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n    };\n  }\n  const packetType = PACKET_TYPES_REVERSE[type];\n  if (!packetType) {\n    return ERROR_PACKET;\n  }\n  return encodedPacket.length > 1\n    ? {\n        type: PACKET_TYPES_REVERSE[type],\n        data: encodedPacket.substring(1)\n      }\n    : {\n        type: PACKET_TYPES_REVERSE[type]\n      };\n};\n\nconst decodeBase64Packet = (data, binaryType) => {\n  if (base64decoder) {\n    const decoded = base64decoder.decode(data);\n    return mapBinary(decoded, binaryType);\n  } else {\n    return { base64: true, data }; // fallback for old browsers\n  }\n};\n\nconst mapBinary = (data, binaryType) => {\n  switch (binaryType) {\n    case \"blob\":\n      return data instanceof ArrayBuffer ? new Blob([data]) : data;\n    case \"arraybuffer\":\n    default:\n      return data; // assuming the data is already an ArrayBuffer\n  }\n};\n\nmodule.exports = decodePacket;\n","const encodePacket = require(\"./encodePacket\");\nconst decodePacket = require(\"./decodePacket\");\n\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n\nconst encodePayload = (packets, callback) => {\n  // some packets may be added to the array while encoding, so the initial length must be saved\n  const length = packets.length;\n  const encodedPackets = new Array(length);\n  let count = 0;\n\n  packets.forEach((packet, i) => {\n    // force base64 encoding for binary packets\n    encodePacket(packet, false, encodedPacket => {\n      encodedPackets[i] = encodedPacket;\n      if (++count === length) {\n        callback(encodedPackets.join(SEPARATOR));\n      }\n    });\n  });\n};\n\nconst decodePayload = (encodedPayload, binaryType) => {\n  const encodedPackets = encodedPayload.split(SEPARATOR);\n  const packets = [];\n  for (let i = 0; i < encodedPackets.length; i++) {\n    const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n    packets.push(decodedPacket);\n    if (decodedPacket.type === \"error\") {\n      break;\n    }\n  }\n  return packets;\n};\n\nmodule.exports = {\n  protocol: 4,\n  encodePacket,\n  encodePayload,\n  decodePacket,\n  decodePayload\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","const parser = require(\"engine.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:transport\");\n\nclass Transport extends Emitter {\n  /**\n   * Transport abstract constructor.\n   *\n   * @param {Object} options.\n   * @api private\n   */\n  constructor(opts) {\n    super();\n\n    this.opts = opts;\n    this.query = opts.query;\n    this.readyState = \"\";\n    this.socket = opts.socket;\n  }\n\n  /**\n   * Emits an error.\n   *\n   * @param {String} str\n   * @return {Transport} for chaining\n   * @api public\n   */\n  onError(msg, desc) {\n    const err = new Error(msg);\n    err.type = \"TransportError\";\n    err.description = desc;\n    this.emit(\"error\", err);\n    return this;\n  }\n\n  /**\n   * Opens the transport.\n   *\n   * @api public\n   */\n  open() {\n    if (\"closed\" === this.readyState || \"\" === this.readyState) {\n      this.readyState = \"opening\";\n      this.doOpen();\n    }\n\n    return this;\n  }\n\n  /**\n   * Closes the transport.\n   *\n   * @api private\n   */\n  close() {\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.doClose();\n      this.onClose();\n    }\n\n    return this;\n  }\n\n  /**\n   * Sends multiple packets.\n   *\n   * @param {Array} packets\n   * @api private\n   */\n  send(packets) {\n    if (\"open\" === this.readyState) {\n      this.write(packets);\n    } else {\n      // this might happen if the transport was silently closed in the beforeunload event handler\n      debug(\"transport is not open, discarding packets\");\n    }\n  }\n\n  /**\n   * Called upon open\n   *\n   * @api private\n   */\n  onOpen() {\n    this.readyState = \"open\";\n    this.writable = true;\n    this.emit(\"open\");\n  }\n\n  /**\n   * Called with data.\n   *\n   * @param {String} data\n   * @api private\n   */\n  onData(data) {\n    const packet = parser.decodePacket(data, this.socket.binaryType);\n    this.onPacket(packet);\n  }\n\n  /**\n   * Called with a decoded packet.\n   */\n  onPacket(packet) {\n    this.emit(\"packet\", packet);\n  }\n\n  /**\n   * Called upon close.\n   *\n   * @api private\n   */\n  onClose() {\n    this.readyState = \"closed\";\n    this.emit(\"close\");\n  }\n}\n\nmodule.exports = Transport;\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","const Transport = require(\"../transport\");\nconst parseqs = require(\"parseqs\");\nconst parser = require(\"engine.io-parser\");\nconst yeast = require(\"yeast\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling\");\n\nclass Polling extends Transport {\n  /**\n   * Transport name.\n   */\n  get name() {\n    return \"polling\";\n  }\n\n  /**\n   * Opens the socket (triggers polling). We write a PING message to determine\n   * when the transport is open.\n   *\n   * @api private\n   */\n  doOpen() {\n    this.poll();\n  }\n\n  /**\n   * Pauses polling.\n   *\n   * @param {Function} callback upon buffers are flushed and transport is paused\n   * @api private\n   */\n  pause(onPause) {\n    const self = this;\n\n    this.readyState = \"pausing\";\n\n    function pause() {\n      debug(\"paused\");\n      self.readyState = \"paused\";\n      onPause();\n    }\n\n    if (this.polling || !this.writable) {\n      let total = 0;\n\n      if (this.polling) {\n        debug(\"we are currently polling - waiting to pause\");\n        total++;\n        this.once(\"pollComplete\", function() {\n          debug(\"pre-pause polling complete\");\n          --total || pause();\n        });\n      }\n\n      if (!this.writable) {\n        debug(\"we are currently writing - waiting to pause\");\n        total++;\n        this.once(\"drain\", function() {\n          debug(\"pre-pause writing complete\");\n          --total || pause();\n        });\n      }\n    } else {\n      pause();\n    }\n  }\n\n  /**\n   * Starts polling cycle.\n   *\n   * @api public\n   */\n  poll() {\n    debug(\"polling\");\n    this.polling = true;\n    this.doPoll();\n    this.emit(\"poll\");\n  }\n\n  /**\n   * Overloads onData to detect payloads.\n   *\n   * @api private\n   */\n  onData(data) {\n    const self = this;\n    debug(\"polling got data %s\", data);\n    const callback = function(packet, index, total) {\n      // if its the first message we consider the transport open\n      if (\"opening\" === self.readyState && packet.type === \"open\") {\n        self.onOpen();\n      }\n\n      // if its a close packet, we close the ongoing requests\n      if (\"close\" === packet.type) {\n        self.onClose();\n        return false;\n      }\n\n      // otherwise bypass onData and handle the message\n      self.onPacket(packet);\n    };\n\n    // decode payload\n    parser.decodePayload(data, this.socket.binaryType).forEach(callback);\n\n    // if an event did not trigger closing\n    if (\"closed\" !== this.readyState) {\n      // if we got data we're not polling\n      this.polling = false;\n      this.emit(\"pollComplete\");\n\n      if (\"open\" === this.readyState) {\n        this.poll();\n      } else {\n        debug('ignoring poll - transport state \"%s\"', this.readyState);\n      }\n    }\n  }\n\n  /**\n   * For polling, send a close packet.\n   *\n   * @api private\n   */\n  doClose() {\n    const self = this;\n\n    function close() {\n      debug(\"writing close packet\");\n      self.write([{ type: \"close\" }]);\n    }\n\n    if (\"open\" === this.readyState) {\n      debug(\"transport open - closing\");\n      close();\n    } else {\n      // in case we're trying to close while\n      // handshaking is in progress (GH-164)\n      debug(\"transport not open - deferring close\");\n      this.once(\"open\", close);\n    }\n  }\n\n  /**\n   * Writes a packets payload.\n   *\n   * @param {Array} data packets\n   * @param {Function} drain callback\n   * @api private\n   */\n  write(packets) {\n    this.writable = false;\n\n    parser.encodePayload(packets, data => {\n      this.doWrite(data, () => {\n        this.writable = true;\n        this.emit(\"drain\");\n      });\n    });\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"https\" : \"http\";\n    let port = \"\";\n\n    // cache busting is forced\n    if (false !== this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    if (!this.supportsBinary && !query.sid) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n        (\"http\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n}\n\nmodule.exports = Polling;\n","module.exports.pick = (obj, ...attr) => {\n  return attr.reduce((acc, k) => {\n    if (obj.hasOwnProperty(k)) {\n      acc[k] = obj[k];\n    }\n    return acc;\n  }, {});\n};\n","/* global attachEvent */\n\nconst XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst Polling = require(\"./polling\");\nconst Emitter = require(\"component-emitter\");\nconst { pick } = require(\"../util\");\nconst globalThis = require(\"../globalThis\");\n\nconst debug = require(\"debug\")(\"engine.io-client:polling-xhr\");\n\n/**\n * Empty function\n */\n\nfunction empty() {}\n\nconst hasXHR2 = (function() {\n  const xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\nclass XHR extends Polling {\n  /**\n   * XHR Polling constructor.\n   *\n   * @param {Object} opts\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    if (typeof location !== \"undefined\") {\n      const isSSL = \"https:\" === location.protocol;\n      let port = location.port;\n\n      // some user agents have empty `location.port`\n      if (!port) {\n        port = isSSL ? 443 : 80;\n      }\n\n      this.xd =\n        (typeof location !== \"undefined\" &&\n          opts.hostname !== location.hostname) ||\n        port !== opts.port;\n      this.xs = opts.secure !== isSSL;\n    }\n    /**\n     * XHR supports binary\n     */\n    const forceBase64 = opts && opts.forceBase64;\n    this.supportsBinary = hasXHR2 && !forceBase64;\n  }\n\n  /**\n   * Creates a request.\n   *\n   * @param {String} method\n   * @api private\n   */\n  request(opts = {}) {\n    Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n    return new Request(this.uri(), opts);\n  }\n\n  /**\n   * Sends data.\n   *\n   * @param {String} data to send.\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const req = this.request({\n      method: \"POST\",\n      data: data\n    });\n    const self = this;\n    req.on(\"success\", fn);\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr post error\", err);\n    });\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    debug(\"xhr poll\");\n    const req = this.request();\n    const self = this;\n    req.on(\"data\", function(data) {\n      self.onData(data);\n    });\n    req.on(\"error\", function(err) {\n      self.onError(\"xhr poll error\", err);\n    });\n    this.pollXhr = req;\n  }\n}\n\nclass Request extends Emitter {\n  /**\n   * Request constructor\n   *\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts) {\n    super();\n    this.opts = opts;\n\n    this.method = opts.method || \"GET\";\n    this.uri = uri;\n    this.async = false !== opts.async;\n    this.data = undefined !== opts.data ? opts.data : null;\n\n    this.create();\n  }\n\n  /**\n   * Creates the XHR object and sends the request.\n   *\n   * @api private\n   */\n  create() {\n    const opts = pick(\n      this.opts,\n      \"agent\",\n      \"enablesXDR\",\n      \"pfx\",\n      \"key\",\n      \"passphrase\",\n      \"cert\",\n      \"ca\",\n      \"ciphers\",\n      \"rejectUnauthorized\"\n    );\n    opts.xdomain = !!this.opts.xd;\n    opts.xscheme = !!this.opts.xs;\n\n    const xhr = (this.xhr = new XMLHttpRequest(opts));\n    const self = this;\n\n    try {\n      debug(\"xhr open %s: %s\", this.method, this.uri);\n      xhr.open(this.method, this.uri, this.async);\n      try {\n        if (this.opts.extraHeaders) {\n          xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n          for (let i in this.opts.extraHeaders) {\n            if (this.opts.extraHeaders.hasOwnProperty(i)) {\n              xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n            }\n          }\n        }\n      } catch (e) {}\n\n      if (\"POST\" === this.method) {\n        try {\n          xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n        } catch (e) {}\n      }\n\n      try {\n        xhr.setRequestHeader(\"Accept\", \"*/*\");\n      } catch (e) {}\n\n      // ie6 check\n      if (\"withCredentials\" in xhr) {\n        xhr.withCredentials = this.opts.withCredentials;\n      }\n\n      if (this.opts.requestTimeout) {\n        xhr.timeout = this.opts.requestTimeout;\n      }\n\n      if (this.hasXDR()) {\n        xhr.onload = function() {\n          self.onLoad();\n        };\n        xhr.onerror = function() {\n          self.onError(xhr.responseText);\n        };\n      } else {\n        xhr.onreadystatechange = function() {\n          if (4 !== xhr.readyState) return;\n          if (200 === xhr.status || 1223 === xhr.status) {\n            self.onLoad();\n          } else {\n            // make sure the `error` event handler that's user-set\n            // does not throw in the same tick and gets caught here\n            setTimeout(function() {\n              self.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n            }, 0);\n          }\n        };\n      }\n\n      debug(\"xhr data %s\", this.data);\n      xhr.send(this.data);\n    } catch (e) {\n      // Need to defer since .create() is called directly from the constructor\n      // and thus the 'error' event can only be only bound *after* this exception\n      // occurs.  Therefore, also, we cannot throw here at all.\n      setTimeout(function() {\n        self.onError(e);\n      }, 0);\n      return;\n    }\n\n    if (typeof document !== \"undefined\") {\n      this.index = Request.requestsCount++;\n      Request.requests[this.index] = this;\n    }\n  }\n\n  /**\n   * Called upon successful response.\n   *\n   * @api private\n   */\n  onSuccess() {\n    this.emit(\"success\");\n    this.cleanup();\n  }\n\n  /**\n   * Called if we have data.\n   *\n   * @api private\n   */\n  onData(data) {\n    this.emit(\"data\", data);\n    this.onSuccess();\n  }\n\n  /**\n   * Called upon error.\n   *\n   * @api private\n   */\n  onError(err) {\n    this.emit(\"error\", err);\n    this.cleanup(true);\n  }\n\n  /**\n   * Cleans up house.\n   *\n   * @api private\n   */\n  cleanup(fromError) {\n    if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n      return;\n    }\n    // xmlhttprequest\n    if (this.hasXDR()) {\n      this.xhr.onload = this.xhr.onerror = empty;\n    } else {\n      this.xhr.onreadystatechange = empty;\n    }\n\n    if (fromError) {\n      try {\n        this.xhr.abort();\n      } catch (e) {}\n    }\n\n    if (typeof document !== \"undefined\") {\n      delete Request.requests[this.index];\n    }\n\n    this.xhr = null;\n  }\n\n  /**\n   * Called upon load.\n   *\n   * @api private\n   */\n  onLoad() {\n    const data = this.xhr.responseText;\n    if (data !== null) {\n      this.onData(data);\n    }\n  }\n\n  /**\n   * Check if it has XDomainRequest.\n   *\n   * @api private\n   */\n  hasXDR() {\n    return typeof XDomainRequest !== \"undefined\" && !this.xs && this.enablesXDR;\n  }\n\n  /**\n   * Aborts the request.\n   *\n   * @api public\n   */\n  abort() {\n    this.cleanup();\n  }\n}\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== \"undefined\") {\n  if (typeof attachEvent === \"function\") {\n    attachEvent(\"onunload\", unloadHandler);\n  } else if (typeof addEventListener === \"function\") {\n    const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler() {\n  for (let i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n","const Polling = require(\"./polling\");\nconst globalThis = require(\"../globalThis\");\n\nconst rNewline = /\\n/g;\nconst rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nlet callbacks;\n\nclass JSONPPolling extends Polling {\n  /**\n   * JSONP Polling constructor.\n   *\n   * @param {Object} opts.\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.query = this.query || {};\n\n    // define global callbacks array if not present\n    // we do this here (lazily) to avoid unneeded global pollution\n    if (!callbacks) {\n      // we need to consider multiple engines in the same page\n      callbacks = globalThis.___eio = globalThis.___eio || [];\n    }\n\n    // callback identifier\n    this.index = callbacks.length;\n\n    // add callback to jsonp global\n    const self = this;\n    callbacks.push(function(msg) {\n      self.onData(msg);\n    });\n\n    // append to query string\n    this.query.j = this.index;\n  }\n\n  /**\n   * JSONP only supports binary as base64 encoded strings\n   */\n  get supportsBinary() {\n    return false;\n  }\n\n  /**\n   * Closes the socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (this.script) {\n      // prevent spurious errors from being emitted when the window is unloaded\n      this.script.onerror = () => {};\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    if (this.form) {\n      this.form.parentNode.removeChild(this.form);\n      this.form = null;\n      this.iframe = null;\n    }\n\n    super.doClose();\n  }\n\n  /**\n   * Starts a poll cycle.\n   *\n   * @api private\n   */\n  doPoll() {\n    const self = this;\n    const script = document.createElement(\"script\");\n\n    if (this.script) {\n      this.script.parentNode.removeChild(this.script);\n      this.script = null;\n    }\n\n    script.async = true;\n    script.src = this.uri();\n    script.onerror = function(e) {\n      self.onError(\"jsonp poll error\", e);\n    };\n\n    const insertAt = document.getElementsByTagName(\"script\")[0];\n    if (insertAt) {\n      insertAt.parentNode.insertBefore(script, insertAt);\n    } else {\n      (document.head || document.body).appendChild(script);\n    }\n    this.script = script;\n\n    const isUAgecko =\n      \"undefined\" !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n    if (isUAgecko) {\n      setTimeout(function() {\n        const iframe = document.createElement(\"iframe\");\n        document.body.appendChild(iframe);\n        document.body.removeChild(iframe);\n      }, 100);\n    }\n  }\n\n  /**\n   * Writes with a hidden iframe.\n   *\n   * @param {String} data to send\n   * @param {Function} called upon flush.\n   * @api private\n   */\n  doWrite(data, fn) {\n    const self = this;\n    let iframe;\n\n    if (!this.form) {\n      const form = document.createElement(\"form\");\n      const area = document.createElement(\"textarea\");\n      const id = (this.iframeId = \"eio_iframe_\" + this.index);\n\n      form.className = \"socketio\";\n      form.style.position = \"absolute\";\n      form.style.top = \"-1000px\";\n      form.style.left = \"-1000px\";\n      form.target = id;\n      form.method = \"POST\";\n      form.setAttribute(\"accept-charset\", \"utf-8\");\n      area.name = \"d\";\n      form.appendChild(area);\n      document.body.appendChild(form);\n\n      this.form = form;\n      this.area = area;\n    }\n\n    this.form.action = this.uri();\n\n    function complete() {\n      initIframe();\n      fn();\n    }\n\n    function initIframe() {\n      if (self.iframe) {\n        try {\n          self.form.removeChild(self.iframe);\n        } catch (e) {\n          self.onError(\"jsonp polling iframe removal error\", e);\n        }\n      }\n\n      try {\n        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n        const html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n        iframe = document.createElement(html);\n      } catch (e) {\n        iframe = document.createElement(\"iframe\");\n        iframe.name = self.iframeId;\n        iframe.src = \"javascript:0\";\n      }\n\n      iframe.id = self.iframeId;\n\n      self.form.appendChild(iframe);\n      self.iframe = iframe;\n    }\n\n    initIframe();\n\n    // escape \\n to prevent it from being converted into \\r\\n by some UAs\n    // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n    data = data.replace(rEscapedNewline, \"\\\\\\n\");\n    this.area.value = data.replace(rNewline, \"\\\\n\");\n\n    try {\n      this.form.submit();\n    } catch (e) {}\n\n    if (this.iframe.attachEvent) {\n      this.iframe.onreadystatechange = function() {\n        if (self.iframe.readyState === \"complete\") {\n          complete();\n        }\n      };\n    } else {\n      this.iframe.onload = complete;\n    }\n  }\n}\n\nmodule.exports = JSONPPolling;\n","const globalThis = require(\"../globalThis\");\n\nmodule.exports = {\n  WebSocket: globalThis.WebSocket || globalThis.MozWebSocket,\n  usingBrowserWebSocket: true,\n  defaultBinaryType: \"arraybuffer\"\n};\n","const Transport = require(\"../transport\");\nconst parser = require(\"engine.io-parser\");\nconst parseqs = require(\"parseqs\");\nconst yeast = require(\"yeast\");\nconst { pick } = require(\"../util\");\nconst {\n  WebSocket,\n  usingBrowserWebSocket,\n  defaultBinaryType\n} = require(\"./websocket-constructor\");\n\nconst debug = require(\"debug\")(\"engine.io-client:websocket\");\n\n// detect ReactNative environment\nconst isReactNative =\n  typeof navigator !== \"undefined\" &&\n  typeof navigator.product === \"string\" &&\n  navigator.product.toLowerCase() === \"reactnative\";\n\nclass WS extends Transport {\n  /**\n   * WebSocket transport constructor.\n   *\n   * @api {Object} connection options\n   * @api public\n   */\n  constructor(opts) {\n    super(opts);\n\n    this.supportsBinary = !opts.forceBase64;\n  }\n\n  /**\n   * Transport name.\n   *\n   * @api public\n   */\n  get name() {\n    return \"websocket\";\n  }\n\n  /**\n   * Opens socket.\n   *\n   * @api private\n   */\n  doOpen() {\n    if (!this.check()) {\n      // let probe timeout\n      return;\n    }\n\n    const uri = this.uri();\n    const protocols = this.opts.protocols;\n\n    // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n    const opts = isReactNative\n      ? {}\n      : pick(\n          this.opts,\n          \"agent\",\n          \"perMessageDeflate\",\n          \"pfx\",\n          \"key\",\n          \"passphrase\",\n          \"cert\",\n          \"ca\",\n          \"ciphers\",\n          \"rejectUnauthorized\",\n          \"localAddress\",\n          \"protocolVersion\",\n          \"origin\",\n          \"maxPayload\",\n          \"family\",\n          \"checkServerIdentity\"\n        );\n\n    if (this.opts.extraHeaders) {\n      opts.headers = this.opts.extraHeaders;\n    }\n\n    try {\n      this.ws =\n        usingBrowserWebSocket && !isReactNative\n          ? protocols\n            ? new WebSocket(uri, protocols)\n            : new WebSocket(uri)\n          : new WebSocket(uri, protocols, opts);\n    } catch (err) {\n      return this.emit(\"error\", err);\n    }\n\n    this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n\n    this.addEventListeners();\n  }\n\n  /**\n   * Adds event listeners to the socket\n   *\n   * @api private\n   */\n  addEventListeners() {\n    const self = this;\n\n    this.ws.onopen = function() {\n      self.onOpen();\n    };\n    this.ws.onclose = function() {\n      self.onClose();\n    };\n    this.ws.onmessage = function(ev) {\n      self.onData(ev.data);\n    };\n    this.ws.onerror = function(e) {\n      self.onError(\"websocket error\", e);\n    };\n  }\n\n  /**\n   * Writes data to socket.\n   *\n   * @param {Array} array of packets.\n   * @api private\n   */\n  write(packets) {\n    const self = this;\n    this.writable = false;\n\n    // encodePacket efficient as it uses WS framing\n    // no need for encodePayload\n    let total = packets.length;\n    let i = 0;\n    const l = total;\n    for (; i < l; i++) {\n      (function(packet) {\n        parser.encodePacket(packet, self.supportsBinary, function(data) {\n          // always create a new object (GH-437)\n          const opts = {};\n          if (!usingBrowserWebSocket) {\n            if (packet.options) {\n              opts.compress = packet.options.compress;\n            }\n\n            if (self.opts.perMessageDeflate) {\n              const len =\n                \"string\" === typeof data\n                  ? Buffer.byteLength(data)\n                  : data.length;\n              if (len < self.opts.perMessageDeflate.threshold) {\n                opts.compress = false;\n              }\n            }\n          }\n\n          // Sometimes the websocket has already been closed but the browser didn't\n          // have a chance of informing us about it yet, in that case send will\n          // throw an error\n          try {\n            if (usingBrowserWebSocket) {\n              // TypeError is thrown when passing the second argument on Safari\n              self.ws.send(data);\n            } else {\n              self.ws.send(data, opts);\n            }\n          } catch (e) {\n            debug(\"websocket closed before onclose event\");\n          }\n\n          --total || done();\n        });\n      })(packets[i]);\n    }\n\n    function done() {\n      self.emit(\"flush\");\n\n      // fake drain\n      // defer to next tick to allow Socket to clear writeBuffer\n      setTimeout(function() {\n        self.writable = true;\n        self.emit(\"drain\");\n      }, 0);\n    }\n  }\n\n  /**\n   * Called upon close\n   *\n   * @api private\n   */\n  onClose() {\n    Transport.prototype.onClose.call(this);\n  }\n\n  /**\n   * Closes socket.\n   *\n   * @api private\n   */\n  doClose() {\n    if (typeof this.ws !== \"undefined\") {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n\n  /**\n   * Generates uri for connection.\n   *\n   * @api private\n   */\n  uri() {\n    let query = this.query || {};\n    const schema = this.opts.secure ? \"wss\" : \"ws\";\n    let port = \"\";\n\n    // avoid port if default for schema\n    if (\n      this.opts.port &&\n      ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n        (\"ws\" === schema && Number(this.opts.port) !== 80))\n    ) {\n      port = \":\" + this.opts.port;\n    }\n\n    // append timestamp to URI\n    if (this.opts.timestampRequests) {\n      query[this.opts.timestampParam] = yeast();\n    }\n\n    // communicate binary support capabilities\n    if (!this.supportsBinary) {\n      query.b64 = 1;\n    }\n\n    query = parseqs.encode(query);\n\n    // prepend ? to query\n    if (query.length) {\n      query = \"?\" + query;\n    }\n\n    const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n    return (\n      schema +\n      \"://\" +\n      (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n      port +\n      this.opts.path +\n      query\n    );\n  }\n\n  /**\n   * Feature detection for WebSocket.\n   *\n   * @return {Boolean} whether this transport is available.\n   * @api public\n   */\n  check() {\n    return (\n      !!WebSocket &&\n      !(\"__initialize\" in WebSocket && this.name === WS.prototype.name)\n    );\n  }\n}\n\nmodule.exports = WS;\n","const XMLHttpRequest = require(\"xmlhttprequest-ssl\");\nconst XHR = require(\"./polling-xhr\");\nconst JSONP = require(\"./polling-jsonp\");\nconst websocket = require(\"./websocket\");\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling(opts) {\n  let xhr;\n  let xd = false;\n  let xs = false;\n  const jsonp = false !== opts.jsonp;\n\n  if (typeof location !== \"undefined\") {\n    const isSSL = \"https:\" === location.protocol;\n    let port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if (\"open\" in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error(\"JSONP disabled\");\n    return new JSONP(opts);\n  }\n}\n","const transports = require(\"./transports/index\");\nconst Emitter = require(\"component-emitter\");\nconst debug = require(\"debug\")(\"engine.io-client:socket\");\nconst parser = require(\"engine.io-parser\");\nconst parseuri = require(\"parseuri\");\nconst parseqs = require(\"parseqs\");\n\nclass Socket extends Emitter {\n  /**\n   * Socket constructor.\n   *\n   * @param {String|Object} uri or options\n   * @param {Object} options\n   * @api public\n   */\n  constructor(uri, opts = {}) {\n    super();\n\n    if (uri && \"object\" === typeof uri) {\n      opts = uri;\n      uri = null;\n    }\n\n    if (uri) {\n      uri = parseuri(uri);\n      opts.hostname = uri.host;\n      opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n      opts.port = uri.port;\n      if (uri.query) opts.query = uri.query;\n    } else if (opts.host) {\n      opts.hostname = parseuri(opts.host).host;\n    }\n\n    this.secure =\n      null != opts.secure\n        ? opts.secure\n        : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n\n    if (opts.hostname && !opts.port) {\n      // if no port is specified manually, use the protocol default\n      opts.port = this.secure ? \"443\" : \"80\";\n    }\n\n    this.hostname =\n      opts.hostname ||\n      (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n    this.port =\n      opts.port ||\n      (typeof location !== \"undefined\" && location.port\n        ? location.port\n        : this.secure\n        ? 443\n        : 80);\n\n    this.transports = opts.transports || [\"polling\", \"websocket\"];\n    this.readyState = \"\";\n    this.writeBuffer = [];\n    this.prevBufferLen = 0;\n\n    this.opts = Object.assign(\n      {\n        path: \"/engine.io\",\n        agent: false,\n        withCredentials: false,\n        upgrade: true,\n        jsonp: true,\n        timestampParam: \"t\",\n        rememberUpgrade: false,\n        rejectUnauthorized: true,\n        perMessageDeflate: {\n          threshold: 1024\n        },\n        transportOptions: {}\n      },\n      opts\n    );\n\n    this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n\n    if (typeof this.opts.query === \"string\") {\n      this.opts.query = parseqs.decode(this.opts.query);\n    }\n\n    // set on handshake\n    this.id = null;\n    this.upgrades = null;\n    this.pingInterval = null;\n    this.pingTimeout = null;\n\n    // set on heartbeat\n    this.pingTimeoutTimer = null;\n\n    if (typeof addEventListener === \"function\") {\n      addEventListener(\n        \"beforeunload\",\n        () => {\n          if (this.transport) {\n            // silently close the transport\n            this.transport.removeAllListeners();\n            this.transport.close();\n          }\n        },\n        false\n      );\n    }\n\n    this.open();\n  }\n\n  /**\n   * Creates transport of the given type.\n   *\n   * @param {String} transport name\n   * @return {Transport}\n   * @api private\n   */\n  createTransport(name) {\n    debug('creating transport \"%s\"', name);\n    const query = clone(this.opts.query);\n\n    // append engine.io protocol identifier\n    query.EIO = parser.protocol;\n\n    // transport name\n    query.transport = name;\n\n    // session id if we already have one\n    if (this.id) query.sid = this.id;\n\n    const opts = Object.assign(\n      {},\n      this.opts.transportOptions[name],\n      this.opts,\n      {\n        query,\n        socket: this,\n        hostname: this.hostname,\n        secure: this.secure,\n        port: this.port\n      }\n    );\n\n    debug(\"options: %j\", opts);\n\n    return new transports[name](opts);\n  }\n\n  /**\n   * Initializes transport to use and starts probe.\n   *\n   * @api private\n   */\n  open() {\n    let transport;\n    if (\n      this.opts.rememberUpgrade &&\n      Socket.priorWebsocketSuccess &&\n      this.transports.indexOf(\"websocket\") !== -1\n    ) {\n      transport = \"websocket\";\n    } else if (0 === this.transports.length) {\n      // Emit error on next tick so it can be listened to\n      const self = this;\n      setTimeout(function() {\n        self.emit(\"error\", \"No transports available\");\n      }, 0);\n      return;\n    } else {\n      transport = this.transports[0];\n    }\n    this.readyState = \"opening\";\n\n    // Retry with the next transport if the transport is disabled (jsonp: false)\n    try {\n      transport = this.createTransport(transport);\n    } catch (e) {\n      debug(\"error while creating transport: %s\", e);\n      this.transports.shift();\n      this.open();\n      return;\n    }\n\n    transport.open();\n    this.setTransport(transport);\n  }\n\n  /**\n   * Sets the current transport. Disables the existing one (if any).\n   *\n   * @api private\n   */\n  setTransport(transport) {\n    debug(\"setting transport %s\", transport.name);\n    const self = this;\n\n    if (this.transport) {\n      debug(\"clearing existing transport %s\", this.transport.name);\n      this.transport.removeAllListeners();\n    }\n\n    // set up transport\n    this.transport = transport;\n\n    // set up transport listeners\n    transport\n      .on(\"drain\", function() {\n        self.onDrain();\n      })\n      .on(\"packet\", function(packet) {\n        self.onPacket(packet);\n      })\n      .on(\"error\", function(e) {\n        self.onError(e);\n      })\n      .on(\"close\", function() {\n        self.onClose(\"transport close\");\n      });\n  }\n\n  /**\n   * Probes a transport.\n   *\n   * @param {String} transport name\n   * @api private\n   */\n  probe(name) {\n    debug('probing transport \"%s\"', name);\n    let transport = this.createTransport(name, { probe: 1 });\n    let failed = false;\n    const self = this;\n\n    Socket.priorWebsocketSuccess = false;\n\n    function onTransportOpen() {\n      if (self.onlyBinaryUpgrades) {\n        const upgradeLosesBinary =\n          !this.supportsBinary && self.transport.supportsBinary;\n        failed = failed || upgradeLosesBinary;\n      }\n      if (failed) return;\n\n      debug('probe transport \"%s\" opened', name);\n      transport.send([{ type: \"ping\", data: \"probe\" }]);\n      transport.once(\"packet\", function(msg) {\n        if (failed) return;\n        if (\"pong\" === msg.type && \"probe\" === msg.data) {\n          debug('probe transport \"%s\" pong', name);\n          self.upgrading = true;\n          self.emit(\"upgrading\", transport);\n          if (!transport) return;\n          Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n\n          debug('pausing current transport \"%s\"', self.transport.name);\n          self.transport.pause(function() {\n            if (failed) return;\n            if (\"closed\" === self.readyState) return;\n            debug(\"changing transport and sending upgrade packet\");\n\n            cleanup();\n\n            self.setTransport(transport);\n            transport.send([{ type: \"upgrade\" }]);\n            self.emit(\"upgrade\", transport);\n            transport = null;\n            self.upgrading = false;\n            self.flush();\n          });\n        } else {\n          debug('probe transport \"%s\" failed', name);\n          const err = new Error(\"probe error\");\n          err.transport = transport.name;\n          self.emit(\"upgradeError\", err);\n        }\n      });\n    }\n\n    function freezeTransport() {\n      if (failed) return;\n\n      // Any callback called by transport should be ignored since now\n      failed = true;\n\n      cleanup();\n\n      transport.close();\n      transport = null;\n    }\n\n    // Handle any error that happens while probing\n    function onerror(err) {\n      const error = new Error(\"probe error: \" + err);\n      error.transport = transport.name;\n\n      freezeTransport();\n\n      debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n      self.emit(\"upgradeError\", error);\n    }\n\n    function onTransportClose() {\n      onerror(\"transport closed\");\n    }\n\n    // When the socket is closed while we're probing\n    function onclose() {\n      onerror(\"socket closed\");\n    }\n\n    // When the socket is upgraded while we're probing\n    function onupgrade(to) {\n      if (transport && to.name !== transport.name) {\n        debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n        freezeTransport();\n      }\n    }\n\n    // Remove all listeners on the transport and on self\n    function cleanup() {\n      transport.removeListener(\"open\", onTransportOpen);\n      transport.removeListener(\"error\", onerror);\n      transport.removeListener(\"close\", onTransportClose);\n      self.removeListener(\"close\", onclose);\n      self.removeListener(\"upgrading\", onupgrade);\n    }\n\n    transport.once(\"open\", onTransportOpen);\n    transport.once(\"error\", onerror);\n    transport.once(\"close\", onTransportClose);\n\n    this.once(\"close\", onclose);\n    this.once(\"upgrading\", onupgrade);\n\n    transport.open();\n  }\n\n  /**\n   * Called when connection is deemed open.\n   *\n   * @api public\n   */\n  onOpen() {\n    debug(\"socket open\");\n    this.readyState = \"open\";\n    Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n    this.emit(\"open\");\n    this.flush();\n\n    // we check for `readyState` in case an `open`\n    // listener already closed the socket\n    if (\n      \"open\" === this.readyState &&\n      this.opts.upgrade &&\n      this.transport.pause\n    ) {\n      debug(\"starting upgrade probes\");\n      let i = 0;\n      const l = this.upgrades.length;\n      for (; i < l; i++) {\n        this.probe(this.upgrades[i]);\n      }\n    }\n  }\n\n  /**\n   * Handles a packet.\n   *\n   * @api private\n   */\n  onPacket(packet) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n      this.emit(\"packet\", packet);\n\n      // Socket is live - any packet counts\n      this.emit(\"heartbeat\");\n\n      switch (packet.type) {\n        case \"open\":\n          this.onHandshake(JSON.parse(packet.data));\n          break;\n\n        case \"ping\":\n          this.resetPingTimeout();\n          this.sendPacket(\"pong\");\n          this.emit(\"pong\");\n          break;\n\n        case \"error\":\n          const err = new Error(\"server error\");\n          err.code = packet.data;\n          this.onError(err);\n          break;\n\n        case \"message\":\n          this.emit(\"data\", packet.data);\n          this.emit(\"message\", packet.data);\n          break;\n      }\n    } else {\n      debug('packet received with socket readyState \"%s\"', this.readyState);\n    }\n  }\n\n  /**\n   * Called upon handshake completion.\n   *\n   * @param {Object} handshake obj\n   * @api private\n   */\n  onHandshake(data) {\n    this.emit(\"handshake\", data);\n    this.id = data.sid;\n    this.transport.query.sid = data.sid;\n    this.upgrades = this.filterUpgrades(data.upgrades);\n    this.pingInterval = data.pingInterval;\n    this.pingTimeout = data.pingTimeout;\n    this.onOpen();\n    // In case open handler closes socket\n    if (\"closed\" === this.readyState) return;\n    this.resetPingTimeout();\n  }\n\n  /**\n   * Sets and resets ping timeout timer based on server pings.\n   *\n   * @api private\n   */\n  resetPingTimeout() {\n    clearTimeout(this.pingTimeoutTimer);\n    this.pingTimeoutTimer = setTimeout(() => {\n      this.onClose(\"ping timeout\");\n    }, this.pingInterval + this.pingTimeout);\n  }\n\n  /**\n   * Called on `drain` event\n   *\n   * @api private\n   */\n  onDrain() {\n    this.writeBuffer.splice(0, this.prevBufferLen);\n\n    // setting prevBufferLen = 0 is very important\n    // for example, when upgrading, upgrade packet is sent over,\n    // and a nonzero prevBufferLen could cause problems on `drain`\n    this.prevBufferLen = 0;\n\n    if (0 === this.writeBuffer.length) {\n      this.emit(\"drain\");\n    } else {\n      this.flush();\n    }\n  }\n\n  /**\n   * Flush write buffers.\n   *\n   * @api private\n   */\n  flush() {\n    if (\n      \"closed\" !== this.readyState &&\n      this.transport.writable &&\n      !this.upgrading &&\n      this.writeBuffer.length\n    ) {\n      debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n      this.transport.send(this.writeBuffer);\n      // keep track of current length of writeBuffer\n      // splice writeBuffer and callbackBuffer on `drain`\n      this.prevBufferLen = this.writeBuffer.length;\n      this.emit(\"flush\");\n    }\n  }\n\n  /**\n   * Sends a message.\n   *\n   * @param {String} message.\n   * @param {Function} callback function.\n   * @param {Object} options.\n   * @return {Socket} for chaining.\n   * @api public\n   */\n  write(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  send(msg, options, fn) {\n    this.sendPacket(\"message\", msg, options, fn);\n    return this;\n  }\n\n  /**\n   * Sends a packet.\n   *\n   * @param {String} packet type.\n   * @param {String} data.\n   * @param {Object} options.\n   * @param {Function} callback function.\n   * @api private\n   */\n  sendPacket(type, data, options, fn) {\n    if (\"function\" === typeof data) {\n      fn = data;\n      data = undefined;\n    }\n\n    if (\"function\" === typeof options) {\n      fn = options;\n      options = null;\n    }\n\n    if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n      return;\n    }\n\n    options = options || {};\n    options.compress = false !== options.compress;\n\n    const packet = {\n      type: type,\n      data: data,\n      options: options\n    };\n    this.emit(\"packetCreate\", packet);\n    this.writeBuffer.push(packet);\n    if (fn) this.once(\"flush\", fn);\n    this.flush();\n  }\n\n  /**\n   * Closes the connection.\n   *\n   * @api private\n   */\n  close() {\n    const self = this;\n\n    if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n      this.readyState = \"closing\";\n\n      if (this.writeBuffer.length) {\n        this.once(\"drain\", function() {\n          if (this.upgrading) {\n            waitForUpgrade();\n          } else {\n            close();\n          }\n        });\n      } else if (this.upgrading) {\n        waitForUpgrade();\n      } else {\n        close();\n      }\n    }\n\n    function close() {\n      self.onClose(\"forced close\");\n      debug(\"socket closing - telling transport to close\");\n      self.transport.close();\n    }\n\n    function cleanupAndClose() {\n      self.removeListener(\"upgrade\", cleanupAndClose);\n      self.removeListener(\"upgradeError\", cleanupAndClose);\n      close();\n    }\n\n    function waitForUpgrade() {\n      // wait for upgrade to finish since we can't send packets while pausing a transport\n      self.once(\"upgrade\", cleanupAndClose);\n      self.once(\"upgradeError\", cleanupAndClose);\n    }\n\n    return this;\n  }\n\n  /**\n   * Called upon transport error\n   *\n   * @api private\n   */\n  onError(err) {\n    debug(\"socket error %j\", err);\n    Socket.priorWebsocketSuccess = false;\n    this.emit(\"error\", err);\n    this.onClose(\"transport error\", err);\n  }\n\n  /**\n   * Called upon transport close.\n   *\n   * @api private\n   */\n  onClose(reason, desc) {\n    if (\n      \"opening\" === this.readyState ||\n      \"open\" === this.readyState ||\n      \"closing\" === this.readyState\n    ) {\n      debug('socket close with reason: \"%s\"', reason);\n      const self = this;\n\n      // clear timers\n      clearTimeout(this.pingIntervalTimer);\n      clearTimeout(this.pingTimeoutTimer);\n\n      // stop event from firing again for transport\n      this.transport.removeAllListeners(\"close\");\n\n      // ensure transport won't stay open\n      this.transport.close();\n\n      // ignore further transport communication\n      this.transport.removeAllListeners();\n\n      // set ready state\n      this.readyState = \"closed\";\n\n      // clear session id\n      this.id = null;\n\n      // emit close event\n      this.emit(\"close\", reason, desc);\n\n      // clean buffers after, so users can still\n      // grab the buffers on `close` event\n      self.writeBuffer = [];\n      self.prevBufferLen = 0;\n    }\n  }\n\n  /**\n   * Filters upgrades, returning only those matching client transports.\n   *\n   * @param {Array} server upgrades\n   * @api private\n   *\n   */\n  filterUpgrades(upgrades) {\n    const filteredUpgrades = [];\n    let i = 0;\n    const j = upgrades.length;\n    for (; i < j; i++) {\n      if (~this.transports.indexOf(upgrades[i]))\n        filteredUpgrades.push(upgrades[i]);\n    }\n    return filteredUpgrades;\n  }\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\nfunction clone(obj) {\n  const o = {};\n  for (let i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\nmodule.exports = Socket;\n","const Socket = require(\"./socket\");\n\nmodule.exports = (uri, opts) => new Socket(uri, opts);\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nmodule.exports.Socket = Socket;\nmodule.exports.protocol = Socket.protocol; // this is an int\nmodule.exports.Transport = require(\"./transport\");\nmodule.exports.transports = require(\"./transports/index\");\nmodule.exports.parser = require(\"engine.io-parser\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasBinary = exports.isBinary = void 0;\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nfunction isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexports.isBinary = isBinary;\nfunction hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasBinary = hasBinary;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reconstructPacket = exports.deconstructPacket = void 0;\nconst is_binary_1 = require(\"./is-binary\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nfunction deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nexports.deconstructPacket = deconstructPacket;\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (is_binary_1.isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nfunction reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nexports.reconstructPacket = reconstructPacket;\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\nconst Emitter = require(\"component-emitter\");\nconst binary_1 = require(\"./binary\");\nconst is_binary_1 = require(\"./is-binary\");\nconst debug = require(\"debug\")(\"socket.io-parser\");\n/**\n * Protocol version.\n *\n * @public\n */\nexports.protocol = 5;\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nclass Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        debug(\"encoding packet %j\", obj);\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (is_binary_1.hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        debug(\"encoded %j as %s\", obj, str);\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = binary_1.deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nclass Decoder extends Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emit(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emit(\"decoded\", packet);\n            }\n        }\n        else if (is_binary_1.isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emit(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        debug(\"decoded %s as %j\", str, p);\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nexports.Decoder = Decoder;\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = binary_1.reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.on = void 0;\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\nexports.on = on;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst socket_io_parser_1 = require(\"socket.io-parser\");\nconst Emitter = require(\"component-emitter\");\nconst on_1 = require(\"./on\");\nconst debug = require(\"debug\")(\"socket.io-client:socket\");\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nclass Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        this.ids = 0;\n        this.acks = {};\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.connected = false;\n        this.disconnected = true;\n        this.flags = {};\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on_1.on(io, \"open\", this.onopen.bind(this)),\n            on_1.on(io, \"packet\", this.onpacket.bind(this)),\n            on_1.on(io, \"error\", this.onerror.bind(this)),\n            on_1.on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @param ev - event name\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: socket_io_parser_1.PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            debug(\"emitting packet with ack id %d\", this.ids);\n            this.acks[this.ids] = args.pop();\n            packet.id = this.ids++;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n            debug(\"discard packet as the transport is not currently writable\");\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"transport is open - connecting\");\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            super.emit(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        debug(\"close (%s)\", reason);\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        super.emit(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case socket_io_parser_1.PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    super.emit(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case socket_io_parser_1.PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case socket_io_parser_1.PacketType.CONNECT_ERROR:\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                super.emit(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        debug(\"emitting event %j\", args);\n        if (null != packet.id) {\n            debug(\"attaching ack callback to event\");\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            debug(\"sending ack %j\", args);\n            self.packet({\n                type: socket_io_parser_1.PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            debug(\"calling ack %s with %j\", packet.id, packet.data);\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n            debug(\"bad ack %s\", packet.id);\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        debug(\"socket connected with id %s\", id);\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        super.emit(\"connect\");\n        this.emitBuffered();\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        debug(\"server disconnect (%s)\", this.nsp);\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            debug(\"performing disconnect (%s)\", this.nsp);\n            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\nexports.Socket = Socket;\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst eio = require(\"engine.io-client\");\nconst socket_1 = require(\"./socket\");\nconst Emitter = require(\"component-emitter\");\nconst parser = require(\"socket.io-parser\");\nconst on_1 = require(\"./on\");\nconst Backoff = require(\"backo2\");\nconst debug = require(\"debug\")(\"socket.io-client:manager\");\nclass Manager extends Emitter {\n    constructor(uri, opts) {\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor(opts.randomizationFactor || 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = eio(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            super.emit(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = setTimeout(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        super.emit(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_1.on(socket, \"ping\", this.onping.bind(this)), on_1.on(socket, \"data\", this.ondata.bind(this)), on_1.on(socket, \"error\", this.onerror.bind(this)), on_1.on(socket, \"close\", this.onclose.bind(this)), on_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        super.emit(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        super.emit(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        if (\"opening\" === this._readyState) {\n            // `onclose` will not fire because\n            // an open event never happened\n            this.cleanup();\n        }\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        debug(\"onclose\");\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        super.emit(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            super.emit(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = setTimeout(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                super.emit(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        super.emit(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        super.emit(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = exports.io = exports.Manager = exports.protocol = void 0;\nconst url_1 = require(\"./url\");\nconst manager_1 = require(\"./manager\");\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nconst debug = require(\"debug\")(\"socket.io-client\");\n/**\n * Module exports.\n */\nmodule.exports = exports = lookup;\n/**\n * Managers cache.\n */\nconst cache = (exports.managers = {});\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url_1.url(uri, opts.path);\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        debug(\"ignoring socket cache for %s\", source);\n        io = new manager_1.Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug(\"new io instance for %s\", source);\n            cache[id] = new manager_1.Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\nexports.io = lookup;\n/**\n * Protocol version.\n *\n * @public\n */\nvar socket_io_parser_1 = require(\"socket.io-parser\");\nObject.defineProperty(exports, \"protocol\", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } });\n/**\n * `connect`.\n *\n * @param {String} uri\n * @public\n */\nexports.connect = lookup;\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nvar manager_2 = require(\"./manager\");\nObject.defineProperty(exports, \"Manager\", { enumerable: true, get: function () { return manager_2.Manager; } });\n","import io from \"./build/index.js\";\n\nexport const Manager = io.Manager;\nexport { io };\nexport default io;\n","(function() {\n  if (!navigator.mediaDevices) navigator.mediaDevices = {};\n  if (!navigator.mediaDevices.getUserMedia) {\n    var getUserMedia =\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia ||\n      navigator.msGetUserMedia ||\n      navigator.getUserMedia;\n\n    if (getUserMedia) {\n      navigator.mediaDevices.getUserMedia = function(constraints) {\n        return new Promise(function(resolve, reject) {\n          getUserMedia(\n            constraints,\n            function(stream) {\n              resolve(stream);\n            },\n            function(error) {\n              reject(error);\n            }\n          );\n        });\n      };\n    } else {\n      navigator.mediaDevices.getUserMedia = function() {\n        // A missing `getUserMedia` seemingly can mean one of two things:\n        //\n        // 1) WebRTC is unsupported or disabled on this browser\n        // 2) This is an insecure connection\n        //   * This handling of insecure connections happens only on certain browsers.\n        //     It was observed in Chromium 80 and Firefox 75, but not Firefox 68. I suspect it's the new behavior.\n        //   * In other browsers, it handles insecure connections by throwing `NotAllowedError`.\n        //     We still handle this case in the calling function.\n        //   * See: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n        //     As of this writing, this claims that the browser does *both* of these things for\n        //     insecure connections, which is of course impossible and thus confusing.\n        //\n        // We will attempt to distinguish these two cases by checking for various webrtc-related fields on\n        // `window` (inspired by github.com/muaz-khan/DetectRTC). If none of those fields exist, we assume\n        // that WebRTC is not supported on this browser.\n        return new Promise(function(resolve, reject) {\n          if (!(window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.RTCIceGatherer)) {\n            var e = new Error(\"getUserMedia is not supported in this browser.\");\n            // I'd use NotSupportedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomNotSupportedError';\n            reject(e);\n          } else {\n            var e = new Error(\"insecure connection\");\n            // I'd use NotAllowedError but I'm afraid they'll change the spec on us again\n            e.name = 'CustomSecureConnectionError';\n            reject(e);\n          }\n        });\n      };\n    }\n  }\n})();","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n\n  'use strict';\n\n  var _adapter_factory = require('./adapter_factory.js');\n\n  var adapter = (0, _adapter_factory.adapterFactory)({ window: typeof window === 'undefined' ? undefined : window });\n  module.exports = adapter; // this is the difference from adapter_core.\n\n  },{\"./adapter_factory.js\":2}],2:[function(require,module,exports){\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.adapterFactory = adapterFactory;\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  var _chrome_shim = require('./chrome/chrome_shim');\n\n  var chromeShim = _interopRequireWildcard(_chrome_shim);\n\n  var _firefox_shim = require('./firefox/firefox_shim');\n\n  var firefoxShim = _interopRequireWildcard(_firefox_shim);\n\n  var _safari_shim = require('./safari/safari_shim');\n\n  var safariShim = _interopRequireWildcard(_safari_shim);\n\n  var _common_shim = require('./common_shim');\n\n  var commonShim = _interopRequireWildcard(_common_shim);\n\n  var _sdp = require('sdp');\n\n  var sdp = _interopRequireWildcard(_sdp);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  // Shimming starts here.\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  function adapterFactory() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        window = _ref.window;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      shimChrome: true,\n      shimFirefox: true,\n      shimSafari: true\n    };\n\n    // Utils.\n    var logging = utils.log;\n    var browserDetails = utils.detectBrowser(window);\n\n    var adapter = {\n      browserDetails: browserDetails,\n      commonShim: commonShim,\n      extractVersion: utils.extractVersion,\n      disableLog: utils.disableLog,\n      disableWarnings: utils.disableWarnings,\n      // Expose sdp as a convenience. For production apps include directly.\n      sdp: sdp\n    };\n\n    // Shim browser if found.\n    switch (browserDetails.browser) {\n      case 'chrome':\n        if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n          logging('Chrome shim is not included in this adapter release.');\n          return adapter;\n        }\n        if (browserDetails.version === null) {\n          logging('Chrome shim can not determine version, not shimming.');\n          return adapter;\n        }\n        logging('adapter.js shimming chrome.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = chromeShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        chromeShim.shimGetUserMedia(window, browserDetails);\n        chromeShim.shimMediaStream(window, browserDetails);\n        chromeShim.shimPeerConnection(window, browserDetails);\n        chromeShim.shimOnTrack(window, browserDetails);\n        chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n        chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n        chromeShim.shimGetStats(window, browserDetails);\n        chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n        chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      case 'firefox':\n        if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n          logging('Firefox shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming firefox.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = firefoxShim;\n\n        // Must be called before shimPeerConnection.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        firefoxShim.shimGetUserMedia(window, browserDetails);\n        firefoxShim.shimPeerConnection(window, browserDetails);\n        firefoxShim.shimOnTrack(window, browserDetails);\n        firefoxShim.shimRemoveStream(window, browserDetails);\n        firefoxShim.shimSenderGetStats(window, browserDetails);\n        firefoxShim.shimReceiverGetStats(window, browserDetails);\n        firefoxShim.shimRTCDataChannel(window, browserDetails);\n        firefoxShim.shimAddTransceiver(window, browserDetails);\n        firefoxShim.shimGetParameters(window, browserDetails);\n        firefoxShim.shimCreateOffer(window, browserDetails);\n        firefoxShim.shimCreateAnswer(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimConnectionState(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        break;\n      case 'safari':\n        if (!safariShim || !options.shimSafari) {\n          logging('Safari shim is not included in this adapter release.');\n          return adapter;\n        }\n        logging('adapter.js shimming safari.');\n        // Export to the adapter global object visible in the browser.\n        adapter.browserShim = safariShim;\n\n        // Must be called before shimCallbackAPI.\n        commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n        commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n        safariShim.shimRTCIceServerUrls(window, browserDetails);\n        safariShim.shimCreateOfferLegacy(window, browserDetails);\n        safariShim.shimCallbacksAPI(window, browserDetails);\n        safariShim.shimLocalStreamsAPI(window, browserDetails);\n        safariShim.shimRemoteStreamsAPI(window, browserDetails);\n        safariShim.shimTrackEventTransceiver(window, browserDetails);\n        safariShim.shimGetUserMedia(window, browserDetails);\n        safariShim.shimAudioContext(window, browserDetails);\n\n        commonShim.shimRTCIceCandidate(window, browserDetails);\n        commonShim.shimMaxMessageSize(window, browserDetails);\n        commonShim.shimSendThrowTypeError(window, browserDetails);\n        commonShim.removeExtmapAllowMixed(window, browserDetails);\n        break;\n      default:\n        logging('Unsupported browser!');\n        break;\n    }\n\n    return adapter;\n  }\n\n  // Browser shims.\n\n  },{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./firefox/firefox_shim\":7,\"./safari/safari_shim\":10,\"./utils\":11,\"sdp\":12}],3:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimMediaStream = shimMediaStream;\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimGetSendersWithDtmf = shimGetSendersWithDtmf;\n  exports.shimGetStats = shimGetStats;\n  exports.shimSenderReceiverGetStats = shimSenderReceiverGetStats;\n  exports.shimAddTrackRemoveTrackWithNative = shimAddTrackRemoveTrackWithNative;\n  exports.shimAddTrackRemoveTrack = shimAddTrackRemoveTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.fixNegotiationNeeded = fixNegotiationNeeded;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimMediaStream(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('ontrack' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function get() {\n          return this._ontrack;\n        },\n        set: function set(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        },\n\n        enumerable: true,\n        configurable: true\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var _this = this;\n\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = function (e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function (te) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = { track: te.track };\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function (track) {\n              var receiver = void 0;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = _this.getReceivers().find(function (r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = { track: track };\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = { receiver: receiver };\n              event.streams = [e.stream];\n              _this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n    } else {\n      // even if RTCRtpTransceiver is in window, it is only used and\n      // emitted in unified-plan. Unfortunately this means we need\n      // to unconditionally wrap the event.\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        if (!e.transceiver) {\n          Object.defineProperty(e, 'transceiver', { value: { receiver: e.receiver } });\n        }\n        return e;\n      });\n    }\n  }\n\n  function shimGetSendersWithDtmf(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && !('getSenders' in window.RTCPeerConnection.prototype) && 'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function shimSenderWithDtmf(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n          var sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          var idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this2 = this;\n\n        this._senders = this._senders || [];\n        origAddStream.apply(this, [stream]);\n        stream.getTracks().forEach(function (track) {\n          _this2._senders.push(shimSenderWithDtmf(_this2, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(function (track) {\n          var sender = _this3._senders.find(function (s) {\n            return s.track === track;\n          });\n          if (sender) {\n            // remove sender\n            _this3._senders.splice(_this3._senders.indexOf(sender), 1);\n          }\n        });\n      };\n    } else if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && 'getSenders' in window.RTCPeerConnection.prototype && 'createDTMFSender' in window.RTCPeerConnection.prototype && window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this4 = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this4;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function get() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  }\n\n  function shimGetStats(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _this5 = this;\n\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n\n\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 || typeof selector !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function fixChromeStats_(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function (report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function (name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function makeMapStats(stats) {\n        return new Map(Object.keys(stats).map(function (key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function successCallbackWrapper_(response) {\n          onSucc(makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_, selector]);\n      }\n\n      // promise-support\n      return new Promise(function (resolve, reject) {\n        origGetStats.apply(_this5, [function (response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender && window.RTCRtpReceiver)) {\n      return;\n    }\n\n    // shim sender stats.\n    if (!('getStats' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      if (origGetSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n          var _this6 = this;\n\n          var senders = origGetSenders.apply(this, []);\n          senders.forEach(function (sender) {\n            return sender._pc = _this6;\n          });\n          return senders;\n        };\n      }\n\n      var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      if (origAddTrack) {\n        window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n          var sender = origAddTrack.apply(this, arguments);\n          sender._pc = this;\n          return sender;\n        };\n      }\n      window.RTCRtpSender.prototype.getStats = function getStats() {\n        var sender = this;\n        return this._pc.getStats().then(function (result) {\n          return (\n            /* Note: this will include stats of all senders that\n             *   send a track with the same id as sender.track as\n             *   it is not possible to identify the RTCRtpSender.\n             */\n            utils.filterStats(result, sender.track, true)\n          );\n        });\n      };\n    }\n\n    // shim receiver stats.\n    if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n      var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n      if (origGetReceivers) {\n        window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n          var _this7 = this;\n\n          var receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(function (receiver) {\n            return receiver._pc = _this7;\n          });\n          return receivers;\n        };\n      }\n      utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n        e.receiver._pc = e.srcElement;\n        return e;\n      });\n      window.RTCRtpReceiver.prototype.getStats = function getStats() {\n        var receiver = this;\n        return this._pc.getStats().then(function (result) {\n          return utils.filterStats(result, receiver.track, false);\n        });\n      };\n    }\n\n    if (!('getStats' in window.RTCRtpSender.prototype && 'getStats' in window.RTCRtpReceiver.prototype)) {\n      return;\n    }\n\n    // shim RTCPeerConnection.getStats(track).\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      if (arguments.length > 0 && arguments[0] instanceof window.MediaStreamTrack) {\n        var track = arguments[0];\n        var sender = void 0;\n        var receiver = void 0;\n        var err = void 0;\n        this.getSenders().forEach(function (s) {\n          if (s.track === track) {\n            if (sender) {\n              err = true;\n            } else {\n              sender = s;\n            }\n          }\n        });\n        this.getReceivers().forEach(function (r) {\n          if (r.track === track) {\n            if (receiver) {\n              err = true;\n            } else {\n              receiver = r;\n            }\n          }\n          return r.track === track;\n        });\n        if (err || sender && receiver) {\n          return Promise.reject(new DOMException('There are more than one sender or receiver for the track.', 'InvalidAccessError'));\n        } else if (sender) {\n          return sender.getStats();\n        } else if (receiver) {\n          return receiver.getStats();\n        }\n        return Promise.reject(new DOMException('There is no sender or receiver for the track.', 'InvalidAccessError'));\n      }\n      return origGetStats.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrackWithNative(window) {\n    // shim addTrack/removeTrack with native variants in order to make\n    // the interactions with legacy getLocalStreams behave as in other browsers.\n    // Keeps a mapping stream.id => [stream, rtpsenders...]\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this8 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams).map(function (streamId) {\n        return _this8._shimmedLocalStreams[streamId][0];\n      });\n    };\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      var sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this9 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this9.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      var existingSenders = this.getSenders();\n      origAddStream.apply(this, arguments);\n      var newSenders = this.getSenders().filter(function (newSender) {\n        return existingSenders.indexOf(newSender) === -1;\n      });\n      this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n    var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this10 = this;\n\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(function (streamId) {\n          var idx = _this10._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            _this10._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (_this10._shimmedLocalStreams[streamId].length === 1) {\n            delete _this10._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n  }\n\n  function shimAddTrackRemoveTrack(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack && browserDetails.version >= 65) {\n      return shimAddTrackRemoveTrackWithNative(window);\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype.getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      var _this11 = this;\n\n      var nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(function (stream) {\n        return _this11._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this12 = this;\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      stream.getTracks().forEach(function (track) {\n        var alreadyExists = _this12.getSenders().find(function (s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.', 'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!this._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(this, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [this._streams[stream.id] || stream]);\n      delete this._reverseStreams[this._streams[stream.id] ? this._streams[stream.id].id : stream.id];\n      delete this._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, stream) {\n      var _this13 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 || !streams[0].getTracks().find(function (t) {\n        return t === track;\n      })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException('The adapter.js addTrack polyfill only supports a single ' + ' stream which is associated with the specified track.', 'NotSupportedError');\n      }\n\n      var alreadyExists = this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.', 'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      var oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function () {\n          _this13.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(function (s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'), externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function (internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'), internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function (method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      var methodObj = _defineProperty({}, method, function () {\n        var _this14 = this;\n\n        var args = arguments;\n        var isLegacyCall = arguments.length && typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(this, [function (description) {\n            var desc = replaceInternalStreamId(_this14, description);\n            args[0].apply(null, [desc]);\n          }, function (err) {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]]);\n        }\n        return nativeMethod.apply(this, arguments).then(function (description) {\n          return replaceInternalStreamId(_this14, description);\n        });\n      });\n      window.RTCPeerConnection.prototype[method] = methodObj[method];\n    });\n\n    var origSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'localDescription', {\n      get: function get() {\n        var description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n    window.RTCPeerConnection.prototype.removeTrack = function removeTrack(sender) {\n      var _this15 = this;\n\n      if (this.signalingState === 'closed') {\n        throw new DOMException('The RTCPeerConnection\\'s signalingState is \\'closed\\'.', 'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' + 'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.', 'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      var stream = void 0;\n      Object.keys(this._streams).forEach(function (streamid) {\n        var hasTrack = _this15._streams[streamid].getTracks().find(function (track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = _this15._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.webkitRTCPeerConnection;\n    }\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    if (browserDetails.version < 53) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n  }\n\n  // Attempt to fix ONN in plan-b mode.\n  function fixNegotiationNeeded(window, browserDetails) {\n    utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function (e) {\n      var pc = e.target;\n      if (browserDetails.version < 72 || pc.getConfiguration && pc.getConfiguration().sdpSemantics === 'plan-b') {\n        if (pc.signalingState !== 'stable') {\n          return;\n        }\n      }\n      return e;\n    });\n  }\n\n  },{\"../utils.js\":11,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, getSourceId) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    // getSourceId is a function that returns a promise resolving with\n    // the sourceId of the screen/window/tab to be shared.\n    if (typeof getSourceId !== 'function') {\n      console.error('shimGetDisplayMedia: getSourceId argument is not ' + 'a function');\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      return getSourceId(constraints).then(function (sourceId) {\n        var widthSpecified = constraints.video && constraints.video.width;\n        var heightSpecified = constraints.video && constraints.video.height;\n        var frameRateSpecified = constraints.video && constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n    };\n  }\n\n  },{}],5:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils.js');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  var logging = utils.log;\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.mediaDevices) {\n      return;\n    }\n\n    var constraintsToChrome_ = function constraintsToChrome_(c) {\n      if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) !== 'object' || c.mandatory || c.optional) {\n        return c;\n      }\n      var cc = {};\n      Object.keys(c).forEach(function (key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = _typeof(c[key]) === 'object' ? c[key] : { ideal: c[key] };\n        if (r.exact !== undefined && typeof r.exact === 'number') {\n          r.min = r.max = r.exact;\n        }\n        var oldname_ = function oldname_(prefix, name) {\n          if (prefix) {\n            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n          }\n          return name === 'deviceId' ? 'sourceId' : name;\n        };\n        if (r.ideal !== undefined) {\n          cc.optional = cc.optional || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[oldname_('min', key)] = r.ideal;\n            cc.optional.push(oc);\n            oc = {};\n            oc[oldname_('max', key)] = r.ideal;\n            cc.optional.push(oc);\n          } else {\n            oc[oldname_('', key)] = r.ideal;\n            cc.optional.push(oc);\n          }\n        }\n        if (r.exact !== undefined && typeof r.exact !== 'number') {\n          cc.mandatory = cc.mandatory || {};\n          cc.mandatory[oldname_('', key)] = r.exact;\n        } else {\n          ['min', 'max'].forEach(function (mix) {\n            if (r[mix] !== undefined) {\n              cc.mandatory = cc.mandatory || {};\n              cc.mandatory[oldname_(mix, key)] = r[mix];\n            }\n          });\n        }\n      });\n      if (c.advanced) {\n        cc.optional = (cc.optional || []).concat(c.advanced);\n      }\n      return cc;\n    };\n\n    var shimConstraints_ = function shimConstraints_(constraints, func) {\n      if (browserDetails.version >= 61) {\n        return func(constraints);\n      }\n      constraints = JSON.parse(JSON.stringify(constraints));\n      if (constraints && _typeof(constraints.audio) === 'object') {\n        var remap = function remap(obj, a, b) {\n          if (a in obj && !(b in obj)) {\n            obj[b] = obj[a];\n            delete obj[a];\n          }\n        };\n        constraints = JSON.parse(JSON.stringify(constraints));\n        remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n        remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n        constraints.audio = constraintsToChrome_(constraints.audio);\n      }\n      if (constraints && _typeof(constraints.video) === 'object') {\n        // Shim facingMode for mobile & surface pro.\n        var face = constraints.video.facingMode;\n        face = face && ((typeof face === 'undefined' ? 'undefined' : _typeof(face)) === 'object' ? face : { ideal: face });\n        var getSupportedFacingModeLies = browserDetails.version < 66;\n\n        if (face && (face.exact === 'user' || face.exact === 'environment' || face.ideal === 'user' || face.ideal === 'environment') && !(navigator.mediaDevices.getSupportedConstraints && navigator.mediaDevices.getSupportedConstraints().facingMode && !getSupportedFacingModeLies)) {\n          delete constraints.video.facingMode;\n          var matches = void 0;\n          if (face.exact === 'environment' || face.ideal === 'environment') {\n            matches = ['back', 'rear'];\n          } else if (face.exact === 'user' || face.ideal === 'user') {\n            matches = ['front'];\n          }\n          if (matches) {\n            // Look for matches in label, or use last cam for back (typical).\n            return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n              devices = devices.filter(function (d) {\n                return d.kind === 'videoinput';\n              });\n              var dev = devices.find(function (d) {\n                return matches.some(function (match) {\n                  return d.label.toLowerCase().includes(match);\n                });\n              });\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact ? { exact: dev.deviceId } : { ideal: dev.deviceId };\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n          }\n        }\n        constraints.video = constraintsToChrome_(constraints.video);\n      }\n      logging('chrome: ' + JSON.stringify(constraints));\n      return func(constraints);\n    };\n\n    var shimError_ = function shimError_(e) {\n      if (browserDetails.version >= 64) {\n        return e;\n      }\n      return {\n        name: {\n          PermissionDeniedError: 'NotAllowedError',\n          PermissionDismissedError: 'NotAllowedError',\n          InvalidStateError: 'NotAllowedError',\n          DevicesNotFoundError: 'NotFoundError',\n          ConstraintNotSatisfiedError: 'OverconstrainedError',\n          TrackStartError: 'NotReadableError',\n          MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n          MediaDeviceKillSwitchOn: 'NotAllowedError',\n          TabCaptureError: 'AbortError',\n          ScreenCaptureError: 'AbortError',\n          DeviceCaptureError: 'AbortError'\n        }[e.name] || e.name,\n        message: e.message,\n        constraint: e.constraint || e.constraintName,\n        toString: function toString() {\n          return this.name + (this.message && ': ') + this.message;\n        }\n      };\n    };\n\n    var getUserMedia_ = function getUserMedia_(constraints, onSuccess, onError) {\n      shimConstraints_(constraints, function (c) {\n        navigator.webkitGetUserMedia(c, onSuccess, function (e) {\n          if (onError) {\n            onError(shimError_(e));\n          }\n        });\n      });\n    };\n    navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    if (navigator.mediaDevices.getUserMedia) {\n      var origGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (cs) {\n        return shimConstraints_(cs, function (c) {\n          return origGetUserMedia(c).then(function (stream) {\n            if (c.audio && !stream.getAudioTracks().length || c.video && !stream.getVideoTracks().length) {\n              stream.getTracks().forEach(function (track) {\n                track.stop();\n              });\n              throw new DOMException('', 'NotFoundError');\n            }\n            return stream;\n          }, function (e) {\n            return Promise.reject(shimError_(e));\n          });\n        });\n      };\n    }\n  }\n\n  },{\"../utils.js\":11}],6:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimRTCIceCandidate = shimRTCIceCandidate;\n  exports.shimMaxMessageSize = shimMaxMessageSize;\n  exports.shimSendThrowTypeError = shimSendThrowTypeError;\n  exports.shimConnectionState = shimConnectionState;\n  exports.removeExtmapAllowMixed = removeExtmapAllowMixed;\n  exports.shimAddIceCandidateNullOrEmpty = shimAddIceCandidateNullOrEmpty;\n  exports.shimParameterlessSetLocalDescription = shimParameterlessSetLocalDescription;\n\n  var _sdp = require('sdp');\n\n  var _sdp2 = _interopRequireDefault(_sdp);\n\n  var _utils = require('./utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function shimRTCIceCandidate(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (!window.RTCIceCandidate || window.RTCIceCandidate && 'foundation' in window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function RTCIceCandidate(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if ((typeof args === 'undefined' ? 'undefined' : _typeof(args)) === 'object' && args.candidate && args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      if (args.candidate && args.candidate.length) {\n        // Augment the native candidate with the parsed fields.\n        var nativeCandidate = new NativeRTCIceCandidate(args);\n        var parsedCandidate = _sdp2.default.parseCandidate(args.candidate);\n        var augmentedCandidate = Object.assign(nativeCandidate, parsedCandidate);\n\n        // Add a serializer that does not serialize the extra attributes.\n        augmentedCandidate.toJSON = function toJSON() {\n          return {\n            candidate: augmentedCandidate.candidate,\n            sdpMid: augmentedCandidate.sdpMid,\n            sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n            usernameFragment: augmentedCandidate.usernameFragment\n          };\n        };\n        return augmentedCandidate;\n      }\n      return new NativeRTCIceCandidate(args);\n    };\n    window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    utils.wrapPeerConnectionEvent(window, 'icecandidate', function (e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  }\n\n  function shimMaxMessageSize(window, browserDetails) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n\n    if (!('sctp' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n        get: function get() {\n          return typeof this._sctp === 'undefined' ? null : this._sctp;\n        }\n      });\n    }\n\n    var sctpInDescription = function sctpInDescription(description) {\n      if (!description || !description.sdp) {\n        return false;\n      }\n      var sections = _sdp2.default.splitSections(description.sdp);\n      sections.shift();\n      return sections.some(function (mediaSection) {\n        var mLine = _sdp2.default.parseMLine(mediaSection);\n        return mLine && mLine.kind === 'application' && mLine.protocol.indexOf('SCTP') !== -1;\n      });\n    };\n\n    var getRemoteFirefoxVersion = function getRemoteFirefoxVersion(description) {\n      // TODO: Is there a better solution for detecting Firefox?\n      var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n      if (match === null || match.length < 2) {\n        return -1;\n      }\n      var version = parseInt(match[1], 10);\n      // Test for NaN (yes, this is ugly)\n      return version !== version ? -1 : version;\n    };\n\n    var getCanSendMaxMessageSize = function getCanSendMaxMessageSize(remoteIsFirefox) {\n      // Every implementation we know can send at least 64 KiB.\n      // Note: Although Chrome is technically able to send up to 256 KiB, the\n      //       data does not reach the other peer reliably.\n      //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n      var canSendMaxMessageSize = 65536;\n      if (browserDetails.browser === 'firefox') {\n        if (browserDetails.version < 57) {\n          if (remoteIsFirefox === -1) {\n            // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n            // fragmentation.\n            canSendMaxMessageSize = 16384;\n          } else {\n            // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n            // messages. Thus, supporting ~2 GiB when sending.\n            canSendMaxMessageSize = 2147483637;\n          }\n        } else if (browserDetails.version < 60) {\n          // Currently, all FF >= 57 will reset the remote maximum message size\n          // to the default value when a data channel is created at a later\n          // stage. :(\n          // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n          canSendMaxMessageSize = browserDetails.version === 57 ? 65535 : 65536;\n        } else {\n          // FF >= 60 supports sending ~2 GiB\n          canSendMaxMessageSize = 2147483637;\n        }\n      }\n      return canSendMaxMessageSize;\n    };\n\n    var getMaxMessageSize = function getMaxMessageSize(description, remoteIsFirefox) {\n      // Note: 65536 bytes is the default value from the SDP spec. Also,\n      //       every implementation we know supports receiving 65536 bytes.\n      var maxMessageSize = 65536;\n\n      // FF 57 has a slightly incorrect default remote max message size, so\n      // we need to adjust it here to avoid a failure when sending.\n      // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n      if (browserDetails.browser === 'firefox' && browserDetails.version === 57) {\n        maxMessageSize = 65535;\n      }\n\n      var match = _sdp2.default.matchPrefix(description.sdp, 'a=max-message-size:');\n      if (match.length > 0) {\n        maxMessageSize = parseInt(match[0].substr(19), 10);\n      } else if (browserDetails.browser === 'firefox' && remoteIsFirefox !== -1) {\n        // If the maximum message size is not present in the remote SDP and\n        // both local and remote are Firefox, the remote peer can receive\n        // ~2 GiB.\n        maxMessageSize = 2147483637;\n      }\n      return maxMessageSize;\n    };\n\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        var _getConfiguration = this.getConfiguration(),\n            sdpSemantics = _getConfiguration.sdpSemantics;\n\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get: function get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n\n            enumerable: true,\n            configurable: true\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        var maxMessageSize = void 0;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        var sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get: function get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  }\n\n  function shimSendThrowTypeError(window) {\n    if (!(window.RTCPeerConnection && 'createDataChannel' in window.RTCPeerConnection.prototype)) {\n      return;\n    }\n\n    // Note: Although Firefox >= 57 has a native implementation, the maximum\n    //       message size can be reset for all data channels at a later stage.\n    //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n    function wrapDcSend(dc, pc) {\n      var origDataChannelSend = dc.send;\n      dc.send = function send() {\n        var data = arguments[0];\n        var length = data.length || data.size || data.byteLength;\n        if (dc.readyState === 'open' && pc.sctp && length > pc.sctp.maxMessageSize) {\n          throw new TypeError('Message too large (can send a maximum of ' + pc.sctp.maxMessageSize + ' bytes)');\n        }\n        return origDataChannelSend.apply(dc, arguments);\n      };\n    }\n    var origCreateDataChannel = window.RTCPeerConnection.prototype.createDataChannel;\n    window.RTCPeerConnection.prototype.createDataChannel = function createDataChannel() {\n      var dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n    utils.wrapPeerConnectionEvent(window, 'datachannel', function (e) {\n      wrapDcSend(e.channel, e.target);\n      return e;\n    });\n  }\n\n  /* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n   * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n   * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n   * since DTLS failures would be hidden. See\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n   * for the Firefox tracking bug.\n   */\n  function shimConnectionState(window) {\n    if (!window.RTCPeerConnection || 'connectionState' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    Object.defineProperty(proto, 'connectionState', {\n      get: function get() {\n        return {\n          completed: 'connected',\n          checking: 'connecting'\n        }[this.iceConnectionState] || this.iceConnectionState;\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(proto, 'onconnectionstatechange', {\n      get: function get() {\n        return this._onconnectionstatechange || null;\n      },\n      set: function set(cb) {\n        if (this._onconnectionstatechange) {\n          this.removeEventListener('connectionstatechange', this._onconnectionstatechange);\n          delete this._onconnectionstatechange;\n        }\n        if (cb) {\n          this.addEventListener('connectionstatechange', this._onconnectionstatechange = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n\n    ['setLocalDescription', 'setRemoteDescription'].forEach(function (method) {\n      var origMethod = proto[method];\n      proto[method] = function () {\n        if (!this._connectionstatechangepoly) {\n          this._connectionstatechangepoly = function (e) {\n            var pc = e.target;\n            if (pc._lastConnectionState !== pc.connectionState) {\n              pc._lastConnectionState = pc.connectionState;\n              var newEvent = new Event('connectionstatechange', e);\n              pc.dispatchEvent(newEvent);\n            }\n            return e;\n          };\n          this.addEventListener('iceconnectionstatechange', this._connectionstatechangepoly);\n        }\n        return origMethod.apply(this, arguments);\n      };\n    });\n  }\n\n  function removeExtmapAllowMixed(window, browserDetails) {\n    /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n      return;\n    }\n    if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n      return;\n    }\n    var nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription(desc) {\n      if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n        var sdp = desc.sdp.split('\\n').filter(function (line) {\n          return line.trim() !== 'a=extmap-allow-mixed';\n        }).join('\\n');\n        // Safari enforces read-only-ness of RTCSessionDescription fields.\n        if (window.RTCSessionDescription && desc instanceof window.RTCSessionDescription) {\n          arguments[0] = new window.RTCSessionDescription({\n            type: desc.type,\n            sdp: sdp\n          });\n        } else {\n          desc.sdp = sdp;\n        }\n      }\n      return nativeSRD.apply(this, arguments);\n    };\n  }\n\n  function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n    // Support for addIceCandidate(null or undefined)\n    // as well as addIceCandidate({candidate: \"\", ...})\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n    // Note: must be called before other polyfills which change the signature.\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeAddIceCandidate = window.RTCPeerConnection.prototype.addIceCandidate;\n    if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.addIceCandidate = function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if ((browserDetails.browser === 'chrome' && browserDetails.version < 78 || browserDetails.browser === 'firefox' && browserDetails.version < 68 || browserDetails.browser === 'safari') && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n\n  // Note: Make sure to call this ahead of APIs that modify\n  // setLocalDescription.length\n  function shimParameterlessSetLocalDescription(window, browserDetails) {\n    if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n      return;\n    }\n    var nativeSetLocalDescription = window.RTCPeerConnection.prototype.setLocalDescription;\n    if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.setLocalDescription = function setLocalDescription() {\n      var _this = this;\n\n      var desc = arguments[0] || {};\n      if ((typeof desc === 'undefined' ? 'undefined' : _typeof(desc)) !== 'object' || desc.type && desc.sdp) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = { type: desc.type, sdp: desc.sdp };\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || desc.type !== 'offer' && desc.type !== 'answer') {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      var func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this).then(function (d) {\n        return nativeSetLocalDescription.apply(_this, [d]);\n      });\n    };\n  }\n\n  },{\"./utils\":11,\"sdp\":12}],7:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var _getusermedia = require('./getusermedia');\n\n  Object.defineProperty(exports, 'shimGetUserMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getusermedia.shimGetUserMedia;\n    }\n  });\n\n  var _getdisplaymedia = require('./getdisplaymedia');\n\n  Object.defineProperty(exports, 'shimGetDisplayMedia', {\n    enumerable: true,\n    get: function get() {\n      return _getdisplaymedia.shimGetDisplayMedia;\n    }\n  });\n  exports.shimOnTrack = shimOnTrack;\n  exports.shimPeerConnection = shimPeerConnection;\n  exports.shimSenderGetStats = shimSenderGetStats;\n  exports.shimReceiverGetStats = shimReceiverGetStats;\n  exports.shimRemoveStream = shimRemoveStream;\n  exports.shimRTCDataChannel = shimRTCDataChannel;\n  exports.shimAddTransceiver = shimAddTransceiver;\n  exports.shimGetParameters = shimGetParameters;\n  exports.shimCreateOffer = shimCreateOffer;\n  exports.shimCreateAnswer = shimCreateAnswer;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  function shimOnTrack(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimPeerConnection(window, browserDetails) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n      // very basic support for old versions.\n      window.RTCPeerConnection = window.mozRTCPeerConnection;\n    }\n\n    if (browserDetails.version < 53) {\n      // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'].forEach(function (method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        var methodObj = _defineProperty({}, method, function () {\n          arguments[0] = new (method === 'addIceCandidate' ? window.RTCIceCandidate : window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        });\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n    }\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function getStats() {\n      var _arguments = Array.prototype.slice.call(arguments),\n          selector = _arguments[0],\n          onSucc = _arguments[1],\n          onErr = _arguments[2];\n\n      return nativeGetStats.apply(this, [selector || null]).then(function (stats) {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(function (stat) {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach(function (stat, i) {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      }).then(onSucc, onErr);\n    };\n  }\n\n  function shimSenderGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n      return;\n    }\n    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        var _this = this;\n\n        var senders = origGetSenders.apply(this, []);\n        senders.forEach(function (sender) {\n          return sender._pc = _this;\n        });\n        return senders;\n      };\n    }\n\n    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        var sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map());\n    };\n  }\n\n  function shimReceiverGetStats(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection && window.RTCRtpSender)) {\n      return;\n    }\n    if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n      return;\n    }\n    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n        var _this2 = this;\n\n        var receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(function (receiver) {\n          return receiver._pc = _this2;\n        });\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', function (e) {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      return this._pc.getStats(this.track);\n    };\n  }\n\n  function shimRemoveStream(window) {\n    if (!window.RTCPeerConnection || 'removeStream' in window.RTCPeerConnection.prototype) {\n      return;\n    }\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(function (sender) {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n\n  function shimRTCDataChannel(window) {\n    // rename DataChannel to RTCDataChannel (native fix in FF60):\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n    if (window.DataChannel && !window.RTCDataChannel) {\n      window.RTCDataChannel = window.DataChannel;\n    }\n  }\n\n  function shimAddTransceiver(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n    if (origAddTransceiver) {\n      window.RTCPeerConnection.prototype.addTransceiver = function addTransceiver() {\n        this.setParametersPromises = [];\n        var initParameters = arguments[1];\n        var shouldPerformCheck = initParameters && 'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach(function (encodingParam) {\n            if ('rid' in encodingParam) {\n              var ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        var transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          var sender = transceiver.sender;\n\n          var params = sender.getParameters();\n          if (!('encodings' in params) ||\n          // Avoid being fooled by patched getParameters() below.\n          params.encodings.length === 1 && Object.keys(params.encodings[0]).length === 0) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params).then(function () {\n              delete sender.sendEncodings;\n            }).catch(function () {\n              delete sender.sendEncodings;\n            }));\n          }\n        }\n        return transceiver;\n      };\n    }\n  }\n\n  function shimGetParameters(window) {\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCRtpSender)) {\n      return;\n    }\n    var origGetParameters = window.RTCRtpSender.prototype.getParameters;\n    if (origGetParameters) {\n      window.RTCRtpSender.prototype.getParameters = function getParameters() {\n        var params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n    }\n  }\n\n  function shimCreateOffer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n      var _this4 = this,\n          _arguments2 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateOffer.apply(_this4, _arguments2);\n        }).finally(function () {\n          _this4.setParametersPromises = [];\n        });\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimCreateAnswer(window) {\n    // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n    // Firefox ignores the init sendEncodings options passed to addTransceiver\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n    if (!((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCPeerConnection)) {\n      return;\n    }\n    var origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n    window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n      var _this5 = this,\n          _arguments3 = arguments;\n\n      if (this.setParametersPromises && this.setParametersPromises.length) {\n        return Promise.all(this.setParametersPromises).then(function () {\n          return origCreateAnswer.apply(_this5, _arguments3);\n        }).finally(function () {\n          _this5.setParametersPromises = [];\n        });\n      }\n      return origCreateAnswer.apply(this, arguments);\n    };\n  }\n\n  },{\"../utils\":11,\"./getdisplaymedia\":8,\"./getusermedia\":9}],8:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shimGetDisplayMedia = shimGetDisplayMedia;\n  function shimGetDisplayMedia(window, preferredMediaSource) {\n    if (window.navigator.mediaDevices && 'getDisplayMedia' in window.navigator.mediaDevices) {\n      return;\n    }\n    if (!window.navigator.mediaDevices) {\n      return;\n    }\n    window.navigator.mediaDevices.getDisplayMedia = function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        var err = new DOMException('getDisplayMedia without video ' + 'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = { mediaSource: preferredMediaSource };\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n  }\n\n  },{}],9:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimGetUserMedia = shimGetUserMedia;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimGetUserMedia(window, browserDetails) {\n    var navigator = window && window.navigator;\n    var MediaStreamTrack = window && window.MediaStreamTrack;\n\n    navigator.getUserMedia = function (constraints, onSuccess, onError) {\n      // Replace Firefox 44+'s deprecation warning with unprefixed version.\n      utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n      navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n    };\n\n    if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n      var remap = function remap(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n\n      var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (c) {\n        if ((typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object' && _typeof(c.audio) === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n          remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeGetUserMedia(c);\n      };\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n        var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n        MediaStreamTrack.prototype.getSettings = function () {\n          var obj = nativeGetSettings.apply(this, arguments);\n          remap(obj, 'mozAutoGainControl', 'autoGainControl');\n          remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n          return obj;\n        };\n      }\n\n      if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n        var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n        MediaStreamTrack.prototype.applyConstraints = function (c) {\n          if (this.kind === 'audio' && (typeof c === 'undefined' ? 'undefined' : _typeof(c)) === 'object') {\n            c = JSON.parse(JSON.stringify(c));\n            remap(c, 'autoGainControl', 'mozAutoGainControl');\n            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n          }\n          return nativeApplyConstraints.apply(this, [c]);\n        };\n      }\n    }\n  }\n\n  },{\"../utils\":11}],10:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.shimLocalStreamsAPI = shimLocalStreamsAPI;\n  exports.shimRemoteStreamsAPI = shimRemoteStreamsAPI;\n  exports.shimCallbacksAPI = shimCallbacksAPI;\n  exports.shimGetUserMedia = shimGetUserMedia;\n  exports.shimConstraints = shimConstraints;\n  exports.shimRTCIceServerUrls = shimRTCIceServerUrls;\n  exports.shimTrackEventTransceiver = shimTrackEventTransceiver;\n  exports.shimCreateOfferLegacy = shimCreateOfferLegacy;\n  exports.shimAudioContext = shimAudioContext;\n\n  var _utils = require('../utils');\n\n  var utils = _interopRequireWildcard(_utils);\n\n  function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n  function shimLocalStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n        var _this = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n        // Try to emulate Chrome's behaviour of adding in audio-video order.\n        // Safari orders by track id.\n        stream.getAudioTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n        stream.getVideoTracks().forEach(function (track) {\n          return _addTrack.call(_this, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n        var _this2 = this;\n\n        for (var _len = arguments.length, streams = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          streams[_key - 1] = arguments[_key];\n        }\n\n        if (streams) {\n          streams.forEach(function (stream) {\n            if (!_this2._localStreams) {\n              _this2._localStreams = [stream];\n            } else if (!_this2._localStreams.includes(stream)) {\n              _this2._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n        var _this3 = this;\n\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function (sender) {\n          if (tracks.includes(sender.track)) {\n            _this3.removeTrack(sender);\n          }\n        });\n      };\n    }\n  }\n\n  function shimRemoteStreamsAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function get() {\n          return this._onaddstream;\n        },\n        set: function set(f) {\n          var _this4 = this;\n\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!_this4._remoteStreams) {\n                _this4._remoteStreams = [];\n              }\n              if (_this4._remoteStreams.includes(stream)) {\n                return;\n              }\n              _this4._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              _this4.dispatchEvent(event);\n            });\n          });\n        }\n      });\n      var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n        var pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function (e) {\n            e.streams.forEach(function (stream) {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              var event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  }\n\n  function shimCallbacksAPI(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var origCreateOffer = prototype.createOffer;\n    var origCreateAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function createOffer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n      var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n      var promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function withCallback(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function withCallback(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  }\n\n  function shimGetUserMedia(window) {\n    var navigator = window && window.navigator;\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      // shim not needed in Safari 12.1\n      var mediaDevices = navigator.mediaDevices;\n      var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n      navigator.mediaDevices.getUserMedia = function (constraints) {\n        return _getUserMedia(shimConstraints(constraints));\n      };\n    }\n\n    if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n        navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n      }.bind(navigator);\n    }\n  }\n\n  function shimConstraints(constraints) {\n    if (constraints && constraints.video !== undefined) {\n      return Object.assign({}, constraints, { video: utils.compactObject(constraints.video) });\n    }\n\n    return constraints;\n  }\n\n  function shimRTCIceServerUrls(window) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in OrigPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function get() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  }\n\n  function shimTrackEventTransceiver(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function get() {\n          return { receiver: this.receiver };\n        }\n      });\n    }\n  }\n\n  function shimCreateOfferLegacy(window) {\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n    window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n        }\n        var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'audio';\n        });\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n          this.addTransceiver('audio', { direction: 'recvonly' });\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n        }\n        var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n          return transceiver.receiver.track.kind === 'video';\n        });\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n          this.addTransceiver('video', { direction: 'recvonly' });\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n  }\n\n  function shimAudioContext(window) {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== 'object' || window.AudioContext) {\n      return;\n    }\n    window.AudioContext = window.webkitAudioContext;\n  }\n\n  },{\"../utils\":11}],11:[function(require,module,exports){\n  /*\n   *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n   *\n   *  Use of this source code is governed by a BSD-style license\n   *  that can be found in the LICENSE file in the root of the source\n   *  tree.\n   */\n  /* eslint-env node */\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  exports.extractVersion = extractVersion;\n  exports.wrapPeerConnectionEvent = wrapPeerConnectionEvent;\n  exports.disableLog = disableLog;\n  exports.disableWarnings = disableWarnings;\n  exports.log = log;\n  exports.deprecated = deprecated;\n  exports.detectBrowser = detectBrowser;\n  exports.compactObject = compactObject;\n  exports.walkStats = walkStats;\n  exports.filterStats = filterStats;\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  var logDisabled_ = true;\n  var deprecationWarnings_ = true;\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  function extractVersion(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  }\n\n  // Wraps the peerconnection event eventNameToWrap in a function\n  // which returns the modified event object (or false to prevent\n  // the event).\n  function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n    if (!window.RTCPeerConnection) {\n      return;\n    }\n    var proto = window.RTCPeerConnection.prototype;\n    var nativeAddEventListener = proto.addEventListener;\n    proto.addEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap) {\n        return nativeAddEventListener.apply(this, arguments);\n      }\n      var wrappedCallback = function wrappedCallback(e) {\n        var modifiedEvent = wrapper(e);\n        if (modifiedEvent) {\n          if (cb.handleEvent) {\n            cb.handleEvent(modifiedEvent);\n          } else {\n            cb(modifiedEvent);\n          }\n        }\n      };\n      this._eventMap = this._eventMap || {};\n      if (!this._eventMap[eventNameToWrap]) {\n        this._eventMap[eventNameToWrap] = new Map();\n      }\n      this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n      return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n    };\n\n    var nativeRemoveEventListener = proto.removeEventListener;\n    proto.removeEventListener = function (nativeEventName, cb) {\n      if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      if (!this._eventMap[eventNameToWrap].has(cb)) {\n        return nativeRemoveEventListener.apply(this, arguments);\n      }\n      var unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n      this._eventMap[eventNameToWrap].delete(cb);\n      if (this._eventMap[eventNameToWrap].size === 0) {\n        delete this._eventMap[eventNameToWrap];\n      }\n      if (Object.keys(this._eventMap).length === 0) {\n        delete this._eventMap;\n      }\n      return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n    };\n\n    Object.defineProperty(proto, 'on' + eventNameToWrap, {\n      get: function get() {\n        return this['_on' + eventNameToWrap];\n      },\n      set: function set(cb) {\n        if (this['_on' + eventNameToWrap]) {\n          this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n          delete this['_on' + eventNameToWrap];\n        }\n        if (cb) {\n          this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n        }\n      },\n\n      enumerable: true,\n      configurable: true\n    });\n  }\n\n  function disableLog(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n  }\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  function disableWarnings(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + (typeof bool === 'undefined' ? 'undefined' : _typeof(bool)) + '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  }\n\n  function log() {\n    if ((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  }\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  function deprecated(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n  }\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  function detectBrowser(window) {\n    // Returned result object.\n    var result = { browser: null, version: null };\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    var navigator = window.navigator;\n\n\n    if (navigator.mozGetUserMedia) {\n      // Firefox.\n      result.browser = 'firefox';\n      result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n      // Chrome, Chromium, Webview, Opera.\n      // Version matches Chrome/WebRTC version.\n      // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n      // more complicated fallback to webkitRTCPeerConnection.\n      result.browser = 'chrome';\n      result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n    } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n      // Safari.\n      result.browser = 'safari';\n      result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n      result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n    } else {\n      // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  }\n\n  /**\n   * Checks if something is an object.\n   *\n   * @param {*} val The something you want to check.\n   * @return true if val is an object, false otherwise.\n   */\n  function isObject(val) {\n    return Object.prototype.toString.call(val) === '[object Object]';\n  }\n\n  /**\n   * Remove all empty objects and undefined values\n   * from a nested object -- an enhanced and vanilla version\n   * of Lodash's `compact`.\n   */\n  function compactObject(data) {\n    if (!isObject(data)) {\n      return data;\n    }\n\n    return Object.keys(data).reduce(function (accumulator, key) {\n      var isObj = isObject(data[key]);\n      var value = isObj ? compactObject(data[key]) : data[key];\n      var isEmptyObject = isObj && !Object.keys(value).length;\n      if (value === undefined || isEmptyObject) {\n        return accumulator;\n      }\n      return Object.assign(accumulator, _defineProperty({}, key, value));\n    }, {});\n  }\n\n  /* iterates the stats graph recursively. */\n  function walkStats(stats, base, resultSet) {\n    if (!base || resultSet.has(base.id)) {\n      return;\n    }\n    resultSet.set(base.id, base);\n    Object.keys(base).forEach(function (name) {\n      if (name.endsWith('Id')) {\n        walkStats(stats, stats.get(base[name]), resultSet);\n      } else if (name.endsWith('Ids')) {\n        base[name].forEach(function (id) {\n          walkStats(stats, stats.get(id), resultSet);\n        });\n      }\n    });\n  }\n\n  /* filter getStats for a sender/receiver track. */\n  function filterStats(result, track, outbound) {\n    var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n    var filteredResult = new Map();\n    if (track === null) {\n      return filteredResult;\n    }\n    var trackStats = [];\n    result.forEach(function (value) {\n      if (value.type === 'track' && value.trackIdentifier === track.id) {\n        trackStats.push(value);\n      }\n    });\n    trackStats.forEach(function (trackStat) {\n      result.forEach(function (stats) {\n        if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n          walkStats(result, stats, filteredResult);\n        }\n      });\n    });\n    return filteredResult;\n  }\n\n  },{}],12:[function(require,module,exports){\n  /* eslint-env node */\n  'use strict';\n\n  // SDP helpers.\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  var SDPUtils = {};\n\n  // Generate an alphanumeric identifier for cname or mids.\n  // TODO: use UUIDs instead? https://gist.github.com/jed/982883\n  SDPUtils.generateIdentifier = function () {\n    return Math.random().toString(36).substr(2, 10);\n  };\n\n  // The RTCP CNAME used by all peerconnections from the same JS.\n  SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n  // Splits SDP into lines, dealing with both CRLF and LF.\n  SDPUtils.splitLines = function (blob) {\n    return blob.trim().split('\\n').map(function (line) {\n      return line.trim();\n    });\n  };\n  // Splits SDP into sessionpart and mediasections. Ensures CRLF.\n  SDPUtils.splitSections = function (blob) {\n    var parts = blob.split('\\nm=');\n    return parts.map(function (part, index) {\n      return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n    });\n  };\n\n  // Returns the session description.\n  SDPUtils.getDescription = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    return sections && sections[0];\n  };\n\n  // Returns the individual media sections.\n  SDPUtils.getMediaSections = function (blob) {\n    var sections = SDPUtils.splitSections(blob);\n    sections.shift();\n    return sections;\n  };\n\n  // Returns lines that start with a certain prefix.\n  SDPUtils.matchPrefix = function (blob, prefix) {\n    return SDPUtils.splitLines(blob).filter(function (line) {\n      return line.indexOf(prefix) === 0;\n    });\n  };\n\n  // Parses an ICE candidate line. Sample input:\n  // candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n  // rport 55996\"\n  // Input can be prefixed with a=.\n  SDPUtils.parseCandidate = function (line) {\n    var parts = void 0;\n    // Parse both variants.\n    if (line.indexOf('a=candidate:') === 0) {\n      parts = line.substring(12).split(' ');\n    } else {\n      parts = line.substring(10).split(' ');\n    }\n\n    var candidate = {\n      foundation: parts[0],\n      component: { 1: 'rtp', 2: 'rtcp' }[parts[1]] || parts[1],\n      protocol: parts[2].toLowerCase(),\n      priority: parseInt(parts[3], 10),\n      ip: parts[4],\n      address: parts[4], // address is an alias for ip.\n      port: parseInt(parts[5], 10),\n      // skip parts[6] == 'typ'\n      type: parts[7]\n    };\n\n    for (var i = 8; i < parts.length; i += 2) {\n      switch (parts[i]) {\n        case 'raddr':\n          candidate.relatedAddress = parts[i + 1];\n          break;\n        case 'rport':\n          candidate.relatedPort = parseInt(parts[i + 1], 10);\n          break;\n        case 'tcptype':\n          candidate.tcpType = parts[i + 1];\n          break;\n        case 'ufrag':\n          candidate.ufrag = parts[i + 1]; // for backward compatibility.\n          candidate.usernameFragment = parts[i + 1];\n          break;\n        default:\n          // extension handling, in particular ufrag. Don't overwrite.\n          if (candidate[parts[i]] === undefined) {\n            candidate[parts[i]] = parts[i + 1];\n          }\n          break;\n      }\n    }\n    return candidate;\n  };\n\n  // Translates a candidate object into SDP candidate attribute.\n  // This does not include the a= prefix!\n  SDPUtils.writeCandidate = function (candidate) {\n    var sdp = [];\n    sdp.push(candidate.foundation);\n\n    var component = candidate.component;\n    if (component === 'rtp') {\n      sdp.push(1);\n    } else if (component === 'rtcp') {\n      sdp.push(2);\n    } else {\n      sdp.push(component);\n    }\n    sdp.push(candidate.protocol.toUpperCase());\n    sdp.push(candidate.priority);\n    sdp.push(candidate.address || candidate.ip);\n    sdp.push(candidate.port);\n\n    var type = candidate.type;\n    sdp.push('typ');\n    sdp.push(type);\n    if (type !== 'host' && candidate.relatedAddress && candidate.relatedPort) {\n      sdp.push('raddr');\n      sdp.push(candidate.relatedAddress);\n      sdp.push('rport');\n      sdp.push(candidate.relatedPort);\n    }\n    if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n      sdp.push('tcptype');\n      sdp.push(candidate.tcpType);\n    }\n    if (candidate.usernameFragment || candidate.ufrag) {\n      sdp.push('ufrag');\n      sdp.push(candidate.usernameFragment || candidate.ufrag);\n    }\n    return 'candidate:' + sdp.join(' ');\n  };\n\n  // Parses an ice-options line, returns an array of option tags.\n  // Sample input:\n  // a=ice-options:foo bar\n  SDPUtils.parseIceOptions = function (line) {\n    return line.substr(14).split(' ');\n  };\n\n  // Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n  // a=rtpmap:111 opus/48000/2\n  SDPUtils.parseRtpMap = function (line) {\n    var parts = line.substr(9).split(' ');\n    var parsed = {\n      payloadType: parseInt(parts.shift(), 10) // was: id\n    };\n\n    parts = parts[0].split('/');\n\n    parsed.name = parts[0];\n    parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n    parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n    // legacy alias, got renamed back to channels in ORTC.\n    parsed.numChannels = parsed.channels;\n    return parsed;\n  };\n\n  // Generates a rtpmap line from RTCRtpCodecCapability or\n  // RTCRtpCodecParameters.\n  SDPUtils.writeRtpMap = function (codec) {\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    var channels = codec.channels || codec.numChannels || 1;\n    return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate + (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n  };\n\n  // Parses a extmap line (headerextension from RFC 5285). Sample input:\n  // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n  // a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n  SDPUtils.parseExtmap = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      id: parseInt(parts[0], 10),\n      direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n      uri: parts[1]\n    };\n  };\n\n  // Generates an extmap line from RTCRtpHeaderExtensionParameters or\n  // RTCRtpHeaderExtension.\n  SDPUtils.writeExtmap = function (headerExtension) {\n    return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) + (headerExtension.direction && headerExtension.direction !== 'sendrecv' ? '/' + headerExtension.direction : '') + ' ' + headerExtension.uri + '\\r\\n';\n  };\n\n  // Parses a fmtp line, returns dictionary. Sample input:\n  // a=fmtp:96 vbr=on;cng=on\n  // Also deals with vbr=on; cng=on\n  SDPUtils.parseFmtp = function (line) {\n    var parsed = {};\n    var kv = void 0;\n    var parts = line.substr(line.indexOf(' ') + 1).split(';');\n    for (var j = 0; j < parts.length; j++) {\n      kv = parts[j].trim().split('=');\n      parsed[kv[0].trim()] = kv[1];\n    }\n    return parsed;\n  };\n\n  // Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeFmtp = function (codec) {\n    var line = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.parameters && Object.keys(codec.parameters).length) {\n      var params = [];\n      Object.keys(codec.parameters).forEach(function (param) {\n        if (codec.parameters[param] !== undefined) {\n          params.push(param + '=' + codec.parameters[param]);\n        } else {\n          params.push(param);\n        }\n      });\n      line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n    }\n    return line;\n  };\n\n  // Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n  // a=rtcp-fb:98 nack rpsi\n  SDPUtils.parseRtcpFb = function (line) {\n    var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n    return {\n      type: parts.shift(),\n      parameter: parts.join(' ')\n    };\n  };\n\n  // Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n  SDPUtils.writeRtcpFb = function (codec) {\n    var lines = '';\n    var pt = codec.payloadType;\n    if (codec.preferredPayloadType !== undefined) {\n      pt = codec.preferredPayloadType;\n    }\n    if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n      // FIXME: special handling for trr-int?\n      codec.rtcpFeedback.forEach(function (fb) {\n        lines += 'a=rtcp-fb:' + pt + ' ' + fb.type + (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') + '\\r\\n';\n      });\n    }\n    return lines;\n  };\n\n  // Parses a RFC 5576 ssrc media attribute. Sample input:\n  // a=ssrc:3735928559 cname:something\n  SDPUtils.parseSsrcMedia = function (line) {\n    var sp = line.indexOf(' ');\n    var parts = {\n      ssrc: parseInt(line.substr(7, sp - 7), 10)\n    };\n    var colon = line.indexOf(':', sp);\n    if (colon > -1) {\n      parts.attribute = line.substr(sp + 1, colon - sp - 1);\n      parts.value = line.substr(colon + 1);\n    } else {\n      parts.attribute = line.substr(sp + 1);\n    }\n    return parts;\n  };\n\n  // Parse a ssrc-group line (see RFC 5576). Sample input:\n  // a=ssrc-group:semantics 12 34\n  SDPUtils.parseSsrcGroup = function (line) {\n    var parts = line.substr(13).split(' ');\n    return {\n      semantics: parts.shift(),\n      ssrcs: parts.map(function (ssrc) {\n        return parseInt(ssrc, 10);\n      })\n    };\n  };\n\n  // Extracts the MID (RFC 5888) from a media section.\n  // Returns the MID or undefined if no mid line was found.\n  SDPUtils.getMid = function (mediaSection) {\n    var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n    if (mid) {\n      return mid.substr(6);\n    }\n  };\n\n  // Parses a fingerprint line for DTLS-SRTP.\n  SDPUtils.parseFingerprint = function (line) {\n    var parts = line.substr(14).split(' ');\n    return {\n      algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n      value: parts[1].toUpperCase() // the definition is upper-case in RFC 4572.\n    };\n  };\n\n  // Extracts DTLS parameters from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the fingerprint line as input. See also getIceParameters.\n  SDPUtils.getDtlsParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=fingerprint:');\n    // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n    return {\n      role: 'auto',\n      fingerprints: lines.map(SDPUtils.parseFingerprint)\n    };\n  };\n\n  // Serializes DTLS parameters to SDP.\n  SDPUtils.writeDtlsParameters = function (params, setupType) {\n    var sdp = 'a=setup:' + setupType + '\\r\\n';\n    params.fingerprints.forEach(function (fp) {\n      sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n    });\n    return sdp;\n  };\n\n  // Parses a=crypto lines into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\n  SDPUtils.parseCryptoLine = function (line) {\n    var parts = line.substr(9).split(' ');\n    return {\n      tag: parseInt(parts[0], 10),\n      cryptoSuite: parts[1],\n      keyParams: parts[2],\n      sessionParams: parts.slice(3)\n    };\n  };\n\n  SDPUtils.writeCryptoLine = function (parameters) {\n    return 'a=crypto:' + parameters.tag + ' ' + parameters.cryptoSuite + ' ' + (_typeof(parameters.keyParams) === 'object' ? SDPUtils.writeCryptoKeyParams(parameters.keyParams) : parameters.keyParams) + (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') + '\\r\\n';\n  };\n\n  // Parses the crypto key parameters into\n  //   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\n  SDPUtils.parseCryptoKeyParams = function (keyParams) {\n    if (keyParams.indexOf('inline:') !== 0) {\n      return null;\n    }\n    var parts = keyParams.substr(7).split('|');\n    return {\n      keyMethod: 'inline',\n      keySalt: parts[0],\n      lifeTime: parts[1],\n      mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n      mkiLength: parts[2] ? parts[2].split(':')[1] : undefined\n    };\n  };\n\n  SDPUtils.writeCryptoKeyParams = function (keyParams) {\n    return keyParams.keyMethod + ':' + keyParams.keySalt + (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') + (keyParams.mkiValue && keyParams.mkiLength ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength : '');\n  };\n\n  // Extracts all SDES parameters.\n  SDPUtils.getCryptoParameters = function (mediaSection, sessionpart) {\n    var lines = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=crypto:');\n    return lines.map(SDPUtils.parseCryptoLine);\n  };\n\n  // Parses ICE information from SDP media section or sessionpart.\n  // FIXME: for consistency with other functions this should only\n  //   get the ice-ufrag and ice-pwd lines as input.\n  SDPUtils.getIceParameters = function (mediaSection, sessionpart) {\n    var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-ufrag:')[0];\n    var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart, 'a=ice-pwd:')[0];\n    if (!(ufrag && pwd)) {\n      return null;\n    }\n    return {\n      usernameFragment: ufrag.substr(12),\n      password: pwd.substr(10)\n    };\n  };\n\n  // Serializes ICE parameters to SDP.\n  SDPUtils.writeIceParameters = function (params) {\n    var sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' + 'a=ice-pwd:' + params.password + '\\r\\n';\n    if (params.iceLite) {\n      sdp += 'a=ice-lite\\r\\n';\n    }\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns RTCRtpParameters.\n  SDPUtils.parseRtpParameters = function (mediaSection) {\n    var description = {\n      codecs: [],\n      headerExtensions: [],\n      fecMechanisms: [],\n      rtcp: []\n    };\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    for (var i = 3; i < mline.length; i++) {\n      // find all codecs from mline[3..]\n      var pt = mline[i];\n      var rtpmapline = SDPUtils.matchPrefix(mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n      if (rtpmapline) {\n        var codec = SDPUtils.parseRtpMap(rtpmapline);\n        var fmtps = SDPUtils.matchPrefix(mediaSection, 'a=fmtp:' + pt + ' ');\n        // Only the first a=fmtp:<pt> is considered.\n        codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n        codec.rtcpFeedback = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:' + pt + ' ').map(SDPUtils.parseRtcpFb);\n        description.codecs.push(codec);\n        // parse FEC mechanisms from rtpmap lines.\n        switch (codec.name.toUpperCase()) {\n          case 'RED':\n          case 'ULPFEC':\n            description.fecMechanisms.push(codec.name.toUpperCase());\n            break;\n          default:\n            // only RED and ULPFEC are recognized as FEC mechanisms.\n            break;\n        }\n      }\n    }\n    SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function (line) {\n      description.headerExtensions.push(SDPUtils.parseExtmap(line));\n    });\n    // FIXME: parse rtcp.\n    return description;\n  };\n\n  // Generates parts of the SDP media section describing the capabilities /\n  // parameters.\n  SDPUtils.writeRtpDescription = function (kind, caps) {\n    var sdp = '';\n\n    // Build the mline.\n    sdp += 'm=' + kind + ' ';\n    sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n    sdp += ' UDP/TLS/RTP/SAVPF ';\n    sdp += caps.codecs.map(function (codec) {\n      if (codec.preferredPayloadType !== undefined) {\n        return codec.preferredPayloadType;\n      }\n      return codec.payloadType;\n    }).join(' ') + '\\r\\n';\n\n    sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n    sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n    // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n    caps.codecs.forEach(function (codec) {\n      sdp += SDPUtils.writeRtpMap(codec);\n      sdp += SDPUtils.writeFmtp(codec);\n      sdp += SDPUtils.writeRtcpFb(codec);\n    });\n    var maxptime = 0;\n    caps.codecs.forEach(function (codec) {\n      if (codec.maxptime > maxptime) {\n        maxptime = codec.maxptime;\n      }\n    });\n    if (maxptime > 0) {\n      sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n    }\n\n    if (caps.headerExtensions) {\n      caps.headerExtensions.forEach(function (extension) {\n        sdp += SDPUtils.writeExtmap(extension);\n      });\n    }\n    // FIXME: write fecMechanisms.\n    return sdp;\n  };\n\n  // Parses the SDP media section and returns an array of\n  // RTCRtpEncodingParameters.\n  SDPUtils.parseRtpEncodingParameters = function (mediaSection) {\n    var encodingParameters = [];\n    var description = SDPUtils.parseRtpParameters(mediaSection);\n    var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n    var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n    // filter a=ssrc:... cname:, ignore PlanB-msid\n    var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (parts) {\n      return parts.attribute === 'cname';\n    });\n    var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n    var secondarySsrc = void 0;\n\n    var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID').map(function (line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function (part) {\n        return parseInt(part, 10);\n      });\n    });\n    if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n      secondarySsrc = flows[0][1];\n    }\n\n    description.codecs.forEach(function (codec) {\n      if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n        var encParam = {\n          ssrc: primarySsrc,\n          codecPayloadType: parseInt(codec.parameters.apt, 10)\n        };\n        if (primarySsrc && secondarySsrc) {\n          encParam.rtx = { ssrc: secondarySsrc };\n        }\n        encodingParameters.push(encParam);\n        if (hasRed) {\n          encParam = JSON.parse(JSON.stringify(encParam));\n          encParam.fec = {\n            ssrc: primarySsrc,\n            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n          };\n          encodingParameters.push(encParam);\n        }\n      }\n    });\n    if (encodingParameters.length === 0 && primarySsrc) {\n      encodingParameters.push({\n        ssrc: primarySsrc\n      });\n    }\n\n    // we support both b=AS and b=TIAS but interpret AS as TIAS.\n    var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n    if (bandwidth.length) {\n      if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n        bandwidth = parseInt(bandwidth[0].substr(7), 10);\n      } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n        // use formula from JSEP to convert b=AS to TIAS value.\n        bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95 - 50 * 40 * 8;\n      } else {\n        bandwidth = undefined;\n      }\n      encodingParameters.forEach(function (params) {\n        params.maxBitrate = bandwidth;\n      });\n    }\n    return encodingParameters;\n  };\n\n  // parses http://draft.ortc.org/#rtcrtcpparameters*\n  SDPUtils.parseRtcpParameters = function (mediaSection) {\n    var rtcpParameters = {};\n\n    // Gets the first SSRC. Note that with RTX there might be multiple\n    // SSRCs.\n    var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (obj) {\n      return obj.attribute === 'cname';\n    })[0];\n    if (remoteSsrc) {\n      rtcpParameters.cname = remoteSsrc.value;\n      rtcpParameters.ssrc = remoteSsrc.ssrc;\n    }\n\n    // Edge uses the compound attribute instead of reducedSize\n    // compound is !reducedSize\n    var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n    rtcpParameters.reducedSize = rsize.length > 0;\n    rtcpParameters.compound = rsize.length === 0;\n\n    // parses the rtcp-mux attrbute.\n    // Note that Edge does not support unmuxed RTCP.\n    var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n    rtcpParameters.mux = mux.length > 0;\n\n    return rtcpParameters;\n  };\n\n  SDPUtils.writeRtcpParameters = function (rtcpParameters) {\n    var sdp = '';\n    if (rtcpParameters.reducedSize) {\n      sdp += 'a=rtcp-rsize\\r\\n';\n    }\n    if (rtcpParameters.mux) {\n      sdp += 'a=rtcp-mux\\r\\n';\n    }\n    if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n      sdp += 'a=ssrc:' + rtcpParameters.ssrc + ' cname:' + rtcpParameters.cname + '\\r\\n';\n    }\n    return sdp;\n  };\n\n  // parses either a=msid: or a=ssrc:... msid lines and returns\n  // the id of the MediaStream and MediaStreamTrack.\n  SDPUtils.parseMsid = function (mediaSection) {\n    var parts = void 0;\n    var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n    if (spec.length === 1) {\n      parts = spec[0].substr(7).split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n    var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:').map(function (line) {\n      return SDPUtils.parseSsrcMedia(line);\n    }).filter(function (msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n    if (planB.length > 0) {\n      parts = planB[0].value.split(' ');\n      return { stream: parts[0], track: parts[1] };\n    }\n  };\n\n  // SCTP\n  // parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n  // to draft-ietf-mmusic-sctp-sdp-05\n  SDPUtils.parseSctpDescription = function (mediaSection) {\n    var mline = SDPUtils.parseMLine(mediaSection);\n    var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n    var maxMessageSize = void 0;\n    if (maxSizeLine.length > 0) {\n      maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n    }\n    if (isNaN(maxMessageSize)) {\n      maxMessageSize = 65536;\n    }\n    var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n    if (sctpPort.length > 0) {\n      return {\n        port: parseInt(sctpPort[0].substr(12), 10),\n        protocol: mline.fmt,\n        maxMessageSize: maxMessageSize\n      };\n    }\n    var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n    if (sctpMapLines.length > 0) {\n      var parts = sctpMapLines[0].substr(10).split(' ');\n      return {\n        port: parseInt(parts[0], 10),\n        protocol: parts[1],\n        maxMessageSize: maxMessageSize\n      };\n    }\n  };\n\n  // SCTP\n  // outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n  // support by now receiving in this format, unless we originally parsed\n  // as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n  // protocol of DTLS/SCTP -- without UDP/ or TCP/)\n  SDPUtils.writeSctpDescription = function (media, sctp) {\n    var output = [];\n    if (media.protocol !== 'DTLS/SCTP') {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctp-port:' + sctp.port + '\\r\\n'];\n    } else {\n      output = ['m=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n', 'c=IN IP4 0.0.0.0\\r\\n', 'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'];\n    }\n    if (sctp.maxMessageSize !== undefined) {\n      output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n    }\n    return output.join('');\n  };\n\n  // Generate a session ID for SDP.\n  // https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n  // recommends using a cryptographically random +ve 64-bit value\n  // but right now this should be acceptable and within the right range\n  SDPUtils.generateSessionId = function () {\n    return Math.random().toString().substr(2, 21);\n  };\n\n  // Write boiler plate for start of SDP\n  // sessId argument is optional - if not supplied it will\n  // be generated randomly\n  // sessVersion is optional and defaults to 2\n  // sessUser is optional and defaults to 'thisisadapterortc'\n  SDPUtils.writeSessionBoilerplate = function (sessId, sessVer, sessUser) {\n    var sessionId = void 0;\n    var version = sessVer !== undefined ? sessVer : 2;\n    if (sessId) {\n      sessionId = sessId;\n    } else {\n      sessionId = SDPUtils.generateSessionId();\n    }\n    var user = sessUser || 'thisisadapterortc';\n    // FIXME: sess-id should be an NTP timestamp.\n    return 'v=0\\r\\n' + 'o=' + user + ' ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' + 's=-\\r\\n' + 't=0 0\\r\\n';\n  };\n\n  // Gets the direction from the mediaSection or the sessionpart.\n  SDPUtils.getDirection = function (mediaSection, sessionpart) {\n    // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n    var lines = SDPUtils.splitLines(mediaSection);\n    for (var i = 0; i < lines.length; i++) {\n      switch (lines[i]) {\n        case 'a=sendrecv':\n        case 'a=sendonly':\n        case 'a=recvonly':\n        case 'a=inactive':\n          return lines[i].substr(2);\n        default:\n        // FIXME: What should happen here?\n      }\n    }\n    if (sessionpart) {\n      return SDPUtils.getDirection(sessionpart);\n    }\n    return 'sendrecv';\n  };\n\n  SDPUtils.getKind = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var mline = lines[0].split(' ');\n    return mline[0].substr(2);\n  };\n\n  SDPUtils.isRejected = function (mediaSection) {\n    return mediaSection.split(' ', 2)[1] === '0';\n  };\n\n  SDPUtils.parseMLine = function (mediaSection) {\n    var lines = SDPUtils.splitLines(mediaSection);\n    var parts = lines[0].substr(2).split(' ');\n    return {\n      kind: parts[0],\n      port: parseInt(parts[1], 10),\n      protocol: parts[2],\n      fmt: parts.slice(3).join(' ')\n    };\n  };\n\n  SDPUtils.parseOLine = function (mediaSection) {\n    var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n    var parts = line.substr(2).split(' ');\n    return {\n      username: parts[0],\n      sessionId: parts[1],\n      sessionVersion: parseInt(parts[2], 10),\n      netType: parts[3],\n      addressType: parts[4],\n      address: parts[5]\n    };\n  };\n\n  // a very naive interpretation of a valid SDP.\n  SDPUtils.isValidSDP = function (blob) {\n    if (typeof blob !== 'string' || blob.length === 0) {\n      return false;\n    }\n    var lines = SDPUtils.splitLines(blob);\n    for (var i = 0; i < lines.length; i++) {\n      if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n        return false;\n      }\n      // TODO: check the modifier a bit more.\n    }\n    return true;\n  };\n\n  // Expose public methods.\n  if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object') {\n    module.exports = SDPUtils;\n  }\n  },{}]},{},[1])(1)\n  });\n","'use strict';\r\n\r\n// Last time updated: 2019-02-20 3:31:29 PM UTC\r\n\r\n// _______________\r\n// getStats v1.2.0\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/getStats\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nvar getStats = function(mediaStreamTrack, callback, interval) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    }\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        if (typeof MediaStreamTrack === 'undefined') {\r\n            /*global screen:true */\r\n            that.MediaStreamTrack = function() {};\r\n        }\r\n\r\n        if (typeof RTCPeerConnection === 'undefined') {\r\n            /*global screen:true */\r\n            that.RTCPeerConnection = function() {};\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    var RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\n\r\n    if (typeof MediaStreamTrack === 'undefined') {\r\n        MediaStreamTrack = {}; // todo?\r\n    }\r\n\r\n    var systemNetworkType = ((navigator.connection || {}).type || 'unknown').toString().toLowerCase();\r\n\r\n    var getStatsResult = {\r\n        encryption: 'sha-256',\r\n        audio: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        video: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        bandwidth: {\r\n            systemBandwidth: 0,\r\n            sentPerSecond: 0,\r\n            encodedPerSecond: 0,\r\n            helper: {\r\n                audioBytesSent: 0,\r\n                videoBytestSent: 0\r\n            },\r\n            speed: 0\r\n        },\r\n        results: {},\r\n        connectionType: {\r\n            systemNetworkType: systemNetworkType,\r\n            systemIpAddress: '192.168.1.2',\r\n            local: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            },\r\n            remote: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            }\r\n        },\r\n        resolutions: {\r\n            send: {\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            recv: {\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        },\r\n        internal: {\r\n            audio: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            video: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            candidates: {}\r\n        },\r\n        nomore: function() {\r\n            nomore = true;\r\n        }\r\n    };\r\n\r\n    var getStatsParser = {\r\n        checkIfOfferer: function(result) {\r\n            if (result.type === 'googLibjingleSession') {\r\n                getStatsResult.isOfferer = result.googInitiator;\r\n            }\r\n        }\r\n    };\r\n\r\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\n    var peer = this;\r\n\r\n    if (!(arguments[0] instanceof RTCPeerConnection)) {\r\n        throw '1st argument is not instance of RTCPeerConnection.';\r\n    }\r\n\r\n    peer = arguments[0];\r\n\r\n    if (arguments[1] instanceof MediaStreamTrack) {\r\n        mediaStreamTrack = arguments[1]; // redundant on non-safari\r\n        callback = arguments[2];\r\n        interval = arguments[3];\r\n    }\r\n\r\n    var nomore = false;\r\n\r\n    function getStatsLooper() {\r\n        getStatsWrapper(function(results) {\r\n            if (!results || !results.forEach) return;\r\n\r\n            results.forEach(function(result) {\r\n                // console.error('result', result);\r\n                Object.keys(getStatsParser).forEach(function(key) {\r\n                    if (typeof getStatsParser[key] === 'function') {\r\n                        try {\r\n                            getStatsParser[key](result);\r\n                        } catch (e) {\r\n                            console.error(e.message, e.stack, e);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            try {\r\n                if (peer.iceConnectionState.search(/failed|closed|disconnected/gi) !== -1) {\r\n                    nomore = true;\r\n                }\r\n            } catch (e) {\r\n                nomore = true;\r\n            }\r\n\r\n            if (nomore === true) {\r\n                if (getStatsResult.datachannel) {\r\n                    getStatsResult.datachannel.state = 'close';\r\n                }\r\n                getStatsResult.ended = true;\r\n            }\r\n\r\n            // allow users to access native results\r\n            getStatsResult.results = results;\r\n\r\n            if (getStatsResult.audio && getStatsResult.video) {\r\n                getStatsResult.bandwidth.speed = (getStatsResult.audio.bytesSent - getStatsResult.bandwidth.helper.audioBytesSent) + (getStatsResult.video.bytesSent - getStatsResult.bandwidth.helper.videoBytesSent);\r\n                getStatsResult.bandwidth.helper.audioBytesSent = getStatsResult.audio.bytesSent;\r\n                getStatsResult.bandwidth.helper.videoBytesSent = getStatsResult.video.bytesSent;\r\n            }\r\n\r\n            callback(getStatsResult);\r\n\r\n            // second argument checks to see, if target-user is still connected.\r\n            if (!nomore) {\r\n                typeof interval != undefined && interval && setTimeout(getStatsLooper, interval || 1000);\r\n            }\r\n        });\r\n    }\r\n\r\n    // a wrapper around getStats which hides the differences (where possible)\r\n    // following code-snippet is taken from somewhere on the github\r\n    function getStatsWrapper(cb) {\r\n        // if !peer or peer.signalingState == 'closed' then return;\r\n\r\n        if (typeof window.InstallTrigger !== 'undefined' || isSafari) { // maybe \"isEdge?\"\r\n            peer.getStats(window.mediaStreamTrack || null).then(function(res) {\r\n                var items = [];\r\n                res.forEach(function(r) {\r\n                    items.push(r);\r\n                });\r\n                cb(items);\r\n            }).catch(cb);\r\n        } else {\r\n            peer.getStats(function(res) {\r\n                var items = [];\r\n                res.result().forEach(function(res) {\r\n                    var item = {};\r\n                    res.names().forEach(function(name) {\r\n                        item[name] = res.stat(name);\r\n                    });\r\n                    item.id = res.id;\r\n                    item.type = res.type;\r\n                    item.timestamp = res.timestamp;\r\n                    items.push(item);\r\n                });\r\n                cb(items);\r\n            });\r\n        }\r\n    };\r\n\r\n    getStatsParser.datachannel = function(result) {\r\n        if (result.type !== 'datachannel') return;\r\n\r\n        getStatsResult.datachannel = {\r\n            state: result.state // open or connecting\r\n        }\r\n    };\r\n\r\n    getStatsParser.googCertificate = function(result) {\r\n        if (result.type == 'googCertificate') {\r\n            getStatsResult.encryption = result.googFingerprintAlgorithm;\r\n        }\r\n\r\n        // Safari-11 or higher\r\n        if (result.type == 'certificate') {\r\n            // todo: is it possible to have different encryption methods for senders and receivers?\r\n            // if yes, then we need to set:\r\n            //    getStatsResult.encryption.local = value;\r\n            //    getStatsResult.encryption.remote = value;\r\n            getStatsResult.encryption = result.fingerprintAlgorithm;\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkAudioTracks = function(result) {\r\n        if (result.mediaType !== 'audio') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.audio[sendrecvType].codecs.indexOf(result.googCodecName || 'opus') === -1) {\r\n            getStatsResult.audio[sendrecvType].codecs.push(result.googCodecName || 'opus');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.audio[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.audio[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            // getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.audio[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.audio[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.audio.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.audio.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.latency < 0) {\r\n                getStatsResult.audio.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevPacketsLost) {\r\n                getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.audio.prevPacketsLost;\r\n            getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.audio.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.packetsLost < 0) {\r\n                getStatsResult.audio.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkVideoTracks = function(result) {\r\n        if (result.mediaType !== 'video') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.video[sendrecvType].codecs.indexOf(result.googCodecName || 'VP8') === -1) {\r\n            getStatsResult.video[sendrecvType].codecs.push(result.googCodecName || 'VP8');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googFrameHeightReceived && result.googFrameWidthReceived) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthReceived;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightReceived;\r\n        }\r\n\r\n        if (result.googFrameHeightSent && result.googFrameWidthSent) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthSent;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightSent;\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.video[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.video[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        if (result.framerateMean) {\r\n            getStatsResult.bandwidth.framerateMean = result.framerateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevFramerateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevFramerateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.framerateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].framerateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        if (result.bitrateMean) {\r\n            getStatsResult.bandwidth.bitrateMean = result.bitrateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBitrateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBitrateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].bitrateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.video.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.video.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.latency < 0) {\r\n                getStatsResult.video.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevPacketsLost) {\r\n                getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.video.prevPacketsLost;\r\n            getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.video.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.packetsLost < 0) {\r\n                getStatsResult.video.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.bweforvideo = function(result) {\r\n        if (result.type !== 'VideoBwe') return;\r\n\r\n        getStatsResult.bandwidth.availableSendBandwidth = result.googAvailableSendBandwidth;\r\n\r\n        getStatsResult.bandwidth.googActualEncBitrate = result.googActualEncBitrate;\r\n        getStatsResult.bandwidth.googAvailableSendBandwidth = result.googAvailableSendBandwidth;\r\n        getStatsResult.bandwidth.googAvailableReceiveBandwidth = result.googAvailableReceiveBandwidth;\r\n        getStatsResult.bandwidth.googRetransmitBitrate = result.googRetransmitBitrate;\r\n        getStatsResult.bandwidth.googTargetEncBitrate = result.googTargetEncBitrate;\r\n        getStatsResult.bandwidth.googBucketDelay = result.googBucketDelay;\r\n        getStatsResult.bandwidth.googTransmitBitrate = result.googTransmitBitrate;\r\n    };\r\n\r\n    getStatsParser.candidatePair = function(result) {\r\n        if (result.type !== 'googCandidatePair' && result.type !== 'candidate-pair' && result.type !== 'local-candidate' && result.type !== 'remote-candidate') return;\r\n\r\n        // result.googActiveConnection means either STUN or TURN is used.\r\n\r\n        if (result.googActiveConnection == 'true') {\r\n            // id === 'Conn-audio-1-0'\r\n            // localCandidateId, remoteCandidateId\r\n\r\n            // bytesSent, bytesReceived\r\n\r\n            Object.keys(getStatsResult.internal.candidates).forEach(function(cid) {\r\n                var candidate = getStatsResult.internal.candidates[cid];\r\n                if (candidate.ipAddress.indexOf(result.googLocalAddress) !== -1) {\r\n                    getStatsResult.connectionType.local.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.local.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.local.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.local.transport = candidate.transport;\r\n                }\r\n                if (candidate.ipAddress.indexOf(result.googRemoteAddress) !== -1) {\r\n                    getStatsResult.connectionType.remote.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.remote.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.remote.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.remote.transport = candidate.transport;\r\n                }\r\n            });\r\n\r\n            getStatsResult.connectionType.transport = result.googTransportType;\r\n\r\n            var localCandidate = getStatsResult.internal.candidates[result.localCandidateId];\r\n            if (localCandidate) {\r\n                if (localCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = localCandidate.ipAddress;\r\n                }\r\n            }\r\n\r\n            var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n            if (remoteCandidate) {\r\n                if (remoteCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = remoteCandidate.ipAddress;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.type === 'candidate-pair') {\r\n            if (result.selected === true && result.nominated === true && result.state === 'succeeded') {\r\n                // remoteCandidateId, localCandidateId, componentId\r\n                var localCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n                var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n\r\n                // Firefox used above two pairs for connection\r\n            }\r\n        }\r\n\r\n        if (result.type === 'local-candidate') {\r\n            getStatsResult.connectionType.local.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.local.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.local.networkType = result.networkType;\r\n            getStatsResult.connectionType.local.transport = result.mozLocalTransport || result.transport;\r\n        }\r\n\r\n        if (result.type === 'remote-candidate') {\r\n            getStatsResult.connectionType.remote.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.remote.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.remote.networkType = result.networkType;\r\n            getStatsResult.connectionType.remote.transport = result.mozRemoteTransport || result.transport;\r\n        }\r\n\r\n        if (isSafari) {\r\n            // result.remoteCandidateId\r\n            // todo: below line will always force \"send\" on Safari; find a solution\r\n            var sendrecvType = result.localCandidateId ? 'send' : 'recv';\r\n\r\n            if (!sendrecvType) return;\r\n\r\n            if (!!result.bytesSent) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n                }\r\n\r\n                var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n                kilobytes = bytes / 1024;\r\n\r\n                getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.bytesReceived) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n                }\r\n\r\n                var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableOutgoingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableOutgoingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableOutgoingBitrate = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableIncomingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableIncomingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableIncomingBitrate = kilobytes.toFixed(1);\r\n            }\r\n        }\r\n    };\r\n\r\n    var LOCAL_candidateType = {};\r\n    var LOCAL_transport = {};\r\n    var LOCAL_ipAddress = {};\r\n    var LOCAL_networkType = {};\r\n\r\n    getStatsParser.localcandidate = function(result) {\r\n        if (result.type !== 'localcandidate' && result.type !== 'local-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!LOCAL_candidateType[result.id]) {\r\n            LOCAL_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_transport[result.id]) {\r\n            LOCAL_transport[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_ipAddress[result.id]) {\r\n            LOCAL_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_networkType[result.id]) {\r\n            LOCAL_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && LOCAL_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            LOCAL_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && LOCAL_transport[result.id].indexOf(result.transport) === -1) {\r\n            LOCAL_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && LOCAL_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            LOCAL_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && LOCAL_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            LOCAL_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: LOCAL_candidateType[result.id],\r\n            ipAddress: LOCAL_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: LOCAL_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: LOCAL_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.local.candidateType = LOCAL_candidateType[result.id];\r\n        getStatsResult.connectionType.local.ipAddress = LOCAL_ipAddress[result.id];\r\n        getStatsResult.connectionType.local.networkType = LOCAL_networkType[result.id];\r\n        getStatsResult.connectionType.local.transport = LOCAL_transport[result.id];\r\n    };\r\n\r\n    var REMOTE_candidateType = {};\r\n    var REMOTE_transport = {};\r\n    var REMOTE_ipAddress = {};\r\n    var REMOTE_networkType = {};\r\n\r\n    getStatsParser.remotecandidate = function(result) {\r\n        if (result.type !== 'remotecandidate' && result.type !== 'remote-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!REMOTE_candidateType[result.id]) {\r\n            REMOTE_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_transport[result.id]) {\r\n            REMOTE_transport[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_ipAddress[result.id]) {\r\n            REMOTE_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_networkType[result.id]) {\r\n            REMOTE_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && REMOTE_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            REMOTE_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && REMOTE_transport[result.id].indexOf(result.transport) === -1) {\r\n            REMOTE_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && REMOTE_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            REMOTE_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && REMOTE_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            REMOTE_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: REMOTE_candidateType[result.id],\r\n            ipAddress: REMOTE_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: REMOTE_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: REMOTE_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.remote.candidateType = REMOTE_candidateType[result.id];\r\n        getStatsResult.connectionType.remote.ipAddress = REMOTE_ipAddress[result.id];\r\n        getStatsResult.connectionType.remote.networkType = REMOTE_networkType[result.id];\r\n        getStatsResult.connectionType.remote.transport = REMOTE_transport[result.id];\r\n    };\r\n\r\n    getStatsParser.dataSentReceived = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            getStatsResult[result.mediaType].bytesSent = parseInt(result.bytesSent);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            getStatsResult[result.mediaType].bytesReceived = parseInt(result.bytesReceived);\r\n        }\r\n    };\r\n\r\n    getStatsParser.inboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'inbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.outboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'outbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.track = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'track') return;\r\n\r\n        var sendrecvType = result.remoteSource === true ? 'send' : 'recv';\r\n\r\n        if (result.frameWidth && result.frameHeight) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.frameWidth;\r\n            getStatsResult.resolutions[sendrecvType].height = result.frameHeight;\r\n        }\r\n\r\n        // framesSent, framesReceived\r\n    };\r\n\r\n    var SSRC = {\r\n        audio: {\r\n            send: [],\r\n            recv: []\r\n        },\r\n        video: {\r\n            send: [],\r\n            recv: []\r\n        }\r\n    };\r\n\r\n    getStatsParser.ssrc = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n        if (result.type !== 'ssrc') return;\r\n        var sendrecvType = result.id.split('_').pop();\r\n\r\n        if (SSRC[result.mediaType][sendrecvType].indexOf(result.ssrc) === -1) {\r\n            SSRC[result.mediaType][sendrecvType].push(result.ssrc)\r\n        }\r\n\r\n        getStatsResult[result.mediaType][sendrecvType].streams = SSRC[result.mediaType][sendrecvType].length;\r\n    };\r\n\r\n    getStatsLooper();\r\n\r\n};\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = getStats;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('getStats', [], function() {\r\n        return getStats;\r\n    });\r\n}\n","// CodecsHandler.js\n\nconst splitLines = (sdp) => {\n  const info = {};\n  sdp.split('\\n').forEach((line) => {\n    if (line.indexOf('m=video') === 0) {\n      info.videoCodecNumbers = [];\n      line.split('SAVPF')[1].split(' ').forEach((codecNumber) => {\n        codecNumber = codecNumber.trim();\n        if (!codecNumber || !codecNumber.length) return;\n        info.videoCodecNumbers.push(codecNumber);\n        info.videoCodecNumbersOriginal = line;\n      });\n    }\n\n    if (line.indexOf('VP8/90000') !== -1 && !info.vp8LineNumber) {\n      info.vp8LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n\n    if (line.indexOf('VP9/90000') !== -1 && !info.vp9LineNumber) {\n      info.vp9LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n\n    if (line.indexOf('H264/90000') !== -1 && !info.h264LineNumber) {\n      info.h264LineNumber = line.replace('a=rtpmap:', '').split(' ')[0];\n    }\n  });\n\n  return info;\n};\n\nconst preferCodecHelper = (sdp, codec, info, ignore) => {\n  let preferCodecNumber = '';\n\n  if (codec === 'vp8') {\n    if (!info.vp8LineNumber) {\n      return sdp;\n    }\n    preferCodecNumber = info.vp8LineNumber;\n  }\n\n  if (codec === 'vp9') {\n    if (!info.vp9LineNumber) {\n      return sdp;\n    }\n    preferCodecNumber = info.vp9LineNumber;\n  }\n\n  if (codec === 'h264') {\n    if (!info.h264LineNumber) {\n      return sdp;\n    }\n\n    preferCodecNumber = info.h264LineNumber;\n  }\n\n  let newLine = `${info.videoCodecNumbersOriginal.split('SAVPF')[0]}SAVPF `;\n\n  let newOrder = [preferCodecNumber];\n\n  if (ignore) {\n    newOrder = [];\n  }\n\n  info.videoCodecNumbers.forEach((codecNumber) => {\n    if (codecNumber === preferCodecNumber) return;\n    newOrder.push(codecNumber);\n  });\n\n  newLine += newOrder.join(' ');\n\n  sdp = sdp.replace(info.videoCodecNumbersOriginal, newLine);\n  return sdp;\n};\n\nexport const preferCodec = (sdp, codecName) => {\n  const info = splitLines(sdp);\n\n  codecName = codecName.toLowerCase();\n\n  if (!info.videoCodecNumbers) {\n    return sdp;\n  }\n\n  if (codecName === 'vp8' && info.vp8LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  if (codecName === 'vp9' && info.vp9LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  if (codecName === 'h264' && info.h264LineNumber === info.videoCodecNumbers[0]) {\n    return sdp;\n  }\n\n  sdp = preferCodecHelper(sdp, codecName, info);\n\n  return sdp;\n};\n\nexport const removeVPX = (sdp) => {\n  const info = splitLines(sdp);\n\n  // last parameter below means: ignore these codecs\n  sdp = preferCodecHelper(sdp, 'vp9', info, true);\n  sdp = preferCodecHelper(sdp, 'vp8', info, true);\n\n  return sdp;\n};\n\nexport const disableNACK = (sdp) => {\n  if (!sdp || typeof sdp !== 'string') {\n    throw new Error('Invalid arguments.');\n  }\n\n  sdp = sdp.replace('a=rtcp-fb:126 nack\\r\\n', '');\n  sdp = sdp.replace('a=rtcp-fb:126 nack pli\\r\\n', 'a=rtcp-fb:126 pli\\r\\n');\n  sdp = sdp.replace('a=rtcp-fb:97 nack\\r\\n', '');\n  sdp = sdp.replace('a=rtcp-fb:97 nack pli\\r\\n', 'a=rtcp-fb:97 pli\\r\\n');\n\n  return sdp;\n};\n\nexport const prioritize = (codecMimeType, peer) => {\n  if (!peer || !peer.getSenders || !peer.getSenders().length) {\n    return;\n  }\n\n  if (!codecMimeType || typeof codecMimeType !== 'string') {\n    throw new Error('Invalid arguments.');\n  }\n\n  peer.getSenders().forEach((sender) => {\n    const params = sender.getParameters();\n    for (let i = 0; i < params.codecs.length; i++) {\n      if (params.codecs[i].mimeType === codecMimeType) {\n        params.codecs.unshift(params.codecs.splice(i, 1));\n        break;\n      }\n    }\n    sender.setParameters(params);\n  });\n};\n\nexport const removeNonG722 = (sdp) => (\n  sdp.replace(/m=audio ([0-9]+) RTP\\/SAVPF ([0-9 ]*)/g, 'm=audio $1 RTP/SAVPF 9')\n);\n\n\nconst setBAS = (sdp, bandwidth, isScreen) => {\n  if (!!navigator.mozGetUserMedia || !bandwidth) {\n    return sdp;\n  }\n\n  if (isScreen) {\n    if (!bandwidth.screen) {\n      console.warn(`\n        It seems that you are not using bandwidth for screen.\n        Screen sharing is expected to fail.\n    `);\n    } else if (bandwidth.screen < 300) {\n      console.warn(`\n        It seems that you are using wrong bandwidth value for screen.\n        Screen sharing is expected to fail.\n      `);\n    }\n  }\n\n  // if screen; must use at least 300kbs\n  if (bandwidth.screen && isScreen) {\n    sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n    sdp = sdp.replace(/a=mid:video\\r\\n/g, `a=mid:video\\r\\nb=AS:${bandwidth.screen}\\r\\n`);\n  }\n\n  // remove existing bandwidth lines\n  if (bandwidth.audio || bandwidth.video || bandwidth.data) {\n    sdp = sdp.replace(/b=AS([^\\r\\n]+\\r\\n)/g, '');\n  }\n\n  if (bandwidth.audio) {\n    sdp = sdp.replace(/a=mid:audio\\r\\n/g, `a=mid:audio\\r\\nb=AS:${bandwidth.audio}\\r\\n`);\n  }\n\n  if (bandwidth.video) {\n    const regex = /a=mid:video\\r\\n/g;\n    sdp = sdp.replace(regex, `\n      a=mid:video\n      b=AS:${isScreen ? bandwidth.screen : bandwidth.video}\n    `);\n  }\n\n  return sdp;\n};\n\n// Find the line in sdpLines[startLine...endLine - 1] that starts with |prefix|\n// and, if specified, contains |substr| (case-insensitive search).\nconst findLineInRange = (sdpLines, startLine, endLine, prefix, substr) => {\n  const realEndLine = endLine !== -1 ? endLine : sdpLines.length;\n  for (let i = startLine; i < realEndLine; ++i) {\n    if (sdpLines[i].indexOf(prefix) === 0) {\n      if (!substr || sdpLines[i].toLowerCase().indexOf(substr.toLowerCase()) !== -1) {\n        return i;\n      }\n    }\n  }\n  return null;\n};\n\n// Find the line in sdpLines that starts with |prefix|, and, if specified,\n// contains |substr| (case-insensitive search).\nconst findLine = (sdpLines, prefix, substr) => (\n  findLineInRange(sdpLines, 0, -1, prefix, substr)\n);\n\n// Gets the codec payload type from an a=rtpmap:X line.\nconst getCodecPayloadType = (sdpLine) => {\n  const pattern = new RegExp('a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+');\n  const result = sdpLine.match(pattern);\n  return result && result.length === 2 ? result[1] : null;\n};\n\nconst _setVideoBitrates = (sdp, params) => {\n  params = params || {};\n  const xgoogleMinBitrate = params.min;\n  const xgoogleMaxBitrate = params.max;\n  const videoCodec = params.codec.toUpperCase() || 'VP8';\n\n  const sdpLines = sdp.split('\\r\\n');\n\n  // VP8\n  const vp8Index = findLine(sdpLines, 'a=rtpmap', `${videoCodec}/90000`);\n  let vp8Payload;\n  if (vp8Index) {\n    vp8Payload = getCodecPayloadType(sdpLines[vp8Index]);\n  }\n\n  if (!vp8Payload) {\n    return sdp;\n  }\n\n  const rtxIndex = findLine(sdpLines, 'a=rtpmap', 'rtx/90000');\n  let rtxPayload;\n  if (rtxIndex) {\n    rtxPayload = getCodecPayloadType(sdpLines[rtxIndex]);\n  }\n\n  if (!rtxIndex) {\n    return sdp;\n  }\n\n  const rtxFmtpLineIndex = findLine(sdpLines, `a=fmtp:${rtxPayload.toString()}`);\n  if (rtxFmtpLineIndex != null) {\n    let appendrtxNext = '\\r\\n';\n    appendrtxNext += `a=fmtp:${vp8Payload} x-google-min-bitrate=${xgoogleMinBitrate || '228'}; x-google-max-bitrate=${xgoogleMaxBitrate || '228'}`;\n    sdpLines[rtxFmtpLineIndex] = sdpLines[rtxFmtpLineIndex].concat(appendrtxNext);\n    sdp = sdpLines.join('\\r\\n');\n  }\n\n  return sdp;\n};\n\nconst _setOpusAttributes = (sdp, params) => {\n  params = params || {};\n\n  const sdpLines = sdp.split('\\r\\n');\n\n  // Opus\n  const opusIndex = findLine(sdpLines, 'a=rtpmap', 'opus/48000');\n  let opusPayload;\n  if (opusIndex) {\n    opusPayload = getCodecPayloadType(sdpLines[opusIndex]);\n  }\n\n  if (!opusPayload) {\n    return sdp;\n  }\n\n  const opusFmtpLineIndex = findLine(sdpLines, `a=fmtp:${opusPayload.toString()}`);\n  if (opusFmtpLineIndex == null) {\n    return sdp;\n  }\n\n  const stereo = typeof params.stereo !== 'undefined' ? params.stereo : '1';\n  const spropStereo = typeof params['sprop-stereo'] !== 'undefined' ? params['sprop-stereo'] : '1';\n\n  let appendOpusNext = '';\n  appendOpusNext += `; stereo=${stereo}`;\n  appendOpusNext += `; sprop-stereo=${spropStereo}`;\n\n  if (typeof params.maxaveragebitrate !== 'undefined') {\n    appendOpusNext += `; maxaveragebitrate=${params.maxaveragebitrate || 128 * 1024 * 8}`;\n  }\n\n  if (typeof params.maxplaybackrate !== 'undefined') {\n    appendOpusNext += `; maxplaybackrate=${params.maxplaybackrate || 128 * 1024 * 8}`;\n  }\n\n  if (typeof params.cbr !== 'undefined') {\n    appendOpusNext += `; cbr=${typeof params.cbr !== 'undefined' ? params.cbr : '1'}`;\n  }\n\n  if (typeof params.useinbandfec !== 'undefined') {\n    appendOpusNext += `; useinbandfec=${params.useinbandfec}`;\n  }\n\n  if (typeof params.usedtx !== 'undefined') {\n    appendOpusNext += `; usedtx=${params.usedtx}`;\n  }\n\n  if (typeof params.maxptime !== 'undefined') {\n    appendOpusNext += `\\r\\na=maxptime:${params.maxptime}`;\n  }\n\n  sdpLines[opusFmtpLineIndex] = sdpLines[opusFmtpLineIndex].concat(appendOpusNext);\n\n  sdp = sdpLines.join('\\r\\n');\n  return sdp;\n};\n\n// forceStereoAudio => via webrtcexample.com\n// requires getUserMedia => echoCancellation:false\nexport const forceStereoAudio = (sdp) => {\n  const sdpLines = sdp.split('\\r\\n');\n  let opusPayload;\n  let fmtpLineIndex = null;\n  for (let i = 0; i < sdpLines.length; i++) {\n    if (sdpLines[i].search('opus/48000') !== -1) {\n      opusPayload = extractSdp(sdpLines[i], /:(\\d+) opus\\/48000/i);\n      break;\n    }\n  }\n  for (let i = 0; i < sdpLines.length; i++) {\n    if (sdpLines[i].search('a=fmtp') !== -1) {\n      const payload = extractSdp(sdpLines[i], /a=fmtp:(\\d+)/);\n      if (payload === opusPayload) {\n        fmtpLineIndex = i;\n        break;\n      }\n    }\n  }\n  if (fmtpLineIndex == null) return sdp;\n  sdpLines[fmtpLineIndex] = sdpLines[fmtpLineIndex].concat('; stereo=1; sprop-stereo=1');\n  sdp = sdpLines.join('\\r\\n');\n  return sdp;\n};\n\nexport const setApplicationSpecificBandwidth = (sdp, bandwidth, isScreen) => (\n  setBAS(sdp, bandwidth, isScreen)\n);\n\nexport const setVideoBitrates = (sdp, params) => _setVideoBitrates(sdp, params);\n\nexport const setOpusAttributes = (sdp, params) => _setOpusAttributes(sdp, params);\n\nexport const preferVP9 = (sdp) => preferCodec(sdp, 'vp9');\n","/**\n * Copyright 2013 j <j@mailb.org>\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as Helper from './helpers';\nimport getStats from 'getstats';\nimport * as videoChat from './videoChat';\n\n\nimport * as CodecsHandler from './codecsHandler';\n\n\n// Normalize RTC implementation between browsers\n// var getUserMedia = window.navigator.mediaDevices.getUserMedia\nconst attachMediaStream = (element, stream) => {\n  if (typeof element.srcObject !== 'undefined') {\n    element.srcObject = stream;\n  } else if (typeof element.mozSrcObject !== 'undefined') {\n    element.mozSrcObject = stream;\n  } else if (typeof element.src !== 'undefined') {\n    element.src = URL.createObjectURL(stream);\n  } else {\n    console.error('Error attaching stream to element.', element);\n  }\n};\n\nconst webrtcDetectedBrowser = 'chrome';\n\nconst cleanupSdp = (sdp) => {\n  const bandwidth = {\n    screen: 300, // 300kbits minimum\n    audio: 256, // 64kbits  minimum\n    video: 500,\n    minVideo: 128, // 125kbits  min\n    maxVideo: 2048, // 125kbits  max\n    videoCodec: clientVars.webrtc.video.codec,\n  };\n\n  const isScreenSharing = false;\n\n  sdp = CodecsHandler.setApplicationSpecificBandwidth(sdp, bandwidth, isScreenSharing);\n  sdp = CodecsHandler.setVideoBitrates(sdp, {\n    min: bandwidth.minVideo,\n    max: bandwidth.maxVideo,\n    codec: bandwidth.videoCodec,\n  });\n  sdp = CodecsHandler.setOpusAttributes(sdp);\n  sdp = CodecsHandler.preferCodec(sdp, bandwidth.videoCodec);\n\n  return sdp;\n};\n\nconst mergeConstraints = (cons1, cons2) => {\n  const merged = cons1;\n  for (const name in cons2.mandatory) {\n    merged.mandatory[name] = cons2.mandatory[name];\n  }\n  merged.optional.concat(cons2.optional);\n  return merged;\n};\n\nconst randomIntFromInterval = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);\n\nexport default (() => {\n  const attemptReconnect = 60;\n  let reconnected = 0;\n  const videoSizes = {large: '260px', small: '160px'};\n  const pcConfig = {};\n  const audioInputSelect = null;\n  const videoSelect = null;\n  const audioOutputSelect = null;\n  const pcConstraints = {\n    optional: [{\n      DtlsSrtpKeyAgreement: true,\n    }],\n  };\n  const sdpConstraints = {\n    mandatory: {\n      OfferToReceiveAudio: true,\n      OfferToReceiveVideo: true,\n    },\n  };\n\n  const remoteStream = {};\n  const pc = {};\n  const enlargedVideos = new Set();\n  let localVideoElement = null;\n  let padId = null;\n  let socket = null;\n\n  const self = {\n    // API HOOKS\n    postAceInit: (hookName, context, webSocket, docId) => {\n      padId = docId;\n      socket = webSocket;\n\n      if (!clientVars.webrtc) throw new Error('[wrtc]: webrtc settings not found');\n\n      pcConfig.iceServers = clientVars.webrtc.iceServers;\n\n      if (clientVars.webrtc.video.sizes.large) {\n        videoSizes.large = `${clientVars.webrtc.video.sizes.large}px`;\n      }\n      if (clientVars.webrtc.video.sizes.small) {\n        videoSizes.small = `${clientVars.webrtc.video.sizes.small}px`;\n      }\n\n      self._pad = context.pad || window.pad;\n\n      $(document).on('change', '.select.audioSource select', self.audioVideoInputChange);\n      $(document).on('change', '.select.videoSource select', self.audioVideoInputChange);\n      $(document).on('change', '.select.audioOutputSec select', self.changeAudioDestination);\n\n      $(window).on('unload', () => {\n        console.info('[wrtc]: window unloaded, now hangupAll');\n        self.hangupAll();\n      });\n      socket.on('RTC_MESSAGE', (context) => {\n        // filter RTC_message just for how is in headerId room\n        const payload = context.data.payload;\n        if (payload.to !== Helper.getUserId()) return;\n        if (payload.data.headerId === window.headerId) {\n          self.receiveMessage(context.data.payload);\n        }\n      });\n    },\n    appendVideoModalToBody: () => {\n      const $wrtcVideoModal = $('#wrtcVideoModal').tmpl({\n        videoChatLimit: clientVars.webrtc.videoChatLimit,\n        headerId: '',\n      });\n\n      $('body').prepend($wrtcVideoModal);\n\n      $(document).on('click', '#wrtc_modal .btn_toggle_modal', function () {\n        const $parent = $(this).parent()\n            .parent();\n        const action = $(this).attr('data-action');\n        const videoBox = $('#wrtc_modal .videoWrapper').innerHeight();\n\n        $(this).find('.fa_arrow-from-top')\n            .toggle();\n        $(this).find('.fa_arrow-to-top')\n            .toggle();\n\n        if (action === 'collapse') {\n          $(this).attr({'data-action': 'expand'});\n          $parent.find('.btn_enlarge').removeAttr('active');\n          $('#wrtc_modal').css({\n            transform: `translate(-50%, -${videoBox}px)`,\n          });\n        } else {\n          $(this).attr({'data-action': 'collapse'});\n          $parent.find('.btn_enlarge').attr({active: true});\n          $('#wrtc_modal').css({\n            transform: 'translate(-50%, 0)',\n          });\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_info', function click() {\n        const userID = Object.keys(pc);\n        const $this = $(this);\n        const isActive = $this.attr('data-active');\n        const $modal = $(document).find('#wrtc_settings .wrtc_info');\n\n        if (isActive) {\n          $modal.hide();\n          if (pc[userID[0]]) {\n            getStats(pc[userID[0]], (result) => {\n              result.nomore();\n            });\n          }\n          $this.removeAttr('data-active');\n          return true;\n        } else {\n          $this.attr({'data-active': true});\n          $modal.show();\n        }\n\n        if (pc[userID[0]] && !isActive) {\n          const bytesToSize = (bytes) => {\n            const k = 1000;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n            if (bytes <= 0) {\n              return '0 Bytes';\n            }\n            const i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n\n            if (!sizes[i]) {\n              return '0 Bytes';\n            }\n\n            return `${(bytes / k ** i).toPrecision(3)} ${sizes[i]}`;\n          };\n\n          (pc[userID[0]], (result) => {\n            const {video, audio, bandwidth, resolutions: {send, recv}} = result;\n            const statistic = {\n              speed: bytesToSize(bandwidth.speed),\n              systemNetworkType: result.connectionType.systemNetworkType,\n              availableSendBandwidth: bytesToSize(bandwidth.availableSendBandwidth),\n              video: {\n                'send.codecs': video.send.codecs.join(', '),\n                'resolutionsSend': `width ${send.width}, height ${send.height}`,\n                'resolutionsReceive': `width ${recv.width}, height ${recv.height}`,\n                'bytesSent': bytesToSize(video.bytesSent),\n                'bytesReceived': bytesToSize(video.bytesReceived),\n              },\n              audio: {\n                'send.codecs': audio.send.codecs.join(', '),\n                // \"recv.codecs\": result.audio.recv.codecs.join(\", \"),\n                'bytesSent': bytesToSize(audio.bytesSent),\n                'bytesReceived': bytesToSize(audio.bytesReceived),\n              },\n            };\n            $(document).find('#wrtc_settings .wrtc_info')\n                .html(`<pre>${JSON.stringify(statistic, undefined, 2)}</pre>`);\n          }, 1000);\n        }\n      });\n\n      $(document).on('click', '#wrtc_settings .btn_close', () => {\n        $('#wrtc_settings').toggleClass('active');\n        const $btnInfo = $('#wrtc_settings .btn_info');\n        if ($btnInfo.attr('data-active')) $btnInfo.trigger('click');\n      });\n    },\n    userLeave: (userId, context, callback) => {\n      userId = userId || context.userInfo.userId;\n      if (userId && pc[userId]) {\n        // gState = 'LEAVING';\n        self.hide(userId);\n        self.hangup(userId, true);\n      }\n      Helper.wrtcStore.userInRoom = false;\n      if (callback) callback();\n    },\n    // deprecated function\n    handleClientMessage_RTC_MESSAGE: (hook, context) => {\n      if (context.payload.data.headerId === window.headerId) {\n        self.receiveMessage(context.payload);\n      }\n    },\n    // END OF API HOOKS\n    show: () => {\n      $('#pad_title').addClass('f_wrtcActive');\n      videoChat.mediaDevices();\n    },\n    showUserMediaError: (err, userId, headerId) => {\n      // show an error returned from getUserMedia\n      let reason;\n      // For reference on standard errors returned by getUserMedia:\n      // https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n      // However keep in mind that we add our own errors in getUserMediaPolyfill\n      console.error(`[wrtc]: mediaError, ${err}`);\n      switch (err.name) {\n        case 'CustomNotSupportedError':\n          reason = 'Sorry, your browser does not support WebRTC. (or you have it disabled in your settings).<br><br>' + 'To participate in this audio/video chat you have to user a browser with WebRTC support like Chrome, Firefox or Opera.' + '<a href=\"http://www.webrtc.org/\" target=\"_new\">Find out more</a>';\n          self.sendErrorStat('NotSupported');\n          break;\n        case 'CustomSecureConnectionError':\n          reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n          self.sendErrorStat('SecureConnection');\n          break;\n        case 'NotAllowedError':\n        // For certain (I suspect older) browsers, `NotAllowedError` indicates either an insecure connection or the user rejecting camera permissions.\n        // The error for both cases appears to be identical, so our best guess at telling them apart is to guess whether we are in a secure context.\n        // (webrtc is considered secure for https connections or on localhost)\n          if (location.protocol === 'https:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1') {\n            reason = 'Sorry, you need to give us permission to use your camera and microphone';\n            self.sendErrorStat('Permission');\n          } else {\n            reason = 'Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC';\n            self.sendErrorStat('SecureConnection');\n          }\n          break;\n        case 'NotFoundError':\n          reason = \"Sorry, we couldn't find a suitable camera on your device. If you have a camera, make sure it set up correctly and refresh this website to retry.\";\n          self.sendErrorStat('NotFound');\n          break;\n        case 'NotReadableError':\n        // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, a hardware error occurred that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Hardware');\n          break;\n        case 'AbortError':\n        // `err.message` might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, an error occurred (probably not hardware related) that prevented access to your camera and/or microphone:<br><br>${err.message}`;\n          self.sendErrorStat('Abort');\n          break;\n        default:\n        // `err` as a string might give useful info to the user (not necessarily useful for other error messages)\n          reason = `Sorry, there was an unknown Error:<br><br>${err}`;\n          self.sendErrorStat('Unknown');\n      }\n      $.gritter.add({\n        title: 'Error',\n        text: `${reason}; try again!`,\n        time: 4000,\n        sticky: false,\n        class_name: 'error',\n      });\n      userId = userId || clientVars.userId;\n      headerId = headerId || window.headerId;\n      videoChat.userLeave(headerId,\n          {\n            headerId,\n            padId,\n            userId,\n          }\n      );\n    },\n    hide: (userId) => {\n      if (!userId) return false;\n      userId = userId.split('.')[1];\n      $('#rtcbox').find(`#video_a_${userId}`)\n          .parent()\n          .remove();\n    },\n    activate: (headerId) => {\n      self.show();\n      self.hangupAll();\n      self.getUserMedia(headerId);\n      Helper.wrtcStore.userInRoom = true;\n    },\n    deactivate: async (userId, headerId) => {\n      if (!userId) return false;\n      self.hide(userId);\n      self.hangupAll(headerId);\n      self.hangup(userId, true, headerId);\n      if (Helper.wrtcStore.localstream) await Helper.stopStreaming();\n      Helper.wrtcStore.userInRoom = false;\n    },\n    toggleMuted: () => {\n      const audioTrack = Helper.wrtcStore.localstream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        return !audioTrack.enabled; // returning \"Muted\" state, which is !enabled\n      }\n      return true; // if there's no audio track, it's muted\n    },\n    toggleVideo: () => {\n      const videoTrack = Helper.wrtcStore.localstream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        return !videoTrack.enabled;\n      }\n    },\n    setStream: (userId, stream) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      let video = $(`#${videoId}`)[0];\n\n      const user = Helper.getUserFromId(userId);\n\n      if (!video && stream) {\n        const videoContainer = $(\"<div class='video-container'>\").css({\n          'width': videoSizes.small,\n          'max-height': videoSizes.small,\n        })\n            .appendTo($('#wrtc_modal .videoWrapper'));\n        const userName = user.name || 'anonymous';\n        videoContainer.append($('<div class=\"user-name\">').text(userName));\n\n        video = $('<video playsinline>').attr('id', videoId)\n            .css({\n              'border-color': user.colorId,\n              'width': videoSizes.small,\n              'max-height': videoSizes.small,\n            })\n            .on({\n              loadedmetadata: () => {\n                self.addInterface(userId);\n              },\n            })\n            .appendTo(videoContainer)[0];\n\n        video.autoplay = true;\n        if (isLocal) {\n          videoContainer.addClass('local-user');\n          video.muted = true;\n        }\n        self.addInterface(userId);\n      }\n      if (stream) {\n        attachMediaStream(video, stream);\n      } else if (video) {\n        $(video).parent()\n            .remove();\n      }\n    },\n    addInterface: (userId) => {\n      if (!userId) return false;\n      const isLocal = userId === Helper.getUserId();\n      const videoId = `video_${userId.replace(/\\./g, '_')}`;\n      const $video = $(`#${videoId}`);\n\n      const $mute = $(\"<span class='interface-btn audio-btn buttonicon'>\")\n          .attr('title', 'Mute')\n          .on({\n            click: () => {\n              let muted;\n              if (isLocal) {\n                muted = self.toggleMuted();\n              } else {\n                $video[0].muted = !$video[0].muted;\n                muted = $video[0].muted;\n              }\n              $mute.attr('title', muted ? 'Unmute' : 'Mute').toggleClass('muted', muted);\n            },\n          });\n\n      let videoEnabled = true;\n      let $disableVideo;\n      if (isLocal) {\n        $disableVideo = $(\"<span class='interface-btn video-btn buttonicon'>\")\n            .attr('title', 'Disable video')\n            .on('click', function () {\n              self.toggleVideo();\n              videoEnabled = !videoEnabled;\n              const title = videoEnabled ? 'Disable video' : 'Enable video';\n              $(this).attr('title', title)\n                  .toggleClass('off', !videoEnabled);\n            });\n      }\n\n      let videoEnlarged = false;\n      const $largeVideo = $(\"<span class='interface-btn enlarge-btn buttonicon'>\")\n          .attr('title', 'Make video larger')\n          .on('click', function () {\n            videoEnlarged = !videoEnlarged;\n\n            if (videoEnlarged) {\n              enlargedVideos.add(userId);\n            } else {\n              enlargedVideos.delete(userId);\n            }\n\n            const title = videoEnlarged ? 'Make video smaller' : 'Make video larger';\n            $(this).attr('title', title)\n                .toggleClass('large', videoEnlarged);\n\n            const videoSize = $(document).find('#wrtc_modal .ndbtn.btn_enlarge')\n                .hasClass('large') ? videoSizes.large : videoSizes.small;\n\n            $video.parent().css({'width': videoSize, 'max-height': videoSize});\n            $video.css({'width': videoSize, 'max-height': videoSize});\n          });\n\n      if ($(document).find('#wrtc_modal .ndbtn.btn_enlarge')\n          .hasClass('large')) {\n        $video.parent().css({\n          'width': videoSizes.large, 'max-height': videoSizes.large,\n        });\n        $video.css({'width': videoSizes.large, 'max-height': videoSizes.large});\n      }\n\n      if (isLocal) localVideoElement = $video;\n\n      const $networkLatency = $(\"<div class='latency'></div>\");\n\n      $(`#interface_${videoId}`).remove();\n      $(\"<div class='interface-container'>\").attr('id', `interface_${videoId}`)\n          .append($mute)\n          .append($disableVideo)\n          .append($largeVideo)\n          .append($networkLatency)\n          .insertAfter($video);\n      self.changeAudioDestination();\n    },\n    // Sends a stat to the back end. `statName` must be in the\n    // approved list on the server side.\n    sendErrorStat: (statName) => {\n      const msg = {component: 'pad', type: 'STATS', data: {statName, type: 'RTC_MESSAGE'}};\n      socket.emit('acceptNewCall', padId, window.headerId);\n      socket.emit('message', msg);\n    },\n    sendMessage: (to, data, socketIdTo) => {\n      socket.emit('RTC_MESSAGE', {\n        type: 'RTC_MESSAGE',\n        payload: {data, to, padId, from: Helper.getUserId(), socket: {from: socket.id, to: socketIdTo}},\n      }, (data) => {\n        // console.log('coming data', data);\n      });\n      // deprecated function\n      // self._pad.collabClient.sendMessage({\n      // type: 'RTC_MESSAGE',\n      //   payload: {data, to},\n      // });\n    },\n    receiveMessage: (msg) => {\n      const peer = msg.from; // userId\n      const data = msg.data;\n      const type = data.type;\n      if (peer === Helper.getUserId()) {\n        // console.info('ignore own messages');\n        return;\n      }\n      /*\n      if (type != 'icecandidate')\n        console.info('receivedMessage', 'peer', peer, 'type', type, 'data', data);\n      */\n      if (type === 'hangup') {\n        self.hangup(peer, true);\n      } else if (type === 'offer') {\n        if (pc[peer]) {\n          self.hangup(peer, true);\n          self.createPeerConnection(peer, data.headerId);\n        } else {\n          self.createPeerConnection(peer, data.headerId);\n        }\n        if (Helper.wrtcStore.localstream) {\n          if (pc[peer].getLocalStreams) {\n            if (!pc[peer].getLocalStreams().length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n\n              // pc[peer].addStream(localStream);\n            }\n          } else if (pc[peer].localStreams) {\n            if (!pc[peer].localStreams.length) {\n              Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n                pc[peer].addTrack(track, Helper.wrtcStore.localstream);\n              });\n              // pc[peer].addStream(localStream);\n            }\n          }\n        }\n        const offer = new RTCSessionDescription(data.offer);\n        pc[peer].setRemoteDescription(offer, () => {\n          pc[peer].createAnswer((desc) => {\n            desc.sdp = cleanupSdp(desc.sdp);\n            pc[peer].setLocalDescription(desc, () => {\n              self.sendMessage(peer, {type: 'answer', answer: desc, headerId: data.headerId});\n            }, logError);\n          }, logError, sdpConstraints);\n        }, logError);\n      } else if (type === 'answer') {\n        if (pc[peer]) {\n          const answer = new RTCSessionDescription(data.answer);\n          pc[peer].setRemoteDescription(answer, () => {\n            // console.log(\"call setRemoteDescription\", new Date().getSeconds())\n          }, logError);\n        }\n      } else if (type === 'icecandidate') {\n        if (pc[peer]) {\n          const candidate = new RTCIceCandidate(data.candidate);\n          const p = pc[peer].addIceCandidate(candidate);\n          if (p) {\n            p.then(() => {\n              // Do stuff when the candidate is successfully passed to the ICE agent\n            }).catch(() => {\n              console.error('[wrtc]: Failure during addIceCandidate()', data);\n            });\n          }\n        }\n      } else {\n        console.error('[wrtc]: unknown message', data);\n      }\n    },\n    hangupAll: (_headerId) => {\n      Object.keys(pc).forEach((userId) => {\n        self.hangup(userId, true, _headerId);\n      });\n    },\n    hangup: (userId, notify = false, headerId) => {\n      notify = userId ? true : notify;\n      if (pc[userId] && userId !== Helper.getUserId()) {\n        self.setStream(userId, '');\n        pc[userId].close();\n        delete pc[userId];\n        if (notify) self.sendMessage(userId, {type: 'hangup', headerId});\n      }\n    },\n    call: (userId, headerId) => {\n      if (!Helper.wrtcStore.localstream) {\n        // callQueue.push(userId);\n        return;\n      }\n      let constraints = {optional: [], mandatory: {}};\n      // temporary measure to remove Moz* constraints in Chrome\n      if (webrtcDetectedBrowser === 'chrome') {\n        for (const prop in constraints.mandatory) {\n          if (prop.indexOf('Moz') !== -1) {\n            delete constraints.mandatory[prop];\n          }\n        }\n      }\n      constraints = mergeConstraints(constraints, sdpConstraints);\n\n      if (!pc[userId]) self.createPeerConnection(userId, headerId);\n\n      // pc[userId].addStream(localStream);\n\n      Helper.wrtcStore.localstream.getTracks().forEach((track) => {\n        pc[userId].addTrack(track, Helper.wrtcStore.localstream);\n      });\n\n      pc[userId].createOffer((desc) => {\n        desc.sdp = cleanupSdp(desc.sdp);\n        pc[userId].setLocalDescription(desc, () => {\n          self.sendMessage(userId, {type: 'offer', offer: desc, headerId});\n        }, logError);\n      }, logError, constraints);\n    },\n    createPeerConnection: (userId, headerId) => {\n      if (pc[userId]) {\n        console.warn('WARNING creating PC connection even though one exists', userId);\n      }\n      pc[userId] = new RTCPeerConnection(pcConfig, pcConstraints);\n      pc[userId].onicecandidate = (event) => {\n        if (event.candidate) {\n          self.sendMessage(userId, {\n            type: 'icecandidate',\n            headerId,\n            candidate: event.candidate,\n          });\n        } else {\n          reconnected = 0;\n          socket.emit('acceptNewCall', padId, window.headerId);\n        }\n      };\n\n      pc[userId].oniceconnectionstatechange = () => {\n        console.info('[wrtc]: ICE state: ', pc[userId], pc[userId].iceConnectionState);\n      };\n\n      pc[userId].ontrack = (event) => {\n        console.info(event, 'ontrack');\n        remoteStream[userId] = event.streams[0];\n        self.setStream(userId, event.streams[0]);\n      };\n\n      pc[userId].onremovestream = () => {\n        self.setStream(userId, '');\n      };\n    },\n    audioVideoInputChange: async () => {\n      await Helper.stopStreaming();\n      self.getUserMedia(window.headerId);\n    },\n    attachSinkId: (element, sinkId) => {\n      // Attach audio output device to video element using device/sink ID.\n      if (element && element[0] && typeof element[0].sinkId !== 'undefined') {\n        element[0].setSinkId(sinkId).then(() => {\n          // console.info(`Success, audio output device attached: ${sinkId}`);\n        }).catch((error) => {\n          let errorMessage = error;\n          if (error.name === 'SecurityError') {\n            errorMessage = `\n                You need to use HTTPS for selecting audio output device: ${error}\n              `;\n          }\n          console.error(errorMessage);\n          // Jump back to first output device in the list as it's the default.\n          audioOutputSelect.selectedIndex = 0;\n        });\n      } else {\n        console.warn('Browser does not support output device selection.');\n        $(document).find('.select.audioOutputSec')\n            .hide();\n      }\n    },\n    changeAudioDestination: () => {\n      const cls = '.select.audioOutputSec select';\n      const audioOutputSelect = document.querySelector(cls);\n      if (!audioOutputSelect) return;\n      const audioDestination = audioOutputSelect.value;\n      const videoElement = localVideoElement;\n      self.attachSinkId(videoElement, audioDestination);\n    },\n    getUserMedia: async (headerId) => {\n      $('#wrtc_modal #networkError')\n          .removeClass('active')\n          .hide();\n\n      // window.navigator.mediaDevices\n      //     .getUserMedia(mediaConstraints)\n      //     .then((stream) => {\n      //       Helper.wrtcStore.localstream = stream;\n      //       self.setStream(Helper.getUserId(), stream);\n      //       self._pad.collabClient.getConnectedUsers().forEach((user) => {\n      //         if (user.userId !== Helper.getUserId()) {\n      //           if (pc[user.userId]) {\n      //             self.hangup(user.userId, false, headerId);\n      //           }\n      //           self.call(user.userId, headerId);\n      //         }\n      //       });\n      //     })\n      //     .catch((err) => {\n      //       self.showUserMediaError(err, Helper.getUserId(), headerId);\n      //     });\n\n      const stream = await videoChat.isUserMediaAvailable()\n          .catch(async (err) => {\n            console.error(err);\n            Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', 'VIDEO');\n            Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n            await Helper.stopStreaming();\n            // socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n            //   gatewayUserLeave(_userData, roomInfo);\n            // });\n            self.showUserMediaError(err, Helper.getUserId(), headerId);\n          });\n\n\n      Helper.wrtcStore.localstream = stream;\n      // if (!stream) {\n      //   stream = await videoChat.isUserMediaAvailable()\n      //   Helper.wrtcStore.localstream = stream\n      // }\n      self.setStream(Helper.getUserId(), stream);\n      self._pad.collabClient.getConnectedUsers().forEach((user) => {\n        if (user.userId !== Helper.getUserId()) {\n          if (pc[user.userId]) {\n            self.hangup(user.userId, false, headerId);\n          }\n          self.call(user.userId, headerId);\n        }\n      });\n    },\n    attemptToReconnect: () => {\n      reconnected++;\n      console.info('[wrtc]: Try reconnecting', reconnected, attemptReconnect);\n      if (attemptReconnect <= reconnected) {\n        socket.emit('acceptNewCall', padId, window.headerId);\n        throw new Error('[wrtc]: please reload the video chat and try again to connect!');\n      }\n      setTimeout(() => {\n        console.info('[wrtc]: reconnecting...');\n        self.getUserMedia(window.headerId);\n      }, randomIntFromInterval(200, 1000));\n    },\n  };\n\n  const logError = (error) => {\n    // if (error && error.message.includes(\"Failed to set remote answer sdp\")) {\n    self.attemptToReconnect();\n    // } else {\n    // socket.emit('acceptNewCall', padId, window.headerId);\n    console.error('[wrtc]: LogError:', error);\n    // }\n    $('#wrtc_modal #networkError').show()\n        .addClass('active')\n        .text(`[wrtc]: Error: ${error} ,Reload the session.`);\n  };\n\n  self.pc = pc;\n  return self;\n})();\n","import * as Helper from './helpers';\nimport WRTC from './webrtc';\n\nlet socket = null;\nlet padId = null;\nlet currentRoom = {};\nlet VIDEOCHATLIMIT = 0;\nlet $joinBtn = null;\nlet networkInterval = null;\n\nconst pingos = {\n  startTime: 0,\n  latency: 0,\n  LMin: 0,\n  LMax: 0,\n  avg: 0,\n  LineAvg: [],\n  colors: {\n    normal: '#fff',\n    warning: '#ffcc00',\n    danger: '#cc3300',\n  },\n  interavCheck: 1000,\n};\n\n\nconst reachedVideoRoomSize = (roomInfo, showAlert, isBulkUpdate) => {\n  if (roomInfo && roomInfo.present <= VIDEOCHATLIMIT) return true;\n\n  showAlert = showAlert || true;\n  if (showAlert && !isBulkUpdate) {\n    $.gritter.add({\n      title: 'Video chat Limitation',\n      text: `\n          The video chat room has reached its limit. \\r\\n\n          The size of this video chat room is ${ VIDEOCHATLIMIT }.\n          (If this seems wrong, please share the problem with the support team.)\n        `,\n      sticky: false,\n      class_name: 'error',\n      time: '5000',\n    });\n  }\n\n  return false;\n};\n\nconst startWatchNetwork = () => {\n  networkInterval = setInterval(() => {\n    pingos.startTime = Date.now();\n    socket.emit('pingil', padId, window.headerId, Helper.getUserId(), pingos.avg);\n  }, pingos.interavCheck);\n};\n\nconst addUserToRoom = (data, roomInfo) => {\n  if (!data || !data.userId) return false;\n  const headerId = data.headerId;\n\n\n  const user = Helper.getUserFromId(data.userId);\n  // some user may session does exist but\n  // the user info does not available in all over the current pad\n\n  if (!user) return true;\n\n  // TODO: this is not good idea, use global state\n  // if incoming user has already in the room don't persuade the request\n  // if (IsUserInRooms) return false;\n  const userCount = roomInfo.present;\n\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text(userCount);\n  if (userCount === 0) {\n    $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text('');\n  }\n\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon`).addClass('active');\n\n  if (data.userId === clientVars.userId) {\n    window.headerId = data.headerId;\n\n    startWatchNetwork();\n\n    const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n    if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.add('active');\n\n    WRTC.activate(data.headerId, user.userId);\n\n    $('#wrtc_modal').css({\n      transform: 'translate(-50%, 0)',\n      opacity: 1,\n    }).attr({ 'data-active': true });\n\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'JOIN', $joinBtn);\n    Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', true);\n\n    // this request send once! and must be fire when the room is empty\n    if (!currentRoom.userId && roomInfo.present === 1) {\n      socket.emit('acceptNewCall', padId, window.headerId);\n    }\n\n    currentRoom = data;\n\n    // update modal title, attributes and inline avatar\n    Helper.wrtcPubsub.emit('updateWrtcToolbarModal', headerId, roomInfo);\n  }\n\n  Helper.wrtcPubsub.emit('update store', data, headerId, 'JOIN', 'VIDEO', roomInfo);\n};\n\n/**\n*\n* @param {Object} data @requires\n* @param {String} data.padId @requires\n* @param {String} data.userId @requires\n* @param {String} data.userName @requires\n* @param {String} data.headerId\n*\n* @param {Object} roomInfo\n* @param {Boolean} showAlert\n* @param {Boolean} bulkUpdate\n*\n* @returns\n*/\nexport const gatewayUserJoin = async (data, roomInfo, showAlert = true, bulkUpdate = false) => {\n  console.info('[wrtc]: gateway user joining,', data, roomInfo, showAlert);\n  // If user data does not exist return false\n  if (!data) return reachedVideoRoomSize(null, false, false);\n\n  // if user data exist then check room size\n  if (data && reachedVideoRoomSize(roomInfo, showAlert, bulkUpdate)) {\n    return addUserToRoom(data, roomInfo);\n  } else if (bulkUpdate) {\n    return addUserToRoom(data, roomInfo);\n  }\n  await Helper.stopStreaming();\n  return false;\n};\n\n\nconst stopWatchNetwork = () => clearInterval(networkInterval);\n\nexport const mediaDevices = () => {\n  navigator.mediaDevices.enumerateDevices().then((deviceInputs) => {\n    const videoSettings = localStorage.getItem('videoSettings');\n    const { microphone, speaker, camera } = JSON.parse(videoSettings);\n\n    const audioInputSection = document.querySelector('.select.audioSource select');\n    const audioOutputSection = document.querySelector('.select.audioOutputSec select');\n    const videoSection = document.querySelector('.select.videoSource select');\n\n    const audioInputElement = document.createElement('select');\n    const audioOutputElement = document.createElement('select');\n    const videoElement = document.createElement('select');\n\n    for (const deviceInfo of deviceInputs) {\n      const option = document.createElement('option');\n      const { deviceId, label, kind } = deviceInfo;\n      option.value = deviceId;\n      if (kind === 'audioinput') {\n        option.text = label || `microphone ${ audioInputSection ? audioInputSection.length + 1 : '1' }`;\n        if (microphone === deviceId) option.selected = true;\n        audioInputElement.appendChild(option);\n      } else if (kind === 'audiooutput') {\n        option.text = label || `speaker ${ audioOutputSection ? audioOutputSection.length + 1 : '1' }`;\n        if (speaker === deviceId) option.selected = true;\n        audioOutputElement.appendChild(option);\n      } else if (kind === 'videoinput') {\n        option.text = label || `camera ${ videoSection ? videoSection.length + 1 : '1' }`;\n        if (camera === deviceId) option.selected = true;\n        videoElement.appendChild(option);\n      }\n    }\n\n    $(audioInputSection).remove();\n    $(audioOutputSection).remove();\n    $(videoSection).remove();\n\n    $('.select.audioSource').append(audioInputElement);\n    $('.select.audioOutputSec').append(audioOutputElement);\n    $('.select.videoSource').append(videoElement);\n  });\n};\n\nexport const isUserMediaAvailable = () => {\n  const audioInputSelect = document.querySelector('#wrtc_settings .select.audioSource');\n  const audioOutputSelect = document.querySelector('#wrtc_settings .select.audioOutputSec');\n  const videoSelect = document.querySelector('#wrtc_settings .select.videoSource');\n\n  const audioSource = audioInputSelect ? audioInputSelect.value : undefined;\n  const videoSource = videoSelect ? videoSelect.value : undefined;\n  const audioOutput = audioOutputSelect ? audioOutputSelect.value : undefined;\n\n  const mediaConstraints = {\n    audio: true,\n    video: {\n      width: 320,\n      height: 240,\n      frameRate: { ideal: 15, max: 30 },\n      facingMode: 'user',\n    },\n  };\n\n  if (audioSource) {\n    mediaConstraints.audio.deviceId = { exact: audioSource };\n  }\n  if (videoSource) {\n    mediaConstraints.video.deviceId = { exact: videoSource };\n  }\n\n  const newSettings = {\n    microphone: audioSource,\n    speaker: audioOutput,\n    camera: videoSource,\n  };\n\n  localStorage.setItem('videoSettings', JSON.stringify(newSettings));\n\n  return window.navigator.mediaDevices.getUserMedia(mediaConstraints);\n};\n\nexport const catchBrowserError = (userId, headerId) => {\n  currentRoom = {};\n\n  $('#wrtc_modal').css({\n    transform: 'translate(-50%, -100%)',\n    opacity: 0,\n  }).attr({ 'data-active': false });\n\n  Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n\n  socket.removeListener(`receiveTextMessage:${ headerId }`);\n  WRTC.deactivate(userId, headerId);\n  stopWatchNetwork();\n  window.headerId = null;\n  Helper.wrtcPubsub.emit('update store', {}, headerId, 'LEAVE', 'VIDEO', {});\n  Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', 'VIDEO');\n  WRTC.userLeave(userId);\n  $('.header_videochat_icon .userCount').text('');\n};\n\nconst removeUserFromRoom = async (data, roomInfo, cb) => {\n  if (!data || !roomInfo || !data.userId) return false;\n  const headerId = data.headerId;\n\n  const userCount = roomInfo.present;\n  $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text(userCount);\n\n  if (userCount === 0) {\n    $(`.header_videochat_icon[data-id='${ headerId }'] .icon .userCount`).text('');\n  }\n\n  if (data.userId === clientVars.userId) {\n    Helper.$bodyAceOuter()\n      .find(`#wrtcVideoIcons #${ headerId }`)\n      .removeClass('active');\n\n    WRTC.deactivate(data.userId, data.headerId);\n    stopWatchNetwork();\n    window.headerId = null;\n\n    const videoBtn = Helper.findAceHeaderElement(headerId).$inlineIcon();\n    if (videoBtn) videoBtn.querySelector('.btn_roomHandler').classList.remove('active');\n\n    currentRoom = {};\n\n    $('#wrtc_modal').css({\n      transform: 'translate(-50%, -100%)',\n      opacity: 0,\n    }).attr({ 'data-active': false });\n\n    Helper.wrtcPubsub.emit('componentsFlow', 'video', 'open', false);\n\n    // we don't need this remove later\n    await Helper.stopStreaming();\n    socket.removeListener(`receiveTextMessage:${ data.headerId }`);\n  }\n\n  if (cb && typeof cb === 'function') cb();\n\n  Helper.wrtcPubsub.emit('update store', data, headerId, 'LEAVE', 'VIDEO', roomInfo);\n\n  Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n\n  WRTC.userLeave(data.userId);\n};\n\nexport const gatewayUserLeave = (data, roomInfo, cb) => {\n  removeUserFromRoom(data, roomInfo, cb);\n};\n\n\nconst createSession = async (headerId, userInfo, $joinButton) => {\n  Helper.$bodyAceOuter()\n    .find('button.btn_joinChat_chatRoom')\n    .removeClass('active');\n  $joinBtn = $joinButton;\n\n  const participators = window.pad.collabClient.getConnectedUsers().map((x) => x.userId);\n\n  if (!currentRoom.userId) {\n    return socket.emit('userJoin', padId, participators, userInfo, 'video', gatewayUserJoin);\n  }\n  // If the user has already joined the video chat,\n  // make suer leave that room then join to the new chat room\n  socket.emit('userLeave', padId, currentRoom, 'video', (_userData, roomInfo) => {\n    gatewayUserLeave(_userData, roomInfo, () => {\n      socket.emit('userJoin', padId, participators, userInfo, 'video', gatewayUserJoin);\n    });\n  });\n};\n\nexport const userJoin = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  // check if has user already in the room\n  if (currentRoom && currentRoom.headerId === headerId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  createSession(headerId, userInfo, $joinButton);\n};\n// deprecate\nexport const reloadCurrentSession = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n\n  createSession(headerId, userInfo, $joinButton, 'RELOAD');\n};\n\nexport const reloadSession = (headerId, userInfo, $joinButton) => {\n  if (!userInfo || !userInfo.userId) {\n    Helper.wrtcPubsub.emit('enable room buttons', headerId, 'LEAVE', $joinBtn);\n    return false;\n  }\n  socket.emit('reloadVideoSession', padId, headerId);\n};\n\nexport const userLeave = (headerId, data, $joinButton) => {\n  $joinBtn = $joinButton;\n  socket.emit('userLeave', padId, data, 'video', gatewayUserLeave);\n};\n\n\nexport const postAceInit = (hookName, context, webSocket, docId) => {\n  socket = webSocket;\n  padId = docId;\n  VIDEOCHATLIMIT = 2000; // clientVars.webrtc.videoChatLimit;\n  Helper.wrtcPubsub.emit('componentsFlow', 'video', 'init', true);\n  // mediaDevices();\n\n  socket.on('userLatency', (data) => {\n    if (Helper.getUserId() !== data.userId) {\n      const videoId = `interface_video_${ data.userId.replace(/\\./g, '_') }`;\n\n      let color = pingos.colors.normal;\n      if (data.latency > 200 && data.latency < 300) color = pingos.colors.warning;\n      if (data.latency > 300) color = pingos.colors.danger;\n\n      $(document)\n        .find(`#${ videoId } .latency`)\n        .css({ color })\n        .text(`${ Math.ceil(data.latency) }ms`);\n    }\n  });\n  socket.on('pongol', (data) => {\n    pingos.latency = Date.now() - pingos.startTime;\n\n    if (pingos.LMin <= pingos.latency && pingos.latency >= pingos.LMax) { pingos.LMax = pingos.latency; } else { pingos.LMin = pingos.latency; }\n\n    if (pingos.LineAvg.length < 4) {\n      pingos.LineAvg.push((pingos.LMax + pingos.LMin) / 2);\n    } else {\n      pingos.avg = pingos.LineAvg.reduce((a, b) => a + b) / pingos.LineAvg.length;\n      pingos.LineAvg = [];\n      pingos.LMax = 0;\n    }\n\n    let color = pingos.colors.normal;\n    if (pingos.avg > 200 && pingos.avg < 300) color = pingos.colors.warning;\n    if (pingos.avg > 300) color = pingos.colors.danger;\n\n    $(document)\n      .find('.video-container.local-user .latency')\n      .css({ color })\n      .text(`${ Math.ceil(pingos.avg) }ms`);\n\n    // Helper.wrtcPubsub.emit('update network information', pingos);\n  });\n\n  socket.on('reloadVideoSession', (headerId) => {\n    if (currentRoom.headerId !== headerId) return false;\n    const target = 'PLUS';\n    const userInfo = {\n      padId: clientVars.padId || window.pad.getPadId(),\n      userId: clientVars.userId || window.pad.getUserId(),\n      userName: clientVars.userName || 'anonymous',\n      headerId,\n      target,\n      action: 'JOIN',\n    };\n    Helper.wrtcPubsub.emit('disable room buttons', headerId, 'JOIN', target);\n    createSession(headerId, userInfo, target);\n  });\n};\n","import * as videoChat from './videoChat';\n\nconst avatarUrl = '../static/plugins/ep_profile_modal/static/img/user.png';\n\nconst getAvatarUrl = (userId) => {\n  if (!userId) return avatarUrl;\n  return `/static/getUserProfileImage/${userId}/${window.pad.getPadId()}?t=${new Date().getTime()}`;\n};\n\n// export const padId = clientVars.padId || window.pad.getPadId();\n// export const userId = clientVars.userId || window.pad.getUserId();\n\nexport const hElements = [\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  '.h1',\n  '.h2',\n  '.h3',\n  '.h4',\n  '.h5',\n  '.h6',\n];\n\nexport const hTags = ['h1', 'h2', 'h3', 'h4'];\n\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nexport const getValidUrl = function (url = '') {\n  if (url === '') return '';\n  let newUrl = window.decodeURIComponent(url);\n  newUrl = newUrl.trim().replace(/\\s/g, '');\n\n  if (/^(:\\/\\/)/.test(newUrl)) {\n    return `http${newUrl}`;\n  }\n  if (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\n    return `http://${newUrl}`;\n  }\n\n  return newUrl;\n};\nexport const getUserId = () => clientVars.userId || window.pad.getUserId();\nexport const stopStreaming = (callback) => new Promise((resolve, reject) => {\n  const stream = wrtcStore.localstream;\n  if (!stream) resolve();\n  stream.getTracks().forEach((track) => {\n    track.stop();\n    stream.removeTrack(track);\n  });\n  wrtcStore.localstream = null;\n  resolve();\n});\n\nexport const getUserFromId = (userId) => {\n  const anonymousUser = {name: 'anonymous', userId, colorId: '#FFF'};\n  if (!window.pad || !window.pad.collabClient) return anonymousUser;\n  const result = window.pad.collabClient\n      .getConnectedUsers()\n      .filter((user) => user.userId === userId);\n  const user = result.length > 0 ? result[0] : anonymousUser;\n  return user;\n};\n\nexport const slugify = (text) => text\n    .toString()\n    .toLowerCase()\n    .trim()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w\\-]+/g, '') // Remove all non-word chars\n    .replace(/\\--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n\nexport const $bodyAceOuter = () => $(document).find('iframe[name=\"ace_outer\"]')\n    .contents();\n\nexport const createShareLink = (headerId, headerText = 'headerText') => {\n  const padAddress = window.location.origin + window.location.pathname;\n  const slug = slugify(headerText);\n  return `${padAddress}?header=${slug}&id=${headerId}&target=video&join=true`;\n};\n\nexport const findAceHeaderElement = (headerId) => {\n  const $el = $bodyAceOuter().find('iframe')\n      .contents()\n      .find('#innerdocbody')\n      .find(`.heading.${headerId}`);\n  return {\n    exist: $el.length,\n    $el,\n    text: $el.text(),\n    tag: $el.attr('data-htag'),\n    offset: {\n      top: () => getHeaderRoomY($el),\n      left: () => getHeaderRoomX($el),\n    },\n    $inlineIcon: () => $el.find('wrt-inline-icon').length\n      ? $el.find('wrt-inline-icon')[0].shadowRoot : null,\n  };\n};\n\nexport const wrtcPubsub = {\n  events: {},\n  on: function on(eventName, fn) {\n    this.events[eventName] = this.events[eventName] || [];\n    this.events[eventName].push(fn);\n  },\n  off: function off(eventName, fn) {\n    if (this.events[eventName]) {\n      for (let i = 0; i < this.events[eventName].length; i++) {\n        if (this.events[eventName][i] === fn) {\n          this.events[eventName].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  emit: function emit(eventName) {\n    const _len = arguments.length;\n    const data = Array(_len > 1 ? _len - 1 : 0);\n    let _key = 1;\n    for (_key = 1; _key < _len; _key++) {\n      data[_key - 1] = arguments[_key];\n    }\n\n    if (this.events[eventName]) {\n      this.events[eventName].forEach((fn) => {\n        fn.apply(undefined, data);\n      });\n    }\n  },\n};\n\n// socketState: 'CLOSED', 'OPENED', 'DISCONNECTED'\n// enable: plugin active/deactivate\nexport const wrtcStore = {\n  enable: true,\n  epProfileState: true,\n  userInRoom: false,\n  currentOpenRoom: null,\n  socketState: 'CLOSED',\n  socket: null,\n  localstream: null,\n  components: {\n    video: {init: false, open: false},\n    room: {init: false, open: false},\n    wrtc: {init: false, open: false},\n  },\n  rooms: new Map(),\n  globalVar: {},\n  staticVar: {\n    webSocket: {\n      DISCONNECTED: 'DISCONNECTED',\n      OPENED: 'OPENED',\n    },\n  },\n};\n\n/**\n   * @param {boolean} state\n   */\nwrtcPubsub.on('plugin enable', (state) => {\n  $bodyAceOuter()\n      .find('iframe')\n      .contents()\n      .find('#innerdocbody')\n      .find('.heading wrt-inline-icon')\n      .each((i, el) => {\n        el.shadowRoot.querySelector('.btn_roomHandler').style.display = state\n          ? 'flex'\n          : 'none';\n      });\n\n  $bodyAceOuter()\n      .find('#outerdocbody')\n      .find('#wbrtc_avatarCol')[0].style.display = state ? 'flex' : 'none';\n\n  // deactivate\n  if (!state) {\n    videoChat.userLeave(window.headerId, wrtcPubsub.currentOpenRoom, 'PLUS');\n    wrtcPubsub.currentOpenRoom = null;\n  }\n  wrtcStore.enable = state;\n});\n\nwrtcPubsub.on('update network information', () => {});\n\n/**\n   * state (DISCONNECTED|OPENED)\n   */\nwrtcPubsub.on('socket state', (state) => {\n  wrtcStore.socketState = state;\n  console.info(\n      '[wrtc]: socket state has been change, new state:',\n      state,\n      wrtcStore.userInRoom,\n      window.headerId\n  );\n  if (state === 'OPENED' && wrtcStore.userInRoom) {\n    console.info('Try reconnecting...');\n    WRTC.attemptToReconnect();\n  }\n});\n\n/**\n   * @param {string}  name @enum(text|video|room|wrtc)\n   * @param {string}  flow @enum(init|open)\n   * @param {boolean} status @enum (true|false)\n   */\nwrtcPubsub.on('componentsFlow', (name, flow, status) => {\n  wrtcStore.components[name][flow] = status;\n});\n\nwrtcPubsub.on('update inlineAvatar info', (userId, data) => {\n  if (clientVars.webrtc.displayInlineAvatar) inlineAvatar.update(userId, data);\n});\n\nwrtcPubsub.on('update store', (requestUser, headerId, action, target, roomInfo, callback) => {\n  if (!requestUser || !headerId || !action || !roomInfo || !target) return false;\n\n  if (!wrtcStore.rooms.has(headerId)) {\n    wrtcStore.rooms.set(headerId, {\n      VIDEO: {list: []},\n      TEXT: {list: []},\n      USERS: {},\n      headerCount: 0,\n    });\n  }\n\n  const room = wrtcStore.rooms.get(headerId);\n  let users = room.USERS;\n\n  room[target] = roomInfo;\n\n  // remove all users\n  users = {};\n\n  if (room.VIDEO.list) {\n    room.VIDEO.list.forEach((el) => {\n      if (!users[el.userId]) users[el.userId] = {};\n      users[el.userId] = el;\n    });\n  }\n\n  inlineAvatar[target](headerId, room[target]);\n  inlineAvatar.ROOM(headerId, users);\n\n  wrtcStore.rooms.set(headerId, room);\n\n  if (callback) callback(room);\n}\n);\n\nwrtcPubsub.on('disable room buttons', (headerId, actions, target) => {\n  const btn = $('#header_videochat_icon')[0];\n  if (!btn) return;\n  btn.classList.add('activeLoader');\n  btn.setAttribute('disabled', true);\n});\n\nwrtcPubsub.on('enable room buttons', (headerId, action, target) => {\n  const btn = $('#header_videochat_icon')[0];\n  if (!btn) return;\n  const newAction = action === 'JOIN' ? 'LEAVE' : 'JOIN';\n  btn.removeAttribute('disabled');\n  btn.setAttribute('data-action', newAction);\n  btn.classList.remove('activeLoader');\n});\n\nwrtcPubsub.on('updateWrtcToolbarModal', (headerId, roomInfo) => {\n  // find toolbar attribute and update all of them.\n  // update toolbar title\n  // update inlineAvatar\n\n  const headerTile = findAceHeaderElement(headerId).text;\n\n  $('#wrtc_modal .btn_roomHandler, #werc_toolbar p').attr('data-id', headerId);\n  $('#wrtc_modal .nd_title .title').html(headerTile);\n});\n\nwrtcPubsub.on('updateWrtcToolbarTitleModal', (headerTile, headerId) => {\n  if (headerId === window.headerId) {\n    $(`#werc_toolbar .nd_title .titleb[data-id='${headerId}'`).html(headerTile);\n    $(document)\n        .find(`.wrtc_roomLink[data-id='${headerId}']`)\n        .text(headerTile);\n  }\n});\n\n/**\n  * @property ROOM\n  * @property VIDEO\n  * @property update\n  */\nexport const inlineAvatar = {\n  ROOM: (headerId, room) => {\n    if (!clientVars.webrtc.displayInlineAvatar) return;\n\n    const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n    let $element = $bodyAceOuter()\n        .find(`#wbrtc_avatarCol .${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n\n    const offsetTop = findAceHeaderElement(headerId).offset.top() - 16;\n\n    if (!$element.length) {\n      const avatarBox = $('#wrtcLinesIcons').tmpl({headerId, offsetTop, userId: clientVars.userId});\n      $element = $bodyAceOuter().find('#wbrtc_avatarCol')\n          .append(avatarBox);\n      $element = $element.find(`.${headerId}.wrtcIconLine .wrtc_inlineAvatars`);\n    }\n\n    const $videoInlineAvatarIcons = $bodyAceOuter()\n        .find('#wbrtc_avatarCol .wrtc_inlineAvatars');\n\n    $element.find('.avatar').remove();\n    Object.keys(room).forEach((key, index) => {\n      const userInList = getUserFromId(room[key].userId) ||\n        {colorId: '', name: 'anonymous'};\n\n      if (userInList.userId) {\n        // if user avatar find in other room remove it\n        $videoInlineAvatarIcons.find(`.avatar[data-id=\"${userInList.userId}\"]`).remove();\n\n        if (index < inlineAvatarLimit) {\n          const userName = userInList.name || 'anonymous';\n          $element.find('.avatarMore').hide();\n          $element.append(`\n            <div\n              class=\"avatar btn_roomHandler\"\n              data-join=\"popup\"\n              data-action=\"USERPROFILEMODAL\"\n              data-id=\"${userInList.userId}\"\n            >\n              <div\n                title='${userName}'\n                style=\"\n                  background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50%;\n                  background-size : cover;\"\n              >\n              </div>\n            </div>`);\n        } else {\n          $element.find('.avatarMore').show()\n              .text(`+${index + 1 - inlineAvatarLimit}`);\n        }\n      }\n    });\n  },\n  VIDEO: function VIDEO(headerId, room) {\n    const $element = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n    if (!clientVars.webrtc.displayInlineAvatar) {\n      $element.hide();\n      return;\n    }\n    $element.show();\n    $element.find('.avatar').remove();\n    this._append(room.list, $element);\n  },\n  _append: (list, $element) => {\n    if (!list) return;\n    const inlineAvatarLimit = clientVars.webrtc.inlineAvatarLimit || 4;\n    list.forEach((el, index) => {\n      const userInList = getUserFromId(el.userId) || {colorId: '', name: 'anonymous'};\n      if (userInList.userId) {\n        if (index < inlineAvatarLimit) {\n          const userName = userInList.name || 'anonymous';\n          $element.find('.avatarMore').hide();\n          $element.append(`\n          <div\n            class=\"avatar btn_roomHandler\"\n            data-join=\"popup\"\n            data-action=\"USERPROFILEMODAL\"\n            data-id=\"${userInList.userId}\"\n          >\n            <div\n              title='${userName}'\n              style=\"\n                background: url('${getAvatarUrl(userInList.userId)}') no-repeat 50% 50%;\n                background-size : cover;\n              \"\n            >\n              </div>\n          </div>`);\n        } else {\n          $element.find('.avatarMore').show()\n              .text(`+${index + 1 - inlineAvatarLimit}`);\n        }\n      }\n    });\n  },\n  update: (userId, data) => {\n    if (!clientVars.webrtc.displayInlineAvatar) return;\n\n    const $roomBox = $bodyAceOuter()\n        .find('#wrtcVideoIcons .wrtcIconLine .wrtc_inlineAvatars');\n    const $videoBox = $(document).find('#werc_toolbar .wrtc_inlineAvatars');\n\n    if ($roomBox) {\n      $roomBox.find(`.avatar[data-id=\"${userId}\"] img`).attr({\n        src: data.imageUrl,\n        title: data.userName,\n      });\n    }\n\n    if ($videoBox) {\n      $videoBox.find('.avatar img').attr({\n        src: data.imageUrl,\n        title: data.userName,\n      });\n    }\n  },\n};\n\nexport const getHeaderRoomY = ($element) => {\n  if (!$element.length) return;\n  const height = $element.outerHeight();\n  const paddingTop = $bodyAceOuter()\n      .find('iframe[name=\"ace_inner\"]')\n      .css('padding-top');\n  const aceOuterPadding = parseInt(paddingTop, 10);\n  const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n  return offsetTop + height / 2;\n};\n\nexport const getHeaderRoomX = ($element) => {\n  if (!$element.length) return;\n  const width = $element.outerWidth();\n  const aceInner = $bodyAceOuter().find('iframe[name=\"ace_inner\"]');\n  const paddingLeft = aceInner.css('padding-left');\n  const aceOuterPadding = parseInt(paddingLeft, 10);\n  const offsetLeft = Math.ceil(aceInner.offset().left - aceOuterPadding);\n  return offsetLeft - width - 6;\n};\n","import * as Helper from './helpers';\nimport * as videoChat from './videoChat';\n\nconst showGeneralOverlay = () => {\n  $('#ep_profile_general_overlay').addClass('ep_profile_formModal_overlay_show');\n  $('#ep_profile_general_overlay').css({display: 'block'});\n};\n\nconst hideGeneralOverlay = () => {\n  $('#ep_profile_general_overlay').removeClass('ep_profile_formModal_overlay_show');\n  $('#ep_profile_general_overlay').css({display: 'none'});\n  $('#ep_profile_modal').removeClass('ep_profile_modal-show');\n  $('#ep_profile_modal_user_list').removeClass('ep_profile_modal-show');\n  $('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n};\n\nexport default (() => {\n  let socket = null;\n  let padId = null;\n  let VIDEOCHATLIMIT = 0;\n  let tryToJoinByQueryString = 0;\n\n  /** --------- Helper --------- */\n\n  const scroll2Header = (headerId) => {\n    const padContainer = $('iframe[name=\"ace_outer\"]')\n        .contents()\n        .find('iframe')\n        .contents();\n    const header = padContainer.find(`.${headerId}`);\n    if (header.length === 0) return false;\n    header[0].scrollIntoView({\n      behavior: 'smooth',\n    });\n  };\n\n  function shareRoomsLink(headId, target) {\n    headId = $(this).attr('data-id') || headId;\n    target = $(this).attr('data-join') || target;\n    target = target.toLowerCase();\n\n    const title = Helper.$bodyAceOuter()\n        .find('iframe')\n        .contents()\n        .find('#innerdocbody')\n        .find(`.heading.${headId}`)\n        .text();\n\n    const origin = window.location.origin;\n    const pathName = window.location.pathname;\n    const queryString = `header=${Helper.slugify(\n        title\n    )}&id=${headId}&target=${target}&join=true`;\n    const link = `${origin + pathName}?${queryString}`;\n\n    const $temp = $('<input>');\n    $('body').append($temp);\n    $temp.val(link).select();\n    document.execCommand('copy');\n    $temp.remove();\n\n    $.gritter.add({\n      title: 'Copied',\n      text: 'Join link copied to clip board',\n      sticky: false,\n      // eslint-disable-next-line camelcase\n      class_name: 'copyLinkToClipboard',\n      time: '3000',\n    });\n  }\n\n  function showUserProfileModal(headerId) {\n    const userId = $(this).attr('data-id') || headerId;\n    const padId = pad.getPadId();\n    $.ajax({\n      url: `/static/${padId}/pluginfw/ep_profile_modal/getUserInfo/${userId}`,\n      type: 'get',\n      data: {},\n      contentType: false,\n      processData: false,\n      beforeSend: () => {\n        const imageUrl = '../static/plugins/ep_profile_modal/static/dist/img/loading.gif';\n        $('#ep_profile_users_profile_userImage')\n            .css({\n              'background-position': '50% 50%',\n              'background-image': `url(${imageUrl})`,\n              'background-repeat': 'no-repeat',\n              'background-size': '69px',\n            });// , 'background-color': '#3873E0'\n\n        $('#ep_profile_users_profile_name').text('');\n        $('#ep_profile_users_profile_desc').text('');\n\n        $('#ep_profile_users_profile').addClass('ep_profile_formModal_show');\n        showGeneralOverlay();\n      },\n      error: (xhr) => { // if error occurred\n        $('#ep_profile_users_profile').removeClass('ep_profile_formModal_show');\n        hideGeneralOverlay();\n      },\n      success: (response) => {\n        const imageUrl = `/static/getUserProfileImage/${userId}/${padId}?t=${new Date().getTime()}`;\n        let username = response.user.username;\n        if (!username || username === '') { username = 'Anonymous'; }\n        const about = response.user.about || '';\n        const homepage = response.user.homepage || '';\n\n        $('#ep_profile_users_profile_name').text(username);\n        $('#ep_profile_users_profile_desc').text(about);\n        if (homepage === '') {\n          $('#ep_profile_users_profile_homepage').hide();\n        } else {\n          $('#ep_profile_users_profile_homepage').attr({\n            href: Helper.getValidUrl(homepage),\n            target: '_blank',\n          });\n        }\n\n        $('#ep_profile_users_profile_userImage').css({\n          'background-position': '50% 50%',\n          'background-image': `url(${imageUrl})`,\n          'background-repeat': 'no-repeat',\n          'background-size': '69px',\n        });\n      },\n    });\n  }\n\n  /**\n   *\n   * @param {string} actions @enum (JOIN|LEAVE|RELOAD|SHARELINK|USERPROFILEMODAL|JOINBYQUERY)\n   * @param {string} headerId\n   * @param {string} target @enum (chatRoom|video|text)\n   */\n  function roomBtnHandler(actions, headerId, target) {\n    if (typeof actions !== 'string') {\n      actions.preventDefault();\n      // no idea! but in some cases! this function fire twice!\n      // the first one has selector, but the second one has not any selector\n      if (!actions.handleObj.selector) return false;\n    }\n\n    headerId = $(this).attr('data-id') || headerId;\n    actions = $(this).attr('data-action') || actions;\n    target = $(this).attr('data-join') || target;\n\n    if (!headerId || !target) return true;\n\n    // If the plugin is disabled\n    if (!Helper.wrtcStore.enable) {\n      console.info('[wrtc]: Plugin disabled');\n      return;\n    }\n\n    const hasHref = $(this).attr('href');\n    // if the link belong to the other pad.\n    // navigate to the new pad\n    // TODO: URL should be sanitize and then decided to navigate\n    if (hasHref) {\n      const url = new URL(hasHref);\n      if (url.pathname !== location.pathname) window.location = hasHref;\n    }\n\n    const userInfo = {\n      padId: clientVars.padId || window.pad.getPadId(),\n      userId: clientVars.userId || window.pad.getUserId(),\n      userName: clientVars.userName || 'anonymous',\n      headerId,\n      target,\n      action: actions,\n    };\n\n    // Before handel request, check socket state\n    if (Helper.wrtcStore.socketState !== 'OPENED') {\n      // show the alert that user must reload the page\n      $.gritter.add({\n        title: 'Video chat no longer responds',\n        text: `\n          The socket is disconnected and we can no longer make a stable call,\n          please go to stable internet and then reload the page.\n        `,\n        sticky: false,\n        // eslint-disable-next-line camelcase\n        class_name: 'error',\n        time: '15000',\n      });\n      return false;\n    }\n\n    if (actions === 'JOIN') {\n      Helper.wrtcPubsub.currentOpenRoom = userInfo;\n      Helper.wrtcPubsub.emit('disable room buttons', headerId, actions, target);\n      videoChat.userJoin(headerId, userInfo, target);\n    } else if (actions === 'LEAVE') {\n      Helper.wrtcPubsub.currentOpenRoom = null;\n      videoChat.userLeave(headerId, userInfo, target);\n    } else if (actions === 'RELOAD') {\n      videoChat.reloadSession(headerId, userInfo, target, actions);\n    } else if (actions === 'SHARELINK') {\n      shareRoomsLink(headerId, target);\n    } else if (actions === 'USERPROFILEMODAL') {\n      showUserProfileModal(headerId);\n    } else if (actions === 'JOINBYQUERY') {\n      const href = $(this).attr('href');\n      joinByQueryString(href);\n    }\n  }\n\n  const joinByQueryString = (url) => {\n    url = url || window.location.href;\n    const urlParams = new URLSearchParams(url);\n    const headerId = urlParams.get('id');\n    let target = urlParams.get('target');\n    const join = urlParams.get('join');\n\n    if (!headerId) return true;\n\n    const inComeURL = new URL(url);\n    const inComePadName = inComeURL.pathname.split('/').pop();\n    const currentPadName = location.pathname.split('/').pop();\n\n    // check if header id belong to this pad\n    // then if it's not check padName\n\n    if (!Helper.wrtcStore.rooms.get(headerId)) {\n      if (inComePadName !== currentPadName) return (window.location.href = url);\n      $.gritter.add({\n        title: 'Error',\n        text: 'The header seems not to exist anymore!',\n        time: 3000,\n        sticky: false,\n        class_name: 'error',\n      });\n      return false;\n    }\n\n    if (headerId) scroll2Header(headerId);\n\n    if (join === 'true' && target) {\n      target = target.toUpperCase();\n\n      if (\n        Helper.wrtcStore.socketState === 'CLOSED' &&\n        tryToJoinByQueryString <= 4\n      ) {\n        setTimeout(() => {\n          console.warn(\n              `[wrtc]: socket state is ${Helper.wrtcStore.socketState}, try to join again!`\n          );\n          tryToJoinByQueryString++;\n          joinByQueryString();\n        }, 1500);\n      } else if (Helper.wrtcStore.socketState === 'OPENED') {\n        setTimeout(() => roomBtnHandler('JOIN', headerId, target), 1000);\n      } else {\n        console.error(`\n          [wrtc]: We try to join ${tryToJoinByQueryString}th,\n          Joining by query string has problem!\n        `,\n        Helper.wrtcStore.socketState,\n        tryToJoinByQueryString\n        );\n      }\n    }\n  };\n\n  // if history state has change fire joinQueryString\n  document.addEventListener('onPushState', (event) => {\n    const {state} = event.detail;\n    if (state.type === 'hyperLink') {\n      const href = state.href;\n      joinByQueryString(href);\n    }\n  });\n\n  const getHeaderRoomY = ($element) => {\n    const height = $element.outerHeight();\n    const paddingTop = Helper.$bodyAceOuter()\n        .find('iframe[name=\"ace_inner\"]')\n        .css('padding-top');\n    const aceOuterPadding = parseInt(paddingTop, 10);\n    const offsetTop = Math.ceil($element.offset().top + aceOuterPadding);\n    return offsetTop + height / 2 - 22;\n  };\n\n  const activeEventListener = () => {\n    const $AceOuter = Helper.$bodyAceOuter();\n\n    $AceOuter.on('click', '.btn_roomHandler', roomBtnHandler);\n\n    $AceOuter\n        .find('iframe')\n        .contents()\n        .find('#innerdocbody')\n        .on('click', 'chat-inline-icon', function () {\n          const headerId = $(this).attr('headerid');\n          $(document)\n              .find('#header_videochat_icon')\n              .attr({\n                'data-action': 'JOIN',\n                'data-id': headerId,\n              });\n\n          $(document)\n              .find(`#tocItems .itemRow.tocItem[sectionid='${headerId}']`)\n              .trigger('click');\n        });\n\n    // integration with ep_rocketChat\n    $(document).on('click', '#toc .itemRow.tocItem', function () {\n      const headerId = $(this).attr('sectionid');\n      const room = Helper.wrtcStore.rooms.get(headerId);\n\n      if (!room) {\n        console.error('[wrtc]: room does not founded!', headerId, room);\n        return false;\n      }\n\n      // clear the button\n      $('.header_videochat_icon').attr('data-id', headerId);\n      $('.header_videochat_icon .icon').removeClass('active');\n      $('.header_videochat_icon .icon .userCount').text('');\n\n      // check wrtc store\n      const userPresent = room.VIDEO.present === 0 ? '' : room.VIDEO.present;\n      $('.header_videochat_icon .icon .userCount').text(userPresent);\n      // does the current user present in this room\n      const currentUserPresent = room.VIDEO.list && room.VIDEO.list.find(\n          (x) => x.userId === clientVars.userId\n      );\n\n      if (currentUserPresent) $('.header_videochat_icon .icon').addClass('active');\n    });\n\n    $(document).on('click', '.btn_roomHandler, .wrtc_roomLink', roomBtnHandler);\n\n    $(document)\n        .on('mouseenter', '.video-container.local-user', () => {\n          $(document).find('#wrtc_modal #networkStatus')\n              .addClass('active');\n        })\n        .on('mouseleave', '.video-container.local-user', () => {\n          $(document).find('#wrtc_modal #networkStatus')\n              .removeClass('active');\n        });\n\n    $(document).on('click', '#werc_toolbar p',\n        function click() {\n          const headerId = $(this).attr('data-id');\n          scroll2Header(headerId);\n        }\n    );\n\n    $(document).on('click', '#werc_toolbar .btn_enlarge', function click() {\n      if (!$(this).attr('active')) return true;\n\n      $(this).toggleClass('large');\n\n      $('#wrtc_modal .video-container .enlarge-btn').each(function trigger() {\n        $(this).trigger('click');\n      });\n    });\n\n    // video interface settings\n    $(document).on('click', '#werc_toolbar .btn_videoSetting',\n        function click() {\n          const offset = $(this).position();\n          const $box = $(document).find('#wrtc_settings');\n          const width = $box.outerWidth();\n          $box\n              .css({left: `${offset.left - width}px`, top: `${offset.top + 4}px`})\n              .toggleClass('active');\n        }\n    );\n  };\n\n  const self = {\n    joinByQueryString,\n    roomBtnHandler,\n    userLeave: (context, callback) => {\n      // Deprecated, we use socket disconnect\n    },\n    postAceInit: (hookName, context, webSocket, docId) => {\n      socket = webSocket;\n      padId = docId;\n      VIDEOCHATLIMIT = clientVars.webrtc.videoChatLimit;\n      Helper.wrtcPubsub.emit('componentsFlow', 'room', 'init', true);\n\n      socket.on('userJoin', (data, roomInfo, target) => {\n        videoChat.gatewayUserJoin(data, roomInfo, false);\n      });\n\n      socket.on('userLeave', (data, roomInfo, target) => {\n        videoChat.gatewayUserLeave(data, roomInfo, target);\n      });\n\n      activeEventListener();\n\n      // check if there is a join request in URI queryString\n      setTimeout(() => {\n        joinByQueryString();\n      }, 500);\n    },\n    adoptHeaderYRoom: () => {\n      // Set all video_heading to be inline with their target REP\n      const $padOuter = Helper.$bodyAceOuter();\n      if (!$padOuter) return;\n\n      // TODO: performance issue\n      $padOuter\n          .find('#wbrtc_avatarCol .wrtcIconLine')\n          .each(function adjustHeaderIconPosition() {\n            const $el = $(this);\n            const $headerId = $el.attr('id');\n            const $headingEl = Helper.findAceHeaderElement($headerId).$el;\n\n            // if the H tags does not find, remove chatBox\n            // TODO: and kick out the user form the chatBox\n            if ($headingEl.length <= 0) {\n              $el.remove();\n              return false;\n            }\n\n            $el.css({top: `${Helper.getHeaderRoomY($headingEl) - 14}px`});\n          });\n    },\n    appendVideoIcon: (headerId, options = {createAgain: false}) => {\n      if (!headerId) return false;\n\n      const roomExist = Helper.wrtcStore.rooms.has(headerId);\n      if (!options.createAgain && roomExist) return false;\n\n      const $elRoomExist = Helper.findAceHeaderElement(headerId);\n\n      if (!roomExist && $elRoomExist.exist) {\n        const $el = Helper.$bodyAceOuter()\n            .find('iframe')\n            .contents()\n            .find('#innerdocbody')\n            .children('div')\n            .find(`.heading.${headerId}`);\n\n        const aceInnerOffset = Helper.$bodyAceOuter()\n            .find('iframe[name=\"ace_inner\"]')\n            .offset();\n\n        const target = Helper.$bodyAceOuter().find('#outerdocbody');\n        const newY = getHeaderRoomY($el);\n        const newX = Math.ceil(aceInnerOffset.left);\n        const lineNumber = $el.parent().parent()\n            .prevAll().length;\n\n        const data = {\n          headingTagId: headerId,\n          positionTop: newY,\n          positionLeft: newX,\n          headTitle: $el.text(),\n          lineNumber,\n          videoChatLimit: VIDEOCHATLIMIT,\n          userId: clientVars.userId,\n        };\n\n        Helper.wrtcStore.rooms.set(headerId, {\n          VIDEO: {list: []},\n          USERS: {},\n          headerCount: 0,\n        });\n\n        const box = $('#wrtcLinesIcons').tmpl(data);\n        target.find('#wrtcVideoIcons').append(box);\n        // check the room that has user in there\n        // padId, headerId\n        socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n          if (result) Helper.inlineAvatar.ROOM(headerId, result);\n        });\n      }\n\n      self.adoptHeaderYRoom();\n    },\n    syncVideoAvatars: (headerId) => {\n      if (!socket) return false;\n      socket.emit('getVideoRoomInfo', padId, headerId, (result) => {\n        if (result) Helper.inlineAvatar.ROOM(headerId, result);\n      });\n    },\n  };\n\n  return self;\n})();\n","import debounce from 'lodash-es/debounce';\nimport ioClient from 'socket.io-client';\nimport './lib/getUserMediaPolyfill';\nimport './lib/adapter';\nimport * as Helper from './lib/helpers';\nimport WRTC from './lib/webrtc';\nimport WrtcRoom from './lib/webrtcRoom';\nimport * as videoChat from './lib/videoChat';\n\nconst getSocket = () => window.pad && window.pad.socket;\n\nconst enableWrtcHeading = () => {\n  Helper.wrtcPubsub.emit('plugin enable', true);\n};\n\nconst disableWrtcHeading = () => {\n  Helper.wrtcPubsub.emit('plugin enable', false);\n};\n\nconst initialWebSocket = (ace, padId, userId) => {\n  // socket connection\n  let newIo = ioClient;\n  const {\n    webSocket: {OPENED, DISCONNECTED},\n  } = Helper.wrtcStore.staticVar;\n\n  const loc = document.location;\n  const port = loc.port === '' ? loc.protocol === 'https:' ? 443 : 80 : loc.port;\n  let socketURL = clientVars.webrtc.socketRemoteAddress;\n  // if plugin run in the localhost or mention\n  // manually use The Etherpad socket instead of ws-gateway\n  if (clientVars.webrtc.useEtherpadSocket || loc.hostname === 'localhost') {\n    newIo = io;\n    socketURL = `${loc.protocol}//${loc.hostname}:${port}`;\n  }\n\n  socketURL = `${socketURL}/${clientVars.webrtc.socketNamespace}`;\n\n  console.info(`socket address: ${socketURL}`);\n\n  const socket = newIo.connect(socketURL, {\n    reconnectionDelay: 1000,\n    autoConnect: true,\n    reconnection: true,\n    transports: ['websocket'], // 'polling'\n  });\n\n  // unfortunately when reconnection happen, etherpad break down totally\n  socket.on('connect', () => {\n    socket.emit('join pad', padId, userId);\n    Helper.wrtcPubsub.emit('socket state', OPENED, socket);\n  });\n\n  // reason (String) either io server disconnect,\n  // io client disconnect, or ping timeout\n  socket.on('disconnect', (reason) => {\n    console.error('[wrtc]: socket disconnection, reason:', reason);\n    Helper.wrtcPubsub.emit('socket state', DISCONNECTED, socket);\n  });\n\n  socket.on('connect_error', (error) => {\n    console.error('[wrtc]: socket connect_error:', error);\n    Helper.wrtcPubsub.emit('socket state', DISCONNECTED, socket);\n  });\n\n  return socket;\n};\n\nexport const postAceInit = (hookName, context) => {\n  const videoSettings = localStorage.getItem('videoSettings');\n  if (!videoSettings) {\n    const data = JSON.stringify({microphone: null, speaker: null, camera: null});\n    localStorage.setItem('videoSettings', data);\n  }\n\n  // If the ep_profile_modal plugin is disabled\n  if (!clientVars.plugins.plugins.ep_profile_modal) {\n    clientVars.webrtc.displayInlineAvatar = false;\n  }\n\n  // Bridge into the ep_profiles\n  window.clientVars.ep_profile_list = {};\n  getSocket().on('message', (obj) => {\n    if (obj.type === 'COLLABROOM' && obj.data && obj.data.type === 'CUSTOM') {\n      const data = obj.data.payload;\n      if (data.action === 'EP_PROFILE_USERS_LIST') {\n        data.list.forEach((el) => {\n          if (!window.clientVars.ep_profile_list[el.userId]) {\n            window.clientVars.ep_profile_list[el.userId] = {};\n          }\n\n          window.clientVars.ep_profile_list[el.userId] = el;\n        });\n      }\n      if (data.action === 'EP_PROFILE_USER_LOGIN_UPDATE') {\n        window.clientVars.ep_profile_list[data.userId] = data;\n        if (Helper && Helper.wrtcPubsub) {\n          Helper.wrtcPubsub.emit('update inlineAvatar info', data.userId, data);\n        }\n      }\n    }\n  });\n\n  const ace = context.ace;\n  const userId = window.pad.getUserId() || clientVars.padId;\n  const padId = window.pad.getPadId() || clientVars.userId;\n\n  // TODO: make sure the priority of these components are in line\n  // TODO: make sure clientVars contain all data that's necessary\n\n  if (!clientVars.userId || !clientVars.padId) {\n    throw new Error(\"[wrtc]: clientVars doesn't exists\");\n  }\n\n  const socket = initialWebSocket(ace, padId, userId);\n  WRTC.postAceInit(hookName, context, socket, padId);\n  // Helper.init(context);\n  videoChat.postAceInit(hookName, context, socket, padId);\n  WrtcRoom.postAceInit(hookName, context, socket, padId);\n\n  // When Editor is ready, append video modal to body\n  $('#editorcontainer iframe').ready(() => {\n    WRTC.appendVideoModalToBody();\n  });\n\n  // module settings\n  $('#options-wrtc-heading').on('change', (e) => {\n    const activated = $('#options-wrtc-heading').is(':checked');\n    activated ? enableWrtcHeading() : disableWrtcHeading();\n  });\n\n  window.onerror = (message, source, lineno, colno, error) => {\n    console.error('[wrtc]: windows error, close stream');\n    if (window.headerId) videoChat.catchBrowserError(clientVars.userId, window.headerId);\n  };\n\n  // find containers\n  const padOuter = $('iframe[name=\"ace_outer\"]').contents();\n  const outerBody = padOuter.find('#outerdocbody');\n\n  // insert wbrtc containers\n  const $target = outerBody;\n  if ($target.find('#wbrtc_avatarCol').length) return false;\n  $target.prepend('<div id=\"wbrtc_avatarCol\" class=\"usersIconList\"></div>');\n\n\n  $(window).resize(debounce(WrtcRoom.adoptHeaderYRoom, 250));\n};\n\nexport const aceEditEvent = (hookName, context) => {\n  const eventType = context.callstack.editEvent.eventType;\n  // ignore these types\n  const invalidTypes = 'handleClick,idleWorkTimer,setup,importText,setBaseText,setWraps';\n  if (invalidTypes.includes(eventType)) return;\n\n  // when a new line create\n  if (context.callstack.domClean) WrtcRoom.adoptHeaderYRoom();\n};\n\nexport const aceEditorCSS = () => {\n  const version = clientVars.webrtc.version || 1;\n  if ($('body').hasClass('mobileView')) {\n    return [`ep_wrtc_heading/static/dist/css/innerLayer_mobile.css?v=${version}`];\n  }\n  return [`ep_wrtc_heading/static/dist/css/innerLayer.css?v=${version}`];\n};\n\nexport const userLeave = (hookName, context) => {\n  WrtcRoom.userLeave(context);\n  WRTC.userLeave(null, context);\n  return;\n};\n\nexport const handleClientMessage_RTC_MESSAGE = (hookName, context) => {\n  WRTC.handleClientMessage_RTC_MESSAGE(hookName, context);\n  return;\n};\n\nexport const acePostWriteDomLineHTML = (hookName, context) => {\n  const hasHeader = $(context.node).find(':header');\n  if (hasHeader.length) {\n    const headerId = hasHeader.attr('data-id');\n    // FIXME: performance issue\n    setTimeout(() => {\n      WrtcRoom.syncVideoAvatars(headerId);\n    }, 250);\n  }\n  return;\n};\n\n// TODO: refactor\nexport const aceDomLineProcessLineAttributes = (hookName, context) => {\n  const cls = context.cls;\n  const headingType = /(?:^| )headerId:([A-Za-z0-9]*)/.exec(cls);\n  const result = [];\n  if (typeof Helper === 'undefined') return result;\n\n  if (headingType) {\n    const headerType = /(?:^| )heading:([A-Za-z0-9]*)/.exec(cls);\n    const headerId = headingType[1];\n    const htagNum = headerType && headerType[1];\n\n    // if video modal is open! update modal title\n    if (Helper.wrtcStore.components.video.open) {\n      const $header = Helper.findAceHeaderElement(headerId);\n      Helper.wrtcPubsub.emit('updateWrtcToolbarTitleModal', $header.text, headerId);\n    }\n\n    const mobileAttr = $('body').hasClass('mobileView') ? 'mobile' : 'desktop';\n\n    const modifier = {\n      preHtml: '',\n      postHtml: `<chat-inline-icon headerid=\"${headerId}\" ${mobileAttr}></chat-inline-icon>`,\n      processedMarker: true,\n    };\n\n    Helper.wrtcStore.rooms.set(headerId, {\n      VIDEO: {list: []},\n      USERS: {},\n      headerCount: 0,\n    });\n    if (htagNum && Helper.hTags.includes(htagNum)) result.push(modifier);\n  }\n\n  return result;\n};\n"],"names":["isObject","value","type","freeGlobal$1","global","_typeof","Object","freeSelf","self","root$1","freeGlobal","Function","now$1","root","Date","now","reWhitespace","reTrimStart","baseTrim","string","slice","index","length","test","charAt","trimmedEndIndex","replace","_Symbol$1","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","baseGetTag","isOwn","call","tag","unmasked","e","result","getRawTag","objectToString","isSymbol","isObjectLike","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","this","clearTimeout","cancel","flush","commonjsGlobal","globalThis","window","re","parts","parseuri","str","src","b","indexOf","substring","query","data","m","exec","uri","i","source","host","authority","ipv6uri","pathNames","obj","path","regx","names","split","substr","splice","queryKey","$0","$1","$2","browser","exports","s","h","d","w","y","ms","val","String","match","n","parseFloat","toLowerCase","parse","isFinite","msAbs","abs","plural","fmtLong","round","fmtShort","Error","JSON","stringify","name","isPlural","common","env","createDebug","namespace","prevTime","namespacesCache","enabledCache","enableOverride","debug","_len","Array","_key","enabled","curr","Number","diff","prev","coerce","unshift","format","formatter","formatters","formatArgs","logFn","log","useColors","color","selectColor","extend","destroy","defineProperty","enumerable","configurable","get","namespaces","set","v","init","delimiter","newDebug","toNamespace","regexp","stack","message","disable","map","skips","join","enable","save","len","push","RegExp","humanize","require$$0","console","warn","keys","forEach","key","hash","charCodeAt","colors","load","warned","module","c","lastC","storage","setItem","removeItem","error","r","getItem","process","DEBUG","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","localStorage","localstorage","j","url_1","url","require$$1","loc","location","protocol","port","ipv6","id","href","manager","lib$1","transports$1","hasCors","hasCorsModule","XMLHttpRequest","err","globalThis_browser","hasCORS","xmlhttprequest","opts","xdomain","xscheme","enablesXDR","XDomainRequest","concat","PACKET_TYPES","create","PACKET_TYPES_REVERSE","chars","commons","ERROR_PACKET","withNativeBlob","Blob","withNativeArrayBuffer","ArrayBuffer","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","readAsDataURL","encodePacket_browser","supportsBinary","isView","buffer","base64Arraybuffer","encode","arraybuffer","bytes","Uint8Array","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","base64decoder","decodeBase64Packet","binaryType","decoded","mapBinary","encodePacket","decodePacket","encodedPacket","SEPARATOR","fromCharCode","lib","encodePayload","packets","encodedPackets","count","packet","decodePayload","encodedPayload","decodedPacket","Emitter","mixin","on","addEventListener","event","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","emit","listeners","hasListeners","parser","require$$2","Transport","_this","_classCallCheck","_super","readyState","socket","msg","desc","description","doOpen","doClose","onClose","write","writable","onPacket","transport","parseqs","encodeURIComponent","qs","qry","pairs","l","pair","decodeURIComponent","alphabet","seed","num","encoded","floor","yeast","yeast_1","require$$3","require$$4","Polling","poll","onPause","pause","polling","total","doPoll","onOpen","close","doWrite","schema","secure","timestampRequests","timestampParam","sid","b64","hostname","util","attr","reduce","acc","k","pick","require$$5","empty","hasXHR2","responseType","XHR","isSSL","xd","xs","forceBase64","assign","Request","req","request","method","onError","onData","pollXhr","_this2","_super2","async","xhr","open","extraHeaders","setDisableHeaderCheck","setRequestHeader","withCredentials","requestTimeout","timeout","hasXDR","onLoad","onerror","responseText","onreadystatechange","status","send","requestsCount","requests","cleanup","onSuccess","fromError","abort","attachEvent","unloadHandler","pollingXhrModule","pollingXhr","rNewline","rEscapedNewline","pollingJsonp","JSONPPolling","___eio","_assertThisInitialized","script","parentNode","removeChild","form","iframe","_get","_getPrototypeOf","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","area","iframeId","className","position","top","left","target","setAttribute","complete","initIframe","html","action","submit","websocketConstructor_browser","WebSocket","MozWebSocket","usingBrowserWebSocket","defaultBinaryType","require$$6","isReactNative","product","WS","check","protocols","headers","ws","addEventListeners","onopen","onclose","onmessage","ev","done","websocket","JSONP","transports","jsonp","forceJSONP","Socket","writeBuffer","prevBufferLen","agent","upgrade","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","o","clone","EIO","priorWebsocketSuccess","createTransport","shift","setTransport","onDrain","probe","failed","onTransportOpen","onlyBinaryUpgrades","upgradeLosesBinary","upgrading","freezeTransport","onTransportClose","onupgrade","to","onHandshake","resetPingTimeout","sendPacket","code","filterUpgrades","compress","cleanupAndClose","waitForUpgrade","reason","pingIntervalTimer","filteredUpgrades","libModule","isBinary_1","hasBinary","withNativeFile","File","toJSON","isArray","binary","reconstructPacket","deconstructPacket","is_binary_1","_deconstructPacket","buffers","placeholder","_placeholder","newData","_reconstructPacket","packetData","pack","attachments","Decoder","Encoder","PacketType","binary_1","EVENT","ACK","encodeAsString","BINARY_EVENT","BINARY_ACK","encodeAsBinary","nsp","deconstruction","reconstructor","decodeString","BinaryReconstructor","takeBinaryData","start","buf","next","payload","tryParse","isPayloadValid","finishedReconstruction","CONNECT","DISCONNECT","CONNECT_ERROR","reconPack","binData","on_1","socket_io_parser_1","RESERVED_EVENTS","freeze","connect","connect_error","disconnect","disconnecting","newListener","io","receiveBuffer","sendBuffer","ids","acks","flags","connected","disconnected","auth","_autoConnect","subs","bind","onpacket","subEvents","_readyState","_len2","_key2","pop","isTransportWritable","engine","discardPacket","_packet","onconnect","onevent","onack","ondisconnect","ack","emitEvent","_anyListeners","_step","_iterator","_createForOfIteratorHelper","f","sent","_len3","_key3","emitBuffered","_this3","subDestroy","listener","backo2","Backoff","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","eio","socket_1","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_parser","encoder","decoder","autoConnect","_reconnection","_reconnectionAttempts","_a","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","_reconnecting","reconnect","skipReconnect","openSubDestroy","errorSub","maybeReconnectOnOpen","timer","onping","ondata","ondecoded","add","_i","_nsps","active","_close","delay","onreconnect","attempt","manager_1","lookup","cache","managers","parsed","sameNamespace","forceNew","multiplex","manager_2","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","constraints","Promise","resolve","reject","stream","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer","t","require","u","a","adapter","adapterFactory","utils","_interopRequireWildcard","chromeShim","firefoxShim","safariShim","commonShim","sdp","__esModule","newObj","default","shimChrome","shimFirefox","shimSafari","logging","browserDetails","detectBrowser","extractVersion","disableLog","disableWarnings","shimPeerConnection","version","browserShim","shimAddIceCandidateNullOrEmpty","shimParameterlessSetLocalDescription","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeExtmapAllowMixed","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","shimGetDisplayMedia","iterator","constructor","_getusermedia","_getdisplaymedia","shimAddTrackRemoveTrackWithNative","_defineProperty","MediaStream","webkitMediaStream","_ontrack","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","find","track","Event","transceiver","streams","dispatchEvent","getTracks","wrapPeerConnectionEvent","shimSenderWithDtmf","pc","dtmf","_dtmf","kind","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","origAddStream","addStream","origRemoveStream","removeStream","RTCRtpSender","origGetSenders","_this4","senders","origGetStats","getStats","_this5","_arguments","selector","onSucc","onErr","fixChromeStats_","response","standardReport","report","standardStats","timestamp","localcandidate","remotecandidate","stat","makeMapStats","stats","Map","successCallbackWrapper_","then","RTCRtpReceiver","_this6","filterStats","origGetReceivers","_this7","receivers","srcElement","MediaStreamTrack","DOMException","getLocalStreams","_this8","_shimmedLocalStreams","streamId","_this9","alreadyExists","existingSenders","newSenders","filter","newSender","_this10","origGetLocalStreams","_this11","nativeStreams","_reverseStreams","_this12","_streams","newStream","_this13","signalingState","oldStream","nativeMethod","methodObj","_this14","replaceInternalStreamId","origSetLocalDescription","setLocalDescription","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","_this15","streamid","internalId","externalStream","internalStream","RTCSessionDescription","RTCIceCandidate","getConfiguration","sdpSemantics","getSourceId","getDisplayMedia","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","mandatory","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","constraintsToChrome_","optional","cc","ideal","exact","oldname_","prefix","toUpperCase","oc","mix","advanced","shimConstraints_","audio","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia_","origGetUserMedia","cs","getAudioTracks","getVideoTracks","stop","_sdp2","_interopRequireDefault","NativeRTCIceCandidate","candidate","nativeCandidate","parsedCandidate","parseCandidate","augmentedCandidate","sdpMid","sdpMLineIndex","usernameFragment","_sctp","sctpInDescription","sections","splitSections","mediaSection","mLine","parseMLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","matchPrefix","isFirefox","canSendMMS","remoteMMS","POSITIVE_INFINITY","sctp","origCreateDataChannel","createDataChannel","dataChannel","wrapDcSend","channel","dc","origDataChannelSend","size","byteLength","proto","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","nativeSRD","line","trim","nativeAddIceCandidate","addIceCandidate","nativeSetLocalDescription","createOffer","createAnswer","RTCTrackEvent","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","deprecated","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","rid","scaleResolutionDownBy","RangeError","maxFramerate","params","getParameters","encodings","setParameters","catch","origGetParameters","origCreateOffer","_arguments2","all","finally","origCreateAnswer","_arguments3","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","shimConstraints","_localStreams","_addTrack","tracks","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","errcb","compactObject","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","generateCertificate","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","AudioContext","webkitAudioContext","walkStats","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","has","unwrappedCb","delete","bool","oldMethod","newMethod","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","accumulator","isObj","isEmptyObject","base","resultSet","endsWith","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","trackId","SDPUtils","localCName","generateIdentifier","splitLines","blob","part","getDescription","getMediaSections","foundation","component","priority","ip","address","relatedAddress","relatedPort","tcpType","ufrag","writeCandidate","parseIceOptions","parseRtpMap","payloadType","clockRate","channels","numChannels","writeRtpMap","codec","pt","preferredPayloadType","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","sp","ssrc","colon","attribute","parseSsrcGroup","semantics","ssrcs","getMid","mid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","role","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","password","writeIceParameters","iceLite","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","rtpmapline","fmtps","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","bandwidth","maxBitrate","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","maxSizeLine","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","getDirection","getKind","isRejected","parseOLine","username","sessionId","sessionVersion","netType","addressType","isValidSDP","mediaStreamTrack","interval","that","browserFakeUserAgent","captureStream","mozCaptureStream","getContext","play","drawImage","toDataURL","HTMLVideoElement","screen","URL","createObjectURL","revokeObjectURL","getStatsResult","encryption","availableBandwidth","framerateMean","bitrateMean","recv","bytesSent","bytesReceived","latency","packetsLost","systemBandwidth","sentPerSecond","encodedPerSecond","helper","audioBytesSent","videoBytestSent","speed","results","connectionType","systemNetworkType","connection","systemIpAddress","local","candidateType","ipAddress","networkType","remote","resolutions","internal","candidates","nomore","getStatsParser","checkIfOfferer","isOfferer","googInitiator","isSafari","peer","getStatsLooper","getStatsWrapper","search","datachannel","state","ended","videoBytesSent","InstallTrigger","res","items","item","googCertificate","googFingerprintAlgorithm","fingerprintAlgorithm","checkAudioTracks","mediaType","sendrecvType","isRemote","googCodecName","kilobytes","prevBytesSent","toFixed","prevBytesReceived","googTrackId","googCurrentDelayMs","prevGoogCurrentDelayMs","prevPacketsLost","checkVideoTracks","googFrameHeightReceived","googFrameWidthReceived","googFrameHeightSent","googFrameWidthSent","prevFramerateMean","prevBitrateMean","bweforvideo","availableSendBandwidth","googAvailableSendBandwidth","googActualEncBitrate","googAvailableReceiveBandwidth","googRetransmitBitrate","googTargetEncBitrate","googBucketDelay","googTransmitBitrate","candidatePair","googActiveConnection","cid","googLocalAddress","googRemoteAddress","googTransportType","localCandidate","localCandidateId","remoteCandidate","remoteCandidateId","selected","nominated","mozLocalTransport","mozRemoteTransport","availableOutgoingBitrate","prevAvailableOutgoingBitrate","availableIncomingBitrate","prevAvailableIncomingBitrate","LOCAL_candidateType","LOCAL_transport","LOCAL_ipAddress","LOCAL_networkType","portNumber","REMOTE_candidateType","REMOTE_transport","REMOTE_ipAddress","REMOTE_networkType","dataSentReceived","remoteSource","frameWidth","frameHeight","SSRC","findLine","sdpLines","startLine","endLine","realEndLine","getCodecPayloadType","sdpLine","pattern","setApplicationSpecificBandwidth","isScreen","regex","setVideoBitrates","xgoogleMinBitrate","xgoogleMaxBitrate","videoCodec","vp8Index","vp8Payload","rtxIndex","rtxPayload","rtxFmtpLineIndex","appendrtxNext","_setVideoBitrates","setOpusAttributes","opusIndex","opusPayload","opusFmtpLineIndex","appendOpusNext","stereo","maxaveragebitrate","maxplaybackrate","cbr","useinbandfec","usedtx","_setOpusAttributes","cleanupSdp","minVideo","maxVideo","clientVars","webrtc","CodecsHandler.setApplicationSpecificBandwidth","CodecsHandler.setVideoBitrates","codecName","info","videoCodecNumbers","codecNumber","videoCodecNumbersOriginal","vp8LineNumber","vp9LineNumber","h264LineNumber","ignore","preferCodecNumber","newLine","newOrder","preferCodecHelper","CodecsHandler.preferCodec","CodecsHandler.setOpusAttributes","WRTC$1","reconnected","videoSizes","large","small","DtlsSrtpKeyAgreement","sdpConstraints","OfferToReceiveAudio","OfferToReceiveVideo","enlargedVideos","Set","localVideoElement","padId","postAceInit","hookName","context","webSocket","docId","sizes","_pad","pad","$","audioVideoInputChange","changeAudioDestination","hangupAll","Helper.getUserId","headerId","receiveMessage","appendVideoModalToBody","$wrtcVideoModal","tmpl","videoChatLimit","prepend","$parent","parent","videoBox","innerHeight","toggle","removeAttr","css","transform","userID","$this","isActive","$modal","hide","show","toggleClass","$btnInfo","trigger","userLeave","userId","userInfo","hangup","Helper.wrtcStore","userInRoom","handleClientMessage_RTC_MESSAGE","hook","addClass","videoChat.mediaDevices","showUserMediaError","sendErrorStat","gritter","title","text","sticky","class_name","videoChat.userLeave","remove","activate","deactivate","localstream","Helper.stopStreaming","toggleMuted","audioTrack","toggleVideo","videoTrack","setStream","isLocal","videoId","user","Helper.getUserFromId","videoContainer","appendTo","userName","append","colorId","loadedmetadata","addInterface","autoplay","muted","element","srcObject","mozSrcObject","attachMediaStream","$video","$mute","click","$disableVideo","videoEnabled","videoEnlarged","$largeVideo","videoSize","hasClass","$networkLatency","insertAfter","statName","sendMessage","socketIdTo","from","createPeerConnection","localStreams","offer","answer","logError","_headerId","notify","prop","cons1","cons2","merged","mergeConstraints","onicecandidate","oniceconnectionstatechange","ontrack","onremovestream","attachSinkId","sinkId","setSinkId","errorMessage","selectedIndex","audioOutputSelect","querySelector","audioDestination","videoElement","removeClass","videoChat.isUserMediaAvailable","Helper.wrtcPubsub","collabClient","getConnectedUsers","attemptToReconnect","currentRoom","VIDEOCHATLIMIT","$joinBtn","networkInterval","pingos","startTime","LMin","LMax","avg","LineAvg","normal","warning","danger","interavCheck","reachedVideoRoomSize","roomInfo","showAlert","isBulkUpdate","present","addUserToRoom","userCount","setInterval","videoBtn","Helper.findAceHeaderElement","$inlineIcon","classList","WRTC","opacity","gatewayUserJoin","bulkUpdate","stopWatchNetwork","clearInterval","deviceInputs","videoSettings","microphone","speaker","camera","audioInputSection","audioOutputSection","videoSection","audioInputElement","audioOutputElement","deviceInfo","option","isUserMediaAvailable","audioInputSelect","videoSelect","audioSource","videoSource","audioOutput","mediaConstraints","newSettings","catchBrowserError","gatewayUserLeave","Helper.$bodyAceOuter","removeUserFromRoom","createSession","$joinButton","participators","x","_userData","reloadSession","ceil","getPadId","getUserId","getAvatarUrl","getTime","hTags","getValidUrl","newUrl","stopStreaming","wrtcStore","getUserFromId","anonymousUser","slugify","$bodyAceOuter","contents","findAceHeaderElement","$el","exist","offset","getHeaderRoomY","getHeaderRoomX","shadowRoot","wrtcPubsub","events","eventName","epProfileState","currentOpenRoom","socketState","components","room","wrtc","rooms","globalVar","staticVar","DISCONNECTED","OPENED","each","el","display","flow","displayInlineAvatar","inlineAvatar","update","requestUser","VIDEO","list","TEXT","USERS","headerCount","users","ROOM","actions","btn","newAction","removeAttribute","headerTile","inlineAvatarLimit","$element","offsetTop","avatarBox","$videoInlineAvatarIcons","userInList","_append","$roomBox","$videoBox","imageUrl","outerHeight","paddingTop","aceOuterPadding","outerWidth","aceInner","paddingLeft","Helper","__proto__","hElements","createShareLink","headerText","origin","pathname","WrtcRoom","tryToJoinByQueryString","scroll2Header","header","scrollIntoView","behavior","showUserProfileModal","ajax","contentType","processData","beforeSend","success","about","homepage","Helper.getValidUrl","roomBtnHandler","preventDefault","handleObj","hasHref","videoChat.userJoin","videoChat.reloadSession","headId","link","Helper.slugify","$temp","select","execCommand","shareRoomsLink","joinByQueryString","urlParams","URLSearchParams","inComePadName","currentPadName","detail","activeEventListener","$AceOuter","userPresent","$box","videoChat.gatewayUserJoin","videoChat.gatewayUserLeave","adoptHeaderYRoom","$padOuter","$headerId","$headingEl","Helper.getHeaderRoomY","appendVideoIcon","createAgain","roomExist","$elRoomExist","children","aceInnerOffset","newY","newX","lineNumber","prevAll","headingTagId","positionTop","positionLeft","headTitle","box","Helper.inlineAvatar","syncVideoAvatars","aceDomLineProcessLineAttributes","cls","headingType","headerType","htagNum","$header","modifier","preHtml","postHtml","processedMarker","Helper.hTags","aceEditEvent","eventType","callstack","editEvent","domClean","aceEditorCSS","acePostWriteDomLineHTML","hasHeader","node","plugins","ep_profile_modal","ep_profile_list","ace","newIo","ioClient","socketURL","socketRemoteAddress","useEtherpadSocket","socketNamespace","initialWebSocket","videoChat.postAceInit","ready","is","lineno","colno","videoChat.catchBrowserError","$target","resize"],"mappings":"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"}