"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=i(e);if(t){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(exports,"__esModule",{value:!0});var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var g={exports:{}};!function(t,n){(function(){var r,o="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,c=32,u=64,d=128,l=256,f=1/0,p=9007199254740991,h=NaN,m=4294967295,y=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",c],["partialRight",u],["rearg",l]],g="[object Arguments]",b="[object Array]",_="[object Boolean]",w="[object Date]",C="[object Error]",k="[object Function]",S="[object GeneratorFunction]",T="[object Map]",R="[object Number]",E="[object Object]",x="[object Promise]",P="[object RegExp]",I="[object Set]",O="[object String]",A="[object Symbol]",M="[object WeakMap]",L="[object ArrayBuffer]",j="[object DataView]",D="[object Float32Array]",$="[object Float64Array]",N="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",V="[object Uint8ClampedArray]",z="[object Uint16Array]",W="[object Uint32Array]",q=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Y=RegExp(J.source),X=RegExp(K.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(oe.source),ae=/^\s+/,se=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ce=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ie="['’]",Oe="[\\ud800-\\udfff]",Ae="["+Pe+"]",Me="["+Se+"]",Le="\\d+",je="[\\u2700-\\u27bf]",De="["+Re+"]",$e="[^\\ud800-\\udfff"+Pe+Le+Te+Re+Ee+"]",Ne="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ee+"]",ze="(?:"+De+"|"+$e+")",We="(?:"+Ve+"|"+$e+")",qe="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",He="(?:"+Me+"|"+Ne+")"+"?",Je="[\\ufe0e\\ufe0f]?",Ke=Je+He+("(?:\\u200d(?:"+[Be,Fe,Ue].join("|")+")"+Je+He+")*"),Ye="(?:"+[je,Fe,Ue].join("|")+")"+Ke,Xe="(?:"+[Be+Me+"?",Me,Fe,Ue,Oe].join("|")+")",Ze=RegExp(Ie,"g"),Qe=RegExp(Me,"g"),et=RegExp(Ne+"(?="+Ne+")|"+Xe+Ke,"g"),tt=RegExp([Ve+"?"+De+"+"+qe+"(?="+[Ae,Ve,"$"].join("|")+")",We+"+"+Ge+"(?="+[Ae,Ve+ze,"$"].join("|")+")",Ve+"?"+ze+"+"+qe,Ve+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ye].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Se+xe+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,at={};at[D]=at[$]=at[N]=at[B]=at[F]=at[U]=at[V]=at[z]=at[W]=!0,at[g]=at[b]=at[L]=at[_]=at[j]=at[w]=at[C]=at[k]=at[T]=at[R]=at[E]=at[P]=at[I]=at[O]=at[M]=!1;var st={};st[g]=st[b]=st[L]=st[j]=st[_]=st[w]=st[D]=st[$]=st[N]=st[B]=st[F]=st[T]=st[R]=st[E]=st[P]=st[I]=st[O]=st[A]=st[U]=st[V]=st[z]=st[W]=!0,st[C]=st[k]=st[M]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,dt=parseInt,lt="object"==e(v)&&v&&v.Object===Object&&v,ft="object"==("undefined"==typeof self?"undefined":e(self))&&self&&self.Object===Object&&self,pt=lt||ft||Function("return this")(),ht=n&&!n.nodeType&&n,vt=ht&&t&&!t.nodeType&&t,mt=vt&&vt.exports===ht,yt=mt&&lt.process,gt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),bt=gt&&gt.isArrayBuffer,_t=gt&&gt.isDate,wt=gt&&gt.isMap,Ct=gt&&gt.isRegExp,kt=gt&&gt.isSet,St=gt&&gt.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Rt(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}function Et(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function Ot(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function At(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}function Mt(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}function Lt(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function jt(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function Dt(e,t,n,r){var o=null==e?0:e.length;for(r&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function $t(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Nt=qt("length");function Bt(e,t,n){var r;return n(e,(function(e,n,o){if(t(e,n,o))return r=n,!1})),r}function Ft(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Ut(e,t,n){return t==t?function(e,t,n){var r=n-1,o=e.length;for(;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,zt,n)}function Vt(e,t,n,r){for(var o=n-1,i=e.length;++o<i;)if(r(e[o],t))return o;return-1}function zt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:h}function qt(e){return function(t){return null==t?r:t[e]}}function Gt(e){return function(t){return null==e?r:e[t]}}function Ht(e,t,n,r,o){return o(e,(function(e,o,i){n=r?(r=!1,e):t(n,e,o,i)})),n}function Jt(e,t){for(var n,o=-1,i=e.length;++o<i;){var a=t(e[o]);a!==r&&(n=n===r?a:n+a)}return n}function Kt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Yt(e){return e?e.slice(0,vn(e)+1).replace(ae,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Mt(t,(function(t){return e[t]}))}function Qt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Gt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),on=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ct[e]}function sn(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,i[o++]=n)}return i}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Nt(e)}function hn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function t(n){var v,se=(n=null==n?pt:yn.defaults(pt.Object(),n,yn.pick(pt,ot))).Array,Se=n.Date,Te=n.Error,Re=n.Function,Ee=n.Math,xe=n.Object,Pe=n.RegExp,Ie=n.String,Oe=n.TypeError,Ae=se.prototype,Me=Re.prototype,Le=xe.prototype,je=n["__core-js_shared__"],De=Me.toString,$e=Le.hasOwnProperty,Ne=0,Be=(v=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",Fe=Le.toString,Ue=De.call(xe),Ve=pt._,ze=Pe("^"+De.call($e).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=mt?n.Buffer:r,qe=n.Symbol,Ge=n.Uint8Array,He=We?We.allocUnsafe:r,Je=un(xe.getPrototypeOf,xe),Ke=xe.create,Ye=Le.propertyIsEnumerable,Xe=Ae.splice,et=qe?qe.isConcatSpreadable:r,nt=qe?qe.iterator:r,ct=qe?qe.toStringTag:r,lt=function(){try{var e=vi(xe,"defineProperty");return e({},"",{}),e}catch(e){}}(),ft=n.clearTimeout!==pt.clearTimeout&&n.clearTimeout,ht=Se&&Se.now!==pt.Date.now&&Se.now,vt=n.setTimeout!==pt.setTimeout&&n.setTimeout,yt=Ee.ceil,gt=Ee.floor,Nt=xe.getOwnPropertySymbols,Gt=We?We.isBuffer:r,gn=n.isFinite,bn=Ae.join,_n=un(xe.keys,xe),wn=Ee.max,Cn=Ee.min,kn=Se.now,Sn=n.parseInt,Tn=Ee.random,Rn=Ae.reverse,En=vi(n,"DataView"),xn=vi(n,"Map"),Pn=vi(n,"Promise"),In=vi(n,"Set"),On=vi(n,"WeakMap"),An=vi(xe,"create"),Mn=On&&new On,Ln={},jn=Vi(En),Dn=Vi(xn),$n=Vi(Pn),Nn=Vi(In),Bn=Vi(On),Fn=qe?qe.prototype:r,Un=Fn?Fn.valueOf:r,Vn=Fn?Fn.toString:r;function zn(e){if(is(e)&&!Ja(e)&&!(e instanceof Hn)){if(e instanceof Gn)return e;if($e.call(e,"__wrapped__"))return zi(e)}return new Gn(e)}var Wn=function(){function e(){}return function(t){if(!os(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qn(){}function Gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Zn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Qn(e,t){var n=Ja(e),r=!n&&Ha(e),o=!n&&!r&&Za(e),i=!n&&!r&&!o&&ps(e),a=n||r||o||i,s=a?Kt(e.length,Ie):[],c=s.length;for(var u in e)!t&&!$e.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ci(u,c))||s.push(u);return s}function er(e){var t=e.length;return t?e[Xr(0,t-1)]:r}function tr(e,t){return Bi(Mo(e),dr(t,0,e.length))}function nr(e){return Bi(Mo(e))}function rr(e,t,n){(n!==r&&!Wa(e[t],n)||n===r&&!(t in e))&&cr(e,t,n)}function or(e,t,n){var o=e[t];$e.call(e,t)&&Wa(o,n)&&(n!==r||t in e)||cr(e,t,n)}function ir(e,t){for(var n=e.length;n--;)if(Wa(e[n][0],t))return n;return-1}function ar(e,t,n,r){return vr(e,(function(e,o,i){t(r,e,n(e),i)})),r}function sr(e,t){return e&&Lo(t,js(t),e)}function cr(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ur(e,t){for(var n=-1,o=t.length,i=se(o),a=null==e;++n<o;)i[n]=a?r:Is(e,t[n]);return i}function dr(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function lr(e,t,n,o,i,a){var s,c=1&t,u=2&t,d=4&t;if(n&&(s=i?n(e,o,i,a):n(e)),s!==r)return s;if(!os(e))return e;var l=Ja(e);if(l){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&$e.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Mo(e,s)}else{var f=gi(e),p=f==k||f==S;if(Za(e))return Eo(e,c);if(f==E||f==g||p&&!i){if(s=u||p?{}:_i(e),!c)return u?function(e,t){return Lo(e,yi(e),t)}(e,function(e,t){return e&&Lo(t,Ds(t),e)}(s,e)):function(e,t){return Lo(e,mi(e),t)}(e,sr(s,e))}else{if(!st[f])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return xo(e);case _:case w:return new r(+e);case j:return function(e,t){var n=t?xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case $:case N:case B:case F:case U:case V:case z:case W:return Po(e,n);case T:return new r;case R:case O:return new r(e);case P:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new r;case A:return o=e,Un?xe(Un.call(o)):{}}var o}(e,f,c)}}a||(a=new Zn);var h=a.get(e);if(h)return h;a.set(e,s),ds(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,a))})):as(e)&&e.forEach((function(r,o){s.set(o,lr(r,t,n,o,e,a))}));var v=l?r:(d?u?ci:si:u?Ds:js)(e);return Et(v||e,(function(r,o){v&&(r=e[o=r]),or(s,o,lr(r,t,n,o,e,a))})),s}function fr(e,t,n){var o=n.length;if(null==e)return!o;for(e=xe(e);o--;){var i=n[o],a=t[i],s=e[i];if(s===r&&!(i in e)||!a(s))return!1}return!0}function pr(e,t,n){if("function"!=typeof e)throw new Oe(o);return ji((function(){e.apply(r,n)}),t)}function hr(e,t,n,r){var o=-1,i=Ot,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Mt(t,Xt(n))),r?(i=At,a=!1):t.length>=200&&(i=Qt,a=!1,t=new Xn(t));e:for(;++o<s;){var d=e[o],l=null==n?d:n(d);if(d=r||0!==d?d:0,a&&l==l){for(var f=u;f--;)if(t[f]===l)continue e;c.push(d)}else i(t,l,r)||c.push(d)}return c}zn.templateSettings={escape:Z,evaluate:Q,interpolate:ee,variable:"",imports:{_:zn}},zn.prototype=qn.prototype,zn.prototype.constructor=zn,Gn.prototype=Wn(qn.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Wn(qn.prototype),Hn.prototype.constructor=Hn,Jn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Jn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Jn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===i?r:n}return $e.call(t,e)?t[e]:r},Jn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==r:$e.call(t,e)},Jn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===r?i:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=ir(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,n=ir(t,e);return n<0?r:t[n][1]},Kn.prototype.has=function(e){return ir(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=ir(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Jn,map:new(xn||Kn),string:new Jn}},Yn.prototype.delete=function(e){var t=pi(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return pi(this,e).get(e)},Yn.prototype.has=function(e){return pi(this,e).has(e)},Yn.prototype.set=function(e,t){var n=pi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,i),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Zn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Zn.prototype.get=function(e){return this.__data__.get(e)},Zn.prototype.has=function(e){return this.__data__.has(e)},Zn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!xn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var vr=$o(kr),mr=$o(Sr,!0);function yr(e,t){var n=!0;return vr(e,(function(e,r,o){return n=!!t(e,r,o)})),n}function gr(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(c===r?s==s&&!fs(s):n(s,c)))var c=s,u=a}return u}function br(e,t){var n=[];return vr(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function _r(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=wi),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?_r(s,t-1,n,r,o):Lt(o,s):r||(o[o.length]=s)}return o}var wr=No(),Cr=No(!0);function kr(e,t){return e&&wr(e,t,js)}function Sr(e,t){return e&&Cr(e,t,js)}function Tr(e,t){return It(t,(function(t){return ts(e[t])}))}function Rr(e,t){for(var n=0,o=(t=ko(t,e)).length;null!=e&&n<o;)e=e[Ui(t[n++])];return n&&n==o?e:r}function Er(e,t,n){var r=t(e);return Ja(e)?r:Lt(r,n(e))}function xr(e){return null==e?e===r?"[object Undefined]":"[object Null]":ct&&ct in xe(e)?function(e){var t=$e.call(e,ct),n=e[ct];try{e[ct]=r;var o=!0}catch(e){}var i=Fe.call(e);o&&(t?e[ct]=n:delete e[ct]);return i}(e):function(e){return Fe.call(e)}(e)}function Pr(e,t){return e>t}function Ir(e,t){return null!=e&&$e.call(e,t)}function Or(e,t){return null!=e&&t in xe(e)}function Ar(e,t,n){for(var o=n?At:Ot,i=e[0].length,a=e.length,s=a,c=se(a),u=1/0,d=[];s--;){var l=e[s];s&&t&&(l=Mt(l,Xt(t))),u=Cn(l.length,u),c[s]=!n&&(t||i>=120&&l.length>=120)?new Xn(s&&l):r}l=e[0];var f=-1,p=c[0];e:for(;++f<i&&d.length<u;){var h=l[f],v=t?t(h):h;if(h=n||0!==h?h:0,!(p?Qt(p,v):o(d,v,n))){for(s=a;--s;){var m=c[s];if(!(m?Qt(m,v):o(e[s],v,n)))continue e}p&&p.push(v),d.push(h)}}return d}function Mr(e,t,n){var o=null==(e=Oi(e,t=ko(t,e)))?e:e[Ui(ea(t))];return null==o?r:Tt(o,e,n)}function Lr(e){return is(e)&&xr(e)==g}function jr(e,t,n,o,i){return e===t||(null==e||null==t||!is(e)&&!is(t)?e!=e&&t!=t:function(e,t,n,o,i,a){var s=Ja(e),c=Ja(t),u=s?b:gi(e),d=c?b:gi(t),l=(u=u==g?E:u)==E,f=(d=d==g?E:d)==E,p=u==d;if(p&&Za(e)){if(!Za(t))return!1;s=!0,l=!1}if(p&&!l)return a||(a=new Zn),s||ps(e)?ii(e,t,n,o,i,a):function(e,t,n,r,o,i,a){switch(n){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!i(new Ge(e),new Ge(t)));case _:case w:case R:return Wa(+e,+t);case C:return e.name==t.name&&e.message==t.message;case P:case O:return e==t+"";case T:var s=cn;case I:var c=1&r;if(s||(s=ln),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var d=ii(s(e),s(t),r,o,i,a);return a.delete(e),d;case A:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,u,n,o,i,a);if(!(1&n)){var h=l&&$e.call(e,"__wrapped__"),v=f&&$e.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,y=v?t.value():t;return a||(a=new Zn),i(m,y,n,o,a)}}if(!p)return!1;return a||(a=new Zn),function(e,t,n,o,i,a){var s=1&n,c=si(e),u=c.length,d=si(t).length;if(u!=d&&!s)return!1;var l=u;for(;l--;){var f=c[l];if(!(s?f in t:$e.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var v=!0;a.set(e,t),a.set(t,e);var m=s;for(;++l<u;){var y=e[f=c[l]],g=t[f];if(o)var b=s?o(g,y,f,t,e,a):o(y,g,f,e,t,a);if(!(b===r?y===g||i(y,g,n,o,a):b)){v=!1;break}m||(m="constructor"==f)}if(v&&!m){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,o,i,a)}(e,t,n,o,jr,i))}function Dr(e,t,n,o){var i=n.length,a=i,s=!o;if(null==e)return!a;for(e=xe(e);i--;){var c=n[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){var u=(c=n[i])[0],d=e[u],l=c[1];if(s&&c[2]){if(d===r&&!(u in e))return!1}else{var f=new Zn;if(o)var p=o(d,l,u,e,t,f);if(!(p===r?jr(l,d,3,o,f):p))return!1}}return!0}function $r(e){return!(!os(e)||(t=e,Be&&Be in t))&&(ts(e)?ze:ge).test(Vi(e));var t}function Nr(t){return"function"==typeof t?t:null==t?sc:"object"==e(t)?Ja(t)?Wr(t[0],t[1]):zr(t):mc(t)}function Br(e){if(!Ei(e))return _n(e);var t=[];for(var n in xe(e))$e.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!os(e))return function(e){var t=[];if(null!=e)for(var n in xe(e))t.push(n);return t}(e);var t=Ei(e),n=[];for(var r in e)("constructor"!=r||!t&&$e.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Vr(e,t){var n=-1,r=Ya(e)?se(e.length):[];return vr(e,(function(e,o,i){r[++n]=t(e,o,i)})),r}function zr(e){var t=hi(e);return 1==t.length&&t[0][2]?Pi(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function Wr(e,t){return Si(e)&&xi(t)?Pi(Ui(e),t):function(n){var o=Is(n,e);return o===r&&o===t?Os(n,e):jr(t,o,3)}}function qr(e,t,n,o,i){e!==t&&wr(t,(function(a,s){if(i||(i=new Zn),os(a))!function(e,t,n,o,i,a,s){var c=Mi(e,n),u=Mi(t,n),d=s.get(u);if(d)return void rr(e,n,d);var l=a?a(c,u,n+"",e,t,s):r,f=l===r;if(f){var p=Ja(u),h=!p&&Za(u),v=!p&&!h&&ps(u);l=u,p||h||v?Ja(c)?l=c:Xa(c)?l=Mo(c):h?(f=!1,l=Eo(u,!0)):v?(f=!1,l=Po(u,!0)):l=[]:cs(u)||Ha(u)?(l=c,Ha(c)?l=ws(c):os(c)&&!ts(c)||(l=_i(u))):f=!1}f&&(s.set(u,l),i(l,u,o,a,s),s.delete(u));rr(e,n,l)}(e,t,s,n,qr,o,i);else{var c=o?o(Mi(e,s),a,s+"",e,t,i):r;c===r&&(c=a),rr(e,s,c)}}),Ds)}function Gr(e,t){var n=e.length;if(n)return Ci(t+=t<0?n:0,n)?e[t]:r}function Hr(e,t,n){t=t.length?Mt(t,(function(e){return Ja(e)?function(t){return Rr(t,1===e.length?e[0]:e)}:e})):[sc];var r=-1;t=Mt(t,Xt(fi()));var o=Vr(e,(function(e,n,o){var i=Mt(t,(function(t){return t(e)}));return{criteria:i,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(o,(function(e,t){return function(e,t,n){var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;for(;++r<a;){var c=Io(o[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Jr(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=Rr(e,a);n(s,a)&&no(i,ko(a,e),s)}return i}function Kr(e,t,n,r){var o=r?Vt:Ut,i=-1,a=t.length,s=e;for(e===t&&(t=Mo(t)),n&&(s=Mt(e,Xt(n)));++i<a;)for(var c=0,u=t[i],d=n?n(u):u;(c=o(s,d,c,r))>-1;)s!==e&&Xe.call(s,c,1),Xe.call(e,c,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;Ci(o)?Xe.call(e,o,1):vo(e,o)}}return e}function Xr(e,t){return e+gt(Tn()*(t-e+1))}function Zr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Di(Ii(e,t,sc),e+"")}function eo(e){return er(Ws(e))}function to(e,t){var n=Ws(e);return Bi(n,dr(t,0,n.length))}function no(e,t,n,o){if(!os(e))return e;for(var i=-1,a=(t=ko(t,e)).length,s=a-1,c=e;null!=c&&++i<a;){var u=Ui(t[i]),d=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=s){var l=c[u];(d=o?o(l,u,c):r)===r&&(d=os(l)?l:Ci(t[i+1])?[]:{})}or(c,u,d),c=c[u]}return e}var ro=Mn?function(e,t){return Mn.set(e,t),e}:sc,oo=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:oc(t),writable:!0})}:sc;function io(e){return Bi(Ws(e))}function ao(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=se(o);++r<o;)i[r]=e[r+t];return i}function so(e,t){var n;return vr(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}function co(e,t,n){var r=0,o=null==e?r:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=e[i];null!==a&&!fs(a)&&(n?a<=t:a<t)?r=i+1:o=i}return o}return uo(e,t,sc,n)}function uo(e,t,n,o){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,u=fs(t),d=t===r;i<a;){var l=gt((i+a)/2),f=n(e[l]),p=f!==r,h=null===f,v=f==f,m=fs(f);if(s)var y=o||v;else y=d?v&&(o||p):c?v&&p&&(o||!h):u?v&&p&&!h&&(o||!m):!h&&!m&&(o?f<=t:f<t);y?i=l+1:a=l}return Cn(a,4294967294)}function lo(e,t){for(var n=-1,r=e.length,o=0,i=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Wa(s,c)){var c=s;i[o++]=0===a?0:a}}return i}function fo(e){return"number"==typeof e?e:fs(e)?h:+e}function po(e){if("string"==typeof e)return e;if(Ja(e))return Mt(e,po)+"";if(fs(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ho(e,t,n){var r=-1,o=Ot,i=e.length,a=!0,s=[],c=s;if(n)a=!1,o=At;else if(i>=200){var u=t?null:Qo(e);if(u)return ln(u);a=!1,o=Qt,c=new Xn}else c=t?[]:s;e:for(;++r<i;){var d=e[r],l=t?t(d):d;if(d=n||0!==d?d:0,a&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue e;t&&c.push(l),s.push(d)}else o(c,l,n)||(c!==s&&c.push(l),s.push(d))}return s}function vo(e,t){return null==(e=Oi(e,t=ko(t,e)))||delete e[Ui(ea(t))]}function mo(e,t,n,r){return no(e,t,n(Rr(e,t)),r)}function yo(e,t,n,r){for(var o=e.length,i=r?o:-1;(r?i--:++i<o)&&t(e[i],i,e););return n?ao(e,r?0:i,r?i+1:o):ao(e,r?i+1:0,r?o:i)}function go(e,t){var n=e;return n instanceof Hn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function bo(e,t,n){var r=e.length;if(r<2)return r?ho(e[0]):[];for(var o=-1,i=se(r);++o<r;)for(var a=e[o],s=-1;++s<r;)s!=o&&(i[o]=hr(i[o]||a,e[s],t,n));return ho(_r(i,1),t,n)}function _o(e,t,n){for(var o=-1,i=e.length,a=t.length,s={};++o<i;){var c=o<a?t[o]:r;n(s,e[o],c)}return s}function wo(e){return Xa(e)?e:[]}function Co(e){return"function"==typeof e?e:sc}function ko(e,t){return Ja(e)?e:Si(e,t)?[e]:Fi(Cs(e))}var So=Qr;function To(e,t,n){var o=e.length;return n=n===r?o:n,!t&&n>=o?e:ao(e,t,n)}var Ro=ft||function(e){return pt.clearTimeout(e)};function Eo(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function xo(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Po(e,t){var n=t?xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Io(e,t){if(e!==t){var n=e!==r,o=null===e,i=e==e,a=fs(e),s=t!==r,c=null===t,u=t==t,d=fs(t);if(!c&&!d&&!a&&e>t||a&&s&&u&&!c&&!d||o&&s&&u||!n&&u||!i)return 1;if(!o&&!a&&!d&&e<t||d&&n&&i&&!o&&!a||c&&n&&i||!s&&i||!u)return-1}return 0}function Oo(e,t,n,r){for(var o=-1,i=e.length,a=n.length,s=-1,c=t.length,u=wn(i-a,0),d=se(c+u),l=!r;++s<c;)d[s]=t[s];for(;++o<a;)(l||o<i)&&(d[n[o]]=e[o]);for(;u--;)d[s++]=e[o++];return d}function Ao(e,t,n,r){for(var o=-1,i=e.length,a=-1,s=n.length,c=-1,u=t.length,d=wn(i-s,0),l=se(d+u),f=!r;++o<d;)l[o]=e[o];for(var p=o;++c<u;)l[p+c]=t[c];for(;++a<s;)(f||o<i)&&(l[p+n[a]]=e[o++]);return l}function Mo(e,t){var n=-1,r=e.length;for(t||(t=se(r));++n<r;)t[n]=e[n];return t}function Lo(e,t,n,o){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=o?o(n[c],e[c],c,n,e):r;u===r&&(u=e[c]),i?cr(n,c,u):or(n,c,u)}return n}function jo(e,t){return function(n,r){var o=Ja(n)?Rt:ar,i=t?t():{};return o(n,e,fi(r,2),i)}}function Do(e){return Qr((function(t,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(i--,a):r,s&&ki(n[0],n[1],s)&&(a=i<3?r:a,i=1),t=xe(t);++o<i;){var c=n[o];c&&e(t,c,o,a)}return t}))}function $o(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=xe(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}function No(e){return function(t,n,r){for(var o=-1,i=xe(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}function Bo(e){return function(t){var n=sn(t=Cs(t))?hn(t):r,o=n?n[0]:t.charAt(0),i=n?To(n,1).join(""):t.slice(1);return o[e]()+i}}function Fo(e){return function(t){return jt(tc(Hs(t).replace(Ze,"")),e,"")}}function Uo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wn(e.prototype),r=e.apply(n,t);return os(r)?r:n}}function Vo(e){return function(t,n,o){var i=xe(t);if(!Ya(t)){var a=fi(n,3);t=js(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,o);return s>-1?i[a?t[s]:s]:r}}function zo(e){return ai((function(t){var n=t.length,i=n,a=Gn.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new Oe(o);if(a&&!c&&"wrapper"==di(s))var c=new Gn([],!0)}for(i=c?i:n;++i<n;){var u=di(s=t[i]),d="wrapper"==u?ui(s):r;c=d&&Ti(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[di(d[0])].apply(c,d[3]):1==s.length&&Ti(s)?c[u]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Ja(r))return c.plant(r).value();for(var o=0,i=n?t[o].apply(this,e):r;++o<n;)i=t[o].call(this,i);return i}}))}function Wo(e,t,n,o,i,a,s,c,u,l){var f=t&d,p=1&t,h=2&t,v=24&t,m=512&t,y=h?r:Uo(e);return function r(){for(var d=arguments.length,g=se(d),b=d;b--;)g[b]=arguments[b];if(v)var _=li(r),w=nn(g,_);if(o&&(g=Oo(g,o,i,v)),a&&(g=Ao(g,a,s,v)),d-=w,v&&d<l){var C=dn(g,_);return Xo(e,t,Wo,r.placeholder,n,g,C,c,u,l-d)}var k=p?n:this,S=h?k[e]:e;return d=g.length,c?g=Ai(g,c):m&&d>1&&g.reverse(),f&&u<d&&(g.length=u),this&&this!==pt&&this instanceof r&&(S=y||Uo(S)),S.apply(k,g)}}function qo(e,t){return function(n,r){return function(e,t,n,r){return kr(e,(function(e,o,i){t(r,n(e),o,i)})),r}(n,e,t(r),{})}}function Go(e,t){return function(n,o){var i;if(n===r&&o===r)return t;if(n!==r&&(i=n),o!==r){if(i===r)return o;"string"==typeof n||"string"==typeof o?(n=po(n),o=po(o)):(n=fo(n),o=fo(o)),i=e(n,o)}return i}}function Ho(e){return ai((function(t){return t=Mt(t,Xt(fi())),Qr((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Jo(e,t){var n=(t=t===r?" ":po(t)).length;if(n<2)return n?Zr(t,e):t;var o=Zr(t,yt(e/pn(t)));return sn(t)?To(hn(o),0,e).join(""):o.slice(0,e)}function Ko(e){return function(t,n,o){return o&&"number"!=typeof o&&ki(t,n,o)&&(n=o=r),t=ys(t),n===r?(n=t,t=0):n=ys(n),function(e,t,n,r){for(var o=-1,i=wn(yt((t-e)/(n||1)),0),a=se(i);i--;)a[r?i:++o]=e,e+=n;return a}(t,n,o=o===r?t<n?1:-1:ys(o),e)}}function Yo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=_s(t),n=_s(n)),e(t,n)}}function Xo(e,t,n,o,i,a,s,d,l,f){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var h=[e,t,i,p?a:r,p?s:r,p?r:a,p?r:s,d,l,f],v=n.apply(r,h);return Ti(e)&&Li(v,h),v.placeholder=o,$i(v,e,t)}function Zo(e){var t=Ee[e];return function(e,n){if(e=_s(e),(n=null==n?0:Cn(gs(n),292))&&gn(e)){var r=(Cs(e)+"e").split("e");return+((r=(Cs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Qo=In&&1/ln(new In([,-0]))[1]==f?function(e){return new In(e)}:fc;function ei(e){return function(t){var n=gi(t);return n==T?cn(t):n==I?fn(t):function(e,t){return Mt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function ti(e,t,n,i,f,p,h,v){var m=2&t;if(!m&&"function"!=typeof e)throw new Oe(o);var y=i?i.length:0;if(y||(t&=-97,i=f=r),h=h===r?h:wn(gs(h),0),v=v===r?v:gs(v),y-=f?f.length:0,t&u){var g=i,b=f;i=f=r}var _=m?r:ui(e),w=[e,t,n,i,f,g,b,p,h,v];if(_&&function(e,t){var n=e[1],r=t[1],o=n|r,i=o<131,s=r==d&&8==n||r==d&&n==l&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!i&&!s)return e;1&r&&(e[2]=t[2],o|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Oo(u,c,t[4]):c,e[4]=u?dn(e[3],a):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ao(u,c,t[6]):c,e[6]=u?dn(e[5],a):t[6]);(c=t[7])&&(e[7]=c);r&d&&(e[8]=null==e[8]?t[8]:Cn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(w,_),e=w[0],t=w[1],n=w[2],i=w[3],f=w[4],!(v=w[9]=w[9]===r?m?0:e.length:wn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)C=8==t||t==s?function(e,t,n){var o=Uo(e);return function i(){for(var a=arguments.length,s=se(a),c=a,u=li(i);c--;)s[c]=arguments[c];var d=a<3&&s[0]!==u&&s[a-1]!==u?[]:dn(s,u);return(a-=d.length)<n?Xo(e,t,Wo,i.placeholder,r,s,d,r,r,n-a):Tt(this&&this!==pt&&this instanceof i?o:e,this,s)}}(e,t,v):t!=c&&33!=t||f.length?Wo.apply(r,w):function(e,t,n,r){var o=1&t,i=Uo(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=r.length,d=se(u+s),l=this&&this!==pt&&this instanceof t?i:e;++c<u;)d[c]=r[c];for(;s--;)d[c++]=arguments[++a];return Tt(l,o?n:this,d)}}(e,t,n,i);else var C=function(e,t,n){var r=1&t,o=Uo(e);return function t(){return(this&&this!==pt&&this instanceof t?o:e).apply(r?n:this,arguments)}}(e,t,n);return $i((_?ro:Li)(C,w),e,t)}function ni(e,t,n,o){return e===r||Wa(e,Le[n])&&!$e.call(o,n)?t:e}function ri(e,t,n,o,i,a){return os(e)&&os(t)&&(a.set(t,e),qr(e,t,r,ri,a),a.delete(t)),e}function oi(e){return cs(e)?r:e}function ii(e,t,n,o,i,a){var s=1&n,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var d=a.get(e),l=a.get(t);if(d&&l)return d==t&&l==e;var f=-1,p=!0,h=2&n?new Xn:r;for(a.set(e,t),a.set(t,e);++f<c;){var v=e[f],m=t[f];if(o)var y=s?o(m,v,f,t,e,a):o(v,m,f,e,t,a);if(y!==r){if(y)continue;p=!1;break}if(h){if(!$t(t,(function(e,t){if(!Qt(h,t)&&(v===e||i(v,e,n,o,a)))return h.push(t)}))){p=!1;break}}else if(v!==m&&!i(v,m,n,o,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function ai(e){return Di(Ii(e,r,Ki),e+"")}function si(e){return Er(e,js,mi)}function ci(e){return Er(e,Ds,yi)}var ui=Mn?function(e){return Mn.get(e)}:fc;function di(e){for(var t=e.name+"",n=Ln[t],r=$e.call(Ln,t)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==e)return o.name}return t}function li(e){return($e.call(zn,"placeholder")?zn:e).placeholder}function fi(){var e=zn.iteratee||cc;return e=e===cc?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function pi(t,n){var r,o,i=t.__data__;return("string"==(o=e(r=n))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof n?"string":"hash"]:i.map}function hi(e){for(var t=js(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,xi(o)]}return t}function vi(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return $r(n)?n:r}var mi=Nt?function(e){return null==e?[]:(e=xe(e),It(Nt(e),(function(t){return Ye.call(e,t)})))}:bc,yi=Nt?function(e){for(var t=[];e;)Lt(t,mi(e)),e=Je(e);return t}:bc,gi=xr;function bi(e,t,n){for(var r=-1,o=(t=ko(t,e)).length,i=!1;++r<o;){var a=Ui(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&rs(o)&&Ci(a,o)&&(Ja(e)||Ha(e))}function _i(e){return"function"!=typeof e.constructor||Ei(e)?{}:Wn(Je(e))}function wi(e){return Ja(e)||Ha(e)||!!(et&&e&&e[et])}function Ci(t,n){var r=e(t);return!!(n=null==n?p:n)&&("number"==r||"symbol"!=r&&_e.test(t))&&t>-1&&t%1==0&&t<n}function ki(t,n,r){if(!os(r))return!1;var o=e(n);return!!("number"==o?Ya(r)&&Ci(n,r.length):"string"==o&&n in r)&&Wa(r[n],t)}function Si(t,n){if(Ja(t))return!1;var r=e(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!fs(t))||(ne.test(t)||!te.test(t)||null!=n&&t in xe(n))}function Ti(e){var t=di(e),n=zn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ui(n);return!!r&&e===r[0]}(En&&gi(new En(new ArrayBuffer(1)))!=j||xn&&gi(new xn)!=T||Pn&&gi(Pn.resolve())!=x||In&&gi(new In)!=I||On&&gi(new On)!=M)&&(gi=function(e){var t=xr(e),n=t==E?e.constructor:r,o=n?Vi(n):"";if(o)switch(o){case jn:return j;case Dn:return T;case $n:return x;case Nn:return I;case Bn:return M}return t});var Ri=je?ts:_c;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function xi(e){return e==e&&!os(e)}function Pi(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in xe(n)))}}function Ii(e,t,n){return t=wn(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=wn(r.length-t,0),a=se(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=se(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),Tt(e,this,s)}}function Oi(e,t){return t.length<2?e:Rr(e,ao(t,0,-1))}function Ai(e,t){for(var n=e.length,o=Cn(t.length,n),i=Mo(e);o--;){var a=t[o];e[o]=Ci(a,n)?i[a]:r}return e}function Mi(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Li=Ni(ro),ji=vt||function(e,t){return pt.setTimeout(e,t)},Di=Ni(oo);function $i(e,t,n){var r=t+"";return Di(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Et(y,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(de):[]}(r),n)))}function Ni(e){var t=0,n=0;return function(){var o=kn(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Bi(e,t){var n=-1,o=e.length,i=o-1;for(t=t===r?o:t;++n<t;){var a=Xr(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Fi=function(e){var t=Na(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,o){t.push(r?o.replace(pe,"$1"):n||e)})),t}));function Ui(e){if("string"==typeof e||fs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Vi(e){if(null!=e){try{return De.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function zi(e){if(e instanceof Hn)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=Mo(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Wi=Qr((function(e,t){return Xa(e)?hr(e,_r(t,1,Xa,!0)):[]})),qi=Qr((function(e,t){var n=ea(t);return Xa(n)&&(n=r),Xa(e)?hr(e,_r(t,1,Xa,!0),fi(n,2)):[]})),Gi=Qr((function(e,t){var n=ea(t);return Xa(n)&&(n=r),Xa(e)?hr(e,_r(t,1,Xa,!0),r,n):[]}));function Hi(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=wn(r+o,0)),Ft(e,fi(t,3),o)}function Ji(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return n!==r&&(i=gs(n),i=n<0?wn(o+i,0):Cn(i,o-1)),Ft(e,fi(t,3),i,!0)}function Ki(e){return(null==e?0:e.length)?_r(e,1):[]}function Yi(e){return e&&e.length?e[0]:r}var Xi=Qr((function(e){var t=Mt(e,wo);return t.length&&t[0]===e[0]?Ar(t):[]})),Zi=Qr((function(e){var t=ea(e),n=Mt(e,wo);return t===ea(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ar(n,fi(t,2)):[]})),Qi=Qr((function(e){var t=ea(e),n=Mt(e,wo);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,r,t):[]}));function ea(e){var t=null==e?0:e.length;return t?e[t-1]:r}var ta=Qr(na);function na(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var ra=ai((function(e,t){var n=null==e?0:e.length,r=ur(e,t);return Yr(e,Mt(t,(function(e){return Ci(e,n)?+e:e})).sort(Io)),r}));function oa(e){return null==e?e:Rn.call(e)}var ia=Qr((function(e){return ho(_r(e,1,Xa,!0))})),aa=Qr((function(e){var t=ea(e);return Xa(t)&&(t=r),ho(_r(e,1,Xa,!0),fi(t,2))})),sa=Qr((function(e){var t=ea(e);return t="function"==typeof t?t:r,ho(_r(e,1,Xa,!0),r,t)}));function ca(e){if(!e||!e.length)return[];var t=0;return e=It(e,(function(e){if(Xa(e))return t=wn(e.length,t),!0})),Kt(t,(function(t){return Mt(e,qt(t))}))}function ua(e,t){if(!e||!e.length)return[];var n=ca(e);return null==t?n:Mt(n,(function(e){return Tt(t,r,e)}))}var da=Qr((function(e,t){return Xa(e)?hr(e,t):[]})),la=Qr((function(e){return bo(It(e,Xa))})),fa=Qr((function(e){var t=ea(e);return Xa(t)&&(t=r),bo(It(e,Xa),fi(t,2))})),pa=Qr((function(e){var t=ea(e);return t="function"==typeof t?t:r,bo(It(e,Xa),r,t)})),ha=Qr(ca);var va=Qr((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,ua(e,n)}));function ma(e){var t=zn(e);return t.__chain__=!0,t}function ya(e,t){return t(e)}var ga=ai((function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,i=function(t){return ur(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Hn&&Ci(n)?((o=o.slice(n,+n+(t?1:0))).__actions__.push({func:ya,args:[i],thisArg:r}),new Gn(o,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)}));var ba=jo((function(e,t,n){$e.call(e,n)?++e[n]:cr(e,n,1)}));var _a=Vo(Hi),wa=Vo(Ji);function Ca(e,t){return(Ja(e)?Et:vr)(e,fi(t,3))}function ka(e,t){return(Ja(e)?xt:mr)(e,fi(t,3))}var Sa=jo((function(e,t,n){$e.call(e,n)?e[n].push(t):cr(e,n,[t])}));var Ta=Qr((function(e,t,n){var r=-1,o="function"==typeof t,i=Ya(e)?se(e.length):[];return vr(e,(function(e){i[++r]=o?Tt(t,e,n):Mr(e,t,n)})),i})),Ra=jo((function(e,t,n){cr(e,n,t)}));function Ea(e,t){return(Ja(e)?Mt:Vr)(e,fi(t,3))}var xa=jo((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Pa=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ki(e,t[0],t[1])?t=[]:n>2&&ki(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,_r(t,1),[])})),Ia=ht||function(){return pt.Date.now()};function Oa(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,ti(e,d,r,r,r,r,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Oe(o);return e=gs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Ma=Qr((function(e,t,n){var r=1;if(n.length){var o=dn(n,li(Ma));r|=c}return ti(e,r,t,n,o)})),La=Qr((function(e,t,n){var r=3;if(n.length){var o=dn(n,li(La));r|=c}return ti(t,r,e,n,o)}));function ja(e,t,n){var i,a,s,c,u,d,l=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new Oe(o);function v(t){var n=i,o=a;return i=a=r,l=t,c=e.apply(o,n)}function m(e){return l=e,u=ji(g,t),f?v(e):c}function y(e){var n=e-d;return d===r||n>=t||n<0||p&&e-l>=s}function g(){var e=Ia();if(y(e))return b(e);u=ji(g,function(e){var n=t-(e-d);return p?Cn(n,s-(e-l)):n}(e))}function b(e){return u=r,h&&i?v(e):(i=a=r,c)}function _(){var e=Ia(),n=y(e);if(i=arguments,a=this,d=e,n){if(u===r)return m(d);if(p)return Ro(u),u=ji(g,t),v(d)}return u===r&&(u=ji(g,t)),c}return t=_s(t)||0,os(n)&&(f=!!n.leading,s=(p="maxWait"in n)?wn(_s(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),_.cancel=function(){u!==r&&Ro(u),l=0,i=d=a=u=r},_.flush=function(){return u===r?c:b(Ia())},_}var Da=Qr((function(e,t){return pr(e,1,t)})),$a=Qr((function(e,t,n){return pr(e,_s(t)||0,n)}));function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(o);var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Na.Cache||Yn),n}function Ba(e){if("function"!=typeof e)throw new Oe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=Yn;var Fa=So((function(e,t){var n=(t=1==t.length&&Ja(t[0])?Mt(t[0],Xt(fi())):Mt(_r(t,1),Xt(fi()))).length;return Qr((function(r){for(var o=-1,i=Cn(r.length,n);++o<i;)r[o]=t[o].call(this,r[o]);return Tt(e,this,r)}))})),Ua=Qr((function(e,t){var n=dn(t,li(Ua));return ti(e,c,r,t,n)})),Va=Qr((function(e,t){var n=dn(t,li(Va));return ti(e,u,r,t,n)})),za=ai((function(e,t){return ti(e,l,r,r,r,t)}));function Wa(e,t){return e===t||e!=e&&t!=t}var qa=Yo(Pr),Ga=Yo((function(e,t){return e>=t})),Ha=Lr(function(){return arguments}())?Lr:function(e){return is(e)&&$e.call(e,"callee")&&!Ye.call(e,"callee")},Ja=se.isArray,Ka=bt?Xt(bt):function(e){return is(e)&&xr(e)==L};function Ya(e){return null!=e&&rs(e.length)&&!ts(e)}function Xa(e){return is(e)&&Ya(e)}var Za=Gt||_c,Qa=_t?Xt(_t):function(e){return is(e)&&xr(e)==w};function es(e){if(!is(e))return!1;var t=xr(e);return t==C||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!cs(e)}function ts(e){if(!os(e))return!1;var t=xr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ns(e){return"number"==typeof e&&e==gs(e)}function rs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function os(t){var n=e(t);return null!=t&&("object"==n||"function"==n)}function is(t){return null!=t&&"object"==e(t)}var as=wt?Xt(wt):function(e){return is(e)&&gi(e)==T};function ss(e){return"number"==typeof e||is(e)&&xr(e)==R}function cs(e){if(!is(e)||xr(e)!=E)return!1;var t=Je(e);if(null===t)return!0;var n=$e.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&De.call(n)==Ue}var us=Ct?Xt(Ct):function(e){return is(e)&&xr(e)==P};var ds=kt?Xt(kt):function(e){return is(e)&&gi(e)==I};function ls(e){return"string"==typeof e||!Ja(e)&&is(e)&&xr(e)==O}function fs(t){return"symbol"==e(t)||is(t)&&xr(t)==A}var ps=St?Xt(St):function(e){return is(e)&&rs(e.length)&&!!at[xr(e)]};var hs=Yo(Ur),vs=Yo((function(e,t){return e<=t}));function ms(e){if(!e)return[];if(Ya(e))return ls(e)?hn(e):Mo(e);if(nt&&e[nt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[nt]());var t=gi(e);return(t==T?cn:t==I?ln:Ws)(e)}function ys(e){return e?(e=_s(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function gs(e){var t=ys(e),n=t%1;return t==t?n?t-n:t:0}function bs(e){return e?dr(gs(e),0,m):0}function _s(e){if("number"==typeof e)return e;if(fs(e))return h;if(os(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=os(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var n=ye.test(e);return n||be.test(e)?dt(e.slice(2),n?2:8):me.test(e)?h:+e}function ws(e){return Lo(e,Ds(e))}function Cs(e){return null==e?"":po(e)}var ks=Do((function(e,t){if(Ei(t)||Ya(t))Lo(t,js(t),e);else for(var n in t)$e.call(t,n)&&or(e,n,t[n])})),Ss=Do((function(e,t){Lo(t,Ds(t),e)})),Ts=Do((function(e,t,n,r){Lo(t,Ds(t),e,r)})),Rs=Do((function(e,t,n,r){Lo(t,js(t),e,r)})),Es=ai(ur);var xs=Qr((function(e,t){e=xe(e);var n=-1,o=t.length,i=o>2?t[2]:r;for(i&&ki(t[0],t[1],i)&&(o=1);++n<o;)for(var a=t[n],s=Ds(a),c=-1,u=s.length;++c<u;){var d=s[c],l=e[d];(l===r||Wa(l,Le[d])&&!$e.call(e,d))&&(e[d]=a[d])}return e})),Ps=Qr((function(e){return e.push(r,ri),Tt(Ns,r,e)}));function Is(e,t,n){var o=null==e?r:Rr(e,t);return o===r?n:o}function Os(e,t){return null!=e&&bi(e,t,Or)}var As=qo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),oc(sc)),Ms=qo((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),$e.call(e,t)?e[t].push(n):e[t]=[n]}),fi),Ls=Qr(Mr);function js(e){return Ya(e)?Qn(e):Br(e)}function Ds(e){return Ya(e)?Qn(e,!0):Fr(e)}var $s=Do((function(e,t,n){qr(e,t,n)})),Ns=Do((function(e,t,n,r){qr(e,t,n,r)})),Bs=ai((function(e,t){var n={};if(null==e)return n;var r=!1;t=Mt(t,(function(t){return t=ko(t,e),r||(r=t.length>1),t})),Lo(e,ci(e),n),r&&(n=lr(n,7,oi));for(var o=t.length;o--;)vo(n,t[o]);return n}));var Fs=ai((function(e,t){return null==e?{}:function(e,t){return Jr(e,t,(function(t,n){return Os(e,n)}))}(e,t)}));function Us(e,t){if(null==e)return{};var n=Mt(ci(e),(function(e){return[e]}));return t=fi(t),Jr(e,n,(function(e,n){return t(e,n[0])}))}var Vs=ei(js),zs=ei(Ds);function Ws(e){return null==e?[]:Zt(e,js(e))}var qs=Fo((function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)}));function Gs(e){return ec(Cs(e).toLowerCase())}function Hs(e){return(e=Cs(e))&&e.replace(we,rn).replace(Qe,"")}var Js=Fo((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ks=Fo((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Bo("toLowerCase");var Xs=Fo((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Zs=Fo((function(e,t,n){return e+(n?" ":"")+ec(t)}));var Qs=Fo((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),ec=Bo("toUpperCase");function tc(e,t,n){return e=Cs(e),(t=n?r:t)===r?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var nc=Qr((function(e,t){try{return Tt(e,r,t)}catch(e){return es(e)?e:new Te(e)}})),rc=ai((function(e,t){return Et(t,(function(t){t=Ui(t),cr(e,t,Ma(e[t],e))})),e}));function oc(e){return function(){return e}}var ic=zo(),ac=zo(!0);function sc(e){return e}function cc(e){return Nr("function"==typeof e?e:lr(e,1))}var uc=Qr((function(e,t){return function(n){return Mr(n,e,t)}})),dc=Qr((function(e,t){return function(n){return Mr(e,n,t)}}));function lc(e,t,n){var r=js(t),o=Tr(t,r);null!=n||os(t)&&(o.length||!r.length)||(n=t,t=e,e=this,o=Tr(t,js(t)));var i=!(os(n)&&"chain"in n&&!n.chain),a=ts(e);return Et(o,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=Mo(this.__actions__);return o.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function fc(){}var pc=Ho(Mt),hc=Ho(Pt),vc=Ho($t);function mc(e){return Si(e)?qt(Ui(e)):function(e){return function(t){return Rr(t,e)}}(e)}var yc=Ko(),gc=Ko(!0);function bc(){return[]}function _c(){return!1}var wc=Go((function(e,t){return e+t}),0),Cc=Zo("ceil"),kc=Go((function(e,t){return e/t}),1),Sc=Zo("floor");var Tc,Rc=Go((function(e,t){return e*t}),1),Ec=Zo("round"),xc=Go((function(e,t){return e-t}),0);return zn.after=function(e,t){if("function"!=typeof t)throw new Oe(o);return e=gs(e),function(){if(--e<1)return t.apply(this,arguments)}},zn.ary=Oa,zn.assign=ks,zn.assignIn=Ss,zn.assignInWith=Ts,zn.assignWith=Rs,zn.at=Es,zn.before=Aa,zn.bind=Ma,zn.bindAll=rc,zn.bindKey=La,zn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ja(e)?e:[e]},zn.chain=ma,zn.chunk=function(e,t,n){t=(n?ki(e,t,n):t===r)?1:wn(gs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,s=se(yt(o/t));i<o;)s[a++]=ao(e,i,i+=t);return s},zn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},zn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=se(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Lt(Ja(n)?Mo(n):[n],_r(t,1))},zn.cond=function(e){var t=null==e?0:e.length,n=fi();return e=t?Mt(e,(function(e){if("function"!=typeof e[1])throw new Oe(o);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var o=e[r];if(Tt(o[0],this,n))return Tt(o[1],this,n)}}))},zn.conforms=function(e){return function(e){var t=js(e);return function(n){return fr(n,e,t)}}(lr(e,1))},zn.constant=oc,zn.countBy=ba,zn.create=function(e,t){var n=Wn(e);return null==t?n:sr(n,t)},zn.curry=function e(t,n,o){var i=ti(t,8,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},zn.curryRight=function e(t,n,o){var i=ti(t,s,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},zn.debounce=ja,zn.defaults=xs,zn.defaultsDeep=Ps,zn.defer=Da,zn.delay=$a,zn.difference=Wi,zn.differenceBy=qi,zn.differenceWith=Gi,zn.drop=function(e,t,n){var o=null==e?0:e.length;return o?ao(e,(t=n||t===r?1:gs(t))<0?0:t,o):[]},zn.dropRight=function(e,t,n){var o=null==e?0:e.length;return o?ao(e,0,(t=o-(t=n||t===r?1:gs(t)))<0?0:t):[]},zn.dropRightWhile=function(e,t){return e&&e.length?yo(e,fi(t,3),!0,!0):[]},zn.dropWhile=function(e,t){return e&&e.length?yo(e,fi(t,3),!0):[]},zn.fill=function(e,t,n,o){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ki(e,t,n)&&(n=0,o=i),function(e,t,n,o){var i=e.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:gs(o))<0&&(o+=i),o=n>o?0:bs(o);n<o;)e[n++]=t;return e}(e,t,n,o)):[]},zn.filter=function(e,t){return(Ja(e)?It:br)(e,fi(t,3))},zn.flatMap=function(e,t){return _r(Ea(e,t),1)},zn.flatMapDeep=function(e,t){return _r(Ea(e,t),f)},zn.flatMapDepth=function(e,t,n){return n=n===r?1:gs(n),_r(Ea(e,t),n)},zn.flatten=Ki,zn.flattenDeep=function(e){return(null==e?0:e.length)?_r(e,f):[]},zn.flattenDepth=function(e,t){return(null==e?0:e.length)?_r(e,t=t===r?1:gs(t)):[]},zn.flip=function(e){return ti(e,512)},zn.flow=ic,zn.flowRight=ac,zn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},zn.functions=function(e){return null==e?[]:Tr(e,js(e))},zn.functionsIn=function(e){return null==e?[]:Tr(e,Ds(e))},zn.groupBy=Sa,zn.initial=function(e){return(null==e?0:e.length)?ao(e,0,-1):[]},zn.intersection=Xi,zn.intersectionBy=Zi,zn.intersectionWith=Qi,zn.invert=As,zn.invertBy=Ms,zn.invokeMap=Ta,zn.iteratee=cc,zn.keyBy=Ra,zn.keys=js,zn.keysIn=Ds,zn.map=Ea,zn.mapKeys=function(e,t){var n={};return t=fi(t,3),kr(e,(function(e,r,o){cr(n,t(e,r,o),e)})),n},zn.mapValues=function(e,t){var n={};return t=fi(t,3),kr(e,(function(e,r,o){cr(n,r,t(e,r,o))})),n},zn.matches=function(e){return zr(lr(e,1))},zn.matchesProperty=function(e,t){return Wr(e,lr(t,1))},zn.memoize=Na,zn.merge=$s,zn.mergeWith=Ns,zn.method=uc,zn.methodOf=dc,zn.mixin=lc,zn.negate=Ba,zn.nthArg=function(e){return e=gs(e),Qr((function(t){return Gr(t,e)}))},zn.omit=Bs,zn.omitBy=function(e,t){return Us(e,Ba(fi(t)))},zn.once=function(e){return Aa(2,e)},zn.orderBy=function(e,t,n,o){return null==e?[]:(Ja(t)||(t=null==t?[]:[t]),Ja(n=o?r:n)||(n=null==n?[]:[n]),Hr(e,t,n))},zn.over=pc,zn.overArgs=Fa,zn.overEvery=hc,zn.overSome=vc,zn.partial=Ua,zn.partialRight=Va,zn.partition=xa,zn.pick=Fs,zn.pickBy=Us,zn.property=mc,zn.propertyOf=function(e){return function(t){return null==e?r:Rr(e,t)}},zn.pull=ta,zn.pullAll=na,zn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,fi(n,2)):e},zn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,r,n):e},zn.pullAt=ra,zn.range=yc,zn.rangeRight=gc,zn.rearg=za,zn.reject=function(e,t){return(Ja(e)?It:br)(e,Ba(fi(t,3)))},zn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=fi(t,3);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return Yr(e,o),n},zn.rest=function(e,t){if("function"!=typeof e)throw new Oe(o);return Qr(e,t=t===r?t:gs(t))},zn.reverse=oa,zn.sampleSize=function(e,t,n){return t=(n?ki(e,t,n):t===r)?1:gs(t),(Ja(e)?tr:to)(e,t)},zn.set=function(e,t,n){return null==e?e:no(e,t,n)},zn.setWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:no(e,t,n,o)},zn.shuffle=function(e){return(Ja(e)?nr:io)(e)},zn.slice=function(e,t,n){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&ki(e,t,n)?(t=0,n=o):(t=null==t?0:gs(t),n=n===r?o:gs(n)),ao(e,t,n)):[]},zn.sortBy=Pa,zn.sortedUniq=function(e){return e&&e.length?lo(e):[]},zn.sortedUniqBy=function(e,t){return e&&e.length?lo(e,fi(t,2)):[]},zn.split=function(e,t,n){return n&&"number"!=typeof n&&ki(e,t,n)&&(t=n=r),(n=n===r?m:n>>>0)?(e=Cs(e))&&("string"==typeof t||null!=t&&!us(t))&&!(t=po(t))&&sn(e)?To(hn(e),0,n):e.split(t,n):[]},zn.spread=function(e,t){if("function"!=typeof e)throw new Oe(o);return t=null==t?0:wn(gs(t),0),Qr((function(n){var r=n[t],o=To(n,0,t);return r&&Lt(o,r),Tt(e,this,o)}))},zn.tail=function(e){var t=null==e?0:e.length;return t?ao(e,1,t):[]},zn.take=function(e,t,n){return e&&e.length?ao(e,0,(t=n||t===r?1:gs(t))<0?0:t):[]},zn.takeRight=function(e,t,n){var o=null==e?0:e.length;return o?ao(e,(t=o-(t=n||t===r?1:gs(t)))<0?0:t,o):[]},zn.takeRightWhile=function(e,t){return e&&e.length?yo(e,fi(t,3),!1,!0):[]},zn.takeWhile=function(e,t){return e&&e.length?yo(e,fi(t,3)):[]},zn.tap=function(e,t){return t(e),e},zn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(o);return os(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ja(e,t,{leading:r,maxWait:t,trailing:i})},zn.thru=ya,zn.toArray=ms,zn.toPairs=Vs,zn.toPairsIn=zs,zn.toPath=function(e){return Ja(e)?Mt(e,Ui):fs(e)?[e]:Mo(Fi(Cs(e)))},zn.toPlainObject=ws,zn.transform=function(e,t,n){var r=Ja(e),o=r||Za(e)||ps(e);if(t=fi(t,4),null==n){var i=e&&e.constructor;n=o?r?new i:[]:os(e)&&ts(i)?Wn(Je(e)):{}}return(o?Et:kr)(e,(function(e,r,o){return t(n,e,r,o)})),n},zn.unary=function(e){return Oa(e,1)},zn.union=ia,zn.unionBy=aa,zn.unionWith=sa,zn.uniq=function(e){return e&&e.length?ho(e):[]},zn.uniqBy=function(e,t){return e&&e.length?ho(e,fi(t,2)):[]},zn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ho(e,r,t):[]},zn.unset=function(e,t){return null==e||vo(e,t)},zn.unzip=ca,zn.unzipWith=ua,zn.update=function(e,t,n){return null==e?e:mo(e,t,Co(n))},zn.updateWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:mo(e,t,Co(n),o)},zn.values=Ws,zn.valuesIn=function(e){return null==e?[]:Zt(e,Ds(e))},zn.without=da,zn.words=tc,zn.wrap=function(e,t){return Ua(Co(t),e)},zn.xor=la,zn.xorBy=fa,zn.xorWith=pa,zn.zip=ha,zn.zipObject=function(e,t){return _o(e||[],t||[],or)},zn.zipObjectDeep=function(e,t){return _o(e||[],t||[],no)},zn.zipWith=va,zn.entries=Vs,zn.entriesIn=zs,zn.extend=Ss,zn.extendWith=Ts,lc(zn,zn),zn.add=wc,zn.attempt=nc,zn.camelCase=qs,zn.capitalize=Gs,zn.ceil=Cc,zn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=_s(n))==n?n:0),t!==r&&(t=(t=_s(t))==t?t:0),dr(_s(e),t,n)},zn.clone=function(e){return lr(e,4)},zn.cloneDeep=function(e){return lr(e,5)},zn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:r)},zn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:r)},zn.conformsTo=function(e,t){return null==t||fr(e,t,js(t))},zn.deburr=Hs,zn.defaultTo=function(e,t){return null==e||e!=e?t:e},zn.divide=kc,zn.endsWith=function(e,t,n){e=Cs(e),t=po(t);var o=e.length,i=n=n===r?o:dr(gs(n),0,o);return(n-=t.length)>=0&&e.slice(n,i)==t},zn.eq=Wa,zn.escape=function(e){return(e=Cs(e))&&X.test(e)?e.replace(K,on):e},zn.escapeRegExp=function(e){return(e=Cs(e))&&ie.test(e)?e.replace(oe,"\\$&"):e},zn.every=function(e,t,n){var o=Ja(e)?Pt:yr;return n&&ki(e,t,n)&&(t=r),o(e,fi(t,3))},zn.find=_a,zn.findIndex=Hi,zn.findKey=function(e,t){return Bt(e,fi(t,3),kr)},zn.findLast=wa,zn.findLastIndex=Ji,zn.findLastKey=function(e,t){return Bt(e,fi(t,3),Sr)},zn.floor=Sc,zn.forEach=Ca,zn.forEachRight=ka,zn.forIn=function(e,t){return null==e?e:wr(e,fi(t,3),Ds)},zn.forInRight=function(e,t){return null==e?e:Cr(e,fi(t,3),Ds)},zn.forOwn=function(e,t){return e&&kr(e,fi(t,3))},zn.forOwnRight=function(e,t){return e&&Sr(e,fi(t,3))},zn.get=Is,zn.gt=qa,zn.gte=Ga,zn.has=function(e,t){return null!=e&&bi(e,t,Ir)},zn.hasIn=Os,zn.head=Yi,zn.identity=sc,zn.includes=function(e,t,n,r){e=Ya(e)?e:Ws(e),n=n&&!r?gs(n):0;var o=e.length;return n<0&&(n=wn(o+n,0)),ls(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Ut(e,t,n)>-1},zn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=null==n?0:gs(n);return o<0&&(o=wn(r+o,0)),Ut(e,t,o)},zn.inRange=function(e,t,n){return t=ys(t),n===r?(n=t,t=0):n=ys(n),function(e,t,n){return e>=Cn(t,n)&&e<wn(t,n)}(e=_s(e),t,n)},zn.invoke=Ls,zn.isArguments=Ha,zn.isArray=Ja,zn.isArrayBuffer=Ka,zn.isArrayLike=Ya,zn.isArrayLikeObject=Xa,zn.isBoolean=function(e){return!0===e||!1===e||is(e)&&xr(e)==_},zn.isBuffer=Za,zn.isDate=Qa,zn.isElement=function(e){return is(e)&&1===e.nodeType&&!cs(e)},zn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Ja(e)||"string"==typeof e||"function"==typeof e.splice||Za(e)||ps(e)||Ha(e)))return!e.length;var t=gi(e);if(t==T||t==I)return!e.size;if(Ei(e))return!Br(e).length;for(var n in e)if($e.call(e,n))return!1;return!0},zn.isEqual=function(e,t){return jr(e,t)},zn.isEqualWith=function(e,t,n){var o=(n="function"==typeof n?n:r)?n(e,t):r;return o===r?jr(e,t,r,n):!!o},zn.isError=es,zn.isFinite=function(e){return"number"==typeof e&&gn(e)},zn.isFunction=ts,zn.isInteger=ns,zn.isLength=rs,zn.isMap=as,zn.isMatch=function(e,t){return e===t||Dr(e,t,hi(t))},zn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Dr(e,t,hi(t),n)},zn.isNaN=function(e){return ss(e)&&e!=+e},zn.isNative=function(e){if(Ri(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return $r(e)},zn.isNil=function(e){return null==e},zn.isNull=function(e){return null===e},zn.isNumber=ss,zn.isObject=os,zn.isObjectLike=is,zn.isPlainObject=cs,zn.isRegExp=us,zn.isSafeInteger=function(e){return ns(e)&&e>=-9007199254740991&&e<=p},zn.isSet=ds,zn.isString=ls,zn.isSymbol=fs,zn.isTypedArray=ps,zn.isUndefined=function(e){return e===r},zn.isWeakMap=function(e){return is(e)&&gi(e)==M},zn.isWeakSet=function(e){return is(e)&&"[object WeakSet]"==xr(e)},zn.join=function(e,t){return null==e?"":bn.call(e,t)},zn.kebabCase=Js,zn.last=ea,zn.lastIndexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o;return n!==r&&(i=(i=gs(n))<0?wn(o+i,0):Cn(i,o-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):Ft(e,zt,i,!0)},zn.lowerCase=Ks,zn.lowerFirst=Ys,zn.lt=hs,zn.lte=vs,zn.max=function(e){return e&&e.length?gr(e,sc,Pr):r},zn.maxBy=function(e,t){return e&&e.length?gr(e,fi(t,2),Pr):r},zn.mean=function(e){return Wt(e,sc)},zn.meanBy=function(e,t){return Wt(e,fi(t,2))},zn.min=function(e){return e&&e.length?gr(e,sc,Ur):r},zn.minBy=function(e,t){return e&&e.length?gr(e,fi(t,2),Ur):r},zn.stubArray=bc,zn.stubFalse=_c,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=Rc,zn.nth=function(e,t){return e&&e.length?Gr(e,gs(t)):r},zn.noConflict=function(){return pt._===this&&(pt._=Ve),this},zn.noop=fc,zn.now=Ia,zn.pad=function(e,t,n){e=Cs(e);var r=(t=gs(t))?pn(e):0;if(!t||r>=t)return e;var o=(t-r)/2;return Jo(gt(o),n)+e+Jo(yt(o),n)},zn.padEnd=function(e,t,n){e=Cs(e);var r=(t=gs(t))?pn(e):0;return t&&r<t?e+Jo(t-r,n):e},zn.padStart=function(e,t,n){e=Cs(e);var r=(t=gs(t))?pn(e):0;return t&&r<t?Jo(t-r,n)+e:e},zn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Sn(Cs(e).replace(ae,""),t||0)},zn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ki(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ys(e),t===r?(t=e,e=0):t=ys(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var i=Tn();return Cn(e+i*(t-e+ut("1e-"+((i+"").length-1))),t)}return Xr(e,t)},zn.reduce=function(e,t,n){var r=Ja(e)?jt:Ht,o=arguments.length<3;return r(e,fi(t,4),n,o,vr)},zn.reduceRight=function(e,t,n){var r=Ja(e)?Dt:Ht,o=arguments.length<3;return r(e,fi(t,4),n,o,mr)},zn.repeat=function(e,t,n){return t=(n?ki(e,t,n):t===r)?1:gs(t),Zr(Cs(e),t)},zn.replace=function(){var e=arguments,t=Cs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zn.result=function(e,t,n){var o=-1,i=(t=ko(t,e)).length;for(i||(i=1,e=r);++o<i;){var a=null==e?r:e[Ui(t[o])];a===r&&(o=i,a=n),e=ts(a)?a.call(e):a}return e},zn.round=Ec,zn.runInContext=t,zn.sample=function(e){return(Ja(e)?er:eo)(e)},zn.size=function(e){if(null==e)return 0;if(Ya(e))return ls(e)?pn(e):e.length;var t=gi(e);return t==T||t==I?e.size:Br(e).length},zn.snakeCase=Xs,zn.some=function(e,t,n){var o=Ja(e)?$t:so;return n&&ki(e,t,n)&&(t=r),o(e,fi(t,3))},zn.sortedIndex=function(e,t){return co(e,t)},zn.sortedIndexBy=function(e,t,n){return uo(e,t,fi(n,2))},zn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=co(e,t);if(r<n&&Wa(e[r],t))return r}return-1},zn.sortedLastIndex=function(e,t){return co(e,t,!0)},zn.sortedLastIndexBy=function(e,t,n){return uo(e,t,fi(n,2),!0)},zn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=co(e,t,!0)-1;if(Wa(e[n],t))return n}return-1},zn.startCase=Zs,zn.startsWith=function(e,t,n){return e=Cs(e),n=null==n?0:dr(gs(n),0,e.length),t=po(t),e.slice(n,n+t.length)==t},zn.subtract=xc,zn.sum=function(e){return e&&e.length?Jt(e,sc):0},zn.sumBy=function(e,t){return e&&e.length?Jt(e,fi(t,2)):0},zn.template=function(e,t,n){var o=zn.templateSettings;n&&ki(e,t,n)&&(t=r),e=Cs(e),t=Ts({},t,o,ni);var i,a,s=Ts({},t.imports,o.imports,ni),c=js(s),u=Zt(s,c),d=0,l=t.interpolate||Ce,f="__p += '",p=Pe((t.escape||Ce).source+"|"+l.source+"|"+(l===ee?he:Ce).source+"|"+(t.evaluate||Ce).source+"|$","g"),h="//# sourceURL="+($e.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,(function(t,n,r,o,s,c){return r||(r=o),f+=e.slice(d,c).replace(ke,an),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),f+="';\n";var v=$e.call(t,"variable")&&t.variable;if(v){if(fe.test(v))throw new Te("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(q,""):f).replace(G,"$1").replace(H,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=nc((function(){return Re(c,h+"return "+f).apply(r,u)}));if(m.source=f,es(m))throw m;return m},zn.times=function(e,t){if((e=gs(e))<1||e>p)return[];var n=m,r=Cn(e,m);t=fi(t),e-=m;for(var o=Kt(r,t);++n<e;)t(n);return o},zn.toFinite=ys,zn.toInteger=gs,zn.toLength=bs,zn.toLower=function(e){return Cs(e).toLowerCase()},zn.toNumber=_s,zn.toSafeInteger=function(e){return e?dr(gs(e),-9007199254740991,p):0===e?e:0},zn.toString=Cs,zn.toUpper=function(e){return Cs(e).toUpperCase()},zn.trim=function(e,t,n){if((e=Cs(e))&&(n||t===r))return Yt(e);if(!e||!(t=po(t)))return e;var o=hn(e),i=hn(t);return To(o,en(o,i),tn(o,i)+1).join("")},zn.trimEnd=function(e,t,n){if((e=Cs(e))&&(n||t===r))return e.slice(0,vn(e)+1);if(!e||!(t=po(t)))return e;var o=hn(e);return To(o,0,tn(o,hn(t))+1).join("")},zn.trimStart=function(e,t,n){if((e=Cs(e))&&(n||t===r))return e.replace(ae,"");if(!e||!(t=po(t)))return e;var o=hn(e);return To(o,en(o,hn(t))).join("")},zn.truncate=function(e,t){var n=30,o="...";if(os(t)){var i="separator"in t?t.separator:i;n="length"in t?gs(t.length):n,o="omission"in t?po(t.omission):o}var a=(e=Cs(e)).length;if(sn(e)){var s=hn(e);a=s.length}if(n>=a)return e;var c=n-pn(o);if(c<1)return o;var u=s?To(s,0,c).join(""):e.slice(0,c);if(i===r)return u+o;if(s&&(c+=u.length-c),us(i)){if(e.slice(c).search(i)){var d,l=u;for(i.global||(i=Pe(i.source,Cs(ve.exec(i))+"g")),i.lastIndex=0;d=i.exec(l);)var f=d.index;u=u.slice(0,f===r?c:f)}}else if(e.indexOf(po(i),c)!=c){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+o},zn.unescape=function(e){return(e=Cs(e))&&Y.test(e)?e.replace(J,mn):e},zn.uniqueId=function(e){var t=++Ne;return Cs(e)+t},zn.upperCase=Qs,zn.upperFirst=ec,zn.each=Ca,zn.eachRight=ka,zn.first=Yi,lc(zn,(Tc={},kr(zn,(function(e,t){$e.call(zn.prototype,t)||(Tc[t]=e)})),Tc),{chain:!1}),zn.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zn[e].placeholder=zn})),Et(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===r?1:wn(gs(n),0);var o=this.__filtered__&&!t?new Hn(this):this.clone();return o.__filtered__?o.__takeCount__=Cn(n,o.__takeCount__):o.__views__.push({size:Cn(n,m),type:e+(o.__dir__<0?"Right":"")}),o},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:fi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Et(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(sc)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Mr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Ba(fi(e)))},Hn.prototype.slice=function(e,t){e=gs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=gs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(m)},kr(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=zn[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);i&&(zn.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,c=t instanceof Hn,u=s[0],d=c||Ja(t),l=function(e){var t=i.apply(zn,Lt([e],s));return o&&f?t[0]:t};d&&n&&"function"==typeof u&&1!=u.length&&(c=d=!1);var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,v=c&&!p;if(!a&&d){t=v?t:new Hn(this);var m=e.apply(t,s);return m.__actions__.push({func:ya,args:[l],thisArg:r}),new Gn(m,f)}return h&&v?e.apply(this,s):(m=this.thru(l),h?o?m.value()[0]:m.value():m)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);zn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Ja(o)?o:[],e)}return this[n]((function(n){return t.apply(Ja(n)?n:[],e)}))}})),kr(Hn.prototype,(function(e,t){var n=zn[t];if(n){var r=n.name+"";$e.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Wo(r,2).name]=[{name:"wrapper",func:r}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Mo(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mo(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mo(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ja(e),r=t<0,o=n?e.length:0,i=function(e,t,n){var r=-1,o=n.length;for(;++r<o;){var i=n[r],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Cn(t,e+a);break;case"takeRight":e=wn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,c=s-a,u=r?s:a-1,d=this.__iteratees__,l=d.length,f=0,p=Cn(c,this.__takeCount__);if(!n||!r&&o==c&&p==c)return go(e,this.__actions__);var h=[];e:for(;c--&&f<p;){for(var v=-1,m=e[u+=t];++v<l;){var y=d[v],g=y.iteratee,b=y.type,_=g(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}h[f++]=m}return h},zn.prototype.at=ga,zn.prototype.chain=function(){return ma(this)},zn.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===r&&(this.__values__=ms(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var o=zi(n);o.__index__=0,o.__values__=r,t?i.__wrapped__=o:t=o;var i=o;n=n.__wrapped__}return i.__wrapped__=e,t},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:ya,args:[oa],thisArg:r}),new Gn(t,this.__chain__)}return this.thru(oa)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return go(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,nt&&(zn.prototype[nt]=function(){return this}),zn}();vt?((vt.exports=yn)._=yn,ht._=yn):pt._=yn}).call(v)}(g,g.exports);var b=g.exports,_={exports:{}},w={},C=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,k=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],S=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var o,i,a=C.exec(e||""),s={},c=14;c--;)s[k[c]]=a[c]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=(o=s.query,i={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(i[t]=n)})),i),s};var T={exports:{}},R=1e3,E=60*R,x=60*E,P=24*x,I=7*P,O=365.25*P,A=function(t,n){n=n||{};var r=e(t);if("string"===r&&t.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*O;case"weeks":case"week":case"w":return n*I;case"days":case"day":case"d":return n*P;case"hours":case"hour":case"hrs":case"hr":case"h":return n*x;case"minutes":case"minute":case"mins":case"min":case"m":return n*E;case"seconds":case"second":case"secs":case"sec":case"s":return n*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(t);if("number"===r&&isFinite(t))return n.long?function(e){var t=Math.abs(e);if(t>=P)return M(e,t,P,"day");if(t>=x)return M(e,t,x,"hour");if(t>=E)return M(e,t,E,"minute");if(t>=R)return M(e,t,R,"second");return e+" ms"}(t):function(e){var t=Math.abs(e);if(t>=P)return Math.round(e/P)+"d";if(t>=x)return Math.round(e/x)+"h";if(t>=E)return Math.round(e/E)+"m";if(t>=R)return Math.round(e/R)+"s";return e+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function M(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var L=function(e){function t(e){var r,o,i,a=null;function s(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(s.enabled){var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";u++;var o=t.formatters[r];if("function"==typeof o){var a=n[u];e=o.call(i,a),n.splice(u,1),u--}return e})),t.formatArgs.call(i,n);var d=i.log||t.log;d.apply(i,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){var e=[].concat(f(t.names.map(r)),f(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=A,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){var n;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=L(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(T,T.exports),Object.defineProperty(w,"__esModule",{value:!0}),w.url=void 0;var j=S,D=T.exports("socket.io-client:url");w.url=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(D("protocol-less url %s",e),e=void 0!==n?n.protocol+"//"+e:"https://"+e),D("parse %s",e),r=j(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":"),i=o?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r};var N={},B={exports:{}},F={},U={exports:{}};try{U.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){U.exports=!1}var V="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),z=U.exports,W=V,q=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||z))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(W[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},G={exports:{}},H=Object.create(null);H.open="0",H.close="1",H.ping="2",H.pong="3",H.message="4",H.upgrade="5",H.noop="6";var J=Object.create(null);Object.keys(H).forEach((function(e){J[H[e]]=e}));var K,Y={PACKET_TYPES:H,PACKET_TYPES_REVERSE:J,ERROR_PACKET:{type:"error",data:"parser error"}},X=Y.PACKET_TYPES,Z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Q="function"==typeof ArrayBuffer,ee=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},te=function(e,t,n){var r,o=e.type,i=e.data;return Z&&i instanceof Blob?t?n(i):ee(i,n):Q&&(i instanceof ArrayBuffer||(r=i,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(i):ee(new Blob([i]),n):n(X[o]+(i||""))},ne={};K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne.encode=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=K[n[t]>>2],o+=K[(3&n[t])<<4|n[t+1]>>4],o+=K[(15&n[t+1])<<2|n[t+2]>>6],o+=K[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},ne.decode=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(t=0;t<s;t+=4)n=K.indexOf(e[t]),r=K.indexOf(e[t+1]),o=K.indexOf(e[t+2]),i=K.indexOf(e[t+3]),d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return u};var re,oe=Y.PACKET_TYPES_REVERSE,ie=Y.ERROR_PACKET;"function"==typeof ArrayBuffer&&(re=ne);var ae=function(e,t){if(re){var n=re.decode(e);return se(n,t)}return{base64:!0,data:e}},se=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},ce=te,ue=function(e,t){if("string"!=typeof e)return{type:"message",data:se(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:ae(e.substring(1),t)}:oe[n]?e.length>1?{type:oe[n],data:e.substring(1)}:{type:oe[n]}:ie},de=String.fromCharCode(30),le={protocol:4,encodePacket:ce,encodePayload:function(e,t){var n=e.length,r=new Array(n),o=0;e.forEach((function(e,i){ce(e,!1,(function(e){r[i]=e,++o===n&&t(r.join(de))}))}))},decodePacket:ue,decodePayload:function(e,t){for(var n=e.split(de),r=[],o=0;o<n.length;o++){var i=ue(n[o],t);if(r.push(i),"error"===i.type)break}return r}},fe={exports:{}};!function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}fe.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}}();var pe,he=le,ve=fe.exports,me=T.exports("engine.io-client:transport"),ye=function(e){o(i,ve);var n=u(i);function i(e){var r;return t(this,i),(r=n.call(this)).opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return r(i,[{key:"onError",value:function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState?this.write(e):me("transport is not open, discarding packets")}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(e){var t=he.decodePacket(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){this.emit("packet",e)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}]),i}(),ge=ye,be={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},_e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),we={},Ce=0,ke=0;function Se(e){var t="";do{t=_e[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function Te(){var e=Se(+new Date);return e!==pe?(Ce=0,pe=e):e+"."+Se(Ce++)}for(;ke<64;ke++)we[_e[ke]]=ke;Te.encode=Se,Te.decode=function(e){var t=0;for(ke=0;ke<e.length;ke++)t=64*t+we[e.charAt(ke)];return t};var Re=Te,Ee=ge,xe=be,Pe=le,Ie=Re,Oe=T.exports("engine.io-client:polling"),Ae=function(e){o(i,Ee);var n=u(i);function i(){return t(this,i),n.apply(this,arguments)}return r(i,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;function n(){Oe("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(Oe("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){Oe("pre-pause polling complete"),--r||n()}))),this.writable||(Oe("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){Oe("pre-pause writing complete"),--r||n()})))}else n()}},{key:"poll",value:function(){Oe("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(e){var t=this;Oe("polling got data %s",e);Pe.decodePayload(e,this.socket.binaryType).forEach((function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():Oe('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var e=this;function t(){Oe("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(Oe("transport open - closing"),t()):(Oe("transport not open - deferring close"),this.once("open",t))}},{key:"write",value:function(e){var t=this;this.writable=!1,Pe.encodePayload(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emit("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Ie()),this.supportsBinary||e.sid||(e.b64=1),e=xe.encode(e),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),e.length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}}]),i}(),Me=Ae,Le={pick:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},je=q,De=Me,$e=fe.exports,Ne=Le.pick,Be=V,Fe=T.exports("engine.io-client:polling-xhr");function Ue(){}var Ve=null!=new je({xdomain:!1}).responseType,ze=function(e){o(i,De);var n=u(i);function i(e){var r;if(t(this,i),r=n.call(this,e),"undefined"!=typeof location){var o="https:"===location.protocol,a=location.port;a||(a=o?443:80),r.xd="undefined"!=typeof location&&e.hostname!==location.hostname||a!==e.port,r.xs=e.secure!==o}var s=e&&e.forceBase64;return r.supportsBinary=Ve&&!s,r}return r(i,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new We(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this.request({method:"POST",data:e}),r=this;n.on("success",t),n.on("error",(function(e){r.onError("xhr post error",e)}))}},{key:"doPoll",value:function(){Fe("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),i}(),We=function(e){o(i,$e);var n=u(i);function i(e,r){var o;return t(this,i),(o=n.call(this)).opts=r,o.method=r.method||"GET",o.uri=e,o.async=!1!==r.async,o.data=void 0!==r.data?r.data:null,o.create(),o}return r(i,[{key:"create",value:function(){var e=Ne(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var t=this.xhr=new je(e),n=this;try{Fe("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.opts.extraHeaders[r])}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},Fe("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=i.requestsCount++,i.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(e){this.emit("data",e),this.onSuccess()}},{key:"onError",value:function(e){this.emit("error",e),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=Ue:this.xhr.onreadystatechange=Ue,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete i.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&this.onData(e)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),i}();if(We.requestsCount=0,We.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",qe);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Be?"pagehide":"unload",qe,!1)}function qe(){for(var e in We.requests)We.requests.hasOwnProperty(e)&&We.requests[e].abort()}G.exports=ze,G.exports.Request=We;var Ge,He=Me,Je=V,Ke=/\n/g,Ye=/\\n/g,Xe=function(e){o(a,He);var n=u(a);function a(e){var r;t(this,a),(r=n.call(this,e)).query=r.query||{},Ge||(Ge=Je.___eio=Je.___eio||[]),r.index=Ge.length;var o=s(r);return Ge.push((function(e){o.onData(e)})),r.query.j=r.index,r}return r(a,[{key:"supportsBinary",get:function(){return!1}},{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),l(i(a.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)}},{key:"doWrite",value:function(e,t){var n,r=this;if(!this.form){var o=document.createElement("form"),i=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=a,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function s(){c(),t()}function c(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),c(),e=e.replace(Ye,"\\\n"),this.area.value=e.replace(Ke,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&s()}:this.iframe.onload=s}}]),a}(),Ze=V,Qe={WebSocket:Ze.WebSocket||Ze.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer"},et=ge,tt=le,nt=be,rt=Re,ot=Le.pick,it=Qe.WebSocket,at=Qe.usingBrowserWebSocket,st=Qe.defaultBinaryType,ct=T.exports("engine.io-client:websocket"),ut="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),dt=function(e){o(i,et);var n=u(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).supportsBinary=!e.forceBase64,r}return r(i,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=ut?{}:ot(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=at&&!ut?t?new it(e,t):new it(e):new it(e,t,n)}catch(e){return this.emit("error",e)}this.ws.binaryType=this.socket.binaryType||st,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n,r=e.length,o=0,i=r;o<i;o++)n=e[o],tt.encodePacket(n,t.supportsBinary,(function(e){try{at&&t.ws.send(e)}catch(e){ct("websocket closed before onclose event")}--r||a()}));function a(){t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0)}}},{key:"onClose",value:function(){et.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";return this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=rt()),this.supportsBinary||(e.b64=1),(e=nt.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+e}},{key:"check",value:function(){return!(!it||"__initialize"in it&&this.name===i.prototype.name)}}]),i}(),lt=dt,ft=q,pt=G.exports,ht=Xe,vt=lt;F.polling=function(e){var t=!1,n=!1,r=!1!==e.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,i=location.port;i||(i=o?443:80),t=e.hostname!==location.hostname||i!==e.port,n=e.secure!==o}if(e.xdomain=t,e.xscheme=n,"open"in new ft(e)&&!e.forceJSONP)return new pt(e);if(!r)throw new Error("JSONP disabled");return new ht(e)},F.websocket=vt;var mt=F,yt=fe.exports,gt=T.exports("engine.io-client:socket"),bt=le,_t=S,wt=be,Ct=function(n){o(a,yt);var i=u(a);function a(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,a),r=i.call(this),n&&"object"===e(n)&&(o=n,n=null),n?(n=_t(n),o.hostname=n.host,o.secure="https"===n.protocol||"wss"===n.protocol,o.port=n.port,n.query&&(o.query=n.query)):o.host&&(o.hostname=_t(o.host).host),r.secure=null!=o.secure?o.secure:"undefined"!=typeof location&&"https:"===location.protocol,o.hostname&&!o.port&&(o.port=r.secure?"443":"80"),r.hostname=o.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=o.port||("undefined"!=typeof location&&location.port?location.port:r.secure?443:80),r.transports=o.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{}},o),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"==typeof r.opts.query&&(r.opts.query=wt.decode(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),r.open(),r}return r(a,[{key:"createTransport",value:function(e){gt('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.opts.query);t.EIO=bt.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return gt("options: %j",n),new mt[e](n)}},{key:"open",value:function(){var e;if(this.opts.rememberUpgrade&&a.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return gt("error while creating transport: %s",e),this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){gt("setting transport %s",e.name);var t=this;this.transport&&(gt("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))}},{key:"probe",value:function(e){gt('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(gt('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(gt('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;a.priorWebsocketSuccess="websocket"===t.name,gt('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(gt("changing transport and sending upgrade packet"),l(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{gt('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,r.emit("upgradeError",i)}})))}function i(){n||(n=!0,l(),t.close(),t=null)}function s(n){var o=new Error("probe error: "+n);o.transport=t.name,i(),gt('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function c(){s("transport closed")}function u(){s("socket closed")}function d(e){t&&e.name!==t.name&&(gt('"%s" works - aborting "%s"',e.name,t.name),i())}function l(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",d)}a.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",c),this.once("close",u),this.once("upgrading",d),t.open()}},{key:"onOpen",value:function(){if(gt("socket open"),this.readyState="open",a.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){gt("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(gt('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else gt('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout)}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(gt("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this;function t(){e.onClose("forced close"),gt("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){gt("socket error %j",e),a.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){gt('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),a}();Ct.priorWebsocketSuccess=!1,Ct.protocol=bt.protocol;var kt=Ct;B.exports=function(e,t){return new kt(e,t)},B.exports.Socket=kt,B.exports.protocol=kt.protocol,B.exports.Transport=ge,B.exports.transports=F,B.exports.parser=le;var St={},Tt={},Rt={},Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.hasBinary=Et.isBinary=void 0;var xt="function"==typeof ArrayBuffer,Pt=Object.prototype.toString,It="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Pt.call(Blob),Ot="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Pt.call(File);function At(e){return xt&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||It&&e instanceof Blob||Ot&&e instanceof File}Et.isBinary=At,Et.hasBinary=function t(n,r){if(!n||"object"!==e(n))return!1;if(Array.isArray(n)){for(var o=0,i=n.length;o<i;o++)if(t(n[o]))return!0;return!1}if(At(n))return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&t(n[a]))return!0;return!1},Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.reconstructPacket=Rt.deconstructPacket=void 0;var Mt=Et;function Lt(t,n){if(!t)return t;if(Mt.isBinary(t)){var r={_placeholder:!0,num:n.length};return n.push(t),r}if(Array.isArray(t)){for(var o=new Array(t.length),i=0;i<t.length;i++)o[i]=Lt(t[i],n);return o}if("object"===e(t)&&!(t instanceof Date)){var a={};for(var s in t)t.hasOwnProperty(s)&&(a[s]=Lt(t[s],n));return a}return t}function jt(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=jt(t[r],n);else if("object"===e(t))for(var o in t)t.hasOwnProperty(o)&&(t[o]=jt(t[o],n));return t}Rt.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=Lt(n,t),r.attachments=t.length,{packet:r,buffers:t}},Rt.reconstructPacket=function(e,t){return e.data=jt(e.data,t),e.attachments=void 0,e},function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Decoder=n.Encoder=n.PacketType=n.protocol=void 0;var a,s=fe.exports,c=Rt,d=Et,f=T.exports("socket.io-parser");n.protocol=5,function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(a=n.PacketType||(n.PacketType={}));var p=function(){function e(){t(this,e)}return r(e,[{key:"encode",value:function(e){return f("encoding packet %j",e),e.type!==a.EVENT&&e.type!==a.ACK||!d.hasBinary(e)?[this.encodeAsString(e)]:(e.type=e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==a.BINARY_EVENT&&e.type!==a.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data)),f("encoded %j as %s",e,t),t}},{key:"encodeAsBinary",value:function(e){var t=c.deconstructPacket(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}();n.Encoder=p;var h=function(n){o(c,n);var s=u(c);function c(){return t(this,c),s.call(this)}return r(c,[{key:"add",value:function(e){var t;if("string"==typeof e)(t=this.decodeString(e)).type===a.BINARY_EVENT||t.type===a.BINARY_ACK?(this.reconstructor=new v(t),0===t.attachments&&l(i(c.prototype),"emit",this).call(this,"decoded",t)):l(i(c.prototype),"emit",this).call(this,"decoded",t);else{if(!d.isBinary(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,l(i(c.prototype),"emit",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,n={type:Number(e.charAt(0))};if(void 0===a[n.type])throw new Error("unknown packet type "+n.type);if(n.type===a.BINARY_EVENT||n.type===a.BINARY_ACK){for(var r=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(r,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var i=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var d=e.charAt(t);if(null==d||Number(d)!=d){--t;break}if(t===e.length)break}n.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!c.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return f("decoded %s as %j",e,n),n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,n){switch(t){case a.CONNECT:return"object"===e(n);case a.DISCONNECT:return void 0===n;case a.CONNECT_ERROR:return"string"==typeof n||"object"===e(n);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(n)}}}]),c}(s);n.Decoder=h;var v=function(){function e(n){t(this,e),this.packet=n,this.buffers=[],this.reconPack=n}return r(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=c.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}()}(Tt);var Dt={};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.on=void 0,Dt.on=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}},Object.defineProperty(St,"__esModule",{value:!0}),St.Socket=void 0;var $t=Tt,Nt=fe.exports,Bt=Dt,Ft=T.exports("socket.io-client:socket"),Ut=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Vt=function(e){o(a,Nt);var n=u(a);function a(e,r,o){var i;return t(this,a),(i=n.call(this)).receiveBuffer=[],i.sendBuffer=[],i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=r,i.ids=0,i.acks={},i.receiveBuffer=[],i.sendBuffer=[],i.connected=!1,i.disconnected=!0,i.flags={},o&&o.auth&&(i.auth=o.auth),i.io._autoConnect&&i.open(),i}return r(a,[{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Bt.on(e,"open",this.onopen.bind(this)),Bt.on(e,"packet",this.onpacket.bind(this)),Bt.on(e,"error",this.onerror.bind(this)),Bt.on(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Ut.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var o={type:$t.PacketType.EVENT,data:n,options:{}};o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(Ft("emitting packet with ack id %d",this.ids),this.acks[this.ids]=n.pop(),o.id=this.ids++);var i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,a=this.flags.volatile&&(!i||!this.connected);return a?Ft("discard packet as the transport is not currently writable"):this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;Ft("transport is open - connecting"),"function"==typeof this.auth?this.auth((function(t){e.packet({type:$t.PacketType.CONNECT,data:t})})):this.packet({type:$t.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||l(i(a.prototype),"emit",this).call(this,"connect_error",e)}},{key:"onclose",value:function(e){Ft("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,l(i(a.prototype),"emit",this).call(this,"disconnect",e)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case $t.PacketType.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else l(i(a.prototype),"emit",this).call(this,"connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $t.PacketType.EVENT:case $t.PacketType.BINARY_EVENT:this.onevent(e);break;case $t.PacketType.ACK:case $t.PacketType.BINARY_ACK:this.onack(e);break;case $t.PacketType.DISCONNECT:this.ondisconnect();break;case $t.PacketType.CONNECT_ERROR:var n=new Error(e.data.message);n.data=e.data.data,l(i(a.prototype),"emit",this).call(this,"connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];Ft("emitting event %j",t),null!=e.id&&(Ft("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e)}}catch(e){n.e(e)}finally{n.f()}}l(i(a.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];Ft("sending ack %j",o),t.packet({type:$t.PacketType.ACK,id:e,data:o})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t?(Ft("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):Ft("bad ack %s",e.id)}},{key:"onconnect",value:function(e){Ft("socket connected with id %s",e),this.id=e,this.connected=!0,this.disconnected=!1,l(i(a.prototype),"emit",this).call(this,"connect"),this.emitBuffered()}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){return e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){Ft("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&(Ft("performing disconnect (%s)",this.nsp),this.packet({type:$t.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),a}();St.Socket=Vt;var zt=Wt;function Wt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Wt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Wt.prototype.reset=function(){this.attempts=0},Wt.prototype.setMin=function(e){this.ms=e},Wt.prototype.setMax=function(e){this.max=e},Wt.prototype.setJitter=function(e){this.jitter=e},Object.defineProperty(N,"__esModule",{value:!0}),N.Manager=void 0;var qt=B.exports,Gt=St,Ht=fe.exports,Jt=Tt,Kt=Dt,Yt=zt,Xt=T.exports("socket.io-client:manager"),Zt=function(n){o(s,Ht);var a=u(s);function s(n,r){var o;t(this,s),(o=a.call(this)).nsps={},o.subs=[],n&&"object"===e(n)&&(r=n,n=void 0),(r=r||{}).path=r.path||"/socket.io",o.opts=r,o.reconnection(!1!==r.reconnection),o.reconnectionAttempts(r.reconnectionAttempts||1/0),o.reconnectionDelay(r.reconnectionDelay||1e3),o.reconnectionDelayMax(r.reconnectionDelayMax||5e3),o.randomizationFactor(r.randomizationFactor||.5),o.backoff=new Yt({min:o.reconnectionDelay(),max:o.reconnectionDelayMax(),jitter:o.randomizationFactor()}),o.timeout(null==r.timeout?2e4:r.timeout),o._readyState="closed",o.uri=n;var i=r.parser||Jt;return o.encoder=new i.Encoder,o.decoder=new i.Decoder,o._autoConnect=!1!==r.autoConnect,o._autoConnect&&o.open(),o}return r(s,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(Xt("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;Xt("opening %s",this.uri),this.engine=qt(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var o=Kt.on(n,"open",(function(){r.onopen(),e&&e()})),a=Kt.on(n,"error",(function(n){Xt("error"),r.cleanup(),r._readyState="closed",l(i(s.prototype),"emit",t).call(t,"error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;Xt("connect attempt will timeout after %d",c),0===c&&o();var u=setTimeout((function(){Xt("connect attempt timed out after %d",c),o(),n.close(),n.emit("error",new Error("timeout"))}),c);this.subs.push((function(){clearTimeout(u)}))}return this.subs.push(o),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){Xt("open"),this.cleanup(),this._readyState="open",l(i(s.prototype),"emit",this).call(this,"open");var e=this.engine;this.subs.push(Kt.on(e,"ping",this.onping.bind(this)),Kt.on(e,"data",this.ondata.bind(this)),Kt.on(e,"error",this.onerror.bind(this)),Kt.on(e,"close",this.onclose.bind(this)),Kt.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){l(i(s.prototype),"emit",this).call(this,"ping")}},{key:"ondata",value:function(e){this.decoder.add(e)}},{key:"ondecoded",value:function(e){l(i(s.prototype),"emit",this).call(this,"packet",e)}},{key:"onerror",value:function(e){Xt("error",e),l(i(s.prototype),"emit",this).call(this,"error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new Gt.Socket(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return void Xt("socket %s is still active, skipping close",r)}this._close()}},{key:"_packet",value:function(e){Xt("writing packet %j",e);for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){Xt("cleanup"),this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){Xt("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e){Xt("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",l(i(s.prototype),"emit",this).call(this,"close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)Xt("reconnect failed"),this.backoff.reset(),l(i(s.prototype),"emit",this).call(this,"reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();Xt("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var r=setTimeout((function(){t.skipReconnect||(Xt("attempting reconnect"),l(i(s.prototype),"emit",e).call(e,"reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(Xt("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),l(i(s.prototype),"emit",e).call(e,"reconnect_error",n)):(Xt("reconnect success"),t.onreconnect())})))}),n);this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),l(i(s.prototype),"emit",this).call(this,"reconnect",e)}}]),s}();N.Manager=Zt,function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Socket=n.io=n.Manager=n.protocol=void 0;var r=w,o=N,i=St;Object.defineProperty(n,"Socket",{enumerable:!0,get:function(){return i.Socket}});var a=T.exports("socket.io-client");t.exports=n=c;var s=n.managers={};function c(t,n){"object"===e(t)&&(n=t,t=void 0),n=n||{};var i,c=r.url(t,n.path),u=c.source,d=c.id,l=c.path,f=s[d]&&l in s[d].nsps;return n.forceNew||n["force new connection"]||!1===n.multiplex||f?(a("ignoring socket cache for %s",u),i=new o.Manager(u,n)):(s[d]||(a("new io instance for %s",u),s[d]=new o.Manager(u,n)),i=s[d]),c.query&&!n.query&&(n.query=c.queryKey),i.socket(c.path,n)}n.io=c;var u=Tt;Object.defineProperty(n,"protocol",{enumerable:!0,get:function(){return u.protocol}}),n.connect=c;var d=N;Object.defineProperty(n,"Manager",{enumerable:!0,get:function(){return d.Manager}})}(_,_.exports);var Qt=m(_.exports);Qt.Manager,function(){if(navigator.mediaDevices||(navigator.mediaDevices={}),!navigator.mediaDevices.getUserMedia){var e=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.getUserMedia;navigator.mediaDevices.getUserMedia=e?function(t){return new Promise((function(n,r){e(t,(function(e){n(e)}),(function(e){r(e)}))}))}:function(){return new Promise((function(e,t){var n;window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.RTCIceGatherer?((n=new Error("insecure connection")).name="CustomSecureConnectionError",t(n)):((n=new Error("getUserMedia is not supported in this browser.")).name="CustomNotSupportedError",t(n))}))}}}();!function(){function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(!s&&y)return y(a);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=y,a=0;a<r.length;a++)o(r[a]);return o}return e}()({1:[function(e,t,n){var r=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=d;var r=u(e("./utils")),o=u(e("./chrome/chrome_shim")),i=u(e("./firefox/firefox_shim")),a=u(e("./safari/safari_shim")),s=u(e("./common_shim")),c=u(e("sdp"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=r.log,u=r.detectBrowser(e),d={browserDetails:u,commonShim:s,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings,sdp:c};switch(u.browser){case"chrome":if(!o||!o.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;if(null===u.version)return n("Chrome shim can not determine version, not shimming."),d;n("adapter.js shimming chrome."),d.browserShim=o,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),o.shimGetUserMedia(e,u),o.shimMediaStream(e,u),o.shimPeerConnection(e,u),o.shimOnTrack(e,u),o.shimAddTrackRemoveTrack(e,u),o.shimGetSendersWithDtmf(e,u),o.shimGetStats(e,u),o.shimSenderReceiverGetStats(e,u),o.fixNegotiationNeeded(e,u),s.shimRTCIceCandidate(e,u),s.shimConnectionState(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u),s.removeExtmapAllowMixed(e,u);break;case"firefox":if(!i||!i.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=i,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),i.shimGetUserMedia(e,u),i.shimPeerConnection(e,u),i.shimOnTrack(e,u),i.shimRemoveStream(e,u),i.shimSenderGetStats(e,u),i.shimReceiverGetStats(e,u),i.shimRTCDataChannel(e,u),i.shimAddTransceiver(e,u),i.shimGetParameters(e,u),i.shimCreateOffer(e,u),i.shimCreateAnswer(e,u),s.shimRTCIceCandidate(e,u),s.shimConnectionState(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=a,s.shimAddIceCandidateNullOrEmpty(e,u),s.shimParameterlessSetLocalDescription(e,u),a.shimRTCIceServerUrls(e,u),a.shimCreateOfferLegacy(e,u),a.shimCallbacksAPI(e,u),a.shimLocalStreamsAPI(e,u),a.shimRemoteStreamsAPI(e,u),a.shimTrackEventTransceiver(e,u),a.shimGetUserMedia(e,u),a.shimAudioContext(e,u),s.shimRTCIceCandidate(e,u),s.shimMaxMessageSize(e,u),s.shimSendThrowTypeError(e,u),s.removeExtmapAllowMixed(e,u);break;default:n("Unsupported browser!")}return d}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimMediaStream=u,n.shimOnTrack=d,n.shimGetSendersWithDtmf=l,n.shimGetStats=f,n.shimSenderReceiverGetStats=p,n.shimAddTrackRemoveTrackWithNative=h,n.shimAddTrackRemoveTrack=v,n.shimPeerConnection=m,n.fixNegotiationNeeded=y;var a=s(e("../utils.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var i=new Event("track");i.track=r.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)})),t.stream.getTracks().forEach((function(r){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var i=new Event("track");i.track=r,i.receiver=o,i.transceiver={receiver:o},i.streams=[t.stream],n.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else a.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function l(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function f(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],o=n[1],i=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){o(s(a(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(o,i)}}}function p(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return a.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,o=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?o=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?o=!0:r=e),e.track===t})),o||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function h(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),o.apply(this,arguments)}}function v(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return h(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}r.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var i=this.getSenders().find((function(e){return e.track===t}));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var i=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=u(this,arguments[0]),i.apply(this,arguments)):i.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[r])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function u(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function m(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function y(e,t){a.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.shimGetUserMedia=a;var i=o(e("../utils.js")).log;function a(e,t){var n=e&&e.navigator;if(n.mediaDevices){var o=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var o="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==o.exact&&"number"==typeof o.exact&&(o.min=o.max=o.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];var a={};"number"==typeof o.ideal?(a[i("min",n)]=o.ideal,t.optional.push(a),(a={})[i("max",n)]=o.ideal,t.optional.push(a)):(a[i("",n)]=o.ideal,t.optional.push(a))}void 0!==o.exact&&"number"!=typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=o.exact):["min","max"].forEach((function(e){void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=o[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"===r(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":r(c))?c:{ideal:c});var u=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||u)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return n.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=o(e.video),i("chrome: "+JSON.stringify(e)),a(e)}))}e.video=o(e.video)}return i("chrome: "+JSON.stringify(e)),a(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(s(e))}))}))};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){var u=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return u(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}))}}}}},{"../utils.js":11}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=c,n.shimMaxMessageSize=u,n.shimSendThrowTypeError=d,n.shimConnectionState=l,n.removeExtmapAllowMixed=f,n.shimAddIceCandidateNullOrEmpty=p,n.shimParameterlessSetLocalDescription=h;var o=s(e("sdp")),i=a(e("./utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=o.default.parseCandidate(e.candidate),a=Object.assign(n,i);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function u(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=o.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=o.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=o.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e=r(arguments[0]),o=i(e),c=a(arguments[0],e),u=void 0;u=0===o&&0===c?Number.POSITIVE_INFINITY:0===o||0===c?Math.max(o,c):Math.min(o,c);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return u}}),this._sctp=d}return s.apply(this,arguments)}}}function d(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},i.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function l(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function f(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function p(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function h(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==(void 0===t?"undefined":r(t))||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}},{"./utils":11,sdp:12}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var i=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),n.shimOnTrack=u,n.shimPeerConnection=d,n.shimSenderGetStats=l,n.shimReceiverGetStats=f,n.shimRemoveStream=p,n.shimRTCDataChannel=h,n.shimAddTransceiver=v,n.shimGetParameters=m,n.shimCreateOffer=y,n.shimCreateAnswer=g;var a=s(e("../utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(e,t){if("object"===(void 0===e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),r=e[0],i=e[1],a=e[2];return o.apply(this,[r||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,a)}}}function l(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function f(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),a.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function p(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function h(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function v(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var o=r.sender,i=o.getParameters();(!("encodings"in i)||1===i.encodings.length&&0===Object.keys(i.encodings[0]).length)&&(i.encodings=e.sendEncodings,o.sendEncodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(i).then((function(){delete o.sendEncodings})).catch((function(){delete o.sendEncodings}))))}return r})}}function m(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function y(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function g(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,n){function r(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=r},{}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=a;var o=i(e("../utils"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){var n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},i&&i.prototype.getSettings){var c=i.prototype.getSettings;i.prototype.getSettings=function(){var e=c.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(i&&i.prototype.applyConstraints){var u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[e])}}}}},{"../utils":11}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=a,n.shimRemoteStreamsAPI=s,n.shimCallbacksAPI=c,n.shimGetUserMedia=u,n.shimConstraints=d,n.shimRTCIceServerUrls=l,n.shimTrackEventTransceiver=f,n.shimCreateOfferLegacy=p,n.shimAudioContext=h;var o=i(e("../utils"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o&&o.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function s(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,o=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=o.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var c=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=c,c=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=c,c=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=c}}function u(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(d(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function d(e){return e&&void 0!==e.video?Object.assign({},e,{video:o.compactObject(e.video)}):e}function l(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function f(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function h(e){"object"!==(void 0===e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":11}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=s,n.wrapPeerConnectionEvent=c,n.disableLog=u,n.disableWarnings=d,n.log=l,n.deprecated=f,n.detectBrowser=p,n.compactObject=v,n.walkStats=m,n.filterStats=y;var i=!0,a=!0;function s(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function c(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);var i=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};var i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function u(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function l(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function f(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=s(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=s(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=s(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e){return h(e)?Object.keys(e).reduce((function(t,n){var r=h(e[n]),i=r?v(e[n]):e[n],a=r&&!Object.keys(i).length;return void 0===i||a?t:Object.assign(t,o({},n,i))}),{}):e}function m(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?m(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){m(e,e.get(t),n)}))})))}function y(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var i=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&m(e,n,o)}))})),o}},{}],12:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};o.localCName=o.generateIdentifier(),o.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},o.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},o.getDescription=function(e){var t=o.splitSections(e);return t&&t[0]},o.getMediaSections=function(e){var t=o.splitSections(e);return t.shift(),t},o.matchPrefix=function(e,t){return o.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},o.parseCandidate=function(e){for(var t=void 0,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},o.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},o.parseIceOptions=function(e){return e.substr(14).split(" ")},o.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},o.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},o.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},o.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},o.parseFmtp=function(e){for(var t={},n=void 0,r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)t[(n=r[o].trim().split("="))[0].trim()]=n[1];return t},o.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},o.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},o.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},o.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},o.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},o.getMid=function(e){var t=o.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},o.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},o.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:o.matchPrefix(e+t,"a=fingerprint:").map(o.parseFingerprint)}},o.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},o.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},o.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===r(e.keyParams)?o.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},o.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},o.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},o.getCryptoParameters=function(e,t){return o.matchPrefix(e+t,"a=crypto:").map(o.parseCryptoLine)},o.getIceParameters=function(e,t){var n=o.matchPrefix(e+t,"a=ice-ufrag:")[0],r=o.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},o.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},o.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=o.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var i=n[r],a=o.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=o.parseRtpMap(a),c=o.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?o.parseFmtp(c[0]):{},s.rtcpFeedback=o.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(o.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return o.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(o.parseExtmap(e))})),t},o.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=o.writeRtpMap(e),n+=o.writeFmtp(e),n+=o.writeRtcpFb(e)}));var r=0;return t.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=o.writeExtmap(e)})),n},o.parseRtpEncodingParameters=function(e){var t=[],n=o.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf("RED"),i=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),s=a.length>0&&a[0].ssrc,c=void 0,u=o.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(n.rtx={ssrc:c}),t.push(n),r&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:s,mechanism:i?"red+ulpfec":"red"},t.push(n))}})),0===t.length&&s&&t.push({ssrc:s});var d=o.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=d}))),t},o.parseRtcpParameters=function(e){var t={},n=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=o.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var i=o.matchPrefix(e,"a=rtcp-mux");return t.mux=i.length>0,t},o.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},o.parseMsid=function(e){var t=void 0,n=o.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=o.matchPrefix(e,"a=ssrc:").map((function(e){return o.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},o.parseSctpDescription=function(e){var t=o.parseMLine(e),n=o.matchPrefix(e,"a=max-message-size:"),r=void 0;n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var i=o.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:t.fmt,maxMessageSize:r};var a=o.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:r}}},o.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},o.generateSessionId=function(){return Math.random().toString().substr(2,21)},o.writeSessionBoilerplate=function(e,t,n){var r=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||o.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},o.getDirection=function(e,t){for(var n=o.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?o.getDirection(t):"sendrecv"},o.getKind=function(e){return o.splitLines(e)[0].split(" ")[0].substr(2)},o.isRejected=function(e){return"0"===e.split(" ",2)[1]},o.parseMLine=function(e){var t=o.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},o.parseOLine=function(e){var t=o.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},o.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=o.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===(void 0===t?"undefined":r(t))&&(t.exports=o)},{}]},{},[1])(1);var en={exports:{}},tn=en.exports=function(t,n,r){var o,i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(o=void 0!==v?v:null)&&"undefined"==typeof window&&void 0!==v&&(v.navigator={userAgent:i,getUserMedia:function(){}},v.console||(v.console={}),void 0!==v.console.log&&void 0!==v.console.error||(v.console.error=v.console.log=v.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(o.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""}};return e},o.HTMLVideoElement=function(){}),"undefined"==typeof location&&(o.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(o.screen={width:0,height:0}),"undefined"==typeof URL&&(o.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),"undefined"==typeof MediaStreamTrack&&(o.MediaStreamTrack=function(){}),void 0===a&&(o.RTCPeerConnection=function(){}),o.window=v);var a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;"undefined"==typeof MediaStreamTrack&&(MediaStreamTrack={});var s={encryption:"sha-256",audio:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},video:{send:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},recv:{tracks:[],codecs:[],availableBandwidth:0,streams:0,framerateMean:0,bitrateMean:0},bytesSent:0,bytesReceived:0,latency:0,packetsLost:0},bandwidth:{systemBandwidth:0,sentPerSecond:0,encodedPerSecond:0,helper:{audioBytesSent:0,videoBytestSent:0},speed:0},results:{},connectionType:{systemNetworkType:((navigator.connection||{}).type||"unknown").toString().toLowerCase(),systemIpAddress:"192.168.1.2",local:{candidateType:[],transport:[],ipAddress:[],networkType:[]},remote:{candidateType:[],transport:[],ipAddress:[],networkType:[]}},resolutions:{send:{width:0,height:0},recv:{width:0,height:0}},internal:{audio:{send:{},recv:{}},video:{send:{},recv:{}},candidates:{}},nomore:function(){l=!0}},c={checkIfOfferer:function(e){"googLibjingleSession"===e.type&&(s.isOfferer=e.googInitiator)}},u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),d=this;if(!(arguments[0]instanceof a))throw"1st argument is not instance of RTCPeerConnection.";d=arguments[0],arguments[1]instanceof MediaStreamTrack&&(t=arguments[1],n=arguments[2],r=arguments[3]);var l=!1;function f(){p((function(t){if(t&&t.forEach){t.forEach((function(e){Object.keys(c).forEach((function(t){if("function"==typeof c[t])try{c[t](e)}catch(e){console.error(e.message,e.stack,e)}}))}));try{-1!==d.iceConnectionState.search(/failed|closed|disconnected/gi)&&(l=!0)}catch(e){l=!0}!0===l&&(s.datachannel&&(s.datachannel.state="close"),s.ended=!0),s.results=t,s.audio&&s.video&&(s.bandwidth.speed=s.audio.bytesSent-s.bandwidth.helper.audioBytesSent+(s.video.bytesSent-s.bandwidth.helper.videoBytesSent),s.bandwidth.helper.audioBytesSent=s.audio.bytesSent,s.bandwidth.helper.videoBytesSent=s.video.bytesSent),n(s),l||null!=e(r)&&r&&setTimeout(f,r||1e3)}}))}function p(e){void 0!==window.InstallTrigger||u?d.getStats(window.mediaStreamTrack||null).then((function(t){var n=[];t.forEach((function(e){n.push(e)})),e(n)})).catch(e):d.getStats((function(t){var n=[];t.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)})),e(n)}))}c.datachannel=function(e){"datachannel"===e.type&&(s.datachannel={state:e.state})},c.googCertificate=function(e){"googCertificate"==e.type&&(s.encryption=e.googFingerprintAlgorithm),"certificate"==e.type&&(s.encryption=e.fingerprintAlgorithm)},c.checkAudioTracks=function(e){if("audio"===e.mediaType){var t=e.id.split("_").pop();if(!0===e.isRemote&&(t="recv"),!1===e.isRemote&&(t="send"),t){if(-1===s.audio[t].codecs.indexOf(e.googCodecName||"opus")&&s.audio[t].codecs.push(e.googCodecName||"opus"),e.bytesSent){var n=0;s.internal.audio[t].prevBytesSent||(s.internal.audio[t].prevBytesSent=e.bytesSent);var r=e.bytesSent-s.internal.audio[t].prevBytesSent;s.internal.audio[t].prevBytesSent=e.bytesSent,n=r/1024,s.audio[t].availableBandwidth=n.toFixed(1),s.audio.bytesSent=n.toFixed(1)}e.bytesReceived&&(n=0,s.internal.audio[t].prevBytesReceived||(s.internal.audio[t].prevBytesReceived=e.bytesReceived),r=e.bytesReceived-s.internal.audio[t].prevBytesReceived,s.internal.audio[t].prevBytesReceived=e.bytesReceived,n=r/1024,s.audio.bytesReceived=n.toFixed(1)),e.googTrackId&&-1===s.audio[t].tracks.indexOf(e.googTrackId)&&s.audio[t].tracks.push(e.googTrackId),e.googCurrentDelayMs&&(n=0,s.internal.audio.prevGoogCurrentDelayMs||(s.internal.audio.prevGoogCurrentDelayMs=e.googCurrentDelayMs),r=e.googCurrentDelayMs-s.internal.audio.prevGoogCurrentDelayMs,s.internal.audio.prevGoogCurrentDelayMs=e.googCurrentDelayMs,s.audio.latency=r.toFixed(1),s.audio.latency<0&&(s.audio.latency=0)),e.packetsLost&&(n=0,s.internal.audio.prevPacketsLost||(s.internal.audio.prevPacketsLost=e.packetsLost),r=e.packetsLost-s.internal.audio.prevPacketsLost,s.internal.audio.prevPacketsLost=e.packetsLost,s.audio.packetsLost=r.toFixed(1),s.audio.packetsLost<0&&(s.audio.packetsLost=0))}}},c.checkVideoTracks=function(e){if("video"===e.mediaType){var t=e.id.split("_").pop();if(!0===e.isRemote&&(t="recv"),!1===e.isRemote&&(t="send"),t){if(-1===s.video[t].codecs.indexOf(e.googCodecName||"VP8")&&s.video[t].codecs.push(e.googCodecName||"VP8"),e.bytesSent){var n=0;s.internal.video[t].prevBytesSent||(s.internal.video[t].prevBytesSent=e.bytesSent);var r=e.bytesSent-s.internal.video[t].prevBytesSent;s.internal.video[t].prevBytesSent=e.bytesSent,n=r/1024,s.video[t].availableBandwidth=n.toFixed(1),s.video.bytesSent=n.toFixed(1)}e.bytesReceived&&(n=0,s.internal.video[t].prevBytesReceived||(s.internal.video[t].prevBytesReceived=e.bytesReceived),r=e.bytesReceived-s.internal.video[t].prevBytesReceived,s.internal.video[t].prevBytesReceived=e.bytesReceived,n=r/1024,s.video.bytesReceived=n.toFixed(1)),e.googFrameHeightReceived&&e.googFrameWidthReceived&&(s.resolutions[t].width=e.googFrameWidthReceived,s.resolutions[t].height=e.googFrameHeightReceived),e.googFrameHeightSent&&e.googFrameWidthSent&&(s.resolutions[t].width=e.googFrameWidthSent,s.resolutions[t].height=e.googFrameHeightSent),e.googTrackId&&-1===s.video[t].tracks.indexOf(e.googTrackId)&&s.video[t].tracks.push(e.googTrackId),e.framerateMean&&(s.bandwidth.framerateMean=e.framerateMean,n=0,s.internal.video[t].prevFramerateMean||(s.internal.video[t].prevFramerateMean=e.bitrateMean),r=e.bytesSent-s.internal.video[t].prevFramerateMean,s.internal.video[t].prevFramerateMean=e.framerateMean,n=r/1024,s.video[t].framerateMean=r.toFixed(1)),e.bitrateMean&&(s.bandwidth.bitrateMean=e.bitrateMean,n=0,s.internal.video[t].prevBitrateMean||(s.internal.video[t].prevBitrateMean=e.bitrateMean),r=e.bytesSent-s.internal.video[t].prevBitrateMean,s.internal.video[t].prevBitrateMean=e.bitrateMean,n=r/1024,s.video[t].bitrateMean=r.toFixed(1)),e.googCurrentDelayMs&&(n=0,s.internal.video.prevGoogCurrentDelayMs||(s.internal.video.prevGoogCurrentDelayMs=e.googCurrentDelayMs),r=e.googCurrentDelayMs-s.internal.video.prevGoogCurrentDelayMs,s.internal.video.prevGoogCurrentDelayMs=e.googCurrentDelayMs,s.video.latency=r.toFixed(1),s.video.latency<0&&(s.video.latency=0)),e.packetsLost&&(n=0,s.internal.video.prevPacketsLost||(s.internal.video.prevPacketsLost=e.packetsLost),r=e.packetsLost-s.internal.video.prevPacketsLost,s.internal.video.prevPacketsLost=e.packetsLost,s.video.packetsLost=r.toFixed(1),s.video.packetsLost<0&&(s.video.packetsLost=0))}}},c.bweforvideo=function(e){"VideoBwe"===e.type&&(s.bandwidth.availableSendBandwidth=e.googAvailableSendBandwidth,s.bandwidth.googActualEncBitrate=e.googActualEncBitrate,s.bandwidth.googAvailableSendBandwidth=e.googAvailableSendBandwidth,s.bandwidth.googAvailableReceiveBandwidth=e.googAvailableReceiveBandwidth,s.bandwidth.googRetransmitBitrate=e.googRetransmitBitrate,s.bandwidth.googTargetEncBitrate=e.googTargetEncBitrate,s.bandwidth.googBucketDelay=e.googBucketDelay,s.bandwidth.googTransmitBitrate=e.googTransmitBitrate)},c.candidatePair=function(e){if("googCandidatePair"===e.type||"candidate-pair"===e.type||"local-candidate"===e.type||"remote-candidate"===e.type){if("true"==e.googActiveConnection&&(Object.keys(s.internal.candidates).forEach((function(t){var n=s.internal.candidates[t];-1!==n.ipAddress.indexOf(e.googLocalAddress)&&(s.connectionType.local.candidateType=n.candidateType,s.connectionType.local.ipAddress=n.ipAddress,s.connectionType.local.networkType=n.networkType,s.connectionType.local.transport=n.transport),-1!==n.ipAddress.indexOf(e.googRemoteAddress)&&(s.connectionType.remote.candidateType=n.candidateType,s.connectionType.remote.ipAddress=n.ipAddress,s.connectionType.remote.networkType=n.networkType,s.connectionType.remote.transport=n.transport)})),s.connectionType.transport=e.googTransportType,(t=s.internal.candidates[e.localCandidateId])&&t.ipAddress&&(s.connectionType.systemIpAddress=t.ipAddress),(n=s.internal.candidates[e.remoteCandidateId])&&n.ipAddress&&(s.connectionType.systemIpAddress=n.ipAddress)),"candidate-pair"===e.type&&!0===e.selected&&!0===e.nominated&&"succeeded"===e.state)var t=s.internal.candidates[e.remoteCandidateId],n=s.internal.candidates[e.remoteCandidateId];if("local-candidate"===e.type&&(s.connectionType.local.candidateType=e.candidateType,s.connectionType.local.ipAddress=e.ipAddress,s.connectionType.local.networkType=e.networkType,s.connectionType.local.transport=e.mozLocalTransport||e.transport),"remote-candidate"===e.type&&(s.connectionType.remote.candidateType=e.candidateType,s.connectionType.remote.ipAddress=e.ipAddress,s.connectionType.remote.networkType=e.networkType,s.connectionType.remote.transport=e.mozRemoteTransport||e.transport),u){var r=e.localCandidateId?"send":"recv";if(!r)return;if(e.bytesSent){var o=0;s.internal.video[r].prevBytesSent||(s.internal.video[r].prevBytesSent=e.bytesSent);var i=e.bytesSent-s.internal.video[r].prevBytesSent;s.internal.video[r].prevBytesSent=e.bytesSent,o=i/1024,s.video[r].availableBandwidth=o.toFixed(1),s.video.bytesSent=o.toFixed(1)}e.bytesReceived&&(o=0,s.internal.video[r].prevBytesReceived||(s.internal.video[r].prevBytesReceived=e.bytesReceived),i=e.bytesReceived-s.internal.video[r].prevBytesReceived,s.internal.video[r].prevBytesReceived=e.bytesReceived,o=i/1024,s.video.bytesReceived=o.toFixed(1)),e.availableOutgoingBitrate&&(o=0,s.internal.video[r].prevAvailableOutgoingBitrate||(s.internal.video[r].prevAvailableOutgoingBitrate=e.availableOutgoingBitrate),i=e.availableOutgoingBitrate-s.internal.video[r].prevAvailableOutgoingBitrate,s.internal.video[r].prevAvailableOutgoingBitrate=e.availableOutgoingBitrate,o=i/1024,s.video.availableOutgoingBitrate=o.toFixed(1)),e.availableIncomingBitrate&&(o=0,s.internal.video[r].prevAvailableIncomingBitrate||(s.internal.video[r].prevAvailableIncomingBitrate=e.availableIncomingBitrate),i=e.availableIncomingBitrate-s.internal.video[r].prevAvailableIncomingBitrate,s.internal.video[r].prevAvailableIncomingBitrate=e.availableIncomingBitrate,o=i/1024,s.video.availableIncomingBitrate=o.toFixed(1))}}};var h={},m={},y={},g={};c.localcandidate=function(e){"localcandidate"!==e.type&&"local-candidate"!==e.type||e.id&&(h[e.id]||(h[e.id]=[]),m[e.id]||(m[e.id]=[]),y[e.id]||(y[e.id]=[]),g[e.id]||(g[e.id]=[]),e.candidateType&&-1===h[e.id].indexOf(e.candidateType)&&h[e.id].push(e.candidateType),e.transport&&-1===m[e.id].indexOf(e.transport)&&m[e.id].push(e.transport),e.ipAddress&&-1===y[e.id].indexOf(e.ipAddress+":"+e.portNumber)&&y[e.id].push(e.ipAddress+":"+e.portNumber),e.networkType&&-1===g[e.id].indexOf(e.networkType)&&g[e.id].push(e.networkType),s.internal.candidates[e.id]={candidateType:h[e.id],ipAddress:y[e.id],portNumber:e.portNumber,networkType:g[e.id],priority:e.priority,transport:m[e.id],timestamp:e.timestamp,id:e.id,type:e.type},s.connectionType.local.candidateType=h[e.id],s.connectionType.local.ipAddress=y[e.id],s.connectionType.local.networkType=g[e.id],s.connectionType.local.transport=m[e.id])};var b={},_={},w={},C={};c.remotecandidate=function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||e.id&&(b[e.id]||(b[e.id]=[]),_[e.id]||(_[e.id]=[]),w[e.id]||(w[e.id]=[]),C[e.id]||(C[e.id]=[]),e.candidateType&&-1===b[e.id].indexOf(e.candidateType)&&b[e.id].push(e.candidateType),e.transport&&-1===_[e.id].indexOf(e.transport)&&_[e.id].push(e.transport),e.ipAddress&&-1===w[e.id].indexOf(e.ipAddress+":"+e.portNumber)&&w[e.id].push(e.ipAddress+":"+e.portNumber),e.networkType&&-1===C[e.id].indexOf(e.networkType)&&C[e.id].push(e.networkType),s.internal.candidates[e.id]={candidateType:b[e.id],ipAddress:w[e.id],portNumber:e.portNumber,networkType:C[e.id],priority:e.priority,transport:_[e.id],timestamp:e.timestamp,id:e.id,type:e.type},s.connectionType.remote.candidateType=b[e.id],s.connectionType.remote.ipAddress=w[e.id],s.connectionType.remote.networkType=C[e.id],s.connectionType.remote.transport=_[e.id])},c.dataSentReceived=function(e){!e.googCodecName||"video"!==e.mediaType&&"audio"!==e.mediaType||(e.bytesSent&&(s[e.mediaType].bytesSent=parseInt(e.bytesSent)),e.bytesReceived&&(s[e.mediaType].bytesReceived=parseInt(e.bytesReceived)))},c.inboundrtp=function(e){if(u&&"inbound-rtp"===e.type){var t=e.mediaType||"audio",n=e.isRemote?"recv":"send";if(n){if(e.bytesSent){var r=0;s.internal[t][n].prevBytesSent||(s.internal[t][n].prevBytesSent=e.bytesSent);var o=e.bytesSent-s.internal[t][n].prevBytesSent;s.internal[t][n].prevBytesSent=e.bytesSent,r=o/1024,s[t][n].availableBandwidth=r.toFixed(1),s[t].bytesSent=r.toFixed(1)}e.bytesReceived&&(r=0,s.internal[t][n].prevBytesReceived||(s.internal[t][n].prevBytesReceived=e.bytesReceived),o=e.bytesReceived-s.internal[t][n].prevBytesReceived,s.internal[t][n].prevBytesReceived=e.bytesReceived,r=o/1024,s[t].bytesReceived=r.toFixed(1))}}},c.outboundrtp=function(e){if(u&&"outbound-rtp"===e.type){var t=e.mediaType||"audio",n=e.isRemote?"recv":"send";if(n){if(e.bytesSent){var r=0;s.internal[t][n].prevBytesSent||(s.internal[t][n].prevBytesSent=e.bytesSent);var o=e.bytesSent-s.internal[t][n].prevBytesSent;s.internal[t][n].prevBytesSent=e.bytesSent,r=o/1024,s[t][n].availableBandwidth=r.toFixed(1),s[t].bytesSent=r.toFixed(1)}e.bytesReceived&&(r=0,s.internal[t][n].prevBytesReceived||(s.internal[t][n].prevBytesReceived=e.bytesReceived),o=e.bytesReceived-s.internal[t][n].prevBytesReceived,s.internal[t][n].prevBytesReceived=e.bytesReceived,r=o/1024,s[t].bytesReceived=r.toFixed(1))}}},c.track=function(e){if(u&&"track"===e.type){var t=!0===e.remoteSource?"send":"recv";e.frameWidth&&e.frameHeight&&(s.resolutions[t].width=e.frameWidth,s.resolutions[t].height=e.frameHeight)}};var k={audio:{send:[],recv:[]},video:{send:[],recv:[]}};c.ssrc=function(e){if(e.googCodecName&&("video"===e.mediaType||"audio"===e.mediaType)&&"ssrc"===e.type){var t=e.id.split("_").pop();-1===k[e.mediaType][t].indexOf(e.ssrc)&&k[e.mediaType][t].push(e.ssrc),s[e.mediaType][t].streams=k[e.mediaType][t].length}},f()};const nn=(e,t,n)=>((e,t,n,r,o)=>{const i=-1!==n?n:e.length;for(let n=t;n<i;++n)if(0===e[n].indexOf(r)&&(!o||-1!==e[n].toLowerCase().indexOf(o.toLowerCase())))return n;return null})(e,0,-1,t,n),rn=e=>{const t=new RegExp("a=rtpmap:(\\d+) \\w+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null},on=(e,t,n)=>((e,t,n)=>{if(navigator.mozGetUserMedia||!t)return e;if(n&&(t.screen?t.screen<300&&console.warn("\n        It seems that you are using wrong bandwidth value for screen.\n        Screen sharing is expected to fail.\n      "):console.warn("\n        It seems that you are not using bandwidth for screen.\n        Screen sharing is expected to fail.\n    ")),t.screen&&n&&(e=(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")).replace(/a=mid:video\r\n/g,`a=mid:video\r\nb=AS:${t.screen}\r\n`)),(t.audio||t.video||t.data)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,"")),t.audio&&(e=e.replace(/a=mid:audio\r\n/g,`a=mid:audio\r\nb=AS:${t.audio}\r\n`)),t.video){const r=/a=mid:video\r\n/g;e=e.replace(r,`\n      a=mid:video\n      b=AS:${n?t.screen:t.video}\n    `)}return e})(e,t,n),an=(e,t)=>((e,t)=>{const n=(t=t||{}).min,r=t.max,o=t.codec.toUpperCase()||"VP8",i=e.split("\r\n"),a=nn(i,"a=rtpmap",`${o}/90000`);let s;if(a&&(s=rn(i[a])),!s)return e;const c=nn(i,"a=rtpmap","rtx/90000");let u;if(c&&(u=rn(i[c])),!c)return e;const d=nn(i,`a=fmtp:${u.toString()}`);if(null!=d){let t="\r\n";t+=`a=fmtp:${s} x-google-min-bitrate=${n||"228"}; x-google-max-bitrate=${r||"228"}`,i[d]=i[d].concat(t),e=i.join("\r\n")}return e})(e,t),sn=(e,t)=>((e,t)=>{t=t||{};const n=e.split("\r\n"),r=nn(n,"a=rtpmap","opus/48000");let o;if(r&&(o=rn(n[r])),!o)return e;const i=nn(n,`a=fmtp:${o.toString()}`);if(null==i)return e;let a="";return a+=`; stereo=${void 0!==t.stereo?t.stereo:"1"}`,a+=`; sprop-stereo=${void 0!==t["sprop-stereo"]?t["sprop-stereo"]:"1"}`,void 0!==t.maxaveragebitrate&&(a+=`; maxaveragebitrate=${t.maxaveragebitrate||1048576}`),void 0!==t.maxplaybackrate&&(a+=`; maxplaybackrate=${t.maxplaybackrate||1048576}`),void 0!==t.cbr&&(a+=`; cbr=${void 0!==t.cbr?t.cbr:"1"}`),void 0!==t.useinbandfec&&(a+=`; useinbandfec=${t.useinbandfec}`),void 0!==t.usedtx&&(a+=`; usedtx=${t.usedtx}`),void 0!==t.maxptime&&(a+=`\r\na=maxptime:${t.maxptime}`),n[i]=n[i].concat(a),n.join("\r\n")})(e,t),cn=e=>{const t={screen:300,audio:256,video:500,minVideo:128,maxVideo:2048,videoCodec:clientVars.webrtc.video.codec};return e=on(e,t,!1),e=an(e,{min:t.minVideo,max:t.maxVideo,codec:t.videoCodec}),e=((e,t)=>{const n=(e=>{const t={};return e.split("\n").forEach((e=>{0===e.indexOf("m=video")&&(t.videoCodecNumbers=[],e.split("SAVPF")[1].split(" ").forEach((n=>{(n=n.trim())&&n.length&&(t.videoCodecNumbers.push(n),t.videoCodecNumbersOriginal=e)}))),-1===e.indexOf("VP8/90000")||t.vp8LineNumber||(t.vp8LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("VP9/90000")||t.vp9LineNumber||(t.vp9LineNumber=e.replace("a=rtpmap:","").split(" ")[0]),-1===e.indexOf("H264/90000")||t.h264LineNumber||(t.h264LineNumber=e.replace("a=rtpmap:","").split(" ")[0])})),t})(e);return t=t.toLowerCase(),n.videoCodecNumbers?("vp8"===t&&n.vp8LineNumber===n.videoCodecNumbers[0]||"vp9"===t&&n.vp9LineNumber===n.videoCodecNumbers[0]||"h264"===t&&n.h264LineNumber===n.videoCodecNumbers[0]||(e=((e,t,n,r)=>{let o="";if("vp8"===t){if(!n.vp8LineNumber)return e;o=n.vp8LineNumber}if("vp9"===t){if(!n.vp9LineNumber)return e;o=n.vp9LineNumber}if("h264"===t){if(!n.h264LineNumber)return e;o=n.h264LineNumber}let i=`${n.videoCodecNumbersOriginal.split("SAVPF")[0]}SAVPF `,a=[o];return r&&(a=[]),n.videoCodecNumbers.forEach((e=>{e!==o&&a.push(e)})),i+=a.join(" "),e.replace(n.videoCodecNumbersOriginal,i)})(e,t,n)),e):e})(e=sn(e),t.videoCodec)};var un=(()=>{let e=0;const t={large:"260px",small:"160px"},n={},r={optional:[{DtlsSrtpKeyAgreement:!0}]},o={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},i={},a={},s=new Set;let c=null,u=null,d=null;const l={postAceInit:(e,r,o,i)=>{if(u=i,d=o,!clientVars.webrtc)throw new Error("[wrtc]: webrtc settings not found");n.iceServers=clientVars.webrtc.iceServers,clientVars.webrtc.video.sizes.large&&(t.large=`${clientVars.webrtc.video.sizes.large}px`),clientVars.webrtc.video.sizes.small&&(t.small=`${clientVars.webrtc.video.sizes.small}px`),l._pad=r.pad||window.pad,$(document).on("change",".select.audioSource select",l.audioVideoInputChange),$(document).on("change",".select.videoSource select",l.audioVideoInputChange),$(document).on("change",".select.audioOutputSec select",l.changeAudioDestination),$(window).on("unload",(()=>{console.info("[wrtc]: window unloaded, now hangupAll"),l.hangupAll()})),d.on("RTC_MESSAGE",(e=>{const t=e.data.payload;t.to===wn()&&t.data.headerId===window.headerId&&l.receiveMessage(e.data.payload)}))},appendVideoModalToBody:()=>{const e=$("#wrtcVideoModal").tmpl({videoChatLimit:clientVars.webrtc.videoChatLimit,headerId:""});$("body").prepend(e),$(document).on("click","#wrtc_modal .btn_toggle_modal",(function(){const e=$(this).parent().parent(),t=$(this).attr("data-action"),n=$("#wrtc_modal .videoWrapper").innerHeight();$(this).find(".fa_arrow-from-top").toggle(),$(this).find(".fa_arrow-to-top").toggle(),"collapse"===t?($(this).attr({"data-action":"expand"}),e.find(".btn_enlarge").removeAttr("active"),$("#wrtc_modal").css({transform:`translate(-50%, -${n}px)`})):($(this).attr({"data-action":"collapse"}),e.find(".btn_enlarge").attr({active:!0}),$("#wrtc_modal").css({transform:"translate(-50%, 0)"}))})),$(document).on("click","#wrtc_settings .btn_info",(function(){const e=Object.keys(a),t=$(this),n=t.attr("data-active"),r=$(document).find("#wrtc_settings .wrtc_info");if(n)return r.hide(),a[e[0]]&&tn(a[e[0]],(e=>{e.nomore()})),t.removeAttr("data-active"),!0;t.attr({"data-active":!0}),r.show(),a[e[0]]&&!n&&a[e[0]]})),$(document).on("click","#wrtc_settings .btn_close",(()=>{$("#wrtc_settings").toggleClass("active");const e=$("#wrtc_settings .btn_info");e.attr("data-active")&&e.trigger("click")}))},userLeave:(e,t,n)=>{(e=e||t.userInfo.userId)&&a[e]&&(l.hide(e),l.hangup(e,!0)),xn.userInRoom=!1,n&&n()},handleClientMessage_RTC_MESSAGE:(e,t)=>{t.payload.data.headerId===window.headerId&&l.receiveMessage(t.payload)},show:()=>{$("#pad_title").addClass("f_wrtcActive"),yn.mediaDevices()},showUserMediaError:(e,t,n)=>{let r;switch(console.error(`[wrtc]: mediaError, ${e}`),e.name){case"CustomNotSupportedError":r='Sorry, your browser does not support WebRTC. (or you have it disabled in your settings).<br><br>To participate in this audio/video chat you have to user a browser with WebRTC support like Chrome, Firefox or Opera.<a href="http://www.webrtc.org/" target="_new">Find out more</a>',l.sendErrorStat("NotSupported");break;case"CustomSecureConnectionError":r="Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC",l.sendErrorStat("SecureConnection");break;case"NotAllowedError":"https:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname?(r="Sorry, you need to give us permission to use your camera and microphone",l.sendErrorStat("Permission")):(r="Sorry, you need to install SSL certificates for your Etherpad instance to use WebRTC",l.sendErrorStat("SecureConnection"));break;case"NotFoundError":r="Sorry, we couldn't find a suitable camera on your device. If you have a camera, make sure it set up correctly and refresh this website to retry.",l.sendErrorStat("NotFound");break;case"NotReadableError":r=`Sorry, a hardware error occurred that prevented access to your camera and/or microphone:<br><br>${e.message}`,l.sendErrorStat("Hardware");break;case"AbortError":r=`Sorry, an error occurred (probably not hardware related) that prevented access to your camera and/or microphone:<br><br>${e.message}`,l.sendErrorStat("Abort");break;default:r=`Sorry, there was an unknown Error:<br><br>${e}`,l.sendErrorStat("Unknown")}$.gritter.add({title:"Error",text:`${r}; try again!`,time:4e3,sticky:!1,class_name:"error"}),t=t||clientVars.userId,n=n||window.headerId,yn.userLeave(n,{headerId:n,padId:u,userId:t})},hide:e=>{if(!e)return!1;e=e.split(".")[1],$("#rtcbox").find(`#video_a_${e}`).parent().remove()},activate:e=>{l.show(),l.hangupAll(),l.getUserMedia(e),xn.userInRoom=!0},deactivate:async(e,t)=>{if(!e)return!1;l.hide(e),l.hangupAll(t),l.hangup(e,!0,t),xn.localstream&&await Cn(),xn.userInRoom=!1},toggleMuted:()=>{const e=xn.localstream.getAudioTracks()[0];return!e||(e.enabled=!e.enabled,!e.enabled)},toggleVideo:()=>{const e=xn.localstream.getVideoTracks()[0];if(e)return e.enabled=!e.enabled,!e.enabled},setStream:(e,n)=>{if(!e)return!1;const r=e===wn(),o=`video_${e.replace(/\./g,"_")}`;let i=$(`#${o}`)[0];const a=kn(e);if(!i&&n){const n=$("<div class='video-container'>").css({width:t.small,"max-height":t.small}).appendTo($("#wrtc_modal .videoWrapper")),s=a.name||"anonymous";n.append($('<div class="user-name">').text(s)),i=$("<video playsinline>").attr("id",o).css({"border-color":a.colorId,width:t.small,"max-height":t.small}).on({loadedmetadata:()=>{l.addInterface(e)}}).appendTo(n)[0],i.autoplay=!0,r&&(n.addClass("local-user"),i.muted=!0),l.addInterface(e)}n?((e,t)=>{void 0!==e.srcObject?e.srcObject=t:void 0!==e.mozSrcObject?e.mozSrcObject=t:void 0!==e.src?e.src=URL.createObjectURL(t):console.error("Error attaching stream to element.",e)})(i,n):i&&$(i).parent().remove()},addInterface:e=>{if(!e)return!1;const n=e===wn(),r=`video_${e.replace(/\./g,"_")}`,o=$(`#${r}`),i=$("<span class='interface-btn audio-btn buttonicon'>").attr("title","Mute").on({click:()=>{let e;n?e=l.toggleMuted():(o[0].muted=!o[0].muted,e=o[0].muted),i.attr("title",e?"Unmute":"Mute").toggleClass("muted",e)}});let a,u=!0;n&&(a=$("<span class='interface-btn video-btn buttonicon'>").attr("title","Disable video").on("click",(function(){l.toggleVideo(),u=!u;const e=u?"Disable video":"Enable video";$(this).attr("title",e).toggleClass("off",!u)})));let d=!1;const f=$("<span class='interface-btn enlarge-btn buttonicon'>").attr("title","Make video larger").on("click",(function(){d=!d,d?s.add(e):s.delete(e);const n=d?"Make video smaller":"Make video larger";$(this).attr("title",n).toggleClass("large",d);const r=$(document).find("#wrtc_modal .ndbtn.btn_enlarge").hasClass("large")?t.large:t.small;o.parent().css({width:r,"max-height":r}),o.css({width:r,"max-height":r})}));$(document).find("#wrtc_modal .ndbtn.btn_enlarge").hasClass("large")&&(o.parent().css({width:t.large,"max-height":t.large}),o.css({width:t.large,"max-height":t.large})),n&&(c=o);const p=$("<div class='latency'></div>");$(`#interface_${r}`).remove(),$("<div class='interface-container'>").attr("id",`interface_${r}`).append(i).append(a).append(f).append(p).insertAfter(o),l.changeAudioDestination()},sendErrorStat:e=>{const t={component:"pad",type:"STATS",data:{statName:e,type:"RTC_MESSAGE"}};d.emit("acceptNewCall",u,window.headerId),d.emit("message",t)},sendMessage:(e,t,n)=>{d.emit("RTC_MESSAGE",{type:"RTC_MESSAGE",payload:{data:t,to:e,padId:u,from:wn(),socket:{from:d.id,to:n}}},(e=>{}))},receiveMessage:e=>{const t=e.from,n=e.data,r=n.type;if(t!==wn())if("hangup"===r)l.hangup(t,!0);else if("offer"===r){a[t]?(l.hangup(t,!0),l.createPeerConnection(t,n.headerId)):l.createPeerConnection(t,n.headerId),xn.localstream&&(a[t].getLocalStreams?a[t].getLocalStreams().length||xn.localstream.getTracks().forEach((e=>{a[t].addTrack(e,xn.localstream)})):a[t].localStreams&&(a[t].localStreams.length||xn.localstream.getTracks().forEach((e=>{a[t].addTrack(e,xn.localstream)}))));const e=new RTCSessionDescription(n.offer);a[t].setRemoteDescription(e,(()=>{a[t].createAnswer((e=>{e.sdp=cn(e.sdp),a[t].setLocalDescription(e,(()=>{l.sendMessage(t,{type:"answer",answer:e,headerId:n.headerId})}),f)}),f,o)}),f)}else if("answer"===r){if(a[t]){const e=new RTCSessionDescription(n.answer);a[t].setRemoteDescription(e,(()=>{}),f)}}else if("icecandidate"===r){if(a[t]){const e=new RTCIceCandidate(n.candidate),r=a[t].addIceCandidate(e);r&&r.then((()=>{})).catch((()=>{console.error("[wrtc]: Failure during addIceCandidate()",n)}))}}else console.error("[wrtc]: unknown message",n)},hangupAll:e=>{Object.keys(a).forEach((t=>{l.hangup(t,!0,e)}))},hangup:(e,t=!1,n)=>{t=!!e||t,a[e]&&e!==wn()&&(l.setStream(e,""),a[e].close(),delete a[e],t&&l.sendMessage(e,{type:"hangup",headerId:n}))},call:(e,t)=>{if(!xn.localstream)return;let n={optional:[],mandatory:{}};for(const e in n.mandatory)-1!==e.indexOf("Moz")&&delete n.mandatory[e];n=((e,t)=>{const n=e;for(const e in t.mandatory)n.mandatory[e]=t.mandatory[e];return n.optional.concat(t.optional),n})(n,o),a[e]||l.createPeerConnection(e,t),xn.localstream.getTracks().forEach((t=>{a[e].addTrack(t,xn.localstream)})),a[e].createOffer((n=>{n.sdp=cn(n.sdp),a[e].setLocalDescription(n,(()=>{l.sendMessage(e,{type:"offer",offer:n,headerId:t})}),f)}),f,n)},createPeerConnection:(t,o)=>{a[t]&&console.warn("WARNING creating PC connection even though one exists",t),a[t]=new RTCPeerConnection(n,r),a[t].onicecandidate=n=>{n.candidate?l.sendMessage(t,{type:"icecandidate",headerId:o,candidate:n.candidate}):(e=0,d.emit("acceptNewCall",u,window.headerId))},a[t].oniceconnectionstatechange=()=>{console.info("[wrtc]: ICE state: ",a[t],a[t].iceConnectionState)},a[t].ontrack=e=>{console.info(e,"ontrack"),i[t]=e.streams[0],l.setStream(t,e.streams[0])},a[t].onremovestream=()=>{l.setStream(t,"")}},audioVideoInputChange:async()=>{await Cn(),l.getUserMedia(window.headerId)},attachSinkId:(e,t)=>{e&&e[0]&&void 0!==e[0].sinkId?e[0].setSinkId(t).then((()=>{})).catch((e=>{let t=e;"SecurityError"===e.name&&(t=`\n                You need to use HTTPS for selecting audio output device: ${e}\n              `),console.error(t),null.selectedIndex=0})):(console.warn("Browser does not support output device selection."),$(document).find(".select.audioOutputSec").hide())},changeAudioDestination:()=>{const e=document.querySelector(".select.audioOutputSec select");if(!e)return;const t=e.value,n=c;l.attachSinkId(n,t)},getUserMedia:async e=>{$("#wrtc_modal #networkError").removeClass("active").hide();const t=await yn.isUserMediaAvailable().catch((async t=>{console.error(t),En.emit("enable room buttons",e,"LEAVE","VIDEO"),En.emit("componentsFlow","video","open",!1),await Cn(),un.showUserMediaError(t,wn(),e)}));xn.localstream=t,l.setStream(wn(),t),l._pad.collabClient.getConnectedUsers().forEach((t=>{t.userId!==wn()&&(a[t.userId]&&l.hangup(t.userId,!1,e),l.call(t.userId,e))}))},attemptToReconnect:()=>{if(e++,console.info("[wrtc]: Try reconnecting",e,60),60<=e)throw d.emit("acceptNewCall",u,window.headerId),new Error("[wrtc]: please reload the video chat and try again to connect!");var t,n;setTimeout((()=>{console.info("[wrtc]: reconnecting..."),l.getUserMedia(window.headerId)}),(t=200,n=1e3,Math.floor(Math.random()*(n-t+1)+t)))}},f=e=>{l.attemptToReconnect(),console.error("[wrtc]: LogError:",e),$("#wrtc_modal #networkError").show().addClass("active").text(`[wrtc]: Error: ${e} ,Reload the session.`)};return l.pc=a,l})();let dn=null,ln=null,fn={},pn=0,hn=null,vn=null;const mn={startTime:0,latency:0,LMin:0,LMax:0,avg:0,LineAvg:[],colors:{normal:"#fff",warning:"#ffcc00",danger:"#cc3300"},interavCheck:1e3};var yn=(()=>{const e=(e,t,n)=>!!(e&&e.present<=pn)||((t=t||!0)&&!n&&$.gritter.add({title:"Video chat Limitation",text:`\n          The video chat room has reached its limit. \r\n\n          The size of this video chat room is ${pn}.\n          (If this seems wrong, please share the problem with the support team.)\n        `,sticky:!1,class_name:"error",time:"5000"}),!1),t=(e,t)=>{if(!e||!e.userId)return!1;const n=e.headerId,r=kn(e.userId);if(!r)return!0;const o=t.present;if($(`.header_videochat_icon[data-id='${n}'] .icon .userCount`).text(o),0===o&&$(`.header_videochat_icon[data-id='${n}'] .icon .userCount`).text(""),$(`.header_videochat_icon[data-id='${n}'] .icon`).addClass("active"),e.userId===clientVars.userId){window.headerId=e.headerId,vn=setInterval((()=>{mn.startTime=Date.now(),dn.emit("pingil",ln,window.headerId,wn(),mn.avg)}),mn.interavCheck);const o=Rn(n).$inlineIcon();o&&o.querySelector(".btn_roomHandler").classList.add("active"),un.activate(e.headerId,r.userId),$("#wrtc_modal").css({transform:"translate(-50%, 0)",opacity:1}).attr({"data-active":!0}),En.emit("enable room buttons",n,"JOIN",hn),En.emit("componentsFlow","video","open",!0),fn.userId||1!==t.present||dn.emit("acceptNewCall",ln,window.headerId),fn=e,En.emit("updateWrtcToolbarModal",n,t)}En.emit("update store",e,n,"JOIN","VIDEO",t)},n=async(n,r,o=!0,i=!1)=>(console.info("[wrtc]: gateway user joining,",n,r,o),n?n&&e(r,o,i)||i?t(n,r):(await Cn(),!1):e(null,!1,!1)),r=()=>clearInterval(vn),o=(e,t,n)=>{(async(e,t,n)=>{if(!e||!t||!e.userId)return!1;const o=e.headerId,i=t.present;if($(`.header_videochat_icon[data-id='${o}'] .icon .userCount`).text(i),0===i&&$(`.header_videochat_icon[data-id='${o}'] .icon .userCount`).text(""),e.userId===clientVars.userId){Tn().find(`#wrtcVideoIcons #${o}`).removeClass("active"),un.deactivate(e.userId,e.headerId),r(),window.headerId=null;const t=Rn(o).$inlineIcon();t&&t.querySelector(".btn_roomHandler").classList.remove("active"),fn={},$("#wrtc_modal").css({transform:"translate(-50%, -100%)",opacity:0}).attr({"data-active":!1}),En.emit("componentsFlow","video","open",!1),await Cn(),dn.removeListener(`receiveTextMessage:${e.headerId}`)}n&&"function"==typeof n&&n(),En.emit("update store",e,o,"LEAVE","VIDEO",t),En.emit("enable room buttons",o,"LEAVE",hn),un.userLeave(e.userId)})(e,t,n)},i=async(e,t,r)=>{Tn().find("button.btn_joinChat_chatRoom").removeClass("active"),hn=r;const i=window.pad.collabClient.getConnectedUsers().map((e=>e.userId));if(!fn.userId)return dn.emit("userJoin",ln,i,t,"video",n);dn.emit("userLeave",ln,fn,"video",((e,r)=>{o(e,r,(()=>{dn.emit("userJoin",ln,i,t,"video",n)}))}))};return{postAceInit:(e,t,n,r)=>{dn=n,ln=r,pn=2e3,En.emit("componentsFlow","video","init",!0),dn.on("userLatency",(e=>{if(wn()!==e.userId){const t=`interface_video_${e.userId.replace(/\./g,"_")}`;let n=mn.colors.normal;e.latency>200&&e.latency<300&&(n=mn.colors.warning),e.latency>300&&(n=mn.colors.danger),$(document).find(`#${t} .latency`).css({color:n}).text(`${Math.ceil(e.latency)}ms`)}})),dn.on("pongol",(e=>{mn.latency=Date.now()-mn.startTime,mn.LMin<=mn.latency&&mn.latency>=mn.LMax?mn.LMax=mn.latency:mn.LMin=mn.latency,mn.LineAvg.length<4?mn.LineAvg.push((mn.LMax+mn.LMin)/2):(mn.avg=mn.LineAvg.reduce(((e,t)=>e+t))/mn.LineAvg.length,mn.LineAvg=[],mn.LMax=0);let t=mn.colors.normal;mn.avg>200&&mn.avg<300&&(t=mn.colors.warning),mn.avg>300&&(t=mn.colors.danger),$(document).find(".video-container.local-user .latency").css({color:t}).text(`${Math.ceil(mn.avg)}ms`)})),dn.on("reloadVideoSession",(e=>{if(fn.headerId!==e)return!1;const t="PLUS",n={padId:clientVars.padId||window.pad.getPadId(),userId:clientVars.userId||window.pad.getUserId(),userName:clientVars.userName||"anonymous",headerId:e,target:t,action:"JOIN"};En.emit("disable room buttons",e,"JOIN",t),i(0,n,t)}))},userJoin:(e,t,n)=>t&&t.userId?fn&&fn.headerId===e?(En.emit("enable room buttons",e,"LEAVE",hn),!1):void i(0,t,n):(En.emit("enable room buttons",e,"LEAVE",hn),!1),userLeave:(e,t,n)=>{hn=n,dn.emit("userLeave",ln,t,"video",o)},gatewayUserJoin:n,gatewayUserLeave:o,reloadSession:(e,t,n)=>{if(!t||!t.userId)return En.emit("enable room buttons",e,"LEAVE",hn),!1;dn.emit("reloadVideoSession",ln,e)},reloadCurrentSession:(e,t,n)=>{if(!t||!t.userId)return En.emit("enable room buttons",e,"LEAVE",hn),!1;i(0,t,n)},mediaDevices:()=>{navigator.mediaDevices.enumerateDevices().then((e=>{const t=localStorage.getItem("videoSettings"),{microphone:n,speaker:r,camera:o}=JSON.parse(t),i=document.querySelector(".select.audioSource select"),a=document.querySelector(".select.audioOutputSec select"),s=document.querySelector(".select.videoSource select"),c=document.createElement("select"),u=document.createElement("select"),d=document.createElement("select");for(const t of e){const e=document.createElement("option"),{deviceId:l,label:f,kind:p}=t;e.value=l,"audioinput"===p?(e.text=f||`microphone ${i?i.length+1:"1"}`,n===l&&(e.selected=!0),c.appendChild(e)):"audiooutput"===p?(e.text=f||`speaker ${a?a.length+1:"1"}`,r===l&&(e.selected=!0),u.appendChild(e)):"videoinput"===p&&(e.text=f||`camera ${s?s.length+1:"1"}`,o===l&&(e.selected=!0),d.appendChild(e))}$(i).remove(),$(a).remove(),$(s).remove(),$(".select.audioSource").append(c),$(".select.audioOutputSec").append(u),$(".select.videoSource").append(d)}))},isUserMediaAvailable:()=>{const e=document.querySelector("#wrtc_settings .select.audioSource"),t=document.querySelector("#wrtc_settings .select.audioOutputSec"),n=document.querySelector("#wrtc_settings .select.videoSource"),r=e?e.value:void 0,o=n?n.value:void 0,i=t?t.value:void 0,a={audio:!0,video:{width:320,height:240,frameRate:{ideal:15,max:30},facingMode:"user"}};r&&(a.audio.deviceId={exact:r}),o&&(a.video.deviceId={exact:o});const s={microphone:r,speaker:i,camera:o};return localStorage.setItem("videoSettings",JSON.stringify(s)),window.navigator.mediaDevices.getUserMedia(a)},catchBrowserError:(e,t)=>{fn={},$("#wrtc_modal").css({transform:"translate(-50%, -100%)",opacity:0}).attr({"data-active":!1}),En.emit("componentsFlow","video","open",!1),dn.removeListener(`receiveTextMessage:${t}`),un.deactivate(e,t),r(),window.headerId=null,En.emit("update store",{},t,"LEAVE","VIDEO",{}),En.emit("enable room buttons",t,"LEAVE","VIDEO"),un.userLeave(e),$(".header_videochat_icon .userCount").text("")}}})();const gn=e=>e?`/static/getUserProfileImage/${e}/${window.pad.getPadId()}?t=${(new Date).getTime()}`:"../static/plugins/ep_profile_modal/static/img/user.png",bn=["h1","h2","h3","h4"],_n=function(e=""){if(""===e)return"";let t=window.decodeURIComponent(e);return t=t.trim().replace(/\s/g,""),/^(:\/\/)/.test(t)?`http${t}`:/^(f|ht)tps?:\/\//i.test(t)?t:`http://${t}`},wn=()=>clientVars.userId||window.pad.getUserId(),Cn=e=>new Promise(((e,t)=>{const n=xn.localstream;n||e(),n.getTracks().forEach((e=>{e.stop(),n.removeTrack(e)})),xn.localstream=null,e()})),kn=e=>{const t={name:"anonymous",userId:e,colorId:"#FFF"};if(!window.pad||!window.pad.collabClient)return t;const n=window.pad.collabClient.getConnectedUsers().filter((t=>t.userId===e));return n.length>0?n[0]:t},Sn=e=>e.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),Tn=()=>$(document).find('iframe[name="ace_outer"]').contents(),Rn=e=>{const t=Tn().find("iframe").contents().find("#innerdocbody").find(`.heading.${e}`);return{exist:t.length,$el:t,text:t.text(),tag:t.attr("data-htag"),offset:{top:()=>In(t),left:()=>On(t)},$inlineIcon:()=>t.find("wrt-inline-icon").length?t.find("wrt-inline-icon")[0].shadowRoot:null}},En={events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(let n=0;n<this.events[e].length;n++)if(this.events[e][n]===t){this.events[e].splice(n,1);break}},emit:function(e){const t=arguments.length,n=Array(t>1?t-1:0);let r=1;for(r=1;r<t;r++)n[r-1]=arguments[r];this.events[e]&&this.events[e].forEach((e=>{e.apply(void 0,n)}))}},xn={enable:!0,epProfileState:!0,userInRoom:!1,currentOpenRoom:null,socketState:"CLOSED",socket:null,localstream:null,components:{video:{init:!1,open:!1},room:{init:!1,open:!1},wrtc:{init:!1,open:!1}},rooms:new Map,globalVar:{},staticVar:{webSocket:{DISCONNECTED:"DISCONNECTED",OPENED:"OPENED"}}};En.on("plugin enable",(e=>{Tn().find("iframe").contents().find("#innerdocbody").find(".heading wrt-inline-icon").each(((t,n)=>{n.shadowRoot.querySelector(".btn_roomHandler").style.display=e?"flex":"none"})),Tn().find("#outerdocbody").find("#wbrtc_avatarCol")[0].style.display=e?"flex":"none",e||(yn.userLeave(window.headerId,En.currentOpenRoom,"PLUS"),En.currentOpenRoom=null),xn.enable=e})),En.on("update network information",(()=>{})),En.on("socket state",(e=>{xn.socketState=e,console.info("[wrtc]: socket state has been change, new state:",e,xn.userInRoom,window.headerId),"OPENED"===e&&xn.userInRoom&&(console.info("Try reconnecting..."),un.attemptToReconnect())})),En.on("componentsFlow",((e,t,n)=>{xn.components[e][t]=n})),En.on("update inlineAvatar info",((e,t)=>{clientVars.webrtc.displayInlineAvatar&&Pn.update(e,t)})),En.on("update store",((e,t,n,r,o,i)=>{if(!(e&&t&&n&&o&&r))return!1;xn.rooms.has(t)||xn.rooms.set(t,{VIDEO:{list:[]},TEXT:{list:[]},USERS:{},headerCount:0});const a=xn.rooms.get(t);let s=a.USERS;a[r]=o,s={},a.VIDEO.list&&a.VIDEO.list.forEach((e=>{s[e.userId]||(s[e.userId]={}),s[e.userId]=e})),Pn[r](t,a[r]),Pn.ROOM(t,s),xn.rooms.set(t,a),i&&i(a)})),En.on("disable room buttons",((e,t,n)=>{const r=$("#header_videochat_icon")[0];r&&(r.classList.add("activeLoader"),r.setAttribute("disabled",!0))})),En.on("enable room buttons",((e,t,n)=>{const r=$("#header_videochat_icon")[0];if(!r)return;const o="JOIN"===t?"LEAVE":"JOIN";r.removeAttribute("disabled"),r.setAttribute("data-action",o),r.classList.remove("activeLoader")})),En.on("updateWrtcToolbarModal",((e,t)=>{const n=Rn(e).text;$("#wrtc_modal .btn_roomHandler, #werc_toolbar p").attr("data-id",e),$("#wrtc_modal .nd_title .title").html(n)})),En.on("updateWrtcToolbarTitleModal",((e,t)=>{t===window.headerId&&($(`#werc_toolbar .nd_title .titleb[data-id='${t}'`).html(e),$(document).find(`.wrtc_roomLink[data-id='${t}']`).text(e))}));const Pn={ROOM:(e,t)=>{if(!clientVars.webrtc.displayInlineAvatar)return;const n=clientVars.webrtc.inlineAvatarLimit||4;let r=Tn().find(`#wbrtc_avatarCol .${e}.wrtcIconLine .wrtc_inlineAvatars`);const o=Rn(e).offset.top()-16;if(!r.length){const t=$("#wrtcLinesIcons").tmpl({headerId:e,offsetTop:o,userId:clientVars.userId});r=Tn().find("#wbrtc_avatarCol").append(t),r=r.find(`.${e}.wrtcIconLine .wrtc_inlineAvatars`)}const i=Tn().find("#wbrtc_avatarCol .wrtc_inlineAvatars");r.find(".avatar").remove(),Object.keys(t).forEach(((e,o)=>{const a=kn(t[e].userId)||{colorId:"",name:"anonymous"};if(a.userId)if(i.find(`.avatar[data-id="${a.userId}"]`).remove(),o<n){const e=a.name||"anonymous";r.find(".avatarMore").hide(),r.append(`\n            <div\n              class="avatar btn_roomHandler"\n              data-join="popup"\n              data-action="USERPROFILEMODAL"\n              data-id="${a.userId}"\n            >\n              <div\n                title='${e}'\n                style="\n                  background: url('${gn(a.userId)}') no-repeat 50% 50%;\n                  background-size : cover;"\n              >\n              </div>\n            </div>`)}else r.find(".avatarMore").show().text("+"+(o+1-n))}))},VIDEO:function(e,t){const n=$(document).find("#werc_toolbar .wrtc_inlineAvatars");clientVars.webrtc.displayInlineAvatar?(n.show(),n.find(".avatar").remove(),this._append(t.list,n)):n.hide()},_append:(e,t)=>{if(!e)return;const n=clientVars.webrtc.inlineAvatarLimit||4;e.forEach(((e,r)=>{const o=kn(e.userId)||{colorId:"",name:"anonymous"};if(o.userId)if(r<n){const e=o.name||"anonymous";t.find(".avatarMore").hide(),t.append(`\n          <div\n            class="avatar btn_roomHandler"\n            data-join="popup"\n            data-action="USERPROFILEMODAL"\n            data-id="${o.userId}"\n          >\n            <div\n              title='${e}'\n              style="\n                background: url('${gn(o.userId)}') no-repeat 50% 50%;\n                background-size : cover;\n              "\n            >\n              </div>\n          </div>`)}else t.find(".avatarMore").show().text("+"+(r+1-n))}))},update:(e,t)=>{if(!clientVars.webrtc.displayInlineAvatar)return;const n=Tn().find("#wrtcVideoIcons .wrtcIconLine .wrtc_inlineAvatars"),r=$(document).find("#werc_toolbar .wrtc_inlineAvatars");n&&n.find(`.avatar[data-id="${e}"] img`).attr({src:t.imageUrl,title:t.userName}),r&&r.find(".avatar img").attr({src:t.imageUrl,title:t.userName})}},In=e=>{if(!e.length)return;const t=e.outerHeight(),n=Tn().find('iframe[name="ace_inner"]').css("padding-top"),r=parseInt(n,10);return Math.ceil(e.offset().top+r)+t/2},On=e=>{if(!e.length)return;const t=e.outerWidth(),n=Tn().find('iframe[name="ace_inner"]'),r=n.css("padding-left"),o=parseInt(r,10);return Math.ceil(n.offset().left-o)-t-6};var An=Object.freeze({__proto__:null,hElements:["h1","h2","h3","h4","h5","h6",".h1",".h2",".h3",".h4",".h5",".h6"],hTags:bn,getValidUrl:_n,getUserId:wn,stopStreaming:Cn,getUserFromId:kn,slugify:Sn,$bodyAceOuter:Tn,createShareLink:(e,t="headerText")=>`${window.location.origin+window.location.pathname}?header=${Sn(t)}&id=${e}&target=video&join=true`,findAceHeaderElement:Rn,wrtcPubsub:En,wrtcStore:xn,inlineAvatar:Pn,getHeaderRoomY:In,getHeaderRoomX:On});var Mn=(()=>{let e=null,t=null,n=0,r=0;const o=e=>{const t=$('iframe[name="ace_outer"]').contents().find("iframe").contents().find(`.${e}`);if(0===t.length)return!1;t[0].scrollIntoView({behavior:"smooth"})};function i(e){const t=$(this).attr("data-id")||e,n=pad.getPadId();$.ajax({url:`/static/${n}/pluginfw/ep_profile_modal/getUserInfo/${t}`,type:"get",data:{},contentType:!1,processData:!1,beforeSend:()=>{$("#ep_profile_users_profile_userImage").css({"background-position":"50% 50%","background-image":"url(../static/plugins/ep_profile_modal/static/dist/img/loading.gif)","background-repeat":"no-repeat","background-size":"69px"}),$("#ep_profile_users_profile_name").text(""),$("#ep_profile_users_profile_desc").text(""),$("#ep_profile_users_profile").addClass("ep_profile_formModal_show"),$("#ep_profile_general_overlay").addClass("ep_profile_formModal_overlay_show"),$("#ep_profile_general_overlay").css({display:"block"})},error:e=>{$("#ep_profile_users_profile").removeClass("ep_profile_formModal_show"),$("#ep_profile_general_overlay").removeClass("ep_profile_formModal_overlay_show"),$("#ep_profile_general_overlay").css({display:"none"}),$("#ep_profile_modal").removeClass("ep_profile_modal-show"),$("#ep_profile_modal_user_list").removeClass("ep_profile_modal-show"),$("#ep_profile_users_profile").removeClass("ep_profile_formModal_show")},success:e=>{const r=`/static/getUserProfileImage/${t}/${n}?t=${(new Date).getTime()}`;let o=e.user.username;o&&""!==o||(o="Anonymous");const i=e.user.about||"",a=e.user.homepage||"";$("#ep_profile_users_profile_name").text(o),$("#ep_profile_users_profile_desc").text(i),""===a?$("#ep_profile_users_profile_homepage").hide():$("#ep_profile_users_profile_homepage").attr({href:_n(a),target:"_blank"}),$("#ep_profile_users_profile_userImage").css({"background-position":"50% 50%","background-image":`url(${r})`,"background-repeat":"no-repeat","background-size":"69px"})}})}const a=e=>{e=e||window.location.href;const t=new URLSearchParams(e),n=t.get("id");let i=t.get("target");const c=t.get("join");if(!n)return!0;const u=new URL(e).pathname.split("/").pop(),d=location.pathname.split("/").pop();if(!xn.rooms.get(n))return u!==d?window.location.href=e:($.gritter.add({title:"Error",text:"The header seems not to exist anymore!",time:3e3,sticky:!1,class_name:"error"}),!1);n&&o(n),"true"===c&&i&&(i=i.toUpperCase(),"CLOSED"===xn.socketState&&r<=4?setTimeout((()=>{console.warn(`[wrtc]: socket state is ${xn.socketState}, try to join again!`),r++,a()}),1500):"OPENED"===xn.socketState?setTimeout((()=>s("JOIN",n,i)),1e3):console.error(`\n          [wrtc]: We try to join ${r}th,\n          Joining by query string has problem!\n        `,xn.socketState,r))};function s(e,t,n){if("string"!=typeof e&&(e.preventDefault(),!e.handleObj.selector))return!1;if(t=$(this).attr("data-id")||t,e=$(this).attr("data-action")||e,n=$(this).attr("data-join")||n,!t||!n)return!0;if(!xn.enable)return void console.info("[wrtc]: Plugin disabled");const r=$(this).attr("href");if(r){new URL(r).pathname!==location.pathname&&(window.location=r)}const o={padId:clientVars.padId||window.pad.getPadId(),userId:clientVars.userId||window.pad.getUserId(),userName:clientVars.userName||"anonymous",headerId:t,target:n,action:e};if("OPENED"!==xn.socketState)return $.gritter.add({title:"Video chat no longer responds",text:"\n          The socket is disconnected and we can no longer make a stable call,\n          please go to stable internet and then reload the page.\n        ",sticky:!1,class_name:"error",time:"15000"}),!1;if("JOIN"===e)En.currentOpenRoom=o,En.emit("disable room buttons",t,e,n),yn.userJoin(t,o,n);else if("LEAVE"===e)En.currentOpenRoom=null,yn.userLeave(t,o,n);else if("RELOAD"===e)yn.reloadSession(t,o,n,e);else if("SHARELINK"===e)!function(e,t){e=$(this).attr("data-id")||e,t=(t=$(this).attr("data-join")||t).toLowerCase();const n=Tn().find("iframe").contents().find("#innerdocbody").find(`.heading.${e}`).text(),r=`${window.location.origin+window.location.pathname}?header=${Sn(n)}&id=${e}&target=${t}&join=true`,o=$("<input>");$("body").append(o),o.val(r).select(),document.execCommand("copy"),o.remove(),$.gritter.add({title:"Copied",text:"Join link copied to clip board",sticky:!1,"clasßs_name":"copyLinkToClipboard",time:"3000"})}(t,n);else if("USERPROFILEMODAL"===e)i(t);else if("JOINBYQUERY"===e){const e=$(this).attr("href");a(e)}}document.addEventListener("onPushState",(e=>{const{state:t}=e.detail;if("hyperLink"===t.type){const e=t.href;a(e)}}));const c=()=>{const e=Tn();e.on("click",".btn_roomHandler",s),e.find("iframe").contents().find("#innerdocbody").on("click","chat-inline-icon",(function(){const e=$(this).attr("data-headerid");$(document).find("#header_videochat_icon").attr({"data-action":"JOIN","data-id":e}),$(document).find(`#tocItems .itemRow.tocItem[sectionid='${e}']`).trigger("click")})),$(document).on("click","#toc .itemRow.tocItem",(function(){const e=$(this).attr("sectionid"),t=xn.rooms.get(e);if(!t)return console.error("[wrtc]: room does not founded!",e,t),!1;$(".header_videochat_icon").attr("data-id",e),$(".header_videochat_icon .icon").removeClass("active"),$(".header_videochat_icon .icon .userCount").text("");const n=0===t.VIDEO.present?"":t.VIDEO.present;$(".header_videochat_icon .icon .userCount").text(n);t.VIDEO.list&&t.VIDEO.list.find((e=>e.userId===clientVars.userId))&&$(".header_videochat_icon .icon").addClass("active")})),$(document).on("click",".btn_roomHandler, .wrtc_roomLink",s),$(document).on("mouseenter",".video-container.local-user",(()=>{$(document).find("#wrtc_modal #networkStatus").addClass("active")})).on("mouseleave",".video-container.local-user",(()=>{$(document).find("#wrtc_modal #networkStatus").removeClass("active")})),$(document).on("click","#werc_toolbar p",(function(){const e=$(this).attr("data-id");o(e)})),$(document).on("click","#werc_toolbar .btn_enlarge",(function(){if(!$(this).attr("active"))return!0;$(this).toggleClass("large"),$("#wrtc_modal .video-container .enlarge-btn").each((function(){$(this).trigger("click")}))})),$(document).on("click","#werc_toolbar .btn_videoSetting",(function(){const e=$(this).position(),t=$(document).find("#wrtc_settings"),n=t.outerWidth();t.css({left:e.left-n+"px",top:`${e.top+4}px`}).toggleClass("active")}))},u={joinByQueryString:a,roomBtnHandler:s,userLeave:(e,t)=>{},postAceInit:(r,o,i,s)=>{e=i,t=s,n=clientVars.webrtc.videoChatLimit,En.emit("componentsFlow","room","init",!0),e.on("userJoin",((e,t,n)=>{yn.gatewayUserJoin(e,t,!1)})),e.on("userLeave",((e,t,n)=>{yn.gatewayUserLeave(e,t,n)})),c(),setTimeout((()=>{a()}),500)},adoptHeaderYRoom:()=>{const e=Tn();e&&e.find("#wbrtc_avatarCol .wrtcIconLine").each((function(){const e=$(this),t=e.attr("id"),n=Rn(t).$el;if(n.length<=0)return e.remove(),!1;e.css({top:In(n)-14+"px"})}))},appendVideoIcon:(r,o={createAgain:!1})=>{if(!r)return!1;const i=xn.rooms.has(r);if(!o.createAgain&&i)return!1;const a=Rn(r);if(!i&&a.exist){const o=Tn().find("iframe").contents().find("#innerdocbody").children("div").find(`.heading.${r}`),i=Tn().find('iframe[name="ace_inner"]').offset(),a=Tn().find("#outerdocbody"),s=(e=>{const t=e.outerHeight(),n=Tn().find('iframe[name="ace_inner"]').css("padding-top"),r=parseInt(n,10);return Math.ceil(e.offset().top+r)+t/2-22})(o),c=Math.ceil(i.left),u=o.parent().parent().prevAll().length,d={headingTagId:r,positionTop:s,positionLeft:c,headTitle:o.text(),lineNumber:u,videoChatLimit:n,userId:clientVars.userId};xn.rooms.set(r,{VIDEO:{list:[]},USERS:{},headerCount:0});const l=$("#wrtcLinesIcons").tmpl(d);a.find("#wrtcVideoIcons").append(l),e.emit("getVideoRoomInfo",t,r,(e=>{e&&Pn.ROOM(r,e)}))}u.adoptHeaderYRoom()},syncVideoAvatars:n=>{if(!e)return!1;e.emit("getVideoRoomInfo",t,n,(e=>{e&&Pn.ROOM(n,e)}))}};return u})();exports.aceDomLineProcessLineAttributes=(e,t)=>{const n=t.cls,r=/(?:^| )headerId:([A-Za-z0-9]*)/.exec(n),o=[];if(void 0===An)return o;if(r){const e=/(?:^| )heading:([A-Za-z0-9]*)/.exec(n),t=r[1],i=e&&e[1];if(xn.components.video.open){const e=Rn(t);En.emit("updateWrtcToolbarTitleModal",e.text,t)}const a={preHtml:"",postHtml:`<chat-inline-icon headerid="${t}" ${$("body").hasClass("mobileView")?"mobile":"desktop"}></chat-inline-icon>`,processedMarker:!0};xn.rooms.set(t,{VIDEO:{list:[]},USERS:{},headerCount:0}),i&&bn.includes(i)&&o.push(a)}return o},exports.aceEditEvent=(e,t)=>{const n=t.callstack.editEvent.eventType;"handleClick,idleWorkTimer,setup,importText,setBaseText,setWraps".includes(n)||t.callstack.domClean&&Mn.adoptHeaderYRoom()},exports.aceEditorCSS=()=>{const e=clientVars.webrtc.version||1;return $("body").hasClass("mobileView")?[`ep_wrtc_heading/static/dist/css/innerLayer_mobile.css?v=${e}`]:[`ep_wrtc_heading/static/dist/css/innerLayer.css?v=${e}`]},exports.acePostWriteDomLineHTML=(e,t)=>{const n=$(t.node).find(":header");if(n.length){const e=n.attr("data-id");setTimeout((()=>{Mn.syncVideoAvatars(e)}),250)}},exports.handleClientMessage_RTC_MESSAGE=(e,t)=>{un.handleClientMessage_RTC_MESSAGE(e,t)},exports.postAceInit=(e,t)=>{if(!localStorage.getItem("videoSettings")){const e=JSON.stringify({microphone:null,speaker:null,camera:null});localStorage.setItem("videoSettings",e)}clientVars.plugins.plugins.ep_profile_modal||(clientVars.webrtc.displayInlineAvatar=!1),window.clientVars.ep_profile_list={},(window.pad&&window.pad.socket).on("message",(e=>{if("COLLABROOM"===e.type&&e.data&&"CUSTOM"===e.data.type){const t=e.data.payload;"EP_PROFILE_USERS_LIST"===t.action&&t.list.forEach((e=>{window.clientVars.ep_profile_list[e.userId]||(window.clientVars.ep_profile_list[e.userId]={}),window.clientVars.ep_profile_list[e.userId]=e})),"EP_PROFILE_USER_LOGIN_UPDATE"===t.action&&(window.clientVars.ep_profile_list[t.userId]=t,An&&En&&En.emit("update inlineAvatar info",t.userId,t))}}));t.ace;const n=window.pad.getUserId()||clientVars.padId,r=window.pad.getPadId()||clientVars.userId;if(!clientVars.userId||!clientVars.padId)throw new Error("[wrtc]: clientVars doesn't exists");const o=((e,t,n)=>{let r=Qt;const{webSocket:{OPENED:o,DISCONNECTED:i}}=xn.staticVar,a=document.location,s=""===a.port?"https:"===a.protocol?443:80:a.port;let c=clientVars.webrtc.socketRemoteAddress;(clientVars.webrtc.useEtherpadSocket||"localhost"===a.hostname)&&(r=io,c=`${a.protocol}//${a.hostname}:${s}`),c=`${c}/${clientVars.webrtc.socketNamespace}`,console.info(`socket address: ${c}`);const u=r.connect(c,{reconnectionDelay:1e3,autoConnect:!0,reconnection:!0,transports:["websocket"]});return u.on("connect",(()=>{u.emit("join pad",t,n),En.emit("socket state",o,u)})),u.on("disconnect",(e=>{console.error("[wrtc]: socket disconnection, reason:",e),En.emit("socket state",i,u)})),u.on("connect_error",(e=>{console.error("[wrtc]: socket connect_error:",e),En.emit("socket state",i,u)})),u})(0,r,n);un.postAceInit(e,t,o,r),yn.postAceInit(e,t,o,r),Mn.postAceInit(e,t,o,r),$("#editorcontainer iframe").ready((()=>{un.appendVideoModalToBody()})),$("#options-wrtc-heading").on("change",(e=>{$("#options-wrtc-heading").is(":checked")?En.emit("plugin enable",!0):En.emit("plugin enable",!1)})),window.onerror=(e,t,n,r,o)=>{console.error("[wrtc]: windows error, close stream"),window.headerId&&yn.catchBrowserError(clientVars.userId,window.headerId)};const i=$('iframe[name="ace_outer"]').contents().find("#outerdocbody");if(i.find("#wbrtc_avatarCol").length)return!1;i.prepend('<div id="wbrtc_avatarCol" class="usersIconList"></div>'),$(window).resize(b.debounce(Mn.adoptHeaderYRoom,250))},exports.userLeave=(e,t)=>{un.userLeave(null,t)};//# sourceMappingURL=bundle.js.map
